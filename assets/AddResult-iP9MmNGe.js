import{r as q,u as Vt,a as ti,j as G,b as er,f as tr,c as ni,d as ri,C as ii,I as nr,e as oi,g as si,h as ai,B as ci,i as ui,k as en,G as rr,l as Ye,R as li,m as ir,n as pt,S as kt,T as ue,A as ut,P as Nt,o as fi,p as di,q as hi,s as gi,t as pi,L as mi,v as Ut,w as fn,x as xi}from"./index-D5APUIOP.js";import{G as Ei,F as Si}from"./index.esm-BOaJYbiZ.js";import{M as Ti}from"./Modal-BI3zMBny.js";import{u as Ii}from"./useSingleChartQuery-Q__2l8C5.js";import"./Paper-DemEq0Y9.js";import"./useFilter--6Mnexvr.js";const Ai={multiple:!1},or=q.forwardRef((e,t)=>{const{onChange:r,children:o,multiple:n,accept:i,name:s,form:c,resetRef:p,disabled:x,capture:a,inputProps:l,...u}=Vt("FileButton",Ai,e),f=q.useRef(null),E=()=>{!x&&f.current?.click()},y=S=>{if(S.currentTarget.files===null)return r(n?[]:null);r(n?Array.from(S.currentTarget.files):S.currentTarget.files[0]||null)};return ti(p,()=>{f.current&&(f.current.value="")}),G.jsxs(G.Fragment,{children:[G.jsx("input",{style:{display:"none"},type:"file",accept:i,multiple:n,onChange:y,ref:er(t,f),name:s,form:c,capture:a,...l}),o({onClick:E,...u})]})});or.displayName="@mantine/core/FileButton";const bi=({value:e})=>G.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(e)?e.map(t=>t.name).join(", "):e?.name}),Fi={valueComponent:bi},tn=tr((e,t)=>{const r=Vt("FileInput",Fi,e),{unstyled:o,vars:n,onChange:i,value:s,defaultValue:c,multiple:p,accept:x,name:a,form:l,valueComponent:u,clearable:f,clearButtonProps:E,readOnly:y,capture:A,fileInputProps:S,rightSection:U,size:D,placeholder:N,component:L,resetRef:T,classNames:M,styles:d,attributes:m,...F}=r,P=q.useRef(null),{resolvedClassNames:_,resolvedStyles:b}=ni({classNames:M,styles:d,props:r}),[I,C]=ri({value:s,defaultValue:c,onChange:i,finalValue:p?[]:null}),g=Array.isArray(I)?I.length!==0:I!==null,h=U||(f&&g&&!y?G.jsx(ii,{...E,variant:"subtle",onClick:()=>C(p?[]:null),size:D,unstyled:o}):null);return q.useEffect(()=>{(Array.isArray(I)&&I.length===0||I===null)&&P.current?.()},[I]),G.jsx(or,{onChange:C,multiple:p,accept:x,name:a,form:l,resetRef:er(P,T),disabled:y,capture:A,inputProps:S,children:w=>G.jsx(nr,{component:L||"button",ref:t,rightSection:h,...w,...F,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:r,unstyled:o,size:D,classNames:M,styles:d,attributes:m,children:g?G.jsx(u,{value:I}):G.jsx(oi.Placeholder,{__staticSelector:"FileInput",classNames:_,styles:b,attributes:m,children:N})})})});tn.classes=nr.classes;tn.displayName="@mantine/core/FileInput";const yi=tn,_i=["h1","h2","h3","h4","h5","h6"],Ci=["xs","sm","md","lg","xl"];function Pi(e,t){const r=t!==void 0?t:`h${e}`;return _i.includes(r)?{fontSize:`var(--mantine-${r}-font-size)`,fontWeight:`var(--mantine-${r}-font-weight)`,lineHeight:`var(--mantine-${r}-line-height)`}:Ci.includes(r)?{fontSize:`var(--mantine-font-size-${r})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:si(r),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var sr={root:"m_8a5d1357"};const Ri={order:1},Ni=ui((e,{order:t,size:r,lineClamp:o,textWrap:n})=>{const i=Pi(t||1,r);return{root:{"--title-fw":i.fontWeight,"--title-lh":i.lineHeight,"--title-fz":i.fontSize,"--title-line-clamp":typeof o=="number"?o.toString():void 0,"--title-text-wrap":n}}}),nn=tr((e,t)=>{const r=Vt("Title",Ri,e),{classNames:o,className:n,style:i,styles:s,unstyled:c,order:p,vars:x,size:a,variant:l,lineClamp:u,textWrap:f,mod:E,attributes:y,...A}=r,S=ai({name:"Title",props:r,classes:sr,className:n,style:i,classNames:o,styles:s,unstyled:c,attributes:y,vars:x,varsResolver:Ni});return[1,2,3,4,5,6].includes(p)?G.jsx(ci,{...S("root"),component:`h${p}`,variant:l,ref:t,mod:[{order:p,"data-line-clamp":typeof u=="number"},E],size:a,...A}):null});nn.classes=sr;nn.displayName="@mantine/core/Title";function Ui(e){return Ei({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M228.9 79.9L51.8 403.1C40.6 423.3 55.5 448 78.9 448h354.3c23.3 0 38.2-24.7 27.1-44.9L283.1 79.9c-11.7-21.2-42.5-21.2-54.2 0zM273.6 214L270 336h-28l-3.6-122h35.2zM256 402.4c-10.7 0-19.1-8.1-19.1-18.4s8.4-18.4 19.1-18.4 19.1 8.1 19.1 18.4-8.4 18.4-19.1 18.4z"}}]})(e)}const Oi="_addResultPage_1sd28_1",Di="_confirmation_1sd28_8",vi="_splitPanels_1sd28_8",Mi="_screenshotPanel_1sd28_13",wi="_formPanel_1sd28_16",Li="_chartName_1sd28_19",ki="_grid_1sd28_24",Xe={addResultPage:Oi,confirmation:Di,splitPanels:vi,screenshotPanel:Mi,formPanel:wi,chartName:Li,grid:ki},Gi=({okText:e="OK"}={})=>{const[t,r]=q.useState(!1),o=en(),n=q.useRef(null),i=s=>{t&&(r(!1),n.current&&n.current(s))};return{renderPopup:({content:s})=>G.jsxs(Ti,{opened:t,onClose:()=>i(!1),centered:!0,size:"lg",radius:"md",withCloseButton:!1,children:[s,G.jsxs(rr,{justify:"space-between",mt:"md",children:[G.jsx(Ye,{color:"red",onClick:()=>i(!1),children:o.CANCEL}),G.jsx(Ye,{color:"green",onClick:()=>i(!0),children:e})]})]}),confirm:()=>(r(!0),new Promise((s,c)=>{n.current=p=>{p?s():c()}}))}};var Bi=Object.defineProperty,ji=Object.defineProperties,Hi=Object.getOwnPropertyDescriptors,dn=Object.getOwnPropertySymbols,zi=Object.prototype.hasOwnProperty,$i=Object.prototype.propertyIsEnumerable,hn=(e,t,r)=>t in e?Bi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,re=(e,t)=>{for(var r in t||(t={}))zi.call(t,r)&&hn(e,r,t[r]);if(dn)for(var r of dn(t))$i.call(t,r)&&hn(e,r,t[r]);return e},Ee=(e,t)=>ji(e,Hi(t));const Gt={x:0,y:0,width:0,height:0,unit:"px"};function gn(e,t,r){return Math.min(Math.max(e,t),r)}const pn=(e,t,r,o)=>o==="pixel"?Bt(e,t,r):Xi(e,t,r),Xi=(e,t,r)=>e.unit==="%"?Ee(re(re({},Gt),e),{unit:"%"}):{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/r*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/r*100:0};function Bt(e,t,r){return e.unit?e.unit==="px"?Ee(re(re({},Gt),e),{unit:"px"}):{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*r/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*r/100:0}:Ee(re(re({},Gt),e),{unit:"px"})}const Le={position:"absolute",outline:"1px solid rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.5)",width:10,height:10};var rn={exports:{}},lt={};(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var o=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(o.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(i){n[i]=i}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}})();var Yi=li,ar=60103;if(lt.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var mn=Symbol.for;ar=mn("react.element"),lt.Fragment=mn("react.fragment")}var Zi=Yi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wi=Object.prototype.hasOwnProperty,Ki={key:!0,ref:!0,__self:!0,__source:!0};function xn(e,t,r){var o,n={},i=null,s=null;for(o in r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref),t)Wi.call(t,o)&&!Ki.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)n[o]===void 0&&(n[o]=t[o]);return{$$typeof:ar,type:e,key:i,ref:s,props:n,_owner:Zi.current}}lt.jsx=xn,lt.jsxs=xn,rn.exports=lt;const Se=rn.exports.jsx,Oe=rn.exports.jsxs,Qi=()=>Oe(q.Fragment,{children:[Se("div",{"data-dir":"s","data-ord":"s",style:Ee(re({},Le),{bottom:0,left:"50%",marginBottom:-5,marginLeft:-5,cursor:"s-resize"})}),Se("div",{"data-dir":"n","data-ord":"n",style:Ee(re({},Le),{top:0,left:"50%",marginTop:-5,marginLeft:-5,cursor:"n-resize"})}),Se("div",{"data-dir":"w","data-ord":"w",style:Ee(re({},Le),{top:"50%",left:0,marginTop:-5,marginLeft:-5,cursor:"w-resize"})}),Se("div",{"data-dir":"e","data-ord":"e",style:Ee(re({},Le),{top:"50%",right:0,marginTop:-5,marginRight:-5,cursor:"e-resize"})}),Se("div",{"data-dir":"se","data-ord":"se",style:Ee(re({},Le),{bottom:0,right:0,marginBottom:-5,marginRight:-5,cursor:"se-resize"})}),Se("div",{"data-dir":"sw","data-ord":"sw",style:Ee(re({},Le),{bottom:0,left:0,marginBottom:-5,marginLeft:-5,cursor:"sw-resize"})}),Se("div",{"data-dir":"nw","data-ord":"nw",style:Ee(re({},Le),{top:0,left:0,marginTop:-5,marginLeft:-5,cursor:"nw-resize"})}),Se("div",{"data-dir":"ne","data-ord":"ne",style:Ee(re({},Le),{top:0,right:0,marginTop:-5,marginRight:-5,cursor:"ne-resize"})})]}),qi=({area:e,onCropStart:t,showHandles:r,globalAreaStyle:o,customAreaRenderer:n,areaNumber:i})=>{const s={top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`};return Oe("div",{style:re(re(re({position:"absolute",border:"1px dashed rgba(0,0,0,0.5)",outline:"1px dashed rgba(255,255,255,0.5)",cursor:"move",boxSizing:"border-box",touchAction:"none"},s),o),e.areaStyle),onPointerDown:t,"data-wrapper":"wrapper",children:[n?n(Ee(re({},e),{areaNumber:i})):null,r?Se(Qi,{}):null]})},Ji=({areas:e})=>Se("table",{style:{position:"absolute",right:0,top:0},children:Se("tbody",{children:e.map((t,r)=>Oe("tr",{children:[Oe("td",{children:["x: ",Math.round(t.x)]}),Oe("td",{children:["y: ",Math.round(t.y)]}),Oe("td",{children:["width: ",Math.round(t.width)]}),Oe("td",{children:["height: ",Math.round(t.height)]}),Oe("td",{children:["unit: ",t.unit]})]},r))})}),cr=(e,t)=>e!==null&&(!!t(e)||cr(e.parentNode,t)),qe={capture:!0,passive:!1},Vi=["e","w"],eo=["n","s"],to=["nw","ne","se","sw"],no=({maxAreas:e=1/0,unit:t="pixel",minWidth:r=0,minHeight:o=0,debug:n=!1,children:i,areas:s,onChange:c,maxWidth:p,maxHeight:x,wrapperStyle:a,globalAreaStyle:l,customAreaRenderer:u,mediaWrapperClassName:f})=>{const E=q.useRef(null),y=q.useRef(null),[A,S]=q.useState(0),[U,D]=q.useState({startClientX:0,startClientY:0,startAreaX:0,startAreaY:0,clientX:0,clientY:0,isResize:!1}),[N,L]=q.useState({areaChangeIndex:0,isChanging:!1}),T=()=>{const b=y.current;if(!b)return{x:0,y:0,width:0,height:0};const{x:I,y:C,width:g,height:h}=b.getBoundingClientRect();return{x:I,y:C,width:g,height:h}},M=q.useCallback(b=>{const I=U.clientX-b.x,C=U.clientY-b.y<U.startAreaY;return I<U.startAreaX?C?"nw":"sw":C?"ne":"se"},[U]),d=q.useCallback(b=>{const I=T();return Bt(b,I.width,I.height)},[]),m=q.useCallback(b=>{const I=T(),C=d(b),g=U.clientX-U.startClientX,h=U.clientY-U.startClientY;return C.x=gn(U.startAreaX+g,0,I.width-C.width),C.y=gn(U.startAreaY+h,0,I.height-C.height),C},[U,d]),F=q.useCallback(b=>{const I=T(),C=M(I),g=d(b),h=U.ord?U.ord:C,w=U.clientX-U.startClientX,R=U.clientY-U.startClientY,O={unit:"px",x:0,y:0,width:0,height:0,isChanging:!0,isNew:!1};C==="ne"?(O.x=U.startAreaX,O.width=w,O.height=Math.abs(R),O.y=U.startAreaY-O.height):C==="se"?(O.x=U.startAreaX,O.y=U.startAreaY,O.width=w,O.height=R):C==="sw"?(O.x=U.startAreaX+w,O.y=U.startAreaY,O.width=Math.abs(w),O.height=R):C==="nw"&&(O.x=U.startAreaX+w,O.width=Math.abs(w),O.height=Math.abs(R),O.y=U.startAreaY+R);const z=(function(B,j,k,v,X=0,Q=0,K=k,W=v){const $=re({},B);$.y<0&&($.height=Math.max($.height+$.y,Q),$.y=0),$.x<0&&($.width=Math.max($.width+$.x,X),$.x=0);const te=k-($.x+$.width);te<0&&($.x=Math.min($.x,k-X),$.width+=te);const ie=v-($.y+$.height);return ie<0&&($.y=Math.min($.y,v-Q),$.height+=ie),$.width<X&&(j!=="sw"&&j!="nw"||($.x-=X-$.width),$.width=X),$.height<Q&&(j!=="nw"&&j!="ne"||($.y-=Q-$.height),$.height=Q),$.width>K&&(j!=="sw"&&j!="nw"||($.x-=K-$.width),$.width=K),$.height>W&&(j!=="nw"&&j!="ne"||($.y-=W-$.height),$.height=W),$})(O,C,I.width,I.height,r,o,p,x);return to.indexOf(h)>-1?(g.x=z.x,g.y=z.y,g.width=z.width,g.height=z.height):Vi.indexOf(h)>-1?(g.x=z.x,g.width=z.width):eo.indexOf(h)>-1&&(g.y=z.y,g.height=z.height),g},[U,M,d,r,o,p,x]),P=q.useCallback(b=>{b.preventDefault(),b.stopPropagation();const{isChanging:I,areaChangeIndex:C}=N;if(!I)return;const g=T(),h=s[C];let w;if(D(z=>Ee(re({},z),{clientX:b.clientX,clientY:b.clientY})),w=U.isResize?F(h):m(h),O=w,(R=h).width!==O.width||R.height!==O.height||R.x!==O.x||R.y!==O.y||R.unit!==O.unit){const z=pn(w,g.width,g.height,t);c([...s.slice(0,C),re({},z),...s.slice(C+1)])}var R,O},[N,s,U,m,c,t,F]),_=q.useCallback(b=>{b.preventDefault(),b.stopPropagation();const{isChanging:I,areaChangeIndex:C}=N;if(I){L({isChanging:!1,areaChangeIndex:-1}),D({startClientX:0,startClientY:0,startAreaX:0,startAreaY:0,clientX:0,clientY:0,isResize:!1});const g=s[C];c([...s.slice(0,C),Ee(re({},g),{isNew:!1,isChanging:!1}),...s.slice(C+1)])}},[N,s,c]);return q.useEffect(()=>(document.addEventListener("pointermove",P,qe),document.addEventListener("pointerup",_,qe),document.addEventListener("pointercancel",_,qe),()=>{document.removeEventListener("pointermove",P,qe),document.removeEventListener("pointerup",_,qe),document.removeEventListener("pointercancel",_,qe)}),[P,_]),Oe("div",{ref:E,style:re({position:"relative",display:"inline-block",cursor:"crosshair",boxSizing:"border-box",maxWidth:"100%",touchAction:"none",lineHeight:0},a),children:[Se("div",{ref:y,onPointerDown:b=>{const I=b.currentTarget;if(I.dataset.wrapper||I.dataset.direction||cr(I,z=>{var B;return(B=z.dataset)==null?void 0:B.wrapper}))return;b.preventDefault(),b.stopPropagation();const C=T(),g=b.clientX-C.x,h=b.clientY-C.y,w={unit:"px",x:g,y:h,width:0,height:0,isChanging:!0,isNew:!0};D({startClientX:b.clientX,startClientY:b.clientY,startAreaX:g,startAreaY:h,clientX:b.clientX,clientY:b.clientY,isResize:!0}),S(A+1);const R=pn(w,C.width,C.height,t);let O;s.length<e?(c(s.concat(R)),O=s.length):(c([...s.slice(0,e-1),R]),O=e-1),L({areaChangeIndex:O,isChanging:!0})},style:{boxSizing:"border-box"},className:f,children:i}),s.map((b,I)=>Se(qi,{area:b,showHandles:!b.isNew,onCropStart:C=>((g,h)=>{g.preventDefault(),g.stopPropagation();const w=T(),R=Bt(s[h],w.width,w.height),O=g.target.dataset.ord,z=!!O;let B=g.clientX,j=g.clientY,k=R.x,v=R.y;O&&(O==="ne"||O=="e"?(k=R.x,v=R.y+R.height):O==="se"||O==="s"?(k=R.x,v=R.y):O==="sw"||O=="w"?(k=R.x+R.width,v=R.y):O!=="nw"&&O!="n"||(k=R.x+R.width,v=R.y+R.height),B=k+w.x,j=v+w.y),D({startClientX:B,startClientY:j,startAreaX:k,startAreaY:v,clientX:g.clientX,clientY:g.clientY,isResize:z,ord:O}),L({isChanging:!0,areaChangeIndex:h})})(C,I),globalAreaStyle:l,customAreaRenderer:u,areaNumber:I+1},I)),n?Se(Ji,{areas:s}):null]})};function ro(e,t){return t.forEach((function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach((function(o){if(o!=="default"&&!(o in e)){var n=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(e,o,n.get?n:{enumerable:!0,get:function(){return r[o]}})}}))})),Object.freeze(e)}function ur(e,t){return new Promise((function(r,o){let n;return io(e).then((function(i){try{return n=i,r(new Blob([t.slice(0,2),n,t.slice(2)],{type:"image/jpeg"}))}catch(s){return o(s)}}),o)}))}const io=e=>new Promise(((t,r)=>{const o=new FileReader;o.addEventListener("load",(({target:{result:n}})=>{const i=new DataView(n);let s=0;if(i.getUint16(s)!==65496)return r("not a valid JPEG");for(s+=2;;){const c=i.getUint16(s);if(c===65498)break;const p=i.getUint16(s+2);if(c===65505&&i.getUint32(s+4)===1165519206){const x=s+10;let a;switch(i.getUint16(x)){case 18761:a=!0;break;case 19789:a=!1;break;default:return r("TIFF header contains invalid endian")}if(i.getUint16(x+2,a)!==42)return r("TIFF header contains invalid version");const l=i.getUint32(x+4,a),u=x+l+2+12*i.getUint16(x+l,a);for(let f=x+l+2;f<u;f+=12)if(i.getUint16(f,a)==274){if(i.getUint16(f+2,a)!==3)return r("Orientation data type is invalid");if(i.getUint32(f+4,a)!==1)return r("Orientation data count is invalid");i.setUint16(f+8,1,a);break}return t(n.slice(s,s+2+p))}s+=2+p}return t(new Blob)})),o.readAsArrayBuffer(e)}));var xt={},oo={get exports(){return xt},set exports(e){xt=e}};(function(e){var t,r,o={};oo.exports=o,o.parse=function(n,i){for(var s=o.bin.readUshort,c=o.bin.readUint,p=0,x={},a=new Uint8Array(n),l=a.length-4;c(a,l)!=101010256;)l--;p=l,p+=4;var u=s(a,p+=4);s(a,p+=2);var f=c(a,p+=2),E=c(a,p+=4);p+=4,p=E;for(var y=0;y<u;y++){c(a,p),p+=4,p+=4,p+=4,c(a,p+=4),f=c(a,p+=4);var A=c(a,p+=4),S=s(a,p+=4),U=s(a,p+2),D=s(a,p+4);p+=6;var N=c(a,p+=8);p+=4,p+=S+U+D,o._readLocal(a,N,x,f,A,i)}return x},o._readLocal=function(n,i,s,c,p,x){var a=o.bin.readUshort,l=o.bin.readUint;l(n,i),a(n,i+=4),a(n,i+=2);var u=a(n,i+=2);l(n,i+=2),l(n,i+=4),i+=4;var f=a(n,i+=8),E=a(n,i+=2);i+=2;var y=o.bin.readUTF8(n,i,f);if(i+=f,i+=E,x)s[y]={size:p,csize:c};else{var A=new Uint8Array(n.buffer,i);if(u==0)s[y]=new Uint8Array(A.buffer.slice(i,i+c));else{if(u!=8)throw"unknown compression method: "+u;var S=new Uint8Array(p);o.inflateRaw(A,S),s[y]=S}}},o.inflateRaw=function(n,i){return o.F.inflate(n,i)},o.inflate=function(n,i){return n[0],n[1],o.inflateRaw(new Uint8Array(n.buffer,n.byteOffset+2,n.length-6),i)},o.deflate=function(n,i){i==null&&(i={level:6});var s=0,c=new Uint8Array(50+Math.floor(1.1*n.length));c[s]=120,c[s+1]=156,s+=2,s=o.F.deflateRaw(n,c,s,i.level);var p=o.adler(n,0,n.length);return c[s+0]=p>>>24&255,c[s+1]=p>>>16&255,c[s+2]=p>>>8&255,c[s+3]=p>>>0&255,new Uint8Array(c.buffer,0,s+4)},o.deflateRaw=function(n,i){i==null&&(i={level:6});var s=new Uint8Array(50+Math.floor(1.1*n.length)),c=o.F.deflateRaw(n,s,c,i.level);return new Uint8Array(s.buffer,0,c)},o.encode=function(n,i){i==null&&(i=!1);var s=0,c=o.bin.writeUint,p=o.bin.writeUshort,x={};for(var a in n){var l=!o._noNeed(a)&&!i,u=n[a],f=o.crc.crc(u,0,u.length);x[a]={cpr:l,usize:u.length,crc:f,file:l?o.deflateRaw(u):u}}for(var a in x)s+=x[a].file.length+30+46+2*o.bin.sizeUTF8(a);s+=22;var E=new Uint8Array(s),y=0,A=[];for(var a in x){var S=x[a];A.push(y),y=o._writeHeader(E,y,a,S,0)}var U=0,D=y;for(var a in x)S=x[a],A.push(y),y=o._writeHeader(E,y,a,S,1,A[U++]);var N=y-D;return c(E,y,101010256),y+=4,p(E,y+=4,U),p(E,y+=2,U),c(E,y+=2,N),c(E,y+=4,D),y+=4,y+=2,E.buffer},o._noNeed=function(n){var i=n.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},o._writeHeader=function(n,i,s,c,p,x){var a=o.bin.writeUint,l=o.bin.writeUshort,u=c.file;return a(n,i,p==0?67324752:33639248),i+=4,p==1&&(i+=2),l(n,i,20),l(n,i+=2,0),l(n,i+=2,c.cpr?8:0),a(n,i+=2,0),a(n,i+=4,c.crc),a(n,i+=4,u.length),a(n,i+=4,c.usize),l(n,i+=4,o.bin.sizeUTF8(s)),l(n,i+=2,0),i+=2,p==1&&(i+=2,i+=2,a(n,i+=6,x),i+=4),i+=o.bin.writeUTF8(n,i,s),p==0&&(n.set(u,i),i+=u.length),i},o.crc={table:(function(){for(var n=new Uint32Array(256),i=0;i<256;i++){for(var s=i,c=0;c<8;c++)1&s?s=3988292384^s>>>1:s>>>=1;n[i]=s}return n})(),update:function(n,i,s,c){for(var p=0;p<c;p++)n=o.crc.table[255&(n^i[s+p])]^n>>>8;return n},crc:function(n,i,s){return 4294967295^o.crc.update(4294967295,n,i,s)}},o.adler=function(n,i,s){for(var c=1,p=0,x=i,a=i+s;x<a;){for(var l=Math.min(x+5552,a);x<l;)p+=c+=n[x++];c%=65521,p%=65521}return p<<16|c},o.bin={readUshort:function(n,i){return n[i]|n[i+1]<<8},writeUshort:function(n,i,s){n[i]=255&s,n[i+1]=s>>8&255},readUint:function(n,i){return 16777216*n[i+3]+(n[i+2]<<16|n[i+1]<<8|n[i])},writeUint:function(n,i,s){n[i]=255&s,n[i+1]=s>>8&255,n[i+2]=s>>16&255,n[i+3]=s>>24&255},readASCII:function(n,i,s){for(var c="",p=0;p<s;p++)c+=String.fromCharCode(n[i+p]);return c},writeASCII:function(n,i,s){for(var c=0;c<s.length;c++)n[i+c]=s.charCodeAt(c)},pad:function(n){return n.length<2?"0"+n:n},readUTF8:function(n,i,s){for(var c,p="",x=0;x<s;x++)p+="%"+o.bin.pad(n[i+x].toString(16));try{c=decodeURIComponent(p)}catch{return o.bin.readASCII(n,i,s)}return c},writeUTF8:function(n,i,s){for(var c=s.length,p=0,x=0;x<c;x++){var a=s.charCodeAt(x);if((4294967168&a)==0)n[i+p]=a,p++;else if((4294965248&a)==0)n[i+p]=192|a>>6,n[i+p+1]=128|a>>0&63,p+=2;else if((4294901760&a)==0)n[i+p]=224|a>>12,n[i+p+1]=128|a>>6&63,n[i+p+2]=128|a>>0&63,p+=3;else{if((4292870144&a)!=0)throw"e";n[i+p]=240|a>>18,n[i+p+1]=128|a>>12&63,n[i+p+2]=128|a>>6&63,n[i+p+3]=128|a>>0&63,p+=4}}return p},sizeUTF8:function(n){for(var i=n.length,s=0,c=0;c<i;c++){var p=n.charCodeAt(c);if((4294967168&p)==0)s++;else if((4294965248&p)==0)s+=2;else if((4294901760&p)==0)s+=3;else{if((4292870144&p)!=0)throw"e";s+=4}}return s}},o.F={},o.F.deflateRaw=function(n,i,s,c){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][c],x=o.F.U,a=o.F._goodIndex;o.F._hash;var l=o.F._putsE,u=0,f=s<<3,E=0,y=n.length;if(c==0){for(;u<y;)l(i,f,u+(P=Math.min(65535,y-u))==y?1:0),f=o.F._copyExact(n,u,P,i,f+8),u+=P;return f>>>3}var A=x.lits,S=x.strt,U=x.prev,D=0,N=0,L=0,T=0,M=0,d=0;for(y>2&&(S[d=o.F._hash(n,0)]=0),u=0;u<y;u++){if(M=d,u+1<y-2){d=o.F._hash(n,u+1);var m=u+1&32767;U[m]=S[d],S[d]=m}if(E<=u){(D>14e3||N>26697)&&y-u>100&&(E<u&&(A[D]=u-E,D+=2,E=u),f=o.F._writeBlock(u==y-1||E==y?1:0,A,D,T,n,L,u-L,i,f),D=N=T=0,L=u);var F=0;u<y-2&&(F=o.F._bestMatch(n,u,U,M,Math.min(p[2],y-u),p[3]));var P=F>>>16,_=65535&F;if(F!=0){_=65535&F;var b=a(P=F>>>16,x.of0);x.lhst[257+b]++;var I=a(_,x.df0);x.dhst[I]++,T+=x.exb[b]+x.dxb[I],A[D]=P<<23|u-E,A[D+1]=_<<16|b<<8|I,D+=2,E=u+P}else x.lhst[n[u]]++;N++}}for(L==u&&n.length!=0||(E<u&&(A[D]=u-E,D+=2,E=u),f=o.F._writeBlock(1,A,D,T,n,L,u-L,i,f),D=0,N=0,D=N=T=0,L=u);(7&f)!=0;)f++;return f>>>3},o.F._bestMatch=function(n,i,s,c,p,x){var a=32767&i,l=s[a],u=a-l+32768&32767;if(l==a||c!=o.F._hash(n,i-u))return 0;for(var f=0,E=0,y=Math.min(32767,i);u<=y&&--x!=0&&l!=a;){if(f==0||n[i+f]==n[i+f-u]){var A=o.F._howLong(n,i,u);if(A>f){if(E=u,(f=A)>=p)break;u+2<A&&(A=u+2);for(var S=0,U=0;U<A-2;U++){var D=i-u+U+32768&32767,N=D-s[D]+32768&32767;N>S&&(S=N,l=D)}}}u+=(a=l)-(l=s[a])+32768&32767}return f<<16|E},o.F._howLong=function(n,i,s){if(n[i]!=n[i-s]||n[i+1]!=n[i+1-s]||n[i+2]!=n[i+2-s])return 0;var c=i,p=Math.min(n.length,i+258);for(i+=3;i<p&&n[i]==n[i-s];)i++;return i-c},o.F._hash=function(n,i){return(n[i]<<8|n[i+1])+(n[i+2]<<4)&65535},o.saved=0,o.F._writeBlock=function(n,i,s,c,p,x,a,l,u){var f,E,y,A,S,U,D,N,L,T=o.F.U,M=o.F._putsF,d=o.F._putsE;T.lhst[256]++,E=(f=o.F.getTrees())[0],y=f[1],A=f[2],S=f[3],U=f[4],D=f[5],N=f[6],L=f[7];var m=32+((u+3&7)==0?0:8-(u+3&7))+(a<<3),F=c+o.F.contSize(T.fltree,T.lhst)+o.F.contSize(T.fdtree,T.dhst),P=c+o.F.contSize(T.ltree,T.lhst)+o.F.contSize(T.dtree,T.dhst);P+=14+3*D+o.F.contSize(T.itree,T.ihst)+(2*T.ihst[16]+3*T.ihst[17]+7*T.ihst[18]);for(var _=0;_<286;_++)T.lhst[_]=0;for(_=0;_<30;_++)T.dhst[_]=0;for(_=0;_<19;_++)T.ihst[_]=0;var b=m<F&&m<P?0:F<P?1:2;if(M(l,u,n),M(l,u+1,b),u+=3,b==0){for(;(7&u)!=0;)u++;u=o.F._copyExact(p,x,a,l,u)}else{var I,C;if(b==1&&(I=T.fltree,C=T.fdtree),b==2){o.F.makeCodes(T.ltree,E),o.F.revCodes(T.ltree,E),o.F.makeCodes(T.dtree,y),o.F.revCodes(T.dtree,y),o.F.makeCodes(T.itree,A),o.F.revCodes(T.itree,A),I=T.ltree,C=T.dtree,d(l,u,S-257),d(l,u+=5,U-1),d(l,u+=5,D-4),u+=4;for(var g=0;g<D;g++)d(l,u+3*g,T.itree[1+(T.ordr[g]<<1)]);u+=3*D,u=o.F._codeTiny(N,T.itree,l,u),u=o.F._codeTiny(L,T.itree,l,u)}for(var h=x,w=0;w<s;w+=2){for(var R=i[w],O=R>>>23,z=h+(8388607&R);h<z;)u=o.F._writeLit(p[h++],I,l,u);if(O!=0){var B=i[w+1],j=B>>16,k=B>>8&255,v=255&B;d(l,u=o.F._writeLit(257+k,I,l,u),O-T.of0[k]),u+=T.exb[k],M(l,u=o.F._writeLit(v,C,l,u),j-T.df0[v]),u+=T.dxb[v],h+=O}}u=o.F._writeLit(256,I,l,u)}return u},o.F._copyExact=function(n,i,s,c,p){var x=p>>>3;return c[x]=s,c[x+1]=s>>>8,c[x+2]=255-c[x],c[x+3]=255-c[x+1],x+=4,c.set(new Uint8Array(n.buffer,i,s),x),p+(s+4<<3)},o.F.getTrees=function(){for(var n=o.F.U,i=o.F._hufTree(n.lhst,n.ltree,15),s=o.F._hufTree(n.dhst,n.dtree,15),c=[],p=o.F._lenCodes(n.ltree,c),x=[],a=o.F._lenCodes(n.dtree,x),l=0;l<c.length;l+=2)n.ihst[c[l]]++;for(l=0;l<x.length;l+=2)n.ihst[x[l]]++;for(var u=o.F._hufTree(n.ihst,n.itree,7),f=19;f>4&&n.itree[1+(n.ordr[f-1]<<1)]==0;)f--;return[i,s,u,p,a,f,c,x]},o.F.getSecond=function(n){for(var i=[],s=0;s<n.length;s+=2)i.push(n[s+1]);return i},o.F.nonZero=function(n){for(var i="",s=0;s<n.length;s+=2)n[s+1]!=0&&(i+=(s>>1)+",");return i},o.F.contSize=function(n,i){for(var s=0,c=0;c<i.length;c++)s+=i[c]*n[1+(c<<1)];return s},o.F._codeTiny=function(n,i,s,c){for(var p=0;p<n.length;p+=2){var x=n[p],a=n[p+1];c=o.F._writeLit(x,i,s,c);var l=x==16?2:x==17?3:7;x>15&&(o.F._putsE(s,c,a,l),c+=l)}return c},o.F._lenCodes=function(n,i){for(var s=n.length;s!=2&&n[s-1]==0;)s-=2;for(var c=0;c<s;c+=2){var p=n[c+1],x=c+3<s?n[c+3]:-1,a=c+5<s?n[c+5]:-1,l=c==0?-1:n[c-1];if(p==0&&x==p&&a==p){for(var u=c+5;u+2<s&&n[u+2]==p;)u+=2;(f=Math.min(u+1-c>>>1,138))<11?i.push(17,f-3):i.push(18,f-11),c+=2*f-2}else if(p==l&&x==p&&a==p){for(u=c+5;u+2<s&&n[u+2]==p;)u+=2;var f=Math.min(u+1-c>>>1,6);i.push(16,f-3),c+=2*f-2}else i.push(p,0)}return s>>>1},o.F._hufTree=function(n,i,s){var c=[],p=n.length,x=i.length,a=0;for(a=0;a<x;a+=2)i[a]=0,i[a+1]=0;for(a=0;a<p;a++)n[a]!=0&&c.push({lit:a,f:n[a]});var l=c.length,u=c.slice(0);if(l==0)return 0;if(l==1){var f=c[0].lit;return u=f==0?1:0,i[1+(f<<1)]=1,i[1+(u<<1)]=1,1}c.sort((function(N,L){return N.f-L.f}));var E=c[0],y=c[1],A=0,S=1,U=2;for(c[0]={lit:-1,f:E.f+y.f,l:E,r:y,d:0};S!=l-1;)E=A!=S&&(U==l||c[A].f<c[U].f)?c[A++]:c[U++],y=A!=S&&(U==l||c[A].f<c[U].f)?c[A++]:c[U++],c[S++]={lit:-1,f:E.f+y.f,l:E,r:y};var D=o.F.setDepth(c[S-1],0);for(D>s&&(o.F.restrictDepth(u,s,D),D=s),a=0;a<l;a++)i[1+(u[a].lit<<1)]=u[a].d;return D},o.F.setDepth=function(n,i){return n.lit!=-1?(n.d=i,i):Math.max(o.F.setDepth(n.l,i+1),o.F.setDepth(n.r,i+1))},o.F.restrictDepth=function(n,i,s){var c=0,p=1<<s-i,x=0;for(n.sort((function(l,u){return u.d==l.d?l.f-u.f:u.d-l.d})),c=0;c<n.length&&n[c].d>i;c++){var a=n[c].d;n[c].d=i,x+=p-(1<<s-a)}for(x>>>=s-i;x>0;)(a=n[c].d)<i?(n[c].d++,x-=1<<i-a-1):c++;for(;c>=0;c--)n[c].d==i&&x<0&&(n[c].d--,x++);x!=0&&console.log("debt left")},o.F._goodIndex=function(n,i){var s=0;return i[16|s]<=n&&(s|=16),i[8|s]<=n&&(s|=8),i[4|s]<=n&&(s|=4),i[2|s]<=n&&(s|=2),i[1|s]<=n&&(s|=1),s},o.F._writeLit=function(n,i,s,c){return o.F._putsF(s,c,i[n<<1]),c+i[1+(n<<1)]},o.F.inflate=function(n,i){var s=Uint8Array;if(n[0]==3&&n[1]==0)return i||new s(0);var c=o.F,p=c._bitsF,x=c._bitsE,a=c._decodeTiny,l=c.makeCodes,u=c.codes2map,f=c._get17,E=c.U,y=i==null;y&&(i=new s(n.length>>>2<<3));for(var A,S,U=0,D=0,N=0,L=0,T=0,M=0,d=0,m=0,F=0;U==0;)if(U=p(n,F,1),D=p(n,F+1,2),F+=3,D!=0){if(y&&(i=o.F._check(i,m+(1<<17))),D==1&&(A=E.flmap,S=E.fdmap,M=511,d=31),D==2){N=x(n,F,5)+257,L=x(n,F+5,5)+1,T=x(n,F+10,4)+4,F+=14;for(var P=0;P<38;P+=2)E.itree[P]=0,E.itree[P+1]=0;var _=1;for(P=0;P<T;P++){var b=x(n,F+3*P,3);E.itree[1+(E.ordr[P]<<1)]=b,b>_&&(_=b)}F+=3*T,l(E.itree,_),u(E.itree,_,E.imap),A=E.lmap,S=E.dmap,F=a(E.imap,(1<<_)-1,N+L,n,F,E.ttree);var I=c._copyOut(E.ttree,0,N,E.ltree);M=(1<<I)-1;var C=c._copyOut(E.ttree,N,L,E.dtree);d=(1<<C)-1,l(E.ltree,I),u(E.ltree,I,A),l(E.dtree,C),u(E.dtree,C,S)}for(;;){var g=A[f(n,F)&M];F+=15&g;var h=g>>>4;if(!(h>>>8))i[m++]=h;else{if(h==256)break;var w=m+h-254;if(h>264){var R=E.ldef[h-257];w=m+(R>>>3)+x(n,F,7&R),F+=7&R}var O=S[f(n,F)&d];F+=15&O;var z=O>>>4,B=E.ddef[z],j=(B>>>4)+p(n,F,15&B);for(F+=15&B,y&&(i=o.F._check(i,m+(1<<17)));m<w;)i[m]=i[m++-j],i[m]=i[m++-j],i[m]=i[m++-j],i[m]=i[m++-j];m=w}}}else{(7&F)!=0&&(F+=8-(7&F));var k=4+(F>>>3),v=n[k-4]|n[k-3]<<8;y&&(i=o.F._check(i,m+v)),i.set(new s(n.buffer,n.byteOffset+k,v),m),F=k+v<<3,m+=v}return i.length==m?i:i.slice(0,m)},o.F._check=function(n,i){var s=n.length;if(i<=s)return n;var c=new Uint8Array(Math.max(s<<1,i));return c.set(n,0),c},o.F._decodeTiny=function(n,i,s,c,p,x){for(var a=o.F._bitsE,l=o.F._get17,u=0;u<s;){var f=n[l(c,p)&i];p+=15&f;var E=f>>>4;if(E<=15)x[u]=E,u++;else{var y=0,A=0;E==16?(A=3+a(c,p,2),p+=2,y=x[u-1]):E==17?(A=3+a(c,p,3),p+=3):E==18&&(A=11+a(c,p,7),p+=7);for(var S=u+A;u<S;)x[u]=y,u++}}return p},o.F._copyOut=function(n,i,s,c){for(var p=0,x=0,a=c.length>>>1;x<s;){var l=n[x+i];c[x<<1]=0,c[1+(x<<1)]=l,l>p&&(p=l),x++}for(;x<a;)c[x<<1]=0,c[1+(x<<1)]=0,x++;return p},o.F.makeCodes=function(n,i){for(var s,c,p,x,a=o.F.U,l=n.length,u=a.bl_count,f=0;f<=i;f++)u[f]=0;for(f=1;f<l;f+=2)u[n[f]]++;var E=a.next_code;for(s=0,u[0]=0,c=1;c<=i;c++)s=s+u[c-1]<<1,E[c]=s;for(p=0;p<l;p+=2)(x=n[p+1])!=0&&(n[p]=E[x],E[x]++)},o.F.codes2map=function(n,i,s){for(var c=n.length,p=o.F.U.rev15,x=0;x<c;x+=2)if(n[x+1]!=0)for(var a=x>>1,l=n[x+1],u=a<<4|l,f=i-l,E=n[x]<<f,y=E+(1<<f);E!=y;)s[p[E]>>>15-i]=u,E++},o.F.revCodes=function(n,i){for(var s=o.F.U.rev15,c=15-i,p=0;p<n.length;p+=2){var x=n[p]<<i-n[p+1];n[p]=s[x]>>>c}},o.F._putsE=function(n,i,s){s<<=7&i;var c=i>>>3;n[c]|=s,n[c+1]|=s>>>8},o.F._putsF=function(n,i,s){s<<=7&i;var c=i>>>3;n[c]|=s,n[c+1]|=s>>>8,n[c+2]|=s>>>16},o.F._bitsE=function(n,i,s){return(n[i>>>3]|n[1+(i>>>3)]<<8)>>>(7&i)&(1<<s)-1},o.F._bitsF=function(n,i,s){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16)>>>(7&i)&(1<<s)-1},o.F._get17=function(n,i){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16)>>>(7&i)},o.F._get25=function(n,i){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16|n[3+(i>>>3)]<<24)>>>(7&i)},o.F.U=(t=Uint16Array,r=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var n=o.F.U,i=0;i<32768;i++){var s=i;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,n.rev15[i]=(s>>>16|s<<16)>>>17}function c(p,x,a){for(;x--!=0;)p.push(0,a)}for(i=0;i<32;i++)n.ldef[i]=n.of0[i]<<3|n.exb[i],n.ddef[i]=n.df0[i]<<4|n.dxb[i];c(n.fltree,144,8),c(n.fltree,112,9),c(n.fltree,24,7),c(n.fltree,8,8),o.F.makeCodes(n.fltree,9),o.F.codes2map(n.fltree,9,n.flmap),o.F.revCodes(n.fltree,9),c(n.fdtree,32,5),o.F.makeCodes(n.fdtree,5),o.F.codes2map(n.fdtree,5,n.fdmap),o.F.revCodes(n.fdtree,5),c(n.itree,19,0),c(n.ltree,286,0),c(n.dtree,30,0),c(n.ttree,320,0)})()})();var so=ro({__proto__:null,default:xt},[xt]);const _e=(function(){var e={nextZero(a,l){for(;a[l]!=0;)l++;return l},readUshort:(a,l)=>a[l]<<8|a[l+1],writeUshort(a,l,u){a[l]=u>>8&255,a[l+1]=255&u},readUint:(a,l)=>16777216*a[l]+(a[l+1]<<16|a[l+2]<<8|a[l+3]),writeUint(a,l,u){a[l]=u>>24&255,a[l+1]=u>>16&255,a[l+2]=u>>8&255,a[l+3]=255&u},readASCII(a,l,u){let f="";for(let E=0;E<u;E++)f+=String.fromCharCode(a[l+E]);return f},writeASCII(a,l,u){for(let f=0;f<u.length;f++)a[l+f]=u.charCodeAt(f)},readBytes(a,l,u){const f=[];for(let E=0;E<u;E++)f.push(a[l+E]);return f},pad:a=>a.length<2?`0${a}`:a,readUTF8(a,l,u){let f,E="";for(let y=0;y<u;y++)E+=`%${e.pad(a[l+y].toString(16))}`;try{f=decodeURIComponent(E)}catch{return e.readASCII(a,l,u)}return f}};function t(a,l,u,f){const E=l*u,y=i(f),A=Math.ceil(l*y/8),S=new Uint8Array(4*E),U=new Uint32Array(S.buffer),{ctype:D}=f,{depth:N}=f,L=e.readUshort;if(D==6){const R=E<<2;if(N==8)for(var T=0;T<R;T+=4)S[T]=a[T],S[T+1]=a[T+1],S[T+2]=a[T+2],S[T+3]=a[T+3];if(N==16)for(T=0;T<R;T++)S[T]=a[T<<1]}else if(D==2){const R=f.tabs.tRNS;if(R==null){if(N==8)for(T=0;T<E;T++){var M=3*T;U[T]=255<<24|a[M+2]<<16|a[M+1]<<8|a[M]}if(N==16)for(T=0;T<E;T++)M=6*T,U[T]=255<<24|a[M+4]<<16|a[M+2]<<8|a[M]}else{var d=R[0];const O=R[1],z=R[2];if(N==8)for(T=0;T<E;T++){var m=T<<2;M=3*T,U[T]=255<<24|a[M+2]<<16|a[M+1]<<8|a[M],a[M]==d&&a[M+1]==O&&a[M+2]==z&&(S[m+3]=0)}if(N==16)for(T=0;T<E;T++)m=T<<2,M=6*T,U[T]=255<<24|a[M+4]<<16|a[M+2]<<8|a[M],L(a,M)==d&&L(a,M+2)==O&&L(a,M+4)==z&&(S[m+3]=0)}}else if(D==3){const R=f.tabs.PLTE,O=f.tabs.tRNS,z=O?O.length:0;if(N==1)for(var F=0;F<u;F++){var P=F*A,_=F*l;for(T=0;T<l;T++){m=_+T<<2;var b=3*(I=a[P+(T>>3)]>>7-((7&T)<<0)&1);S[m]=R[b],S[m+1]=R[b+1],S[m+2]=R[b+2],S[m+3]=I<z?O[I]:255}}if(N==2)for(F=0;F<u;F++)for(P=F*A,_=F*l,T=0;T<l;T++)m=_+T<<2,b=3*(I=a[P+(T>>2)]>>6-((3&T)<<1)&3),S[m]=R[b],S[m+1]=R[b+1],S[m+2]=R[b+2],S[m+3]=I<z?O[I]:255;if(N==4)for(F=0;F<u;F++)for(P=F*A,_=F*l,T=0;T<l;T++)m=_+T<<2,b=3*(I=a[P+(T>>1)]>>4-((1&T)<<2)&15),S[m]=R[b],S[m+1]=R[b+1],S[m+2]=R[b+2],S[m+3]=I<z?O[I]:255;if(N==8)for(T=0;T<E;T++){var I;m=T<<2,b=3*(I=a[T]),S[m]=R[b],S[m+1]=R[b+1],S[m+2]=R[b+2],S[m+3]=I<z?O[I]:255}}else if(D==4){if(N==8)for(T=0;T<E;T++){m=T<<2;var C=a[g=T<<1];S[m]=C,S[m+1]=C,S[m+2]=C,S[m+3]=a[g+1]}if(N==16)for(T=0;T<E;T++){var g;m=T<<2,C=a[g=T<<2],S[m]=C,S[m+1]=C,S[m+2]=C,S[m+3]=a[g+2]}}else if(D==0)for(d=f.tabs.tRNS?f.tabs.tRNS:-1,F=0;F<u;F++){const R=F*A,O=F*l;if(N==1)for(var h=0;h<l;h++){var w=(C=255*(a[R+(h>>>3)]>>>7-(7&h)&1))==255*d?0:255;U[O+h]=w<<24|C<<16|C<<8|C}else if(N==2)for(h=0;h<l;h++)w=(C=85*(a[R+(h>>>2)]>>>6-((3&h)<<1)&3))==85*d?0:255,U[O+h]=w<<24|C<<16|C<<8|C;else if(N==4)for(h=0;h<l;h++)w=(C=17*(a[R+(h>>>1)]>>>4-((1&h)<<2)&15))==17*d?0:255,U[O+h]=w<<24|C<<16|C<<8|C;else if(N==8)for(h=0;h<l;h++)w=(C=a[R+h])==d?0:255,U[O+h]=w<<24|C<<16|C<<8|C;else if(N==16)for(h=0;h<l;h++)C=a[R+(h<<1)],w=L(a,R+(h<<1))==d?0:255,U[O+h]=w<<24|C<<16|C<<8|C}return S}function r(a,l,u,f){const E=i(a),y=Math.ceil(u*E/8),A=new Uint8Array((y+1+a.interlace)*f);return l=a.tabs.CgBI?n(l,A):o(l,A),a.interlace==0?l=s(l,a,0,u,f):a.interlace==1&&(l=(function(U,D){const N=D.width,L=D.height,T=i(D),M=T>>3,d=Math.ceil(N*T/8),m=new Uint8Array(L*d);let F=0;const P=[0,0,4,0,2,0,1],_=[0,4,0,2,0,1,0],b=[8,8,8,4,4,2,2],I=[8,8,4,4,2,2,1];let C=0;for(;C<7;){const h=b[C],w=I[C];let R=0,O=0,z=P[C];for(;z<L;)z+=h,O++;let B=_[C];for(;B<N;)B+=w,R++;const j=Math.ceil(R*T/8);s(U,D,F,R,O);let k=0,v=P[C];for(;v<L;){let X=_[C],Q=F+k*j<<3;for(;X<N;){var g;if(T==1&&(g=(g=U[Q>>3])>>7-(7&Q)&1,m[v*d+(X>>3)]|=g<<7-((7&X)<<0)),T==2&&(g=(g=U[Q>>3])>>6-(7&Q)&3,m[v*d+(X>>2)]|=g<<6-((3&X)<<1)),T==4&&(g=(g=U[Q>>3])>>4-(7&Q)&15,m[v*d+(X>>1)]|=g<<4-((1&X)<<2)),T>=8){const K=v*d+X*M;for(let W=0;W<M;W++)m[K+W]=U[(Q>>3)+W]}Q+=T,X+=w}k++,v+=h}R*O!=0&&(F+=O*(1+j)),C+=1}return m})(l,a)),l}function o(a,l){return n(new Uint8Array(a.buffer,2,a.length-6),l)}var n=(function(){const a={H:{}};return a.H.N=function(l,u){const f=Uint8Array;let E,y,A=0,S=0,U=0,D=0,N=0,L=0,T=0,M=0,d=0;if(l[0]==3&&l[1]==0)return u||new f(0);const m=a.H,F=m.b,P=m.e,_=m.R,b=m.n,I=m.A,C=m.Z,g=m.m,h=u==null;for(h&&(u=new f(l.length>>>2<<5));A==0;)if(A=F(l,d,1),S=F(l,d+1,2),d+=3,S!=0){if(h&&(u=a.H.W(u,M+(1<<17))),S==1&&(E=g.J,y=g.h,L=511,T=31),S==2){U=P(l,d,5)+257,D=P(l,d+5,5)+1,N=P(l,d+10,4)+4,d+=14;let R=1;for(var w=0;w<38;w+=2)g.Q[w]=0,g.Q[w+1]=0;for(w=0;w<N;w++){const B=P(l,d+3*w,3);g.Q[1+(g.X[w]<<1)]=B,B>R&&(R=B)}d+=3*N,b(g.Q,R),I(g.Q,R,g.u),E=g.w,y=g.d,d=_(g.u,(1<<R)-1,U+D,l,d,g.v);const O=m.V(g.v,0,U,g.C);L=(1<<O)-1;const z=m.V(g.v,U,D,g.D);T=(1<<z)-1,b(g.C,O),I(g.C,O,E),b(g.D,z),I(g.D,z,y)}for(;;){const R=E[C(l,d)&L];d+=15&R;const O=R>>>4;if(!(O>>>8))u[M++]=O;else{if(O==256)break;{let z=M+O-254;if(O>264){const X=g.q[O-257];z=M+(X>>>3)+P(l,d,7&X),d+=7&X}const B=y[C(l,d)&T];d+=15&B;const j=B>>>4,k=g.c[j],v=(k>>>4)+F(l,d,15&k);for(d+=15&k;M<z;)u[M]=u[M++-v],u[M]=u[M++-v],u[M]=u[M++-v],u[M]=u[M++-v];M=z}}}}else{(7&d)!=0&&(d+=8-(7&d));const R=4+(d>>>3),O=l[R-4]|l[R-3]<<8;h&&(u=a.H.W(u,M+O)),u.set(new f(l.buffer,l.byteOffset+R,O),M),d=R+O<<3,M+=O}return u.length==M?u:u.slice(0,M)},a.H.W=function(l,u){const f=l.length;if(u<=f)return l;const E=new Uint8Array(f<<1);return E.set(l,0),E},a.H.R=function(l,u,f,E,y,A){const S=a.H.e,U=a.H.Z;let D=0;for(;D<f;){const N=l[U(E,y)&u];y+=15&N;const L=N>>>4;if(L<=15)A[D]=L,D++;else{let T=0,M=0;L==16?(M=3+S(E,y,2),y+=2,T=A[D-1]):L==17?(M=3+S(E,y,3),y+=3):L==18&&(M=11+S(E,y,7),y+=7);const d=D+M;for(;D<d;)A[D]=T,D++}}return y},a.H.V=function(l,u,f,E){let y=0,A=0;const S=E.length>>>1;for(;A<f;){const U=l[A+u];E[A<<1]=0,E[1+(A<<1)]=U,U>y&&(y=U),A++}for(;A<S;)E[A<<1]=0,E[1+(A<<1)]=0,A++;return y},a.H.n=function(l,u){const f=a.H.m,E=l.length;let y,A,S,U;const D=f.j;for(var N=0;N<=u;N++)D[N]=0;for(N=1;N<E;N+=2)D[l[N]]++;const L=f.K;for(y=0,D[0]=0,A=1;A<=u;A++)y=y+D[A-1]<<1,L[A]=y;for(S=0;S<E;S+=2)U=l[S+1],U!=0&&(l[S]=L[U],L[U]++)},a.H.A=function(l,u,f){const E=l.length,y=a.H.m.r;for(let A=0;A<E;A+=2)if(l[A+1]!=0){const S=A>>1,U=l[A+1],D=S<<4|U,N=u-U;let L=l[A]<<N;const T=L+(1<<N);for(;L!=T;)f[y[L]>>>15-u]=D,L++}},a.H.l=function(l,u){const f=a.H.m.r,E=15-u;for(let y=0;y<l.length;y+=2){const A=l[y]<<u-l[y+1];l[y]=f[A]>>>E}},a.H.M=function(l,u,f){f<<=7&u;const E=u>>>3;l[E]|=f,l[E+1]|=f>>>8},a.H.I=function(l,u,f){f<<=7&u;const E=u>>>3;l[E]|=f,l[E+1]|=f>>>8,l[E+2]|=f>>>16},a.H.e=function(l,u,f){return(l[u>>>3]|l[1+(u>>>3)]<<8)>>>(7&u)&(1<<f)-1},a.H.b=function(l,u,f){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16)>>>(7&u)&(1<<f)-1},a.H.Z=function(l,u){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16)>>>(7&u)},a.H.i=function(l,u){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16|l[3+(u>>>3)]<<24)>>>(7&u)},a.H.m=(function(){const l=Uint16Array,u=Uint32Array;return{K:new l(16),j:new l(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new l(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new u(32),J:new l(512),_:[],h:new l(32),$:[],w:new l(32768),C:[],v:[],d:new l(32768),D:[],u:new l(512),Q:[],r:new l(32768),s:new u(286),Y:new u(30),a:new u(19),t:new u(15e3),k:new l(65536),g:new l(32768)}})(),(function(){const l=a.H.m;for(var u=0;u<32768;u++){let E=u;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,l.r[u]=(E>>>16|E<<16)>>>17}function f(E,y,A){for(;y--!=0;)E.push(0,A)}for(u=0;u<32;u++)l.q[u]=l.S[u]<<3|l.T[u],l.c[u]=l.p[u]<<4|l.z[u];f(l._,144,8),f(l._,112,9),f(l._,24,7),f(l._,8,8),a.H.n(l._,9),a.H.A(l._,9,l.J),a.H.l(l._,9),f(l.$,32,5),a.H.n(l.$,5),a.H.A(l.$,5,l.h),a.H.l(l.$,5),f(l.Q,19,0),f(l.C,286,0),f(l.D,30,0),f(l.v,320,0)})(),a.H.N})();function i(a){return[1,null,3,1,2,null,4][a.ctype]*a.depth}function s(a,l,u,f,E){let y=i(l);const A=Math.ceil(f*y/8);let S,U;y=Math.ceil(y/8);let D=a[u],N=0;if(D>1&&(a[u]=[0,0,1][D-2]),D==3)for(N=y;N<A;N++)a[N+1]=a[N+1]+(a[N+1-y]>>>1)&255;for(let L=0;L<E;L++)if(S=u+L*A,U=S+L+1,D=a[U-1],N=0,D==0)for(;N<A;N++)a[S+N]=a[U+N];else if(D==1){for(;N<y;N++)a[S+N]=a[U+N];for(;N<A;N++)a[S+N]=a[U+N]+a[S+N-y]}else if(D==2)for(;N<A;N++)a[S+N]=a[U+N]+a[S+N-A];else if(D==3){for(;N<y;N++)a[S+N]=a[U+N]+(a[S+N-A]>>>1);for(;N<A;N++)a[S+N]=a[U+N]+(a[S+N-A]+a[S+N-y]>>>1)}else{for(;N<y;N++)a[S+N]=a[U+N]+c(0,a[S+N-A],0);for(;N<A;N++)a[S+N]=a[U+N]+c(a[S+N-y],a[S+N-A],a[S+N-y-A])}return a}function c(a,l,u){const f=a+l-u,E=f-a,y=f-l,A=f-u;return E*E<=y*y&&E*E<=A*A?a:y*y<=A*A?l:u}function p(a,l,u){u.width=e.readUint(a,l),l+=4,u.height=e.readUint(a,l),l+=4,u.depth=a[l],l++,u.ctype=a[l],l++,u.compress=a[l],l++,u.filter=a[l],l++,u.interlace=a[l],l++}function x(a,l,u,f,E,y,A,S,U){const D=Math.min(l,E),N=Math.min(u,y);let L=0,T=0;for(let C=0;C<N;C++)for(let g=0;g<D;g++)if(A>=0&&S>=0?(L=C*l+g<<2,T=(S+C)*E+A+g<<2):(L=(-S+C)*l-A+g<<2,T=C*E+g<<2),U==0)f[T]=a[L],f[T+1]=a[L+1],f[T+2]=a[L+2],f[T+3]=a[L+3];else if(U==1){var M=a[L+3]*.00392156862745098,d=a[L]*M,m=a[L+1]*M,F=a[L+2]*M,P=f[T+3]*(1/255),_=f[T]*P,b=f[T+1]*P,I=f[T+2]*P;const h=1-M,w=M+P*h,R=w==0?0:1/w;f[T+3]=255*w,f[T+0]=(d+_*h)*R,f[T+1]=(m+b*h)*R,f[T+2]=(F+I*h)*R}else if(U==2)M=a[L+3],d=a[L],m=a[L+1],F=a[L+2],P=f[T+3],_=f[T],b=f[T+1],I=f[T+2],M==P&&d==_&&m==b&&F==I?(f[T]=0,f[T+1]=0,f[T+2]=0,f[T+3]=0):(f[T]=d,f[T+1]=m,f[T+2]=F,f[T+3]=M);else if(U==3){if(M=a[L+3],d=a[L],m=a[L+1],F=a[L+2],P=f[T+3],_=f[T],b=f[T+1],I=f[T+2],M==P&&d==_&&m==b&&F==I)continue;if(M<220&&P>20)return!1}return!0}return{decode:function(l){const u=new Uint8Array(l);let f=8;const E=e,y=E.readUshort,A=E.readUint,S={tabs:{},frames:[]},U=new Uint8Array(u.length);let D,N=0,L=0;const T=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(u[M]!=T[M])throw"The input is not a PNG file!";for(;f<u.length;){const C=E.readUint(u,f);f+=4;const g=E.readASCII(u,f,4);if(f+=4,g=="IHDR")p(u,f,S);else if(g=="iCCP"){for(var d=f;u[d]!=0;)d++;E.readASCII(u,f,d-f),u[d+1];const h=u.slice(d+2,f+C);let w=null;try{w=o(h)}catch{w=n(h)}S.tabs[g]=w}else if(g=="CgBI")S.tabs[g]=u.slice(f,f+4);else if(g=="IDAT"){for(M=0;M<C;M++)U[N+M]=u[f+M];N+=C}else if(g=="acTL")S.tabs[g]={num_frames:A(u,f),num_plays:A(u,f+4)},D=new Uint8Array(u.length);else if(g=="fcTL"){L!=0&&((I=S.frames[S.frames.length-1]).data=r(S,D.slice(0,L),I.rect.width,I.rect.height),L=0);const h={x:A(u,f+12),y:A(u,f+16),width:A(u,f+4),height:A(u,f+8)};let w=y(u,f+22);w=y(u,f+20)/(w==0?100:w);const R={rect:h,delay:Math.round(1e3*w),dispose:u[f+24],blend:u[f+25]};S.frames.push(R)}else if(g=="fdAT"){for(M=0;M<C-4;M++)D[L+M]=u[f+M+4];L+=C-4}else if(g=="pHYs")S.tabs[g]=[E.readUint(u,f),E.readUint(u,f+4),u[f+8]];else if(g=="cHRM")for(S.tabs[g]=[],M=0;M<8;M++)S.tabs[g].push(E.readUint(u,f+4*M));else if(g=="tEXt"||g=="zTXt"){S.tabs[g]==null&&(S.tabs[g]={});var m=E.nextZero(u,f),F=E.readASCII(u,f,m-f),P=f+C-m-1;if(g=="tEXt")b=E.readASCII(u,m+1,P);else{var _=o(u.slice(m+2,m+2+P));b=E.readUTF8(_,0,_.length)}S.tabs[g][F]=b}else if(g=="iTXt"){S.tabs[g]==null&&(S.tabs[g]={}),m=0,d=f,m=E.nextZero(u,d),F=E.readASCII(u,d,m-d);const h=u[d=m+1];var b;u[d+1],d+=2,m=E.nextZero(u,d),E.readASCII(u,d,m-d),d=m+1,m=E.nextZero(u,d),E.readUTF8(u,d,m-d),P=C-((d=m+1)-f),h==0?b=E.readUTF8(u,d,P):(_=o(u.slice(d,d+P)),b=E.readUTF8(_,0,_.length)),S.tabs[g][F]=b}else if(g=="PLTE")S.tabs[g]=E.readBytes(u,f,C);else if(g=="hIST"){const h=S.tabs.PLTE.length/3;for(S.tabs[g]=[],M=0;M<h;M++)S.tabs[g].push(y(u,f+2*M))}else if(g=="tRNS")S.ctype==3?S.tabs[g]=E.readBytes(u,f,C):S.ctype==0?S.tabs[g]=y(u,f):S.ctype==2&&(S.tabs[g]=[y(u,f),y(u,f+2),y(u,f+4)]);else if(g=="gAMA")S.tabs[g]=E.readUint(u,f)/1e5;else if(g=="sRGB")S.tabs[g]=u[f];else if(g=="bKGD")S.ctype==0||S.ctype==4?S.tabs[g]=[y(u,f)]:S.ctype==2||S.ctype==6?S.tabs[g]=[y(u,f),y(u,f+2),y(u,f+4)]:S.ctype==3&&(S.tabs[g]=u[f]);else if(g=="IEND")break;f+=C,E.readUint(u,f),f+=4}var I;return L!=0&&((I=S.frames[S.frames.length-1]).data=r(S,D.slice(0,L),I.rect.width,I.rect.height)),S.data=r(S,U,S.width,S.height),delete S.compress,delete S.interlace,delete S.filter,S},toRGBA8:function(l){const u=l.width,f=l.height;if(l.tabs.acTL==null)return[t(l.data,u,f,l).buffer];const E=[];l.frames[0].data==null&&(l.frames[0].data=l.data);const y=u*f*4,A=new Uint8Array(y),S=new Uint8Array(y),U=new Uint8Array(y);for(let N=0;N<l.frames.length;N++){const L=l.frames[N],T=L.rect.x,M=L.rect.y,d=L.rect.width,m=L.rect.height,F=t(L.data,d,m,l);if(N!=0)for(var D=0;D<y;D++)U[D]=A[D];if(L.blend==0?x(F,d,m,A,u,f,T,M,0):L.blend==1&&x(F,d,m,A,u,f,T,M,1),E.push(A.buffer.slice(0)),L.dispose!=0){if(L.dispose==1)x(S,d,m,A,u,f,T,M,0);else if(L.dispose==2)for(D=0;D<y;D++)A[D]=U[D]}}return E},_paeth:c,_copyTile:x,_bin:e}})();(function(){const{_copyTile:e}=_e,{_bin:t}=_e,r=_e._paeth;var o={table:(function(){const d=new Uint32Array(256);for(let m=0;m<256;m++){let F=m;for(let P=0;P<8;P++)1&F?F=3988292384^F>>>1:F>>>=1;d[m]=F}return d})(),update(d,m,F,P){for(let _=0;_<P;_++)d=o.table[255&(d^m[F+_])]^d>>>8;return d},crc:(d,m,F)=>4294967295^o.update(4294967295,d,m,F)};function n(d,m,F,P){m[F]+=d[0]*P>>4,m[F+1]+=d[1]*P>>4,m[F+2]+=d[2]*P>>4,m[F+3]+=d[3]*P>>4}function i(d){return Math.max(0,Math.min(255,d))}function s(d,m){const F=d[0]-m[0],P=d[1]-m[1],_=d[2]-m[2],b=d[3]-m[3];return F*F+P*P+_*_+b*b}function c(d,m,F,P,_,b,I){I==null&&(I=1);const C=P.length,g=[];for(var h=0;h<C;h++){const v=P[h];g.push([v>>>0&255,v>>>8&255,v>>>16&255,v>>>24&255])}for(h=0;h<C;h++){let v=4294967295;for(var w=0,R=0;R<C;R++){var O=s(g[h],g[R]);R!=h&&O<v&&(v=O,w=R)}}const z=new Uint32Array(_.buffer),B=new Int16Array(m*F*4),j=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(h=0;h<j.length;h++)j[h]=255*((j[h]+.5)/16-.5);for(let v=0;v<F;v++)for(let X=0;X<m;X++){var k;h=4*(v*m+X),I!=2?k=[i(d[h]+B[h]),i(d[h+1]+B[h+1]),i(d[h+2]+B[h+2]),i(d[h+3]+B[h+3])]:(O=j[4*(3&v)+(3&X)],k=[i(d[h]+O),i(d[h+1]+O),i(d[h+2]+O),i(d[h+3]+O)]),w=0;let Q=16777215;for(R=0;R<C;R++){const $=s(k,g[R]);$<Q&&(Q=$,w=R)}const K=g[w],W=[k[0]-K[0],k[1]-K[1],k[2]-K[2],k[3]-K[3]];I==1&&(X!=m-1&&n(W,B,h+4,7),v!=F-1&&(X!=0&&n(W,B,h+4*m-4,3),n(W,B,h+4*m,5),X!=m-1&&n(W,B,h+4*m+4,1))),b[h>>2]=w,z[h>>2]=P[w]}}function p(d,m,F,P,_){_==null&&(_={});const{crc:b}=o,I=t.writeUint,C=t.writeUshort,g=t.writeASCII;let h=8;const w=d.frames.length>1;let R,O=!1,z=33+(w?20:0);if(_.sRGB!=null&&(z+=13),_.pHYs!=null&&(z+=21),_.iCCP!=null&&(R=pako.deflate(_.iCCP),z+=21+R.length+4),d.ctype==3){for(var B=d.plte.length,j=0;j<B;j++)d.plte[j]>>>24!=255&&(O=!0);z+=8+3*B+4+(O?8+1*B+4:0)}for(var k=0;k<d.frames.length;k++)w&&(z+=38),z+=(K=d.frames[k]).cimg.length+12,k!=0&&(z+=4);z+=12;const v=new Uint8Array(z),X=[137,80,78,71,13,10,26,10];for(j=0;j<8;j++)v[j]=X[j];if(I(v,h,13),h+=4,g(v,h,"IHDR"),h+=4,I(v,h,m),h+=4,I(v,h,F),h+=4,v[h]=d.depth,h++,v[h]=d.ctype,h++,v[h]=0,h++,v[h]=0,h++,v[h]=0,h++,I(v,h,b(v,h-17,17)),h+=4,_.sRGB!=null&&(I(v,h,1),h+=4,g(v,h,"sRGB"),h+=4,v[h]=_.sRGB,h++,I(v,h,b(v,h-5,5)),h+=4),_.iCCP!=null){const W=13+R.length;I(v,h,W),h+=4,g(v,h,"iCCP"),h+=4,g(v,h,"ICC profile"),h+=11,h+=2,v.set(R,h),h+=R.length,I(v,h,b(v,h-(W+4),W+4)),h+=4}if(_.pHYs!=null&&(I(v,h,9),h+=4,g(v,h,"pHYs"),h+=4,I(v,h,_.pHYs[0]),h+=4,I(v,h,_.pHYs[1]),h+=4,v[h]=_.pHYs[2],h++,I(v,h,b(v,h-13,13)),h+=4),w&&(I(v,h,8),h+=4,g(v,h,"acTL"),h+=4,I(v,h,d.frames.length),h+=4,I(v,h,_.loop!=null?_.loop:0),h+=4,I(v,h,b(v,h-12,12)),h+=4),d.ctype==3){for(I(v,h,3*(B=d.plte.length)),h+=4,g(v,h,"PLTE"),h+=4,j=0;j<B;j++){const W=3*j,$=d.plte[j],te=255&$,ie=$>>>8&255,Be=$>>>16&255;v[h+W+0]=te,v[h+W+1]=ie,v[h+W+2]=Be}if(h+=3*B,I(v,h,b(v,h-3*B-4,3*B+4)),h+=4,O){for(I(v,h,B),h+=4,g(v,h,"tRNS"),h+=4,j=0;j<B;j++)v[h+j]=d.plte[j]>>>24&255;h+=B,I(v,h,b(v,h-B-4,B+4)),h+=4}}let Q=0;for(k=0;k<d.frames.length;k++){var K=d.frames[k];w&&(I(v,h,26),h+=4,g(v,h,"fcTL"),h+=4,I(v,h,Q++),h+=4,I(v,h,K.rect.width),h+=4,I(v,h,K.rect.height),h+=4,I(v,h,K.rect.x),h+=4,I(v,h,K.rect.y),h+=4,C(v,h,P[k]),h+=2,C(v,h,1e3),h+=2,v[h]=K.dispose,h++,v[h]=K.blend,h++,I(v,h,b(v,h-30,30)),h+=4);const W=K.cimg;I(v,h,(B=W.length)+(k==0?0:4)),h+=4;const $=h;g(v,h,k==0?"IDAT":"fdAT"),h+=4,k!=0&&(I(v,h,Q++),h+=4),v.set(W,h),h+=B,I(v,h,b(v,$,h-$)),h+=4}return I(v,h,0),h+=4,g(v,h,"IEND"),h+=4,I(v,h,b(v,h-4,4)),h+=4,v.buffer}function x(d,m,F){for(let P=0;P<d.frames.length;P++){const _=d.frames[P];_.rect.width;const b=_.rect.height,I=new Uint8Array(b*_.bpl+b);_.cimg=f(_.img,b,_.bpp,_.bpl,I,m,F)}}function a(d,m,F,P,_){const b=_[0],I=_[1],C=_[2],g=_[3],h=_[4],w=_[5];let R=6,O=8,z=255;for(var B=0;B<d.length;B++){const de=new Uint8Array(d[B]);for(var j=de.length,k=0;k<j;k+=4)z&=de[k+3]}const v=z!=255,X=(function(ne,V,fe,pe,ae,Ie){const ce=[];for(var ee=0;ee<ne.length;ee++){const me=new Uint8Array(ne[ee]),ye=new Uint32Array(me.buffer);var Ae;let be=0,Ue=0,Pe=V,He=fe,Pt=pe?1:0;if(ee!=0){const Vr=Ie||pe||ee==1||ce[ee-2].dispose!=0?1:2;let Rt=0,un=1e9;for(let rt=0;rt<Vr;rt++){var ve=new Uint8Array(ne[ee-1-rt]);const ei=new Uint32Array(ne[ee-1-rt]);let Me=V,we=fe,Qe=-1,it=-1;for(let ze=0;ze<fe;ze++)for(let $e=0;$e<V;$e++)ye[he=ze*V+$e]!=ei[he]&&($e<Me&&(Me=$e),$e>Qe&&(Qe=$e),ze<we&&(we=ze),ze>it&&(it=ze));Qe==-1&&(Me=we=Qe=it=0),ae&&((1&Me)==1&&Me--,(1&we)==1&&we--);const ln=(Qe-Me+1)*(it-we+1);ln<un&&(un=ln,Rt=rt,be=Me,Ue=we,Pe=Qe-Me+1,He=it-we+1)}ve=new Uint8Array(ne[ee-1-Rt]),Rt==1&&(ce[ee-1].dispose=2),Ae=new Uint8Array(Pe*He*4),e(ve,V,fe,Ae,Pe,He,-be,-Ue,0),Pt=e(me,V,fe,Ae,Pe,He,-be,-Ue,3)?1:0,Pt==1?u(me,V,fe,Ae,{x:be,y:Ue,width:Pe,height:He}):e(me,V,fe,Ae,Pe,He,-be,-Ue,0)}else Ae=me.slice(0);ce.push({rect:{x:be,y:Ue,width:Pe,height:He},img:Ae,blend:Pt,dispose:0})}if(pe)for(ee=0;ee<ce.length;ee++){if((je=ce[ee]).blend==1)continue;const me=je.rect,ye=ce[ee-1].rect,be=Math.min(me.x,ye.x),Ue=Math.min(me.y,ye.y),Pe={x:be,y:Ue,width:Math.max(me.x+me.width,ye.x+ye.width)-be,height:Math.max(me.y+me.height,ye.y+ye.height)-Ue};ce[ee-1].dispose=1,ee-1!=0&&l(ne,V,fe,ce,ee-1,Pe,ae),l(ne,V,fe,ce,ee,Pe,ae)}let dt=0;if(ne.length!=1)for(var he=0;he<ce.length;he++){var je;dt+=(je=ce[he]).rect.width*je.rect.height}return ce})(d,m,F,b,I,C),Q={},K=[],W=[];if(P!=0){const de=[];for(k=0;k<X.length;k++)de.push(X[k].img.buffer);const ne=(function(ae){let Ie=0;for(var ce=0;ce<ae.length;ce++)Ie+=ae[ce].byteLength;const ee=new Uint8Array(Ie);let Ae=0;for(ce=0;ce<ae.length;ce++){const ve=new Uint8Array(ae[ce]),dt=ve.length;for(let he=0;he<dt;he+=4){let je=ve[he],me=ve[he+1],ye=ve[he+2];const be=ve[he+3];be==0&&(je=me=ye=0),ee[Ae+he]=je,ee[Ae+he+1]=me,ee[Ae+he+2]=ye,ee[Ae+he+3]=be}Ae+=dt}return ee.buffer})(de),V=y(ne,P);for(k=0;k<V.plte.length;k++)K.push(V.plte[k].est.rgba);let fe=0;for(k=0;k<X.length;k++){const pe=(te=X[k]).img.length;var $=new Uint8Array(V.inds.buffer,fe>>2,pe>>2);W.push($);const ae=new Uint8Array(V.abuf,fe,pe);w&&c(te.img,te.rect.width,te.rect.height,K,ae,$),te.img.set(ae),fe+=pe}}else for(B=0;B<X.length;B++){var te=X[B];const de=new Uint32Array(te.img.buffer);var ie=te.rect.width;for(j=de.length,$=new Uint8Array(j),W.push($),k=0;k<j;k++){const ne=de[k];if(k!=0&&ne==de[k-1])$[k]=$[k-1];else if(k>ie&&ne==de[k-ie])$[k]=$[k-ie];else{let V=Q[ne];if(V==null&&(Q[ne]=V=K.length,K.push(ne),K.length>=300))break;$[k]=V}}}const Be=K.length;for(Be<=256&&h==0&&(O=Be<=2?1:Be<=4?2:Be<=16?4:8,O=Math.max(O,g)),B=0;B<X.length;B++){(te=X[B]).rect.x,te.rect.y,ie=te.rect.width;const de=te.rect.height;let ne=te.img;new Uint32Array(ne.buffer);let V=4*ie,fe=4;if(Be<=256&&h==0){V=Math.ceil(O*ie/8);var Ce=new Uint8Array(V*de);const pe=W[B];for(let ae=0;ae<de;ae++){k=ae*V;const Ie=ae*ie;if(O==8)for(var oe=0;oe<ie;oe++)Ce[k+oe]=pe[Ie+oe];else if(O==4)for(oe=0;oe<ie;oe++)Ce[k+(oe>>1)]|=pe[Ie+oe]<<4-4*(1&oe);else if(O==2)for(oe=0;oe<ie;oe++)Ce[k+(oe>>2)]|=pe[Ie+oe]<<6-2*(3&oe);else if(O==1)for(oe=0;oe<ie;oe++)Ce[k+(oe>>3)]|=pe[Ie+oe]<<7-1*(7&oe)}ne=Ce,R=3,fe=1}else if(v==0&&X.length==1){Ce=new Uint8Array(ie*de*3);const pe=ie*de;for(k=0;k<pe;k++){const ae=3*k,Ie=4*k;Ce[ae]=ne[Ie],Ce[ae+1]=ne[Ie+1],Ce[ae+2]=ne[Ie+2]}ne=Ce,R=2,fe=3,V=3*ie}te.img=ne,te.bpl=V,te.bpp=fe}return{ctype:R,depth:O,plte:K,frames:X}}function l(d,m,F,P,_,b,I){const C=Uint8Array,g=Uint32Array,h=new C(d[_-1]),w=new g(d[_-1]),R=_+1<d.length?new C(d[_+1]):null,O=new C(d[_]),z=new g(O.buffer);let B=m,j=F,k=-1,v=-1;for(let Q=0;Q<b.height;Q++)for(let K=0;K<b.width;K++){const W=b.x+K,$=b.y+Q,te=$*m+W,ie=z[te];ie==0||P[_-1].dispose==0&&w[te]==ie&&(R==null||R[4*te+3]!=0)||(W<B&&(B=W),W>k&&(k=W),$<j&&(j=$),$>v&&(v=$))}k==-1&&(B=j=k=v=0),I&&((1&B)==1&&B--,(1&j)==1&&j--),b={x:B,y:j,width:k-B+1,height:v-j+1};const X=P[_];X.rect=b,X.blend=1,X.img=new Uint8Array(b.width*b.height*4),P[_-1].dispose==0?(e(h,m,F,X.img,b.width,b.height,-b.x,-b.y,0),u(O,m,F,X.img,b)):e(O,m,F,X.img,b.width,b.height,-b.x,-b.y,0)}function u(d,m,F,P,_){e(d,m,F,P,_.width,_.height,-_.x,-_.y,2)}function f(d,m,F,P,_,b,I){const C=[];let g,h=[0,1,2,3,4];b!=-1?h=[b]:(m*P>5e5||F==1)&&(h=[0]),I&&(g={level:0});const w=so;for(var R=0;R<h.length;R++){for(let B=0;B<m;B++)E(_,d,B,P,F,h[R]);C.push(w.deflate(_,g))}let O,z=1e9;for(R=0;R<C.length;R++)C[R].length<z&&(O=R,z=C[R].length);return C[O]}function E(d,m,F,P,_,b){const I=F*P;let C=I+F;if(d[C]=b,C++,b==0)if(P<500)for(var g=0;g<P;g++)d[C+g]=m[I+g];else d.set(new Uint8Array(m.buffer,I,P),C);else if(b==1){for(g=0;g<_;g++)d[C+g]=m[I+g];for(g=_;g<P;g++)d[C+g]=m[I+g]-m[I+g-_]+256&255}else if(F==0){for(g=0;g<_;g++)d[C+g]=m[I+g];if(b==2)for(g=_;g<P;g++)d[C+g]=m[I+g];if(b==3)for(g=_;g<P;g++)d[C+g]=m[I+g]-(m[I+g-_]>>1)+256&255;if(b==4)for(g=_;g<P;g++)d[C+g]=m[I+g]-r(m[I+g-_],0,0)+256&255}else{if(b==2)for(g=0;g<P;g++)d[C+g]=m[I+g]+256-m[I+g-P]&255;if(b==3){for(g=0;g<_;g++)d[C+g]=m[I+g]+256-(m[I+g-P]>>1)&255;for(g=_;g<P;g++)d[C+g]=m[I+g]+256-(m[I+g-P]+m[I+g-_]>>1)&255}if(b==4){for(g=0;g<_;g++)d[C+g]=m[I+g]+256-r(0,m[I+g-P],0)&255;for(g=_;g<P;g++)d[C+g]=m[I+g]+256-r(m[I+g-_],m[I+g-P],m[I+g-_-P])&255}}}function y(d,m){const F=new Uint8Array(d),P=F.slice(0),_=new Uint32Array(P.buffer),b=A(P,m),I=b[0],C=b[1],g=F.length,h=new Uint8Array(g>>2);let w;if(F.length<2e7)for(var R=0;R<g;R+=4)w=S(I,O=F[R]*(1/255),z=F[R+1]*(1/255),B=F[R+2]*(1/255),j=F[R+3]*(1/255)),h[R>>2]=w.ind,_[R>>2]=w.est.rgba;else for(R=0;R<g;R+=4){var O=F[R]*.00392156862745098,z=F[R+1]*(1/255),B=F[R+2]*(1/255),j=F[R+3]*(1/255);for(w=I;w.left;)w=U(w.est,O,z,B,j)<=0?w.left:w.right;h[R>>2]=w.ind,_[R>>2]=w.est.rgba}return{abuf:P.buffer,inds:h,plte:C}}function A(d,m,F){F==null&&(F=1e-4);const P=new Uint32Array(d.buffer),_={i0:0,i1:d.length,bst:null,est:null,tdst:0,left:null,right:null};_.bst=L(d,_.i0,_.i1),_.est=T(_.bst);const b=[_];for(;b.length<m;){let C=0,g=0;for(var I=0;I<b.length;I++)b[I].est.L>C&&(C=b[I].est.L,g=I);if(C<F)break;const h=b[g],w=D(d,P,h.i0,h.i1,h.est.e,h.est.eMq255);if(h.i0>=w||h.i1<=w){h.est.L=0;continue}const R={i0:h.i0,i1:w,bst:null,est:null,tdst:0,left:null,right:null};R.bst=L(d,R.i0,R.i1),R.est=T(R.bst);const O={i0:w,i1:h.i1,bst:null,est:null,tdst:0,left:null,right:null};for(O.bst={R:[],m:[],N:h.bst.N-R.bst.N},I=0;I<16;I++)O.bst.R[I]=h.bst.R[I]-R.bst.R[I];for(I=0;I<4;I++)O.bst.m[I]=h.bst.m[I]-R.bst.m[I];O.est=T(O.bst),h.left=R,h.right=O,b[g]=R,b.push(O)}for(b.sort(((C,g)=>g.bst.N-C.bst.N)),I=0;I<b.length;I++)b[I].ind=I;return[_,b]}function S(d,m,F,P,_){if(d.left==null)return d.tdst=(function(R,O,z,B,j){const k=O-R[0],v=z-R[1],X=B-R[2],Q=j-R[3];return k*k+v*v+X*X+Q*Q})(d.est.q,m,F,P,_),d;const b=U(d.est,m,F,P,_);let I=d.left,C=d.right;b>0&&(I=d.right,C=d.left);const g=S(I,m,F,P,_);if(g.tdst<=b*b)return g;const h=S(C,m,F,P,_);return h.tdst<g.tdst?h:g}function U(d,m,F,P,_){const{e:b}=d;return b[0]*m+b[1]*F+b[2]*P+b[3]*_-d.eMq}function D(d,m,F,P,_,b){for(P-=4;F<P;){for(;N(d,F,_)<=b;)F+=4;for(;N(d,P,_)>b;)P-=4;if(F>=P)break;const I=m[F>>2];m[F>>2]=m[P>>2],m[P>>2]=I,F+=4,P-=4}for(;N(d,F,_)>b;)F-=4;return F+4}function N(d,m,F){return d[m]*F[0]+d[m+1]*F[1]+d[m+2]*F[2]+d[m+3]*F[3]}function L(d,m,F){const P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_=[0,0,0,0],b=F-m>>2;for(let I=m;I<F;I+=4){const C=d[I]*.00392156862745098,g=d[I+1]*(1/255),h=d[I+2]*(1/255),w=d[I+3]*(1/255);_[0]+=C,_[1]+=g,_[2]+=h,_[3]+=w,P[0]+=C*C,P[1]+=C*g,P[2]+=C*h,P[3]+=C*w,P[5]+=g*g,P[6]+=g*h,P[7]+=g*w,P[10]+=h*h,P[11]+=h*w,P[15]+=w*w}return P[4]=P[1],P[8]=P[2],P[9]=P[6],P[12]=P[3],P[13]=P[7],P[14]=P[11],{R:P,m:_,N:b}}function T(d){const{R:m}=d,{m:F}=d,{N:P}=d,_=F[0],b=F[1],I=F[2],C=F[3],g=P==0?0:1/P,h=[m[0]-_*_*g,m[1]-_*b*g,m[2]-_*I*g,m[3]-_*C*g,m[4]-b*_*g,m[5]-b*b*g,m[6]-b*I*g,m[7]-b*C*g,m[8]-I*_*g,m[9]-I*b*g,m[10]-I*I*g,m[11]-I*C*g,m[12]-C*_*g,m[13]-C*b*g,m[14]-C*I*g,m[15]-C*C*g],w=h,R=M;let O=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,B=0;if(P!=0)for(let k=0;k<16&&(O=R.multVec(w,O),B=Math.sqrt(R.dot(O,O)),O=R.sml(1/B,O),!(k!=0&&Math.abs(B-z)<1e-9));k++)z=B;const j=[_*g,b*g,I*g,C*g];return{Cov:h,q:j,e:O,L:z,eMq255:R.dot(R.sml(255,j),O),eMq:R.dot(O,j),rgba:(Math.round(255*j[3])<<24|Math.round(255*j[2])<<16|Math.round(255*j[1])<<8|Math.round(255*j[0])<<0)>>>0}}var M={multVec:(d,m)=>[d[0]*m[0]+d[1]*m[1]+d[2]*m[2]+d[3]*m[3],d[4]*m[0]+d[5]*m[1]+d[6]*m[2]+d[7]*m[3],d[8]*m[0]+d[9]*m[1]+d[10]*m[2]+d[11]*m[3],d[12]*m[0]+d[13]*m[1]+d[14]*m[2]+d[15]*m[3]],dot:(d,m)=>d[0]*m[0]+d[1]*m[1]+d[2]*m[2]+d[3]*m[3],sml:(d,m)=>[d*m[0],d*m[1],d*m[2],d*m[3]]};_e.encode=function(m,F,P,_,b,I,C){_==null&&(_=0),C==null&&(C=!1);const g=a(m,F,P,_,[!1,!1,!1,0,C,!1]);return x(g,-1),p(g,F,P,b,I)},_e.encodeLL=function(m,F,P,_,b,I,C,g){const h={ctype:0+(_==1?0:2)+(b==0?0:4),depth:I,frames:[]},w=(_+b)*I,R=w*F;for(let O=0;O<m.length;O++)h.frames.push({rect:{x:0,y:0,width:F,height:P},img:new Uint8Array(m[O]),blend:0,dispose:1,bpp:Math.ceil(w/8),bpl:Math.ceil(R/8)});return x(h,0,!0),p(h,F,P,C,g)},_e.encode.compress=a,_e.encode.dither=c,_e.quantize=y,_e.quantize.getKDtree=A,_e.quantize.getNearest=S})();const lr={toArrayBuffer(e,t){const r=e.width,o=e.height,n=r<<2,i=e.getContext("2d").getImageData(0,0,r,o),s=new Uint32Array(i.data.buffer),c=(32*r+31)/32<<2,p=c*o,x=122+p,a=new ArrayBuffer(x),l=new DataView(a),u=1<<20;let f,E,y,A,S=u,U=0,D=0,N=0;function L(d){l.setUint16(D,d,!0),D+=2}function T(d){l.setUint32(D,d,!0),D+=4}function M(d){D+=d}L(19778),T(x),M(4),T(122),T(108),T(r),T(-o>>>0),L(1),L(32),T(3),T(p),T(2835),T(2835),M(8),T(16711680),T(65280),T(255),T(4278190080),T(1466527264),(function d(){for(;U<o&&S>0;){for(A=122+U*c,f=0;f<n;)S--,E=s[N++],y=E>>>24,l.setUint32(A+f,E<<8|y),f+=4;U++}N<s.length?(S=u,setTimeout(d,lr._dly)):t(a)})()},toBlob(e,t){this.toArrayBuffer(e,(r=>{t(new Blob([r],{type:"image/bmp"}))}))},_dly:9};var Te={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},ao={[Te.CHROME]:16384,[Te.FIREFOX]:11180,[Te.DESKTOP_SAFARI]:16384,[Te.IE]:8192,[Te.IOS]:4096,[Te.ETC]:8192};const on=typeof window<"u",fr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Et=on&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),co=(on||fr)&&(Et&&Et.getOriginalSymbol(window,"File")||typeof File<"u"&&File),dr=(on||fr)&&(Et&&Et.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function sn(e,t,r=Date.now()){return new Promise((o=>{const n=e.split(","),i=n[0].match(/:(.*?);/)[1],s=globalThis.atob(n[1]);let c=s.length;const p=new Uint8Array(c);for(;c--;)p[c]=s.charCodeAt(c);const x=new Blob([p],{type:i});x.name=t,x.lastModified=r,o(x)}))}function hr(e){return new Promise(((t,r)=>{const o=new dr;o.onload=()=>t(o.result),o.onerror=n=>r(n),o.readAsDataURL(e)}))}function gr(e){return new Promise(((t,r)=>{const o=new Image;o.onload=()=>t(o),o.onerror=n=>r(n),o.src=e}))}function Ze(){if(Ze.cachedResult!==void 0)return Ze.cachedResult;let e=Te.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=Te.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=Te.IOS:/Safari/i.test(t)?e=Te.DESKTOP_SAFARI:/Firefox/i.test(t)?e=Te.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=Te.IE),Ze.cachedResult=e,Ze.cachedResult}function pr(e,t){const r=Ze(),o=ao[r];let n=e,i=t,s=n*i;const c=n>i?i/n:n/i;for(;s>o*o;){const p=(o+n)/2,x=(o+i)/2;p<x?(i=x,n=x*c):(i=p*c,n=p),s=n*i}return{width:n,height:i}}function Ft(e,t){let r,o;try{if(r=new OffscreenCanvas(e,t),o=r.getContext("2d"),o===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),o=r.getContext("2d")}return r.width=e,r.height=t,[r,o]}function mr(e,t){const{width:r,height:o}=pr(e.width,e.height),[n,i]=Ft(r,o);return t&&/jpe?g/.test(t)&&(i.fillStyle="white",i.fillRect(0,0,n.width,n.height)),i.drawImage(e,0,0,n.width,n.height),n}function mt(){return mt.cachedResult!==void 0||(mt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),mt.cachedResult}function St(e,t={}){return new Promise((function(r,o){let n,i;var s=function(){try{return i=mr(n,t.fileType||e.type),r([n,i])}catch(p){return o(p)}},c=function(p){try{var x=function(a){try{throw a}catch(l){return o(l)}};try{let a;return hr(e).then((function(l){try{return a=l,gr(a).then((function(u){try{return n=u,(function(){try{return s()}catch(f){return o(f)}})()}catch(f){return x(f)}}),x)}catch(u){return x(u)}}),x)}catch(a){x(a)}}catch(a){return o(a)}};try{if(mt()||[Te.DESKTOP_SAFARI,Te.MOBILE_SAFARI].includes(Ze()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(p){try{return n=p,s()}catch{return c()}}),c)}catch{c()}}))}function Tt(e,t,r,o,n=1){return new Promise((function(i,s){let c;if(t==="image/png"){let x,a,l;return x=e.getContext("2d"),{data:a}=x.getImageData(0,0,e.width,e.height),l=_e.encode([a.buffer],e.width,e.height,4096*n),c=new Blob([l],{type:t}),c.name=r,c.lastModified=o,p.call(this)}{let x=function(){return p.call(this)};if(t==="image/bmp")return new Promise((a=>lr.toBlob(e,a))).then((function(a){try{return c=a,c.name=r,c.lastModified=o,x.call(this)}catch(l){return s(l)}}).bind(this),s);{let a=function(){return x.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:n}).then((function(l){try{return c=l,c.name=r,c.lastModified=o,a.call(this)}catch(u){return s(u)}}).bind(this),s);{let l;return l=e.toDataURL(t,n),sn(l,r,o).then((function(u){try{return c=u,a.call(this)}catch(f){return s(f)}}).bind(this),s)}}}function p(){return i(c)}}))}function Re(e){e.width=0,e.height=0}function et(){return new Promise((function(e,t){let r,o,n,i;return et.cachedResult!==void 0?e(et.cachedResult):sn("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(s){try{return r=s,St(r).then((function(c){try{return o=c[1],Tt(o,r.type,r.name,r.lastModified).then((function(p){try{return n=p,Re(o),St(n).then((function(x){try{return i=x[0],et.cachedResult=i.width===1&&i.height===2,e(et.cachedResult)}catch(a){return t(a)}}),t)}catch(x){return t(x)}}),t)}catch(p){return t(p)}}),t)}catch(c){return t(c)}}),t)}))}function xr(e){return new Promise(((t,r)=>{const o=new dr;o.onload=n=>{const i=new DataView(n.target.result);if(i.getUint16(0,!1)!=65496)return t(-2);const s=i.byteLength;let c=2;for(;c<s;){if(i.getUint16(c+2,!1)<=8)return t(-1);const p=i.getUint16(c,!1);if(c+=2,p==65505){if(i.getUint32(c+=2,!1)!=1165519206)return t(-1);const x=i.getUint16(c+=6,!1)==18761;c+=i.getUint32(c+4,x);const a=i.getUint16(c,x);c+=2;for(let l=0;l<a;l++)if(i.getUint16(c+12*l,x)==274)return t(i.getUint16(c+12*l+8,x))}else{if((65280&p)!=65280)break;c+=i.getUint16(c,!1)}}return t(-1)},o.onerror=n=>r(n),o.readAsArrayBuffer(e)}))}function Er(e,t){const{width:r}=e,{height:o}=e,{maxWidthOrHeight:n}=t;let i,s=e;return isFinite(n)&&(r>n||o>n)&&([s,i]=Ft(r,o),r>o?(s.width=n,s.height=o/r*n):(s.width=r/o*n,s.height=n),i.drawImage(e,0,0,s.width,s.height),Re(e)),s}function Sr(e,t){const{width:r}=e,{height:o}=e,[n,i]=Ft(r,o);switch(t>4&&t<9?(n.width=o,n.height=r):(n.width=r,n.height=o),t){case 2:i.transform(-1,0,0,1,r,0);break;case 3:i.transform(-1,0,0,-1,r,o);break;case 4:i.transform(1,0,0,-1,0,o);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,o,0);break;case 7:i.transform(0,-1,-1,0,o,r);break;case 8:i.transform(0,-1,1,0,0,r)}return i.drawImage(e,0,0,r,o),Re(e),n}function En(e,t,r=0){return new Promise((function(o,n){let i,s,c,p,x,a,l,u,f,E,y,A,S,U,D,N,L,T,M,d;function m(P=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;i+=P,t.onProgress(Math.min(i,100))}function F(P){if(t.signal&&t.signal.aborted)throw t.signal.reason;i=Math.min(Math.max(P,i),100),t.onProgress(i)}return i=r,s=t.maxIteration||10,c=1024*t.maxSizeMB*1024,m(),St(e,t).then((function(P){try{return[,p]=P,m(),x=Er(p,t),m(),new Promise((function(_,b){var I;if(!(I=t.exifOrientation))return xr(e).then((function(g){try{return I=g,C.call(this)}catch(h){return b(h)}}).bind(this),b);function C(){return _(I)}return C.call(this)})).then((function(_){try{return a=_,m(),et().then((function(b){try{return l=b?x:Sr(x,a),m(),u=t.initialQuality||1,f=t.fileType||e.type,Tt(l,f,e.name,e.lastModified,u).then((function(I){try{{let g=function(){if(s--&&(D>c||D>S)){let w,R;return w=d?.95*M.width:M.width,R=d?.95*M.height:M.height,[L,T]=Ft(w,R),T.drawImage(M,0,0,w,R),u*=f==="image/png"?.85:.95,Tt(L,f,e.name,e.lastModified,u).then((function(O){try{return N=O,Re(M),M=L,D=N.size,F(Math.min(99,Math.floor((U-D)/(U-c)*100))),g}catch(z){return n(z)}}),n)}return[1]},h=function(){return Re(M),Re(L),Re(x),Re(l),Re(p),F(100),o(N)};if(E=I,m(),y=E.size>c,A=E.size>e.size,!y&&!A)return F(100),o(E);var C;return S=e.size,U=E.size,D=U,M=l,d=!t.alwaysKeepResolution&&y,(C=(function(w){for(;w;){if(w.then)return void w.then(C,n);try{if(w.pop){if(w.length)return w.pop()?h.call(this):w;w=g}else w=w.call(this)}catch(R){return n(R)}}}).bind(this))(g)}}catch(g){return n(g)}}).bind(this),n)}catch(I){return n(I)}}).bind(this),n)}catch(b){return n(b)}}).bind(this),n)}catch(_){return n(_)}}).bind(this),n)}))}const uo=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Ot;function lo(e,t){return new Promise(((r,o)=>{Ot||(Ot=(function(s){const c=[];return c.push(s),URL.createObjectURL(new Blob(c))})(uo));const n=new Worker(Ot);n.addEventListener("message",(function(s){if(t.signal&&t.signal.aborted)n.terminate();else if(s.data.progress===void 0){if(s.data.error)return o(new Error(s.data.error)),void n.terminate();r(s.data.file),n.terminate()}else t.onProgress(s.data.progress)})),n.addEventListener("error",o),t.signal&&t.signal.addEventListener("abort",(()=>{o(t.signal.reason),n.terminate()})),n.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function se(e,t){return new Promise((function(r,o){let n,i,s,c,p,x;if(n={...t},s=0,{onProgress:c}=n,n.maxSizeMB=n.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof n.useWebWorker!="boolean"||n.useWebWorker,delete n.useWebWorker,n.onProgress=f=>{s=f,typeof c=="function"&&c(s)},!(e instanceof Blob||e instanceof co))return o(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return o(new Error("The file given is not an image"));if(x=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||x)return En(e,n).then((function(f){try{return i=f,u.call(this)}catch(E){return o(E)}}).bind(this),o);var a=(function(){try{return u.call(this)}catch(f){return o(f)}}).bind(this),l=function(f){try{return En(e,n).then((function(E){try{return i=E,a()}catch(y){return o(y)}}),o)}catch(E){return o(E)}};try{return n.libURL=n.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",lo(e,n).then((function(f){try{return i=f,a()}catch{return l()}}),l)}catch{l()}function u(){try{i.name=e.name,i.lastModified=e.lastModified}catch{}try{n.preserveExif&&e.type==="image/jpeg"&&(!n.fileType||n.fileType&&n.fileType===e.type)&&(i=ur(e,i))}catch{}return r(i)}}))}se.getDataUrlFromFile=hr,se.getFilefromDataUrl=sn,se.loadImage=gr,se.drawImageInCanvas=mr,se.drawFileInCanvas=St,se.canvasToFile=Tt,se.getExifOrientation=xr,se.handleMaxWidthOrHeight=Er,se.followExifOrientation=Sr,se.cleanupCanvasMemory=Re,se.isAutoOrientationInBrowser=et,se.approximateBelowMaximumCanvasSizeOfBrowser=pr,se.copyExifWithoutOrientation=ur,se.getBrowserName=Ze,se.version="2.0.2";const fo=(e,t,r)=>new Promise((o,n)=>{const i=new Image;i.onload=()=>{const s=document.createElement("canvas"),c=s.getContext("2d");if(!c){n(new Error("Could not get canvas context"));return}const p=i.naturalWidth/r,x=t.x*p,a=t.y*p,l=t.width*p,u=t.height*p;s.width=l,s.height=u,c.drawImage(i,x,a,l,u,0,0,l,u),o(s.toDataURL("image/jpeg",.95))},i.onerror=()=>n(new Error("Failed to load image")),i.src=e}),ho=({squareDataUrl:e,date:t,showDate:r,onScoreRecognized:o})=>{const n=en(),[i,s]=q.useState(null),[c,p]=q.useState([]),[x,a]=q.useState(null),l=q.useRef(null),[u,f]=q.useState(!1),E=ir(pt.results.recognizeScoreMutation.mutationOptions()),y=async()=>{if(!(c.length===0||!l.current))try{s(null),f(!0);const U=l.current.clientWidth,D=await fo(e,c[0],U),N=await se.getFilefromDataUrl(D,"cropped.png"),L=await se(N,{maxWidthOrHeight:360,maxSizeMB:.03,initialQuality:.9}),T=await se.getDataUrlFromFile(L),M=await E.mutateAsync({image:T});a(M)}catch(U){console.error("OCR error:",U),s(U instanceof Error?U.message:"Recognition failed")}finally{f(!1)}},A=()=>{if(!x)return;const[U,D,N,L,T,M,d]=x;o?.({perfect:U>=0?U:-1,great:D>=0?D:-1,good:N>=0?N:-1,bad:L>=0?L:-1,miss:T>=0?T:-1,combo:M>=0?M:-1,score:d>=0?d:-1}),a(null)},S=()=>{a(null)};return G.jsxs(kt,{gap:"xs",children:[r&&G.jsxs(ue,{size:"xs",c:"dimmed",children:[n.DATE_TAKEN,": ",t?t.toLocaleString():n.UNKNOWN]}),G.jsx(no,{areas:c,onChange:p,maxAreas:1,globalAreaStyle:{border:"1.5px solid rgba(0, 0, 0, 0.7)",outline:"1.5px solid rgba(255, 255, 128, 0.7)"},children:G.jsx("img",{ref:l,style:{maxWidth:"100%"},src:e,alt:"Screenshot preview"})}),!x&&G.jsxs(G.Fragment,{children:[c.length===0?G.jsxs(ut,{color:"yellow",p:"sm",children:[n.OCR_DRAW_RECTANGLE_HINT,G.jsx("div",{children:G.jsxs(Nt,{children:[G.jsx(Nt.Target,{children:G.jsx(Ye,{size:"xs",color:"blue",onClick:y,children:"Tutorial"})}),G.jsx(Nt.Dropdown,{children:G.jsx("video",{width:"244",height:"294",autoPlay:!0,loop:!0,muted:!0,children:G.jsx("source",{src:"crop_example.mp4",type:"video/mp4"})})})]})})]}):G.jsx(ue,{size:"xs",c:"dimmed",children:n.OCR_AREA_SELECTED_HINT}),G.jsx(Ye,{size:"sm",variant:"light",disabled:c.length===0,loading:E.isPending||u,onClick:y,children:n.RECOGNIZE_SCORE})]}),x&&G.jsx(ut,{color:"blue",title:n.RECOGNIZED_NUMBERS,radius:"md",children:G.jsxs(kt,{gap:"xs",children:[G.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.2em"},children:[G.jsx(ue,{size:"sm",c:"cyan",children:"Perfect:"}),G.jsx(ue,{size:"sm",c:"cyan",children:x[0]>=0?x[0]:"?"}),G.jsx(ue,{size:"sm",c:"green",children:"Great:"}),G.jsx(ue,{size:"sm",c:"green",children:x[1]>=0?x[1]:"?"}),G.jsx(ue,{size:"sm",c:"yellow",children:"Good:"}),G.jsx(ue,{size:"sm",c:"yellow",children:x[2]>=0?x[2]:"?"}),G.jsx(ue,{size:"sm",c:"pink",children:"Bad:"}),G.jsx(ue,{size:"sm",c:"pink",children:x[3]>=0?x[3]:"?"}),G.jsx(ue,{size:"sm",c:"red",children:"Miss:"}),G.jsx(ue,{size:"sm",c:"red",children:x[4]>=0?x[4]:"?"}),G.jsx(ue,{size:"sm",children:"Combo:"}),G.jsx(ue,{size:"sm",children:x[5]>=0?x[5]:"?"}),G.jsx(ue,{size:"sm",fw:"bold",children:"Score:"}),G.jsx(ue,{size:"sm",fw:"bold",children:x[6]>=0?x[6]:"?"})]}),G.jsxs(rr,{gap:"xs",children:[G.jsx(Ye,{size:"xs",color:"blue",onClick:A,children:n.FILL_FORM}),G.jsx(Ye,{size:"xs",variant:"light",color:"gray",onClick:S,children:n.CANCEL})]})]})}),i&&G.jsxs(ue,{size:"xs",c:"red",children:[n.ERROR,": ",i]})]})},go=async e=>{const t=await se.getFilefromDataUrl(e,"image.jpg"),r=await se(t,{maxWidthOrHeight:1200,maxSizeMB:.1,initialQuality:.8});return se.getDataUrlFromFile(r)};var ot={},Sn;function po(){if(Sn)return ot;Sn=1,Object.defineProperty(ot,"__esModule",{value:!0});const e=new RegExp("^(\\d{4}):(\\d{2}):(\\d{2}) (\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,3}))?(?:([zZ])|([-+])(\\d{2}):(\\d{2}))?$");function t(n,i){let s=n.toString(),c=i-s.length;for(;c>0;)c-=1,s=`0${s}`;return s}function r(n){const i=e.exec(n);if(i==null)return new Date(NaN);const s=new Date,c=i[8]?0:i[9]?(Number(i[10])*60+Number(i[11]))*(i[9]==="+"?1:-1):0;return s.setUTCFullYear(Number(i[1])),s.setUTCMonth(Number(i[2])-1),s.setUTCDate(Number(i[3])),s.setUTCHours(Number(i[4])),s.setUTCMinutes(Number(i[5])+c),s.setUTCSeconds(Number(i[6])),s.setUTCMilliseconds(Number(i[7])||0),s}ot.parse=r;function o(n,i,s){if(isNaN(n.getTime()))return"";const c=t(n.getUTCFullYear(),4),p=t(n.getUTCMonth()+1,2),x=t(n.getUTCDate(),2),a=t(n.getUTCHours(),2),l=t(n.getUTCMinutes(),2),u=t(n.getUTCSeconds(),2),f=i?`.${Math.round(n.getUTCMilliseconds()/10)}`:"";return`${c}:${p}:${x} ${a}:${l}:${u}${f}${s?"Z":""}`}return ot.format=o,ot}var mo=po();function Z(e,t,r){const o=[];for(let n=0;n<r&&t+n<e.byteLength;n++)o.push(e.getUint8(t+n));return tt(o)}function xo(e,t,r){const o=[];for(let n=0;n<r&&t+n<e.byteLength;n+=2)o.push(e.getUint16(t+n));return tt(o)}function tt(e){return e.map(t=>String.fromCharCode(t)).join("")}function J(){for(let e=1;e<arguments.length;e++)for(const t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function Tr(e,t,r){let o=!1;Object.defineProperty(e,t,{get(){return o||(o=!0,Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:r.apply(e),writable:!0})),e[t]},configurable:!0,enumerable:!0})}function Ir(e){if(typeof btoa<"u")return btoa(typeof e=="string"?e:Array.prototype.reduce.call(new Uint8Array(e),(t,r)=>t+String.fromCharCode(r),""));if(!(typeof Buffer>"u"))return typeof Buffer.from!==void 0?Buffer.from(e).toString("base64"):new Buffer(e).toString("base64")}function Eo(e){const t=e.substring(e.indexOf(",")+1);if(e.indexOf(";base64")!==-1)return typeof atob<"u"?Uint8Array.from(atob(t),o=>o.charCodeAt(0)).buffer:typeof Buffer>"u"?void 0:typeof Buffer.from!==void 0?Buffer.from(t,"base64"):new Buffer(t,"base64");const r=decodeURIComponent(t);return typeof Buffer<"u"?typeof Buffer.from!==void 0?Buffer.from(r):new Buffer(r):Uint8Array.from(r,o=>o.charCodeAt(0)).buffer}let So=class{constructor(t){if(To(t))throw new Error("DataView: Passed buffer type is unsupported.");this.buffer=t,this.byteLength=this.buffer.length}getUint8(t){return this.buffer.readUInt8(t)}getUint16(t,r){return r?this.buffer.readUInt16LE(t):this.buffer.readUInt16BE(t)}getUint32(t,r){return r?this.buffer.readUInt32LE(t):this.buffer.readUInt32BE(t)}getInt32(t,r){return r?this.buffer.readInt32LE(t):this.buffer.readInt32BE(t)}};function To(e){return typeof e!="object"||e.length===void 0||e.readUInt8===void 0||e.readUInt16LE===void 0||e.readUInt16BE===void 0||e.readUInt32LE===void 0||e.readUInt32BE===void 0||e.readInt32LE===void 0||e.readInt32BE===void 0}function le(e){return e.map(t=>String.fromCharCode(t)).join("")}function jt(e){if(e.length>=8){const t=le(e.slice(0,8));if(t==="ASCII\0\0\0")return le(e.slice(8));if(t==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(t==="UNICODE\0")return"[Unicode encoded text]";if(t==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}function It(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}const Ht=18761,zt=19789,We={BIG_ENDIAN:zt,LITTLE_ENDIAN:Ht,getByteOrder:Io};function Io(e,t){if(e.getUint16(t)===Ht)return Ht;if(e.getUint16(t)===zt)return zt;throw new Error("Illegal byte order value. Faulty image.")}const Tn={isTiffFile:Ao,findTiffOffsets:Fo};function Ao(e){return!!e&&e.byteLength>=4&&bo(e)}function bo(e){const o=e.getUint16(0)===We.LITTLE_ENDIAN;return e.getUint16(2,o)===42}function Fo(){return{hasAppMarkers:!0,tiffHeaderOffset:0}}const In={isJpegFile:jo,findJpegOffsets:Ho},yo=2,_o=65496,An=2,Fe=4,xe=2,Co=2,Po=10,Ro=18,bn=33,Fn=79,yn=18,No=8,$t="ICC_PROFILE\0",Ar=Fe+$t.length,Uo=Ar+1,_n="MPF\0",br=65472,Fr=65474,Oo=65476,Do=65499,vo=65501,Mo=65498,yr=65504,an=65505,_r=65506,wo=65517,Lo=65519,ko=65534,Go=65535,Bo="JFIF",Xt="Exif",Cn="http://ns.adobe.com/xap/1.0/\0",Pn="http://ns.adobe.com/xmp/extension/\0",Rn="Photoshop 3.0";function jo(e){return!!e&&e.byteLength>=yo&&e.getUint16(0)===_o}function Ho(e){let t=An,r,o,n,i,s,c,p,x,a;for(;t+Fe+5<=e.byteLength;){if(zo(e,t))o=t+xe;else if($o(e,t))n=t+xe;else if(Zo(e,t))r=e.getUint16(t+xe),i=t+Co;else if(Wo(e,t))r=e.getUint16(t+xe),s=t+Po;else if(Ko(e,t))p||(p=[]),r=e.getUint16(t+xe),p.push(Vo(t,r));else if(qo(e,t))p||(p=[]),r=e.getUint16(t+xe),p.push(es(t,r));else if(ts(e,t))r=e.getUint16(t+xe),c=t+Ro;else if(Xo(e,t)){r=e.getUint16(t+xe);const l=t+yn,u=r-(yn-xe),f=e.getUint8(t+Ar),E=e.getUint8(t+Uo);x||(x=[]),x.push({offset:l,length:u,chunkNumber:f,chunksTotal:E})}else if(Yo(e,t))r=e.getUint16(t+xe),a=t+No;else if(ns(e,t))r=e.getUint16(t+xe);else if(rs(e,t)){t++;continue}else break;t+=xe+r}return{hasAppMarkers:t>An,fileDataOffset:o||n,jfifDataOffset:i,tiffHeaderOffset:s,iptcDataOffset:c,xmpChunks:p,iccChunks:x,mpfDataOffset:a}}function zo(e,t){return e.getUint16(t)===br}function $o(e,t){return e.getUint16(t)===Fr}function Xo(e,t){const r=$t.length;return e.getUint16(t)===_r&&Z(e,t+Fe,r)===$t}function Yo(e,t){const r=_n.length;return e.getUint16(t)===_r&&Z(e,t+Fe,r)===_n}function Zo(e,t){const r=Xt.length;return e.getUint16(t)===yr&&Z(e,t+Fe,r)===Bo&&e.getUint8(t+Fe+r)===0}function Wo(e,t){const r=Xt.length;return e.getUint16(t)===an&&Z(e,t+Fe,r)===Xt&&e.getUint8(t+Fe+r)===0}function Ko(e,t){return e.getUint16(t)===an&&Qo(e,t)}function Qo(e,t){const r=Cn.length;return Z(e,t+Fe,r)===Cn}function qo(e,t){return e.getUint16(t)===an&&Jo(e,t)}function Jo(e,t){const r=Pn.length;return Z(e,t+Fe,r)===Pn}function Vo(e,t){return{dataOffset:e+bn,length:t-(bn-xe)}}function es(e,t){return{dataOffset:e+Fn,length:t-(Fn-xe)}}function ts(e,t){const r=Rn.length;return e.getUint16(t)===wo&&Z(e,t+Fe,r)===Rn&&e.getUint8(t+Fe+r)===0}function ns(e,t){const r=e.getUint16(t);return r>=yr&&r<=Lo||r===ko||r===br||r===Fr||r===Oo||r===Do||r===vo||r===Mo}function rs(e,t){return e.getUint16(t)===Go}const Nn={isPngFile:ss,findPngOffsets:as},Yt=`PNG\r

`,At=4,Ne=4,ct=0,Ke=At,ge=At+Ne,Zt="XML:com.adobe.xmp\0",is="tEXt",Cr="iTXt",Pr="pHYs",Rr="tIME",os="eXIf";function ss(e){return!!e&&Z(e,0,Yt.length)===Yt}function as(e){const r={hasAppMarkers:!1};let o=Yt.length;for(;o+At+Ne<=e.byteLength;){if(cs(e,o))r.hasAppMarkers=!0,r.pngHeaderOffset=o+ge;else if(us(e,o)){const n=hs(e,o);n!==void 0&&(r.hasAppMarkers=!0,r.xmpChunks=[{dataOffset:n,length:e.getUint32(o+ct)-(n-(o+ge))}])}else if(ls(e,o)){r.hasAppMarkers=!0;const n=Z(e,o+Ke,Ne);r.pngTextChunks||(r.pngTextChunks=[]),r.pngTextChunks.push({length:e.getUint32(o+ct),type:n,offset:o+ge})}else fs(e,o)?(r.hasAppMarkers=!0,r.tiffHeaderOffset=o+ge):ds(e,o)&&(r.hasAppMarkers=!0,r.pngChunkOffsets||(r.pngChunkOffsets=[]),r.pngChunkOffsets.push(o+ct));o+=e.getUint32(o+ct)+At+Ne+4}return r}function cs(e,t){return Z(e,t+Ke,Ne)==="IHDR"}function us(e,t){return Z(e,t+Ke,Ne)==="iTXt"&&Z(e,t+ge,Zt.length)===Zt}function ls(e,t){const r="tEXt",o="iTXt",n=Z(e,t+Ke,Ne);return n===r||n===o}function fs(e,t){return Z(e,t+Ke,Ne)===os}function ds(e,t){const r=[Pr,Rr],o=Z(e,t+Ke,Ne);return r.includes(o)}function hs(e,t){t+=ge+Zt.length+1+1;let n=0;for(;n<2&&t<e.byteLength;)e.getUint8(t)===0&&n++,t++;if(!(n<2))return t}const Un={isHeicFile:gs,findHeicOffsets:ps};function gs(e){if(!e)return!1;const t="ftyp",r=4,o=["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"],i=Z(e,r+t.length,4);return Z(e,r,t.length)===t&&o.indexOf(i)!==-1}function ps(e){{const{offset:t,length:r}=ms(e);if(t===void 0)return{hasAppMarkers:!1};const o=Math.min(t+r,e.byteLength),{exifItemOffset:n,ilocOffset:i,colrOffset:s}=Ts(e,t,o),c=Is(e,n,i,o),p=As(e,s,o);return{hasAppMarkers:c!==void 0||p!==void 0,tiffHeaderOffset:c,iccChunks:p}}}function ms(e){let i=0;for(;i+4+4<=e.byteLength;){const s=Nr(e,i);if(s>=8&&Z(e,i+4,4)==="meta")return{offset:i,length:s};i+=s}return{offset:void 0,length:0}}function Nr(e,t){const o=e.getUint32(t);return xs(o)?e.byteLength-t:Es(o)&&Ss(e,t)?e.getUint32(t+12):o}function xs(e){return e===0}function Es(e){return e===1}function Ss(e,t){return e.getUint32(t+8)===0}function Ts(e,t,r){const i={ilocOffset:void 0,exifItemOffset:void 0,colrOffset:void 0};for(;t+4<=r&&(!i.ilocOffset||!i.exifItemOffset||!i.colrOffset);){const s=Z(e,t,4);s==="iloc"?i.ilocOffset=t:s==="Exif"?i.exifItemOffset=t+-4:s==="colr"&&(i.colrOffset=t+-4),t++}return i}function Is(e,t,r,o){if(!r||!t||t+2>o)return;const a=e.getUint16(t);for(r+=12;r+16<=o;){if(e.getUint16(r)===a){const u=e.getUint32(r+8);if(u+4<=e.byteLength){const E=e.getUint32(u)+4;return u+E}}r+=16}}function As(e,t,r){if(!t||t+12>r)return;const s=Z(e,t+8,4);if(!(s!=="prof"&&s!=="rICC"))return[{offset:t+12,length:Nr(e,t)-12,chunkNumber:1,chunksTotal:1}]}const On={isWebpFile:bs,findOffsets:Fs};function bs(e){const r="RIFF",n="WEBP";return!!e&&Z(e,0,r.length)===r&&Z(e,8,n.length)===n}function Fs(e){const o="Exif\0\0";let i=12,s=!1,c,p,x;for(;i+8<e.byteLength;){const a=Z(e,i,4),l=e.getUint32(i+4,!0);a==="EXIF"?(s=!0,Z(e,i+8,o.length)===o?c=i+8+o.length:c=i+8):a==="XMP "?(s=!0,p=[{dataOffset:i+8,length:l}]):a==="ICCP"&&(s=!0,x=[{offset:i+8,length:l,chunkNumber:1,chunksTotal:1}]),i+=8+(l%2===0?l:l+1)}return{hasAppMarkers:s,tiffHeaderOffset:c,xmpChunks:p,iccChunks:x}}const ys={parseAppMarkers:_s};function _s(e){if(Tn.isTiffFile(e))return Tn.findTiffOffsets();if(In.isJpegFile(e))return In.findJpegOffsets(e);if(Nn.isPngFile(e))return Nn.findPngOffsets(e);if(Un.isHeicFile(e))return Un.findHeicOffsets(e);if(On.isWebpFile(e))return On.findOffsets(e);throw new Error("Invalid image format")}const Ur={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},Wt={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},H={getAsciiValue:Cs,getByteAt:Or,getAsciiAt:Ps,getShortAt:Rs,getLongAt:bt,getRationalAt:Ns,getUndefinedAt:Us,getSlongAt:Kt,getSrationalAt:Os,getIfdPointerAt:Ds,typeSizes:Ur,tagTypes:Wt,getTypeSize:vs};function Cs(e){return e.map(t=>String.fromCharCode(t))}function Or(e,t){return e.getUint8(t)}function Ps(e,t){return e.getUint8(t)}function Rs(e,t,r){return e.getUint16(t,r===We.LITTLE_ENDIAN)}function bt(e,t,r){return e.getUint32(t,r===We.LITTLE_ENDIAN)}function Ns(e,t,r){return[bt(e,t,r),bt(e,t+4,r)]}function Us(e,t){return Or(e,t)}function Kt(e,t,r){return e.getInt32(t,r===We.LITTLE_ENDIAN)}function Os(e,t,r){return[Kt(e,t,r),Kt(e,t+4,r)]}function Ds(e,t,r){return bt(e,t,r)}function vs(e){if(Wt[e]===void 0)throw new Error("No such type found.");return Ur[Wt[e]]}const Y={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace(e){return e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(e){return e.map(t=>{if(t===49)return"Y";if(t===50)return"Cb";if(t===51)return"Cr";if(t===52)return"R";if(t===53)return"G";if(t===54)return"B"}).join("")},Contrast(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},CustomRendered(e){return e===0?"Normal process":e===1?"Custom process":"Unknown"},ExposureMode(e){return e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},ExposureProgram(e){return e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},ExposureTime(e){return e[0]>=e[1]?`${Math.round(e[0]/e[1])}`:e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${e[0]/e[1]}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700  7100K)":e===13?"Day white fluorescent (N 4600  5400K)":e===14?"Cool white fluorescent (W 3900  4500K)":e===15?"White fluorescent (WW 3200  3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown",MeteringMode(e){return e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},ResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},Saturation(e){return e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},SceneCaptureType(e){return e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},Sharpness(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},ShutterSpeedValue(e){const t=Math.pow(2,e[0]/e[1]);return t<=1?`${Math.round(1/t)}`:`1/${Math.round(t)}`},WhiteBalance(e){return e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])},Ms={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:Y.XResolution},283:{name:"YResolution",description:Y.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:Y.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{const t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(r=>t[r]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(t=>""+t[0]/t[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(t=>""+t[0]/t[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:Y.LightSource},50779:{name:"CalibrationIlluminant2",description:Y.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"},ws={33434:{name:"ExposureTime",description:Y.ExposureTime},33437:{name:"FNumber",description:Y.FNumber},34850:{name:"ExposureProgram",description:Y.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>le(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:Y.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:Y.ShutterSpeedValue},37378:{name:"ApertureValue",description:Y.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:Y.MeteringMode},37384:{name:"LightSource",description:Y.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:Y.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:jt},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" "},40960:{name:"FlashpixVersion",description:e=>e.map(t=>String.fromCharCode(t)).join("")},40961:{name:"ColorSpace",description:Y.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:Y.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,t])=>`X: ${e}, Y: ${t}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:Y.CustomRendered},41986:{name:"ExposureMode",description:Y.ExposureMode},41987:{name:"WhiteBalance",description:Y.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:e=>e===0?"Unknown":e},41990:{name:"SceneCaptureType",description:Y.SceneCaptureType},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:Y.Contrast},41993:{name:"Saturation",description:Y.Saturation},41994:{name:"Sharpness",description:Y.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{const t=`${e[0][0]/e[0][1]}-${e[1][0]/e[1][1]} mm`;return e[3][1]===0?`${t} f/?`:`${t} f/${1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},Ls={0:{name:"GPSVersionID",description:e=>e[0]===2&&e[1]===2&&e[2]===0&&e[3]===0?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:It},3:{name:"GPSLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:It},5:{name:"GPSAltitudeRef",description:e=>e===0?"Sea level":e===1?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map(([t,r])=>{const o=t/r;return/^\d(\.|$)/.test(`${o}`)?`0${o}`:o}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{const t=e.join("");return t==="A"?"Measurement in progress":t==="V"?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{const t=e.join("");return t==="2"?"2-dimensional measurement":t==="3"?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers per hour":t==="M"?"Miles per hour":t==="N"?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers":t==="M"?"Miles":t==="N"?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:jt},28:{name:"GPSAreaInformation",description:jt},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>e===0?"Measurement without differential correction":e===1?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"},ks={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>le(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"},Gs={45056:{name:"MPFVersion",description:e=>le(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"},Dn=J({},Ms,ws),ke={"0th":Dn,exif:Dn,gps:Ls,interoperability:ks,mpf:Gs},vn="Exif IFD Pointer",Mn="GPS Info IFD Pointer",wn="Interoperability IFD Pointer",Bs={1:H.getByteAt,2:H.getAsciiAt,3:H.getShortAt,4:H.getLongAt,5:H.getRationalAt,7:H.getUndefinedAt,9:H.getSlongAt,10:H.getSrationalAt,13:H.getIfdPointerAt},Ln={read:js,readMpf:Ys};function js(e,t,r){const o=We.getByteOrder(e,t);let n=Hs(e,t,o,r);return n=zs(n,e,t,o,r),n=$s(n,e,t,o,r),n=Xs(n,e,t,o,r),n}function Hs(e,t,r,o){return nt(e,"0th",t,Dr(e,t,r),r,o)}function Dr(e,t,r){return t+H.getLongAt(e,t+4,r)}function zs(e,t,r,o,n){return e[vn]!==void 0?J(e,nt(t,"exif",r,r+e[vn].value,o,n)):e}function $s(e,t,r,o,n){return e[Mn]!==void 0?J(e,nt(t,"gps",r,r+e[Mn].value,o,n)):e}function Xs(e,t,r,o,n){return e[wn]!==void 0?J(e,nt(t,"interoperability",r,r+e[wn].value,o,n)):e}function Ys(e,t,r){const o=We.getByteOrder(e,t),n=nt(e,"mpf",t,Dr(e,t,o),o,r);return Zs(e,t,n,o)}function Zs(e,t,r,o){if(!r.MPEntry)return r;const i=[];for(let s=0;s<Math.ceil(r.MPEntry.value.length/16);s++){i[s]={};const c=st(r.MPEntry.value,s*16,H.getTypeSize("LONG"),o);i[s].ImageFlags=Ws(c),i[s].ImageFormat=Ks(c),i[s].ImageType=Qs(c);const p=st(r.MPEntry.value,s*16+4,H.getTypeSize("LONG"),o);i[s].ImageSize={value:p,description:""+p};const x=qs(s)?0:st(r.MPEntry.value,s*16+8,H.getTypeSize("LONG"),o)+t;i[s].ImageOffset={value:x,description:""+x};const a=st(r.MPEntry.value,s*16+12,H.getTypeSize("SHORT"),o);i[s].DependentImage1EntryNumber={value:a,description:""+a};const l=st(r.MPEntry.value,s*16+14,H.getTypeSize("SHORT"),o);i[s].DependentImage2EntryNumber={value:l,description:""+l},i[s].image=e.buffer.slice(x,x+p),Tr(i[s],"base64",function(){return Ir(this.image)})}return r.Images=i,r}function st(e,t,r,o){if(o===We.LITTLE_ENDIAN){let i=0;for(let s=0;s<r;s++)i+=e[t+s]<<8*s;return i}let n=0;for(let i=0;i<r;i++)n+=e[t+i]<<8*(r-1-i);return n}function Ws(e){const t=[e>>31&1,e>>30&1,e>>29&1],r=[];return t[0]&&r.push("Dependent Parent Image"),t[1]&&r.push("Dependent Child Image"),t[2]&&r.push("Representative Image"),{value:t,description:r.join(", ")||"None"}}function Ks(e){const t=e>>24&7;return{value:t,description:t===0?"JPEG":"Unknown"}}function Qs(e){const t=e&16777215;return{value:t,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[t]||"Unknown"}}function qs(e){return e===0}function nt(e,t,r,o,n,i){const s=H.getTypeSize("SHORT"),c=12,p={},x=Js(e,o,n);o+=s;for(let a=0;a<x&&!(o+c>e.byteLength);a++){const l=Vs(e,t,r,o,n,i);l!==void 0&&(p[l.name]={id:l.id,value:l.value,description:l.description}),o+=c}if(o<e.byteLength-H.getTypeSize("LONG")){const a=H.getLongAt(e,o,n);a!==0&&(p.Thumbnail=nt(e,t,r,r+a,n,!0))}return p}function Js(e,t,r){return t+H.getTypeSize("SHORT")<=e.byteLength?H.getShortAt(e,t,r):0}function Vs(e,t,r,o,n,i){const c=H.getTypeSize("SHORT"),p=c+H.getTypeSize("SHORT"),x=p+H.getTypeSize("LONG"),a=H.getShortAt(e,o,n),l=H.getShortAt(e,o+c,n),u=H.getLongAt(e,o+p,n);let f;if(H.typeSizes[l]===void 0||!i&&ke[t][a]===void 0)return;if(ea(l,u))f=kn(e,o+x,l,u,n);else{const A=H.getLongAt(e,o+x,n);if(ta(e,r,A,l,u)){const S=a===33723;f=kn(e,r+A,l,u,n,S)}else f="<faulty value>"}l===H.tagTypes.ASCII&&(f=na(f),f=ra(f));let E=`undefined-${a}`,y=f;if(ke[t][a]!==void 0)if(ke[t][a].name!==void 0&&ke[t][a].description!==void 0){E=ke[t][a].name;try{y=ke[t][a].description(f)}catch{y=Gn(f)}}else l===H.tagTypes.RATIONAL||l===H.tagTypes.SRATIONAL?(E=ke[t][a],y=""+f[0]/f[1]):(E=ke[t][a],y=Gn(f));return{id:a,name:E,value:f,description:y}}function ea(e,t){return H.typeSizes[e]*t<=H.getTypeSize("LONG")}function kn(e,t,r,o,n,i=!1){let s=[];i&&(o=o*H.typeSizes[r],r=H.tagTypes.BYTE);for(let c=0;c<o;c++)s.push(Bs[r](e,t,n)),t+=H.typeSizes[r];return r===H.tagTypes.ASCII?s=H.getAsciiValue(s):s.length===1&&(s=s[0]),s}function ta(e,t,r,o,n){return t+r+H.typeSizes[o]*n<=e.byteLength}function na(e){const t=[];let r=0;for(let o=0;o<e.length;o++){if(e[o]==="\0"){r++;continue}t[r]===void 0&&(t[r]=""),t[r]+=e[o]}return t}function ra(e){try{return e.map(t=>decodeURIComponent(escape(t)))}catch{return e}}function Gn(e){return e instanceof Array?e.join(", "):e}const ia={read:oa};function oa(e,t){const r=sa(e,t),o=la(e,t,r);return{"Bits Per Sample":aa(e,t,r),"Image Height":ca(e,t,r),"Image Width":ua(e,t,r),"Color Components":o,Subsampling:o&&fa(e,t,o.value,r)}}function sa(e,t){return H.getShortAt(e,t)}function aa(e,t,r){if(3>r)return;const i=H.getByteAt(e,t+2);return{value:i,description:""+i}}function ca(e,t,r){if(5>r)return;const i=H.getShortAt(e,t+3);return{value:i,description:`${i}px`}}function ua(e,t,r){if(7>r)return;const i=H.getShortAt(e,t+5);return{value:i,description:`${i}px`}}function la(e,t,r){if(8>r)return;const i=H.getByteAt(e,t+7);return{value:i,description:""+i}}function fa(e,t,r,o){if(8+3*r>o)return;const s=[];for(let c=0;c<r;c++){const p=t+8+c*3;s.push([H.getByteAt(e,p),H.getByteAt(e,p+1),H.getByteAt(e,p+2)])}return{value:s,description:s.length>1?da(s)+ha(s):""}}function da(e){const t={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(r=>t[r[0]]).join("")}function ha(e){const t={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return e.length===0||e[0][1]===void 0||t[e[0][1]]===void 0?"":t[e[0][1]]}const ga={read:pa};function pa(e,t){const r=ma(e,t),o=Aa(e,t,r),n=ba(e,t,r),i={"JFIF Version":xa(e,t,r),"Resolution Unit":Ea(e,t,r),XResolution:Ta(e,t,r),YResolution:Ia(e,t,r),"JFIF Thumbnail Width":o,"JFIF Thumbnail Height":n};if(o!==void 0&&n!==void 0){const s=Fa(e,t,3*o.value*n.value,r);s&&(i["JFIF Thumbnail"]=s)}for(const s in i)i[s]===void 0&&delete i[s];return i}function ma(e,t){return H.getShortAt(e,t)}function xa(e,t,r){if(9>r)return;const i=H.getByteAt(e,t+7),s=H.getByteAt(e,t+7+1);return{value:i*256+s,description:i+"."+s}}function Ea(e,t,r){if(10>r)return;const i=H.getByteAt(e,t+9);return{value:i,description:Sa(i)}}function Sa(e){return e===0?"None":e===1?"inches":e===2?"cm":"Unknown"}function Ta(e,t,r){if(12>r)return;const i=H.getShortAt(e,t+10);return{value:i,description:""+i}}function Ia(e,t,r){if(14>r)return;const i=H.getShortAt(e,t+12);return{value:i,description:""+i}}function Aa(e,t,r){if(15>r)return;const i=H.getByteAt(e,t+14);return{value:i,description:`${i}px`}}function ba(e,t,r){if(16>r)return;const i=H.getByteAt(e,t+15);return{value:i,description:`${i}px`}}function Fa(e,t,r,o){return r===0||16+r>o?void 0:{value:e.buffer.slice(t+16,t+16+r),description:"<24-bit RGB pixel data>"}}const Ge={iptc:{256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:Dt},336:{name:"Time Sent",description:vt},346:{name:"Coded Character Set",description:Bn,encoding_name:Bn},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>le(e)==="01"?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:e=>{const t=le(e).split(":");return t[2]+(t[3]?"/"+t[3]:"")+(t[4]?"/"+t[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{const t=le(e);return t==="01"?"Object Kill":t==="02"?"Object Replace":t==="03"?"Object Append":t==="04"?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:Dt},572:{name:"Time Created",description:vt},574:{name:"Digital Creation Date",description:Dt},575:{name:"Digital Creation Time",description:vt},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{const t=le(e);return t==="a"?"morning":t==="p"?"evening":t==="b"?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{const t=le(e);return t==="P"?"Portrait":t==="L"?"Landscape":t==="S"?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{const t=le(e),r=t.charAt(0),o=t.charAt(1);let n="";return r==="1"?n+="Mono":r==="2"&&(n+="Stereo"),o==="A"?n+=", actuality":o==="C"?n+=", question and answer session":o==="M"?n+=", music, transmitted by itself":o==="Q"?n+=", response to a question":o==="R"?n+=", raw sound":o==="S"?n+=", scener":o==="V"?n+=", voicer":o==="W"&&(n+=", wrap"),n!==""?n:t}},663:{name:"Audio Sampling Rate",description:e=>parseInt(le(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{const t=parseInt(le(e),10);return t+(t===1?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{const t=le(e);return t.length>=6?t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2):t}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>e.length===2?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(e.length===2){const t=(e[0]<<8)+e[1];return t===0?"No ObjectData":t===1?"IPTC-NAA Digital Newsphoto Parameter Record":t===2?"IPTC7901 Recommended Message Format":t===3?"Tagged Image File Format (Adobe/Aldus Image data)":t===4?"Illustrator (Adobe Graphics data)":t===5?"AppleSingle (Apple Computer Inc)":t===6?"NAA 89-3 (ANPA 1312)":t===7?"MacBinary II":t===8?"IPTC Unstructured Character Oriented File Format (UCOFF)":t===9?"United Press International ANPA 1312 variant":t===10?"United Press International Down-Load Message":t===11?"JPEG File Interchange (JFIF)":t===12?"Photo-CD Image-Pac (Eastman Kodak)":t===13?"Microsoft Bit Mapped Graphics File [*.BMP]":t===14?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":t===15?"Audio plus Moving Video [*.AVI] (Microsoft)":t===16?"PC DOS/Windows Executable Files [*.COM][*.EXE]":t===17?"Compressed Binary File [*.ZIP] (PKWare Inc)":t===18?"Audio Interchange File Format AIFF (Apple Computer Inc)":t===19?"RIFF Wave (Microsoft Corporation)":t===20?"Freehand (Macromedia/Aldus)":t===21?'Hypertext Markup Language "HTML" (The Internet Society)':t===22?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":t===23?"MPEG 2 Audio Layer 3, ISO/IEC":t===24?"Portable Document File (*.PDF) Adobe":t===25?"News Industry Text Format (NITF)":t===26?"Tape Archive (*.TAR)":t===27?"Tidningarnas Telegrambyr NITF version (TTNITF DTD)":t===28?"Ritzaus Bureau NITF version (RBNITF DTD)":t===29?"Corel Draw [*.CDR]":`Unknown format ${t}`}return le(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,t)=>{const r={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},o=le(e);if(t["ObjectData Preview File Format"]){const n=le(t["ObjectData Preview File Format"].value);if(r[n]&&r[n][o])return r[n][o]}return o}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}}}};function Dt(e){const t=le(e);return t.length>=8?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2):t}function vt(e){const t=le(e);let r=t;return t.length>=6&&(r=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2),t.length===11&&(r+=t.substr(6,1)+t.substr(7,2)+":"+t.substr(9,2))),r}function Bn(e){const t=le(e);return t==="\x1B%G"?"UTF-8":t==="\x1B%5"?"Windows-1252":t==="\x1B%/G"?"UTF-8 Level 1":t==="\x1B%/H"?"UTF-8 Level 2":t==="\x1B%/I"?"UTF-8 Level 3":t==="\x1B/A"?"ISO-8859-1":t==="\x1B/B"?"ISO-8859-2":t==="\x1B/C"?"ISO-8859-3":t==="\x1B/D"?"ISO-8859-4":t==="\x1B/@"?"ISO-8859-5":t==="\x1B/G"?"ISO-8859-6":t==="\x1B/F"?"ISO-8859-7":t==="\x1B/H"?"ISO-8859-8":"Unknown"}const ya={get:_a};function _a(){if(typeof TextDecoder<"u")return TextDecoder}const Ca=5,vr={decode:Pa,TAG_HEADER_SIZE:Ca};function Pa(e,t){const r=ya.get();if(typeof r<"u"&&e!==void 0)try{return new r(e).decode(Uint8Array.from(t))}catch{}const o=t.map(n=>String.fromCharCode(n)).join("");return Ra(o)}function Ra(e){try{return decodeURIComponent(escape(e))}catch{return e}}const Na=943868237,Mr=4,Mt=Mr+8,Ua=1028,wr=5,jn={read:Oa};function Oa(e,t,r){try{if(Array.isArray(e))return Hn(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,r);const{naaBlock:o,dataOffset:n}=Da(e,t);return Hn(e,o,n,r)}catch{return{}}}function Da(e,t){for(;t+Mt<=e.byteLength;){const r=va(e,t);if(Ma(r))return{naaBlock:r,dataOffset:t+Mt};t+=Mt+r.size+wa(r)}throw new Error("No IPTC NAA resource block.")}function va(e,t){if(e.getUint32(t,!1)!==Na)throw new Error("Not an IPTC resource block.");return{type:e.getUint16(t+Mr),size:e.getUint16(t+10)}}function Ma(e){return e.type===Ua}function wa(e){return e.size%2!==0?1:0}function Hn(e,t,r,o){const n={};let i;const s=r+t.size;for(;r<s&&r<e.byteLength;){const{tag:c,tagSize:p}=La(e,r,n,i,o);if(c===null)break;c&&("encoding"in c&&(i=c.encoding),n[c.name]===void 0||c.repeatable===void 0?n[c.name]={id:c.id,value:c.value,description:c.description}:(n[c.name]instanceof Array||(n[c.name]=[{id:n[c.name].id,value:n[c.name].value,description:n[c.name].description}]),n[c.name].push({id:c.id,value:c.value,description:c.description}))),r+=wr+p}return n}function La(e,t,r,o,n){if(ka(e,t))return{tag:null,tagSize:0};const c=e.getUint16(t+1),p=e.getUint16(t+3);if(!n&&!Ge.iptc[c])return{tag:void 0,tagSize:p};const x=Ga(e,t+wr,p),a={id:c,name:Ba(Ge.iptc[c],c,x),value:x,description:za(Ge.iptc[c],x,r,o)};return Ya(c)&&(a.repeatable=!0),Za(c)&&(a.encoding=Ge.iptc[c].encoding_name(x)),{tag:a,tagSize:p}}function ka(e,t){return e.getUint8(t)!==28}function Ga(e,t,r){const o=[];for(let n=0;n<r;n++)o.push(e.getUint8(t+n));return o}function Ba(e,t,r){return e?ja(e)?e:Ha(e)?e.name(r):e.name:`undefined-${t}`}function ja(e){return typeof e=="string"}function Ha(e){return typeof e.name=="function"}function za(e,t,r,o){if(Xa(e))try{return e.description(t,r)}catch{}return $a(e,t)?vr.decode(o,t):t}function $a(e,t){return e&&t instanceof Array}function Xa(e){return e&&e.description!==void 0}function Ya(e){return Ge.iptc[e]&&Ge.iptc[e].repeatable}function Za(e){return Ge.iptc[e]&&Ge.iptc[e].encoding_name!==void 0}const ht={"tiff:Orientation"(e){return e==="1"?"Horizontal (normal)":e==="2"?"Mirror horizontal":e==="3"?"Rotate 180":e==="4"?"Mirror vertical":e==="5"?"Mirror horizontal and rotate 270 CW":e==="6"?"Rotate 90 CW":e==="7"?"Mirror horizontal and rotate 90 CW":e==="8"?"Rotate 270 CW":e},"tiff:ResolutionUnit":e=>Y.ResolutionUnit(parseInt(e,10)),"tiff:XResolution":e=>Je(Y.XResolution,e),"tiff:YResolution":e=>Je(Y.YResolution,e),"exif:ApertureValue":e=>Je(Y.ApertureValue,e),"exif:GPSLatitude":zn,"exif:GPSLongitude":zn,"exif:FNumber":e=>Je(Y.FNumber,e),"exif:FocalLength":e=>Je(Y.FocalLength,e),"exif:FocalPlaneResolutionUnit":e=>Y.FocalPlaneResolutionUnit(parseInt(e,10)),"exif:ColorSpace":e=>Y.ColorSpace(Wa(e)),"exif:ComponentsConfiguration"(e,t){if(/^\d, \d, \d, \d$/.test(t)){const r=t.split(", ").map(o=>o.charCodeAt(0));return Y.ComponentsConfiguration(r)}return t},"exif:Contrast":e=>Y.Contrast(parseInt(e,10)),"exif:CustomRendered":e=>Y.CustomRendered(parseInt(e,10)),"exif:ExposureMode":e=>Y.ExposureMode(parseInt(e,10)),"exif:ExposureProgram":e=>Y.ExposureProgram(parseInt(e,10)),"exif:ExposureTime"(e){return Lr(e)?Y.ExposureTime(e.split("/").map(t=>parseInt(t,10))):e},"exif:MeteringMode":e=>Y.MeteringMode(parseInt(e,10)),"exif:Saturation":e=>Y.Saturation(parseInt(e,10)),"exif:SceneCaptureType":e=>Y.SceneCaptureType(parseInt(e,10)),"exif:Sharpness":e=>Y.Sharpness(parseInt(e,10)),"exif:ShutterSpeedValue":e=>Je(Y.ShutterSpeedValue,e),"exif:WhiteBalance":e=>Y.WhiteBalance(parseInt(e,10))};function Je(e,t){return Lr(t)?e(t.split("/")):t}function Wa(e){return e.substring(0,2)==="0x"?parseInt(e.substring(2),16):parseInt(e,10)}function Lr(e){return/^-?\d+\/-?\d+$/.test(e)}function zn(e){const[t,r]=e.split(",");if(t!==void 0&&r!==void 0){const o=parseFloat(t),n=parseFloat(r),i=r.charAt(r.length-1);if(!Number.isNaN(o)&&!Number.isNaN(n))return""+(o+n/60)+i}return e}const Ka={get:Qa};function Qa(){if(typeof DOMParser<"u")return DOMParser;try{return __non_webpack_require__("@xmldom/xmldom").DOMParser}catch{return}}const $n={read:qa};function qa(e,t){return typeof e=="string"?Yn({},e):Ja(e,t).reduce(Yn,{})}function Ja(e,t){if(t.length===0)return[];const r=[Xn(e,t.slice(0,1))];return t.length>1&&r.push(Xn(e,t.slice(1))),r}function Xn(e,t){const r=t.reduce((i,s)=>i+s.length,0),o=new Uint8Array(r);let n=0;for(let i=0;i<t.length;i++){const s=t[i],c=e.buffer.slice(s.dataOffset,s.dataOffset+s.length);o.set(new Uint8Array(c),n),n+=s.length}return new DataView(o.buffer)}function Yn(e,t){try{const{doc:r,raw:o}=Va(t);e._raw=(e._raw||"")+o;const n=kr(r);return J(e,Br(Gr(n,!0)))}catch{return e}}function Va(e){const t=Ka.get();if(!t)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),new Error;const r=new t,o=typeof e=="string"?e:Z(e,0,e.byteLength),n=r.parseFromString(ec(o),"application/xml");if(n.documentElement.nodeName==="parsererror")throw new Error(n.documentElement.textContent);return{doc:n,raw:o}}function ec(e){return e.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")}function kr(e){for(let t=0;t<e.childNodes.length;t++){if(e.childNodes[t].tagName==="x:xmpmeta")return kr(e.childNodes[t]);if(e.childNodes[t].tagName==="rdf:RDF")return e.childNodes[t]}throw new Error}function Gr(e,t=!1){const r=tc(e);return nc(r)?t?{}:rc(r[0]):ic(r)}function tc(e){const t=[];for(let r=0;r<e.childNodes.length;r++)t.push(e.childNodes[r]);return t}function nc(e){return e.length===1&&e[0].nodeName==="#text"}function rc(e){return e.nodeValue}function ic(e){const t={};return e.forEach(r=>{if(oc(r)){const o=sc(r);t[r.nodeName]!==void 0?(Array.isArray(t[r.nodeName])||(t[r.nodeName]=[t[r.nodeName]]),t[r.nodeName].push(o)):t[r.nodeName]=o}}),t}function oc(e){return e.nodeName&&e.nodeName!=="#text"}function sc(e){return{attributes:ac(e),value:Gr(e)}}function ac(e){const t={};for(let r=0;r<e.attributes.length;r++)t[e.attributes[r].nodeName]=decodeURIComponent(escape(e.attributes[r].value));return t}function Br(e){const t={};if(typeof e=="string")return e;for(const r in e){let o=e[r];Array.isArray(o)||(o=[o]),o.forEach(n=>{J(t,cn(n.attributes)),typeof n.value=="object"&&J(t,jr(n.value))})}return t}function cn(e){const t={};for(const r in e)cc(r)&&(t[_t(r)]={value:e[r],attributes:{},description:De(e[r],r)});return t}function cc(e){return e!=="rdf:parseType"&&!yt(e)}function yt(e){return e.split(":")[0]==="xmlns"}function _t(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function De(e,t=void 0){if(Array.isArray(e)){const r=uc(e);return t&&typeof ht[t]=="function"?ht[t](e,r):r}if(typeof e=="object")return lc(e);try{return t&&typeof ht[t]=="function"?ht[t](e):decodeURIComponent(escape(e))}catch{return e}}function uc(e){return e.map(t=>t.value!==void 0?De(t.value):De(t)).join(", ")}function lc(e){const t=[];for(const r in e)t.push(`${fc(r)}: ${De(e[r].value)}`);return t.join("; ")}function fc(e){return e==="CiAdrCity"?"CreatorCity":e==="CiAdrCtry"?"CreatorCountry":e==="CiAdrExtadr"?"CreatorAddress":e==="CiAdrPcode"?"CreatorPostalCode":e==="CiAdrRegion"?"CreatorRegion":e==="CiEmailWork"?"CreatorWorkEmail":e==="CiTelWork"?"CreatorWorkPhone":e==="CiUrlWork"?"CreatorWorkUrl":e}function jr(e){const t={};for(const r in e)yt(r)||(t[_t(r)]=dc(e[r],r));return t}function dc(e,t){return Hr(e)?zr(e,t):$r(e)?Xr(e,t):Yr(e)?Zr(e,t):pc(e)?mc(e,t):Kr(e,t)}function Hr(e){return e.attributes["rdf:parseType"]==="Resource"&&e.value["rdf:value"]!==void 0||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]!==void 0}function zr(e,t){const r=ft(e);e.value["rdf:Description"]!==void 0&&(e=e.value["rdf:Description"]),J(r,ft(e),hc(e));const o=gc(e);return{value:o,attributes:r,description:De(o,t)}}function ft(e){const t={};for(const r in e.attributes)r!=="rdf:parseType"&&r!=="rdf:resource"&&!yt(r)&&(t[_t(r)]=e.attributes[r]);return t}function hc(e){const t={};for(const r in e.value)r!=="rdf:value"&&!yt(r)&&(t[_t(r)]=e.value[r].value);return t}function gc(e){return Qr(e.value["rdf:value"])||e.value["rdf:value"].value}function $r(e){return e.attributes["rdf:parseType"]==="Resource"||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]===void 0}function Xr(e,t){const r={value:{},attributes:{}};return e.value["rdf:Description"]!==void 0&&(J(r.value,cn(e.value["rdf:Description"].attributes)),J(r.attributes,ft(e)),e=e.value["rdf:Description"]),J(r.value,jr(e.value)),r.description=De(r.value,t),r}function Yr(e){return Object.keys(e.value).length===0&&e.attributes["xml:lang"]===void 0&&e.attributes["rdf:resource"]===void 0}function Zr(e,t){const r=cn(e.attributes);return{value:r,attributes:{},description:De(r,t)}}function pc(e){return Wr(e.value)!==void 0}function Wr(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function mc(e,t){let r=Wr(e.value).value["rdf:li"];const o=ft(e),n=[];return r===void 0?r=[]:Array.isArray(r)||(r=[r]),r.forEach(i=>{n.push(xc(i))}),{value:n,attributes:o,description:De(n,t)}}function xc(e){return Hr(e)?zr(e):$r(e)?Xr(e).value:Yr(e)?Zr(e).value:Kr(e)}function Kr(e,t){const r=Qr(e)||Br(e.value);return{value:r,attributes:ft(e),description:De(r,t)}}function Qr(e){return e.attributes&&e.attributes["rdf:resource"]}const Zn={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},Wn={4:{name:"Preferred CMM type",value:(e,t)=>Z(e,t,4),description:e=>e!==null?wt(e):""},8:{name:"Profile Version",value:(e,t)=>e.getUint8(t).toString(10)+"."+(e.getUint8(t+1)>>4).toString(10)+"."+(e.getUint8(t+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,t)=>Z(e,t,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,t)=>Z(e,t,4)},20:{name:"Connection Space",value:(e,t)=>Z(e,t,4)},24:{name:"ICC Profile Date",value:(e,t)=>Ec(e,t).toISOString()},36:{name:"ICC Signature",value:(e,t)=>Sc(e.buffer.slice(t,t+4))},40:{name:"Primary Platform",value:(e,t)=>Z(e,t,4),description:e=>wt(e)},48:{name:"Device Manufacturer",value:(e,t)=>Z(e,t,4),description:e=>wt(e)},52:{name:"Device Model Number",value:(e,t)=>Z(e,t,4)},64:{name:"Rendering Intent",value:(e,t)=>e.getUint32(t),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,t)=>Z(e,t,4)}};function Ec(e,t){const r=e.getUint16(t),o=e.getUint16(t+2)-1,n=e.getUint16(t+4),i=e.getUint16(t+6),s=e.getUint16(t+8),c=e.getUint16(t+10);return new Date(Date.UTC(r,o,n,i,s,c))}function Sc(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function wt(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}const Kn={read:Pc},Tc=84,Ic=128,Ac="acsp",bc="desc",Fc="mluc",yc="text",_c="sig ",Cc=12;function Pc(e,t){try{const r=t.reduce((s,c)=>s+c.length,0),o=new Uint8Array(r);let n=0;const i=Rc(e);for(let s=1;s<=t.length;s++){const c=t.find(a=>a.chunkNumber===s);if(!c)throw new Error(`ICC chunk ${s} not found`);const p=i.slice(c.offset,c.offset+c.length),x=new Uint8Array(p);o.set(x,n),n+=x.length}return Oc(new DataView(o.buffer))}catch{return{}}}function Rc(e){return Array.isArray(e)?new DataView(Uint8Array.from(e).buffer).buffer:e.buffer}function Nc(e){return e.length<Ic+4}function Uc(e,t){return e.length<t+Cc}function Oc(e){const t=e.buffer,r=e.getUint32();if(e.byteLength!==r)throw new Error("ICC profile length not matching");if(e.length<Tc)throw new Error("ICC profile too short");const o={},n=Object.keys(Wn);for(let p=0;p<n.length;p++){const x=n[p],a=Wn[x],l=a.value(e,parseInt(x,10));let u=l;a.description&&(u=a.description(l)),o[a.name]={value:l,description:u}}if(gt(t.slice(36,40))!==Ac)throw new Error("ICC profile: missing signature");if(Nc(t))return o;const s=e.getUint32(128);let c=132;for(let p=0;p<s;p++){if(Uc(t,c))return o;const x=Z(e,c,4),a=e.getUint32(c+4),l=e.getUint32(c+8);if(a>t.length)return o;const u=Z(e,a,4);if(u===bc){const f=e.getUint32(a+8);if(f>l)return o;const E=gt(t.slice(a+12,a+f+11));at(o,x,E)}else if(u===Fc){const f=e.getUint32(a+8),E=e.getUint32(a+12);let y=a+16;const A=[];for(let S=0;S<f;S++){const U=Z(e,y+0,2),D=Z(e,y+2,2),N=e.getUint32(y+4),L=e.getUint32(y+8),T=xo(e,a+L,N);A.push({languageCode:U,countryCode:D,text:T}),y+=E}if(f===1)at(o,x,A[0].text);else{const S={};for(let U=0;U<A.length;U++)S[`${A[U].languageCode}-${A[U].countryCode}`]=A[U].text;at(o,x,S)}}else if(u===yc){const f=gt(t.slice(a+8,a+l-7));at(o,x,f)}else if(u===_c){const f=gt(t.slice(a+8,a+12));at(o,x,f)}c=c+12}return o}function gt(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function at(e,t,r){Zn[t]?e[Zn[t].name]={value:r,description:r}:e[t]={value:r,description:r}}const Dc={read:vc};function vc(e,t){return{"Image Width":Mc(e,t),"Image Height":wc(e,t),"Bit Depth":Lc(e,t),"Color Type":kc(e,t),Compression:Gc(e,t),Filter:Bc(e,t),Interlace:jc(e,t)}}function Mc(e,t){if(t+0+4>e.byteLength)return;const n=H.getLongAt(e,t);return{value:n,description:`${n}px`}}function wc(e,t){if(t+4+4>e.byteLength)return;const n=H.getLongAt(e,t+4);return{value:n,description:`${n}px`}}function Lc(e,t){if(t+8+1>e.byteLength)return;const n=H.getByteAt(e,t+8);return{value:n,description:`${n}`}}function kc(e,t){const n={0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"};if(t+9+1>e.byteLength)return;const i=H.getByteAt(e,t+9);return{value:i,description:n[i]||"Unknown"}}function Gc(e,t){if(t+10+1>e.byteLength)return;const n=H.getByteAt(e,t+10);return{value:n,description:n===0?"Deflate/Inflate":"Unknown"}}function Bc(e,t){if(t+11+1>e.byteLength)return;const n=H.getByteAt(e,t+11);return{value:n,description:n===0?"Adaptive":"Unknown"}}function jc(e,t){const n={0:"Noninterlaced",1:"Adam7 Interlace"};if(t+12+1>e.byteLength)return;const i=H.getByteAt(e,t+12);return{value:i,description:n[i]||"Unknown"}}const Hc={read:Xc},Qt="STATE_KEYWORD",qt="STATE_COMPRESSION",Jt="STATE_LANG",qr="STATE_TRANSLATED_KEYWORD",zc="STATE_TEXT",$c=2;function Xc(e,t){return t.reduce((r,{offset:o,length:n,type:i})=>{const{name:s,value:c,description:p}=Yc(e,o,n,i);return s&&(r[s]={value:c,description:p}),r},{})}function Yc(e,t,r,o){const n=[],i=[],s=[];let c=Qt;for(let x=0;x<r&&t+x<e.byteLength;x++){if(c===qt){if(e.getUint8(t+x)!==0)return{};x+=$c,c=Qn(o,c)}const a=e.getUint8(t+x);a===0?c=Qn(o,c):c===Qt?n.push(a):c===Jt?i.push(a):c===qr||s.push(a)}const p=tt(s);return{name:Zc(o,i,n),value:p,description:o===Cr?vr.decode("UTF-8",s):p}}function Qn(e,t){return t===Qt&&e===Cr?qt:t===qt?Jt:t===Jt?qr:zc}function Zc(e,t,r){const o=tt(r);if(e===is||t.length===0)return o;const n=tt(t);return`${o} (${n})`}const Wc={read:Kc};function Kc(e,t){const r={};for(let o=0;o<t.length;o++){const n=H.getLongAt(e,t[o]+ct),i=Z(e,t[o]+Ke,Ne);i===Pr?(r["Pixels Per Unit X"]=Qc(e,t[o],n),r["Pixels Per Unit Y"]=qc(e,t[o],n),r["Pixel Units"]=Jc(e,t[o],n)):i===Rr&&(r["Modify Date"]=Vc(e,t[o],n))}return r}function Qc(e,t,r){if(!Ct(e,t,r,0,4))return;const i=H.getLongAt(e,t+ge+0);return{value:i,description:""+i}}function qc(e,t,r){if(!Ct(e,t,r,4,4))return;const i=H.getLongAt(e,t+ge+4);return{value:i,description:""+i}}function Jc(e,t,r){if(!Ct(e,t,r,8,1))return;const i=H.getByteAt(e,t+ge+8);return{value:i,description:i===1?"meters":"Unknown"}}function Vc(e,t,r){if(!Ct(e,t,r,0,7))return;const n=H.getShortAt(e,t+ge),i=H.getByteAt(e,t+ge+2),s=H.getByteAt(e,t+ge+3),c=H.getByteAt(e,t+ge+4),p=H.getByteAt(e,t+ge+5),x=H.getByteAt(e,t+ge+6);return{value:[n,i,s,c,p,x],description:`${Ve(n,4)}-${Ve(i,2)}-${Ve(s,2)} ${Ve(c,2)}:${Ve(p,2)}:${Ve(x,2)}`}}function Ct(e,t,r,o,n){return o+n<=r&&t+ge+o+n<=e.byteLength}function Ve(e,t){return`${"0".repeat(t-(""+e).length)}${e}`}const eu=[6,7,99],tu={get:nu};function nu(e,t,r){if(ru(t)){t.type="image/jpeg";const o=r+t.JPEGInterchangeFormat.value;t.image=e.buffer.slice(o,o+t.JPEGInterchangeFormatLength.value),Tr(t,"base64",function(){return Ir(this.image)})}return t}function ru(e){return e&&(e.Compression===void 0||eu.includes(e.Compression.value))&&e.JPEGInterchangeFormat&&e.JPEGInterchangeFormat.value&&e.JPEGInterchangeFormatLength&&e.JPEGInterchangeFormatLength.value}function Jr(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=new Error().stack}Jr.prototype=new Error;const iu={MetadataMissingError:Jr};function ou(e,t){return su(e)?au(e,t).then(r=>Lt(r,t)):gu(e)?pu(e).then(r=>Lt(r,t)):Lt(e,t)}function su(e){return typeof e=="string"}function au(e,t){return/^https?:\/\//.test(e)?typeof fetch<"u"?cu(e,t):uu(e,t):fu(e)?Promise.resolve(Eo(e)):du(e,t)}function cu(e,{length:t}={}){const r={method:"GET"};return Number.isInteger(t)&&t>=0&&(r.headers={range:`bytes=0-${t-1}`}),fetch(e,r).then(o=>o.arrayBuffer())}function uu(e,{length:t}={}){return new Promise((r,o)=>{const n={};Number.isInteger(t)&&t>=0&&(n.headers={range:`bytes=0-${t-1}`}),lu(e)(e,n,s=>{if(s.statusCode>=200&&s.statusCode<=299){const c=[];s.on("data",p=>c.push(Buffer.from(p))),s.on("error",p=>o(p)),s.on("end",()=>r(Buffer.concat(c)))}else o(`Could not fetch file: ${s.statusCode} ${s.statusMessage}`),s.resume()}).on("error",s=>o(s))})}function lu(e){return/^https:\/\//.test(e)?__non_webpack_require__("https").get:__non_webpack_require__("http").get}function fu(e){return/^data:[^;,]*(;base64)?,/.test(e)}function du(e,{length:t}={}){return new Promise((r,o)=>{const n=hu();n.open(e,(i,s)=>{i?o(i):n.stat(e,(c,p)=>{if(c)o(c);else{const x=Math.min(p.size,t!==void 0?t:p.size),a=Buffer.alloc(x),l={buffer:a,length:x};n.read(s,l,u=>{u?o(u):n.close(s,f=>{f&&console.warn(`Could not close file ${e}:`,f),r(a)})})}})})})}function hu(){try{return __non_webpack_require__("fs")}catch{return}}function gu(e){return typeof window<"u"&&typeof File<"u"&&e instanceof File}function pu(e){return new Promise((t,r)=>{const o=new FileReader;o.onload=n=>t(n.target.result),o.onerror=()=>r(o.error),o.readAsArrayBuffer(e)})}function Lt(e,t){return mu(e)&&(e=new Uint8Array(e).buffer),Eu(xu(e),t)}function mu(e){try{return Buffer.isBuffer(e)}catch{return!1}}function xu(e){try{return new DataView(e)}catch{return new So(e)}}function Eu(e,{expanded:t=!1,includeUnknown:r=!1}={expanded:!1,includeUnknown:!1}){let o=!1,n={};const{fileDataOffset:i,jfifDataOffset:s,tiffHeaderOffset:c,iptcDataOffset:p,xmpChunks:x,iccChunks:a,mpfDataOffset:l,pngHeaderOffset:u,pngTextChunks:f,pngChunkOffsets:E}=ys.parseAppMarkers(e);if(Su(i)){o=!0;const A=ia.read(e,i);t?n.file=A:n=J({},n,A)}if(Tu(s)){o=!0;const A=ga.read(e,s);t?n.jfif=A:n=J({},n,A)}if(Iu(c)){o=!0;const A=Ln.read(e,c,r);if(A.Thumbnail&&(n.Thumbnail=A.Thumbnail,delete A.Thumbnail),t?(n.exif=A,Au(n)):n=J({},n,A),A["IPTC-NAA"]&&!qn(p)){const S=jn.read(A["IPTC-NAA"].value,0,r);t?n.iptc=S:n=J({},n,S)}if(A.ApplicationNotes&&!Jn(x)){const S=$n.read(tt(A.ApplicationNotes.value));t?n.xmp=S:(delete S._raw,n=J({},n,S))}if(A.ICC_Profile&&!Vn(a)){const S=Kn.read(A.ICC_Profile.value,[{offset:0,length:A.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);t?n.icc=S:n=J({},n,S)}}if(qn(p)){o=!0;const A=jn.read(e,p,r);t?n.iptc=A:n=J({},n,A)}if(Jn(x)){o=!0;const A=$n.read(e,x);t?n.xmp=A:(delete A._raw,n=J({},n,A))}if(Vn(a)){o=!0;const A=Kn.read(e,a);t?n.icc=A:n=J({},n,A)}if(bu(l)){o=!0;const A=Ln.readMpf(e,l,r);t?n.mpf=A:n=J({},n,A)}if(Fu(u)){o=!0;const A=Dc.read(e,u);t?(n.png=n.png?J({},n.png,A):A,n.pngFile=A):n=J({},n,A)}if(yu(f)){o=!0;const A=Hc.read(e,f);t?(n.png=n.png?J({},n.png,A):A,n.pngText=A):n=J({},n,A)}if(_u(E)){o=!0;const A=Wc.read(e,E);t?n.png=n.png?J({},n.png,A):A:n=J({},n,A)}const y=tu.get(e,n.Thumbnail,c);if(y?(o=!0,n.Thumbnail=y):delete n.Thumbnail,!o)throw new iu.MetadataMissingError;return n}function Su(e){return e!==void 0}function Tu(e){return e!==void 0}function Iu(e){return e!==void 0}function Au(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=It(e.exif.GPSLatitude.value),e.exif.GPSLatitudeRef.value.join("")==="S"&&(e.gps.Latitude=-e.gps.Latitude)}catch{}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=It(e.exif.GPSLongitude.value),e.exif.GPSLongitudeRef.value.join("")==="W"&&(e.gps.Longitude=-e.gps.Longitude)}catch{}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],e.exif.GPSAltitudeRef.value===1&&(e.gps.Altitude=-e.gps.Altitude)}catch{}}}function qn(e){return e!==void 0}function Jn(e){return Array.isArray(e)&&e.length>0}function Vn(e){return Array.isArray(e)&&e.length>0}function bu(e){return e!==void 0}function Fu(e){return e!==void 0}function yu(e){return e!==void 0}function _u(e){return e!==void 0}const Cu=async e=>{const t=await ou(e),r=t.DateTimeOriginal?.description||t.DateTimeDigitized?.description||t.DateTime?.description;return typeof r!="string"?null:mo.parse(r)},Pu=e=>new Promise((t,r)=>{const o=new Image;o.onload=()=>{const n=Math.min(o.naturalWidth,o.naturalHeight),i=(o.naturalWidth-n)/2,s=(o.naturalHeight-n)/2,c=document.createElement("canvas");c.width=n,c.height=n;const p=c.getContext("2d");if(!p){r(new Error("Could not get canvas context"));return}p.drawImage(o,i,s,n,n,0,0,n,n),t(c.toDataURL("image/jpeg",.95))},o.onerror=()=>r(new Error("Failed to load image")),o.src=e}),Ru=e=>new Promise((t,r)=>{const o=new FileReader;o.onload=()=>{typeof o.result=="string"?t(o.result):r(new Error("Invalid file"))},o.onerror=()=>r(new Error("Failed to read file")),o.readAsDataURL(e)}),Nu=e=>{const[t,r]=q.useState(null),[o,n]=q.useState(!1),[i,s]=q.useState(null);return q.useEffect(()=>{if(!e){r(null),s(null);return}(async()=>{n(!0),s(null);try{const p=await Ru(e),[x,a]=await Promise.all([Pu(p),Cu(p)]);r({squareDataUrl:x,date:a})}catch(p){s(p instanceof Error?p.message:"Failed to process image"),r(null)}finally{n(!1)}})()},[e]),{processedImage:t,isProcessing:o,error:i}},Uu=[{value:"SSS",label:"SSS"},{value:"SS",label:"SS"},{value:"S",label:"S"},{value:"A+",label:"A+"},{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"F",label:"F"},{value:"B+",label:"B+"},{value:"C+",label:"C+"},{value:"D+",label:"D+"},{value:"F+",label:"F+"}],Ou=[{value:"XX",label:"XX"},{value:"Prime2",label:"Prime 2"},{value:"Prime",label:"Prime"}],Du=[{value:"",label:"No mods"},{value:"VJ",label:"Rank (VJ)"},{value:"HJ",label:"HJ"}],ju=()=>{const e=en(),t=fi(),{sharedChartId:r}=di(),o=hi(),n=gi(),i=ir(pt.results.addResultMutation.mutationOptions({onSuccess:()=>{n.invalidateQueries(pt.charts.chart.queryFilter()),n.invalidateQueries(pt.charts.search.infiniteQueryFilter())}})),s=Ii({sharedChartId:r?Number(r):0}),c=o.data?.id,p=!!o.data?.can_add_results_manually,x=s.data?.items[0],a=x&&`${x.songName} ${x.label}`,[l,u]=q.useState(null),[f,E]=q.useState(!1),{renderPopup:y,confirm:A}=Gi({okText:e.SUBMIT}),S=pi({initialValues:{screenshot:null,grade:"",perfect:"",great:"",good:"",bad:"",miss:"",combo:"",score:"",mix:"XX",mod:""},validate:{screenshot:d=>d?null:e.SCREENSHOT_REQUIRED,grade:d=>d?null:e.GRADE_REQUIRED,perfect:d=>d?null:e.PERFECT_REQUIRED,great:d=>d?null:e.GREAT_REQUIRED,good:d=>d?null:e.GOOD_REQUIRED,bad:d=>d?null:e.BAD_REQUIRED,miss:d=>d?null:e.MISS_REQUIRED,combo:d=>d?null:e.COMBO_REQUIRED,score:d=>!d||d.length<4?e.SCORE_REQUIRED_MIN_DIGITS:null}}),U=S.values.screenshot,{processedImage:D,isProcessing:N,error:L}=Nu(U),T=S.values,M=async({screenshot:d,...m})=>{if(!(!c||!r||!d||!D)){try{await A()}catch{return}E(!0),u(null);try{const F=await go(D.squareDataUrl),P={grade:m.grade,perfect:Number(m.perfect),great:Number(m.great),good:Number(m.good),bad:Number(m.bad),miss:Number(m.miss),combo:Number(m.combo),score:Number(m.score),mix:m.mix,mod:m.mod,screenshot:F,fileName:d.name,date:D.date||new Date,isExactDate:!!D.date,sharedChartId:Number(r),playerId:c};await i.mutateAsync(P),S.reset(),t(xi.leaderboard.sharedChart.getPath({sharedChartId:r}))}catch(F){console.error(F),u(F)}E(!1)}};return c?p?G.jsxs("div",{className:Xe.addResultPage,children:[y({content:G.jsxs("div",{className:Xe.confirmation,children:[G.jsxs("div",{className:Xe.splitPanels,children:[G.jsx("div",{className:Xe.screenshotPanel,children:D&&G.jsx("img",{src:D.squareDataUrl,alt:"Screenshot",style:{maxWidth:"100%",maxHeight:270}})}),G.jsxs("div",{className:Xe.formPanel,children:[G.jsx("div",{className:Xe.chartName,children:a}),G.jsxs("div",{className:Xe.grid,children:[G.jsx("div",{children:e.GRADE}),G.jsx("div",{children:T.grade}),G.jsx("div",{style:{color:"#29D7FF"},children:"Perfect"}),G.jsx("div",{style:{color:"#29D7FF"},children:T.perfect}),G.jsx("div",{style:{color:"#21d021"},children:"Great"}),G.jsx("div",{style:{color:"#21d021"},children:T.great}),G.jsx("div",{style:{color:"#dede3a"},children:"Good"}),G.jsx("div",{style:{color:"#dede3a"},children:T.good}),G.jsx("div",{style:{color:"#f278fc"},children:"Bad"}),G.jsx("div",{style:{color:"#f278fc"},children:T.bad}),G.jsx("div",{style:{color:"#f48181"},children:"Miss"}),G.jsx("div",{style:{color:"#f48181"},children:T.miss}),G.jsx("div",{children:"Combo"}),G.jsx("div",{children:T.combo}),G.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:"Score"}),G.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:T.score}),G.jsx("div",{children:e.MODS}),G.jsx("div",{children:T.mod||e.NONE_NORMAL_MODE})]})]})]}),G.jsx(ut,{radius:"md",variant:"light",color:"yellow",icon:G.jsx(Ui,{}),children:e.FALSE_RESULTS_WARNING})]})}),G.jsx(nn,{order:2,mb:"xs",children:e.SUBMIT_RESULT}),G.jsxs(ue,{mb:"md",children:[e.CHART,": ",a]}),G.jsx("form",{onSubmit:S.onSubmit(M),children:G.jsxs(kt,{gap:"sm",children:[G.jsx(yi,{label:e.SCREENSHOT,placeholder:e.SELECT_SCREENSHOT,accept:"image/*",withAsterisk:!0,...S.getInputProps("screenshot")}),U?.name.toLowerCase().endsWith(".heic")&&G.jsx(ue,{c:"red",size:"sm",children:e.HEIC_NOT_SUPPORTED}),N&&G.jsx(mi,{}),L&&G.jsxs(ue,{c:"red",size:"sm",children:[e.ERROR,": ",L]}),D&&G.jsxs(G.Fragment,{children:[G.jsx(ho,{showDate:!0,squareDataUrl:D.squareDataUrl,date:D.date,onScoreRecognized:d=>{d.perfect>=0&&S.setFieldValue("perfect",String(d.perfect)),d.great>=0&&S.setFieldValue("great",String(d.great)),d.good>=0&&S.setFieldValue("good",String(d.good)),d.bad>=0&&S.setFieldValue("bad",String(d.bad)),d.miss>=0&&S.setFieldValue("miss",String(d.miss)),d.combo>=0&&S.setFieldValue("combo",String(d.combo)),d.score>=0&&S.setFieldValue("score",String(d.score))}}),G.jsx(Ut,{label:e.GRADE,placeholder:e.SELECT_GRADE,data:Uu,withAsterisk:!0,...S.getInputProps("grade")}),["perfect","great","good","bad","miss","combo"].map(d=>G.jsx(fn,{label:d[0].toUpperCase()+d.slice(1),placeholder:"000",inputMode:"numeric",withAsterisk:!0,...S.getInputProps(d)},d)),G.jsx(fn,{label:"Score",placeholder:"000000",inputMode:"numeric",withAsterisk:!0,...S.getInputProps("score")}),G.jsx(Ut,{label:e.MIX,data:Ou,withAsterisk:!0,...S.getInputProps("mix")}),G.jsx(Ut,{label:e.JUDGE_RANK,data:Du,withAsterisk:!0,...S.getInputProps("mod")}),G.jsx(Ye,{type:"submit",loading:f,disabled:!S.isValid(),children:e.SUBMIT})]}),l instanceof Error&&G.jsx(ut,{color:"red",variant:"light",children:l.message})]})})]}):G.jsx(ut,{radius:"md",variant:"light",color:"red",title:e.ERROR,icon:G.jsx(Si,{}),children:e.NO_ACCESS_TO_PAGE}):null};export{ju as default};
//# sourceMappingURL=AddResult-iP9MmNGe.js.map
