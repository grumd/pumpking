import{r as a,i as A}from"./index-4cfa8922.js";import{u as E,b as v,i as y}from"./timeAgo-fd53eb85.js";import{r as T}from"./Alert-964afe0d.js";function H(t){const n=a.createContext(null);return[({children:e,value:u})=>A.createElement(n.Provider,{value:u},e),()=>{const e=a.useContext(n);if(e===null)throw new Error(t);return e}]}function L({opened:t,shouldReturnFocus:n=!0}){const r=a.useRef(),i=()=>{var e;r.current&&"focus"in r.current&&typeof r.current.focus=="function"&&((e=r.current)==null||e.focus({preventScroll:!0}))};return E(()=>{let e=-1;const u=o=>{o.key==="Tab"&&window.clearTimeout(e)};return document.addEventListener("keydown",u),t?r.current=document.activeElement:n&&(e=window.setTimeout(i,10)),()=>{window.clearTimeout(e),document.removeEventListener("keydown",u)}},[t,n]),i}function g(t,n="body > :not(script)"){const r=T(),i=Array.from(document.querySelectorAll(n)).map(e=>{var c;if((c=e==null?void 0:e.shadowRoot)!=null&&c.contains(t)||e.contains(t))return;const u=e.getAttribute("aria-hidden"),o=e.getAttribute("data-hidden"),s=e.getAttribute("data-focus-id");return e.setAttribute("data-focus-id",r),u===null||u==="false"?e.setAttribute("aria-hidden","true"):!o&&!s&&e.setAttribute("data-hidden",u),{node:e,ariaHidden:o||null}});return()=>{i.forEach(e=>{!e||r!==e.node.getAttribute("data-focus-id")||(e.ariaHidden===null?e.node.removeAttribute("aria-hidden"):e.node.setAttribute("aria-hidden",e.ariaHidden),e.node.removeAttribute("data-focus-id"),e.node.removeAttribute("data-hidden"))})}}const N=/input|select|textarea|button|object/,b="a, input, select, textarea, button, object, [tabindex]";function x(t){return t.style.display==="none"}function h(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let r=t;for(;r&&!(r===document.body||r.nodeType===11);){if(x(r))return!1;r=r.parentNode}return!0}function m(t){let n=t.getAttribute("tabindex");return n===null&&(n=void 0),parseInt(n,10)}function l(t){const n=t.nodeName.toLowerCase(),r=!Number.isNaN(m(t));return(N.test(n)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||r)&&h(t)}function p(t){const n=m(t);return(Number.isNaN(n)||n>=0)&&l(t)}function w(t){return Array.from(t.querySelectorAll(b)).filter(p)}function R(t,n){const r=w(t);if(!r.length){n.preventDefault();return}const i=r[n.shiftKey?0:r.length-1],e=t.getRootNode();let u=i===e.activeElement||t===e.activeElement;const o=e.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(u=r.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===o.getAttribute("name")).includes(i)),!u)return;n.preventDefault();const c=r[n.shiftKey?r.length-1:0];c&&c.focus()}function S(t=!0){const n=a.useRef(),r=a.useRef(null),i=u=>{let o=u.querySelector("[data-autofocus]");if(!o){const s=Array.from(u.querySelectorAll(b));o=s.find(p)||s.find(l)||null,!o&&l(u)&&(o=u)}o&&o.focus({preventScroll:!0})},e=a.useCallback(u=>{if(t){if(u===null){r.current&&(r.current(),r.current=null);return}r.current=g(u),n.current!==u&&(u?(setTimeout(()=>{u.getRootNode()&&i(u)}),n.current=u):n.current=null)}},[t]);return a.useEffect(()=>{if(!t)return;n.current&&setTimeout(()=>i(n.current));const u=o=>{o.key==="Tab"&&n.current&&R(n.current,o)};return document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u),r.current&&r.current()}},[t]),e}function D(t=!1,n){const{onOpen:r,onClose:i}=n||{},[e,u]=a.useState(t),o=a.useCallback(()=>{u(f=>f||(r==null||r(),!0))},[r]),s=a.useCallback(()=>{u(f=>f&&(i==null||i(),!1))},[i]),c=a.useCallback(()=>{e?s():o()},[s,o,e]);return[e,{open:o,close:s,toggle:c}]}function C({children:t,active:n=!0,refProp:r="ref"}){const i=S(n),e=v(i,t==null?void 0:t.ref);return y(t)?a.cloneElement(t,{[r]:e}):t}C.displayName="@mantine/core/FocusTrap";export{C as F,D as a,H as c,L as u};
//# sourceMappingURL=FocusTrap-b8dee93f.js.map
