var be=Object.defineProperty;var Ee=(n,a,i)=>a in n?be(n,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[a]=i;var g=(n,a,i)=>(Ee(n,typeof a!="symbol"?a+"":a,i),i);import{i as b,x as Pe,r as ye,a0 as S,j as t,a9 as we,a7 as P,aa as Oe,ab as Te,ac as Ne,ad as ke,ae as z,af as oe,ag as le,ah as ce,ai as de,a4 as Ie,S as Le,Q as Se}from"./index-149cb18e.js";import{c as _e}from"./index-917c6aae.js";import{T as Ce}from"./Toggle-46de169c.js";import{w as De,p as ge,L as pe,C as ee,a as H,P as Be,R as Re}from"./PlayerCompareSelect-79fa0240.js";import{S as he,a as Ke,u as Fe,f as te,L as D,b as Me,A as We,i as G,c as Ve,d as je,g as Y,e as ze,h as He,C as Ge,j as L,k as Ue,G as Ye,l as fe,E as $e,m as Xe,n as qe,X as B,Y as R,o as Ze,R as U,p as ue,T as ie,B as Je,q as y}from"./BarChart-b57a1aeb.js";import"./usePlayers-8f0cb4c4.js";var Z=function(){return null};Z.displayName="ZAxis";Z.defaultProps={zAxisId:0,range:[64,64],scale:"auto",type:"number"};var Qe=["option","isActive"];function F(){return F=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}return n},F.apply(this,arguments)}function et(n,a){if(n==null)return{};var i=tt(n,a),e,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)e=s[r],!(a.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(n,e)&&(i[e]=n[e])}return i}function tt(n,a){if(n==null)return{};var i={},e=Object.keys(n),r,s;for(s=0;s<e.length;s++)r=e[s],!(a.indexOf(r)>=0)&&(i[r]=n[r]);return i}function it(n){var a=n.option,i=n.isActive,e=et(n,Qe);return typeof a=="string"?b.createElement(he,F({option:b.createElement(Ke,F({type:a},e)),isActive:i,shapeType:"symbols"},e)):b.createElement(he,F({option:a,isActive:i,shapeType:"symbols"},e))}function _(n){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_(n)}function M(){return M=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}return n},M.apply(this,arguments)}function me(n,a){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);a&&(e=e.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),i.push.apply(i,e)}return i}function T(n){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?me(Object(i),!0).forEach(function(e){k(n,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):me(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function at(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function xe(n,a){for(var i=0;i<a.length;i++){var e=a[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,Ae(e.key),e)}}function nt(n,a,i){return a&&xe(n.prototype,a),i&&xe(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function rt(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),a&&ne(n,a)}function ne(n,a){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},ne(n,a)}function st(n){var a=lt();return function(){var e=q(n),r;if(a){var s=q(this).constructor;r=Reflect.construct(e,arguments,s)}else r=e.apply(this,arguments);return ot(this,r)}}function ot(n,a){if(a&&(_(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K(n)}function K(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function lt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function q(n){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},q(n)}function k(n,a,i){return a=Ae(a),a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}function Ae(n){var a=ct(n,"string");return _(a)==="symbol"?a:String(a)}function ct(n,a){if(_(n)!=="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var e=i.call(n,a||"default");if(_(e)!=="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}var W=function(n){rt(i,n);var a=st(i);function i(){var e;at(this,i);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return e=a.call.apply(a,[this].concat(s)),k(K(e),"state",{isAnimationFinished:!1}),k(K(e),"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0})}),k(K(e),"handleAnimationStart",function(){e.setState({isAnimationFinished:!1})}),k(K(e),"id",Fe("recharts-scatter-")),e}return nt(i,[{key:"renderSymbolsStatically",value:function(r){var s=this,c=this.props,l=c.shape,o=c.activeShape,f=c.activeIndex,p=te(this.props);return r.map(function(h,x){var d=f===x,m=d?o:l,j=T(T({key:"symbol-".concat(x)},p),h);return b.createElement(D,M({className:"recharts-scatter-symbol"},Me(s.props,h,x),{key:"symbol-".concat(h==null?void 0:h.cx,"-").concat(h==null?void 0:h.cy,"-").concat(h==null?void 0:h.size),role:"img"}),b.createElement(it,M({option:m,isActive:d},j)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,s=this.props,c=s.points,l=s.isAnimationActive,o=s.animationBegin,f=s.animationDuration,p=s.animationEasing,h=s.animationId,x=this.state.prevPoints;return b.createElement(We,{begin:o,duration:f,isActive:l,easing:p,from:{t:0},to:{t:1},key:"pie-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var m=d.t,j=c.map(function(A,E){var O=x&&x[E];if(O){var v=G(O.cx,A.cx),w=G(O.cy,A.cy),N=G(O.size,A.size);return T(T({},A),{},{cx:v(m),cy:w(m),size:N(m)})}var I=G(0,A.size);return T(T({},A),{},{size:I(m)})});return b.createElement(D,null,r.renderSymbolsStatically(j))})}},{key:"renderSymbols",value:function(){var r=this.props,s=r.points,c=r.isAnimationActive,l=this.state.prevPoints;return c&&s&&s.length&&(!l||!Ve(l,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var s=this.props,c=s.points,l=s.xAxis,o=s.yAxis,f=s.children,p=je(f,$e);return p?p.map(function(h,x){var d=h.props,m=d.direction,j=d.dataKey;return b.cloneElement(h,{key:"".concat(m,"-").concat(j,"-").concat(c[x]),data:c,xAxis:l,yAxis:o,layout:m==="x"?"vertical":"horizontal",dataPointFormatter:function(E,O){return{x:E.cx,y:E.cy,value:m==="x"?+E.node.x:+E.node.y,errorVal:Y(E,O)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,s=r.points,c=r.line,l=r.lineType,o=r.lineJointType,f=te(this.props),p=te(c),h,x;if(l==="joint")h=s.map(function(w){return{x:w.cx,y:w.cy}});else if(l==="fitting"){var d=ze(s),m=d.xmin,j=d.xmax,A=d.a,E=d.b,O=function(N){return A*N+E};h=[{x:m,y:O(m)},{x:j,y:O(j)}]}var v=T(T(T({},f),{},{fill:"none",stroke:f&&f.fill},p),{},{points:h});return b.isValidElement(c)?x=b.cloneElement(c,v):He(c)?x=c(v):x=b.createElement(Ge,M({},v,{type:o})),b.createElement(D,{className:"recharts-scatter-line",key:"recharts-scatter-line"},x)}},{key:"render",value:function(){var r=this.props,s=r.hide,c=r.points,l=r.line,o=r.className,f=r.xAxis,p=r.yAxis,h=r.left,x=r.top,d=r.width,m=r.height,j=r.id,A=r.isAnimationActive;if(s||!c||!c.length)return null;var E=this.state.isAnimationFinished,O=Pe("recharts-scatter",o),v=f&&f.allowDataOverflow,w=p&&p.allowDataOverflow,N=v||w,I=L(j)?this.id:j;return b.createElement(D,{className:O,clipPath:N?"url(#clipPath-".concat(I,")"):null},v||w?b.createElement("defs",null,b.createElement("clipPath",{id:"clipPath-".concat(I)},b.createElement("rect",{x:v?h:h-d/2,y:w?x:x-m/2,width:v?d:d*2,height:w?m:m*2}))):null,l&&this.renderLine(),this.renderErrorBar(),b.createElement(D,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!A||E)&&Ue.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}}]),i}(ye.PureComponent);k(W,"displayName","Scatter");k(W,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Ye.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});k(W,"getComposedData",function(n){var a=n.xAxis,i=n.yAxis,e=n.zAxis,r=n.item,s=n.displayedData,c=n.xAxisTicks,l=n.yAxisTicks,o=n.offset,f=r.props.tooltipType,p=je(r.props.children,Xe),h=L(a.dataKey)?r.props.dataKey:a.dataKey,x=L(i.dataKey)?r.props.dataKey:i.dataKey,d=e&&e.dataKey,m=e?e.range:Z.defaultProps.range,j=m&&m[0],A=a.scale.bandwidth?a.scale.bandwidth():0,E=i.scale.bandwidth?i.scale.bandwidth():0,O=s.map(function(v,w){var N=Y(v,h),I=Y(v,x),C=!L(d)&&Y(v,d)||"-",re=[{name:L(a.dataKey)?r.props.name:a.name||a.dataKey,unit:a.unit||"",value:N,payload:v,dataKey:h,type:f},{name:L(i.dataKey)?r.props.name:i.name||i.dataKey,unit:i.unit||"",value:I,payload:v,dataKey:x,type:f}];C!=="-"&&re.push({name:e.name||e.dataKey,unit:e.unit||"",value:C,payload:v,dataKey:d,type:f});var J=fe({axis:a,ticks:c,bandSize:A,entry:v,index:w,dataKey:h}),Q=fe({axis:i,ticks:l,bandSize:E,entry:v,index:w,dataKey:x}),se=C!=="-"?e.scale(C):j,V=Math.sqrt(Math.max(se,0)/Math.PI);return T(T({},v),{},{cx:J,cy:Q,x:J-V,y:Q-V,xAxis:a,yAxis:i,zAxis:e,width:2*V,height:2*V,size:se,node:{x:N,y:I,z:C},tooltipPayload:re,tooltipPosition:{x:J,y:Q},payload:v},p&&p[w]&&p[w].props)});return T({points:O},o)});var dt=qe({chartName:"ScatterChart",GraphicalChild:W,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:B},{axisType:"yAxis",AxisComp:R},{axisType:"zAxis",AxisComp:Z}],formatAxisMap:Ze}),ve=function(a,i){return Object.prototype.hasOwnProperty.call(a,i)};function pt(n,a){function i(e,r){if(n(e,r))return!0;if(Array.isArray(e))return!(!Array.isArray(r)||e.length!==r.length||!e.every(function(p,h){return i(p,r[h])}));if(Array.isArray(r))return!1;if(typeof e=="object"){if(typeof r!="object")return!1;var s=e===null,c=r===null;if(s||c)return s===c;var l=Object.keys(e),o=Object.keys(r);if(l.length!==o.length)return!1;var f=a?i:n;return!!l.every(function(p){return ve(e,p)&&ve(r,p)&&f(e[p],r[p])})}return!1}return i}var ht=function(a,i){for(var e=0;e<a.length;e++)if(i(a[e]))return e;return-1};function ft(n,a){var i=[];function e(s){var c=ht(i,function(o){return a(s,o.key)});if(c>-1){var l=i[c];return c>0&&(i.splice(c,1),i.unshift(l)),l.value}}function r(s,c){e(s)||(i.unshift({key:s,value:c}),i.length>n&&i.pop())}return{get:e,put:r}}function ut(n){var a;return{get:function(e){if(a&&n(e,a.key))return a.value},put:function(e,r){a={key:e,value:r}}}}function mt(n,a){return n===1?ut(a):ft(n,a)}function xt(n,a){var i=a?pt(n,a):n;return function(e,r){if(e.length!==r.length)return!1;for(var s=0;s<e.length;s+=1)if(!i(e[s],r[s]))return!1;return!0}}function vt(){for(var n=1,a=function(o,f){return o===f},i=!1,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];typeof r[0]=="number"&&(n=r.shift()),typeof r[0]=="function"?a=r.shift():typeof r[0]>"u"&&r.shift(),typeof r[0]=="boolean"&&(i=r[0]);var c=mt(n,xt(a,i));return function(l){return function(){for(var o=arguments.length,f=new Array(o),p=0;p<o;p++)f[p]=arguments[p];var h=c.get(f);return h===void 0&&(h=l.apply(l,f),c.put(f,h)),h}}}class $ extends b.PureComponent{render(){const{active:a,onToggle:i,text:e}=this.props;return t.jsx("div",{className:_e("toggle-button",{active:a}),onClick:()=>i(!a),children:e})}}g($,"propTypes",{text:S.string,onToggle:S.func,active:S.bool});const u={SINGLE_TWO:"SINGLE_TWO",SINGLE_FIVE:"SINGLE_FIVE",DOUBLE_TWO:"DOUBLE_TWO",DOUBLE_FIVE:"DOUBLE_FIVE",BOTH_TWO:"BOTH_TWO",BOTH_FIVE:"BOTH_FIVE"},yt=n=>{switch(n){case u.SINGLE_TWO:return[t.jsx(y,{dataKey:"single.twoBars.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"11"),t.jsx(y,{dataKey:"single.twoBars.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"22")];case u.SINGLE_FIVE:return[t.jsx(y,{dataKey:"single.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"1"),t.jsx(y,{dataKey:"single.p2notPlayed",fill:"#899db3",stackId:"stack",isAnimationActive:!0},"2"),t.jsx(y,{dataKey:"single.notPlayed",fill:"#70707060",stackId:"stack",isAnimationActive:!0},"3"),t.jsx(y,{dataKey:"single.p1notPlayed",fill:"#bfa988",stackId:"stack",isAnimationActive:!0},"4"),t.jsx(y,{dataKey:"single.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"5")];case u.DOUBLE_TWO:return[t.jsx(y,{dataKey:"double.twoBars.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"11"),t.jsx(y,{dataKey:"double.twoBars.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"22")];case u.DOUBLE_FIVE:return[t.jsx(y,{dataKey:"double.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"1"),t.jsx(y,{dataKey:"double.p2notPlayed",fill:"#899db3",stackId:"stack",isAnimationActive:!0},"2"),t.jsx(y,{dataKey:"double.notPlayed",fill:"#70707060",stackId:"stack",isAnimationActive:!0},"3"),t.jsx(y,{dataKey:"double.p1notPlayed",fill:"#bfa988",stackId:"stack",isAnimationActive:!0},"4"),t.jsx(y,{dataKey:"double.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"5")];case u.BOTH_TWO:return[t.jsx(y,{dataKey:"all.twoBars.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"11"),t.jsx(y,{dataKey:"all.twoBars.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"22")];case u.BOTH_FIVE:return[t.jsx(y,{dataKey:"all.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"1"),t.jsx(y,{dataKey:"all.p2notPlayed",fill:"#899db3",stackId:"stack",isAnimationActive:!0},"2"),t.jsx(y,{dataKey:"all.notPlayed",fill:"#70707060",stackId:"stack",isAnimationActive:!0},"3"),t.jsx(y,{dataKey:"all.p1notPlayed",fill:"#bfa988",stackId:"stack",isAnimationActive:!0},"4"),t.jsx(y,{dataKey:"all.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"5")];default:return null}},ae=void 0,gt=ge("id"),jt=ge("compareToId"),At=vt()((n,a,i)=>{if(!n||!a)return{};let e=n.ratingChanges[0].rating,r=a.ratingChanges[0].rating;const s=P.flow(P.sortBy("date"),P.map(o=>(o.rating&&(e=o.rating),o.rating2&&(r=o.rating2),{rating1:e,rating2:r,date:o.date})),P.sortedUniqBy("date"))([...n.ratingChanges,...a.ratingChanges.map(o=>({date:o.date,rating2:o.rating}))]);e=n.placesChanges[0].place,r=a.placesChanges[0].place;const c=P.flow(P.sortBy("date"),P.map(o=>(o.place&&(e=o.place),o.place2&&(r=o.place2),{place1:e,place2:r,date:o.date})))([...n.placesChanges,...a.placesChanges.map(o=>({date:o.date,place2:o.place}))]),l=P.fromPairs(Array.from({length:28}).map((o,f)=>[f+1,{}]));return P.keys(l).forEach(o=>{const f=P.flow(P.map("chart"),P.uniqBy("sharedChartId"))([...n.resultsByLevel[o],...a.resultsByLevel[o]]),p={x:o,all:{p1win:0,p1notPlayed:0,p2win:0,p2notPlayed:0,notPlayed:0,twoBars:{}},double:{p1win:0,p1notPlayed:0,p2win:0,p2notPlayed:0,notPlayed:0,twoBars:{}},single:{p1win:0,p1notPlayed:0,p2win:0,p2notPlayed:0,notPlayed:0,twoBars:{}}};f.forEach(d=>{const m=d.results.findIndex(E=>E.playerId===n.id),j=d.results.findIndex(E=>E.playerId===a.id),A=d.chartType.startsWith("D")?p.double:p.single;m<0&&j<0?console.log("wtf?"):m<0?(p.all.p1notPlayed++,A.p1notPlayed++):j<0?(p.all.p2notPlayed++,A.p2notPlayed++):m<j?(p.all.p1win++,A.p1win++):j<m&&(p.all.p2win++,A.p2win++)});const h=d=>{const m=d.p1win+d.p2win||1;d.twoBars.p1win=d.p1win/m,d.twoBars.p2win=d.p2win/m};h(p.all),h(p.single),h(p.double);const x=(d,m)=>{d.p1win=d.p1win/m,d.p1notPlayed=d.p1notPlayed/m,d.p2win=d.p2win/m,d.p2notPlayed=d.p2notPlayed/m,d.notPlayed=1-d.p1win-d.p1notPlayed-d.p2win-d.p2notPlayed};x(p.all,i.chartLevels[o]),x(p.double,i.doublesLevels[o]),x(p.single,i.singlesLevels[o]),l[o]=p}),{ratingChanges:s,placesChanges:c,perLevelComparison:P.values(l)}}),bt=(n,a)=>{const i=gt(n,a),e=jt(n,a);return{profile:i??void 0,profile2:e??void 0,combinedData:At(i,e,n.tracklist.data),tracklist:n.tracklist.data,filter:n.profiles.filter,error:n.charts.error||n.tracklist.error,isLoading:n.charts.isLoading||n.results.isLoadingRanking||n.tracklist.isLoading}},Et={fetchChartsData:Oe,setProfilesFilter:Te,resetProfilesFilter:Ne};class X extends ye.Component{constructor(){super(...arguments);g(this,"state",{isLevelGraphCombined:!0,compareBarsMode:u.BOTH_TWO});g(this,"onRefresh",()=>{const{isLoading:i}=this.props;!i&&this.props.fetchChartsData()});g(this,"onChangeDayRange",i=>{const{filter:e}=this.props;this.props.setProfilesFilter({...e,dayRange:i})});g(this,"rhMargin",{top:5,bottom:5,right:5,left:0});g(this,"rhXDomain",["dataMin","dataMax"]);g(this,"rhYDomain",["dataMin - 100","dataMax + 100"]);g(this,"rhXTickFormatter",i=>z(i).toLocaleDateString());g(this,"rhTooltip",({active:i,payload:e,label:r})=>{const{profile:s,profile2:c}=this.props,l=s.name,o=c.name;return!e||!e[0]?null:t.jsxs("div",{className:"history-tooltip",children:[t.jsx("div",{children:z(e[0].payload.date).toLocaleDateString()}),e[1]&&t.jsxs("div",{style:{fontWeight:"bold",color:e[1].color},children:[l,": ",Math.round(e[1].value)]}),e[0]&&t.jsxs("div",{style:{fontWeight:"bold",color:e[0].color},children:[o,": ",Math.round(e[0].value)]})]})});g(this,"circleShape",i=>t.jsx("circle",{cx:i.cx,cy:i.cy,r:4,fill:i.fill},i.key));g(this,"plcMargin",{top:5,bottom:5,right:5,left:0});g(this,"plcTooltip",({active:i,payload:e,label:r})=>{const{profile:s,profile2:c}=this.props,{compareBarsMode:l}=this.state,o=[u.SINGLE_TWO,u.DOUBLE_TWO,u.BOTH_TWO].includes(l),f=s.name,p=c.name;if(!e||!e[0])return null;const h=(x,d)=>t.jsxs("div",{style:{fontWeight:"bold",color:x.color},children:[d,": ",Math.round(P.get(x.dataKey,x.payload)*100),"%"]},x.name);return t.jsxs("div",{className:"history-tooltip",children:[t.jsxs("div",{children:["Level: ",e[0].payload.x]}),h(e[0],`${f} wins`),!o&&h(e[1],`${p} has no score`),!o&&h(e[2],"Both have no score"),!o&&h(e[3],`${f} has no score`),h(o?e[1]:e[4],`${p} wins`)]})});g(this,"plcXDomain",[0,1]);g(this,"plcXTicks",[0,.5,1]);g(this,"plcXFormatter",i=>`${Math.round(i*100)}%`)}renderRankingHistory(){const{combinedData:i}=this.props;return t.jsx(U,{minHeight:ae,aspect:1.6,children:t.jsxs(pe,{data:i.ratingChanges,margin:this.rhMargin,children:[t.jsx(ee,{strokeDasharray:"3 3"}),t.jsx(B,{dataKey:"date",type:"number",domain:this.rhXDomain,tickFormatter:this.rhXTickFormatter}),t.jsx(R,{allowDecimals:!1,domain:this.rhYDomain,tickFormatter:Math.round,width:40}),t.jsx(ue,{y:1e3,stroke:"white"}),t.jsx(ie,{isAnimationActive:!1,content:this.rhTooltip}),t.jsx(H,{type:"monotone",isAnimationActive:!1,dataKey:"rating2",stroke:"#ffd388",strokeWidth:3,dot:!1}),t.jsx(H,{type:"monotone",isAnimationActive:!1,dataKey:"rating1",stroke:"#88d3ff",strokeWidth:3,dot:!1})]})})}renderAccuracyPoints(i=!1){const{profile:e,profile2:r}=this.props;return t.jsx(U,{minHeight:ae,aspect:1.6,children:t.jsxs(dt,{margin:{top:5,bottom:5,right:5,left:0},children:[t.jsx(ee,{strokeDasharray:"3 3"}),t.jsx(B,{dataKey:"[0]",type:"number",domain:[1,28],tickFormatter:s=>Math.round(s),ticks:[1,3,5,7,9,11,13,15,17,19,21,23,25,27]}),t.jsx(R,{dataKey:"[1]",type:"number",domain:[0,100],width:40,tickFormatter:s=>Math.round(s)+"%"}),t.jsx(W,{shape:this.circleShape,data:(i?r:e).accuracyPointsRaw,fill:i?"#ffd388":"#88d3ff"})]})})}renderPlaceHistory(){const{combinedData:i,profile:e,profile2:r}=this.props,s=e.name,c=r.name;return t.jsx(U,{minHeight:ae,aspect:1.6,children:t.jsxs(pe,{data:i.placesChanges,margin:{top:5,bottom:5,right:5,left:0},children:[t.jsx(ee,{strokeDasharray:"3 3"}),t.jsx(B,{dataKey:"date",type:"number",domain:["dataMin","dataMax"],tickFormatter:l=>z(l).toLocaleDateString()}),t.jsx(R,{allowDecimals:!1,domain:[1,l=>l<3?l+2:l+1],interval:0,reversed:!0,width:40}),t.jsx(ie,{isAnimationActive:!1,content:({active:l,payload:o,label:f})=>!o||!o[0]?null:t.jsxs("div",{className:"history-tooltip",children:[t.jsx("div",{children:z(o[0].payload.date).toLocaleDateString()}),o[1]&&t.jsxs("div",{style:{fontWeight:"bold",color:o[1].color},children:[s,": #",o[1].value]}),o[0]&&t.jsxs("div",{style:{fontWeight:"bold",color:o[0].color},children:[c,": #",o[0].value]})]})}),t.jsx(H,{isAnimationActive:!1,type:"stepAfter",dataKey:"place2",stroke:"#ffd388",strokeWidth:3,dot:!1}),t.jsx(H,{isAnimationActive:!1,type:"stepAfter",dataKey:"place1",stroke:"#88d3ff",strokeWidth:3,dot:!1})]})})}renderPerLevelComparison(){const{combinedData:i}=this.props,{compareBarsMode:e}=this.state;return i.perLevelComparison&&t.jsx(U,{width:"100%",aspect:.7,children:t.jsxs(Je,{layout:"vertical",data:[...i.perLevelComparison],margin:this.plcMargin,children:[t.jsx(ie,{isAnimationActive:!1,content:this.plcTooltip}),t.jsx(R,{reversed:!0,dataKey:"x",type:"category",width:23}),t.jsx(B,{type:"number",domain:this.plcXDomain,ticks:this.plcXTicks,tickFormatter:this.plcXFormatter}),t.jsx(ue,{x:.5,stroke:"#666"}),yt(e)]})})}renderProfile(){const i=this.context,{profile:e,profile2:r,filter:s}=this.props,{compareBarsMode:c}=this.state;return t.jsxs("div",{className:"profile",children:[t.jsxs("div",{className:"profile-header",children:[t.jsxs("div",{className:"profile-name text-with-header blue",children:[t.jsx("div",{className:"text-header",children:i.PLAYER}),t.jsx("div",{children:e.name})]}),t.jsxs("div",{className:"text-with-header",children:[t.jsx("div",{className:"text-header",children:i.RANK}),t.jsxs("div",{children:["#",e.rank]})]}),t.jsxs("div",{className:"text-with-header",children:[t.jsx("div",{className:"text-header",children:i.PP}),t.jsx("div",{children:Math.floor(e.pp)})]}),t.jsxs("div",{className:"text-with-header",children:[t.jsx("div",{className:"text-header",children:i.LAST_TIME_PLAYED}),t.jsx("div",{children:e.lastResultDate?oe(i,e.lastResultDate):i.NEVER})]}),t.jsx("div",{className:"_flex-fill"}),t.jsxs("div",{className:"text-with-header -select",children:[t.jsx("div",{className:"text-header",children:i.COMPARE_WITH}),t.jsx("div",{children:t.jsx(Be,{})})]})]}),t.jsxs("div",{className:"profile-header right-align",children:[t.jsxs("div",{className:"profile-name text-with-header orange",children:[t.jsx("div",{className:"text-header",children:i.PLAYER}),t.jsx("div",{children:r.name})]}),t.jsxs("div",{className:"text-with-header",children:[t.jsx("div",{className:"text-header",children:i.RANK}),t.jsxs("div",{children:["#",r.rank]})]}),t.jsxs("div",{className:"text-with-header",children:[t.jsx("div",{className:"text-header",children:i.PP}),t.jsx("div",{children:Math.floor(r.pp)})]}),t.jsxs("div",{className:"text-with-header",children:[t.jsx("div",{className:"text-header",children:i.LAST_TIME_PLAYED}),t.jsx("div",{children:r.lastResultDate?oe(i,r.lastResultDate):i.NEVER})]})]}),t.jsxs("div",{className:"profile-section-horizontal-container",children:[t.jsx("div",{className:"profile-section",children:t.jsx("div",{className:"profile-section-content",children:t.jsxs("div",{className:"profile-section-2",children:[t.jsx("div",{className:"profile-sm-section-header flex",children:t.jsx("span",{children:i.VICTORIES_BY_LEVEL})}),t.jsx("div",{className:"profile-sm-section-header flex",children:(()=>{const l=[u.SINGLE_TWO,u.DOUBLE_TWO,u.BOTH_TWO].includes(c);return t.jsxs("div",{className:"toggle-holder",children:[t.jsx(Ce,{className:"combine-toggle",checked:!l,onChange:()=>this.setState(o=>({compareBarsMode:{[u.SINGLE_TWO]:u.SINGLE_FIVE,[u.DOUBLE_TWO]:u.DOUBLE_FIVE,[u.BOTH_TWO]:u.BOTH_FIVE,[u.SINGLE_FIVE]:u.SINGLE_TWO,[u.DOUBLE_FIVE]:u.DOUBLE_TWO,[u.BOTH_FIVE]:u.BOTH_TWO}[o.compareBarsMode]})),children:i.DETAILED}),t.jsxs("div",{className:"tabs-holder",children:[t.jsx($,{text:i.ALL,active:[u.BOTH_TWO,u.BOTH_FIVE].includes(c),onToggle:()=>{this.setState(o=>({compareBarsMode:l?u.BOTH_TWO:u.BOTH_FIVE}))}}),t.jsx($,{text:i.SINGLES,active:[u.SINGLE_TWO,u.SINGLE_FIVE].includes(c),onToggle:o=>{this.setState(f=>({compareBarsMode:l?u.SINGLE_TWO:u.SINGLE_FIVE}))}}),t.jsx($,{text:i.DOUBLES,active:[u.DOUBLE_TWO,u.DOUBLE_FIVE].includes(c),onToggle:o=>{this.setState(f=>({compareBarsMode:l?u.DOUBLE_TWO:u.DOUBLE_FIVE}))}})]})]})})()}),t.jsx("div",{className:"chart-container",children:this.renderPerLevelComparison()})]})})}),t.jsxs("div",{className:"profile-section",children:[t.jsxs("div",{className:"profile-section-content",children:[t.jsxs("div",{className:"profile-section-2",children:[t.jsx("div",{className:"profile-sm-section-header",children:t.jsx("span",{children:i.ELO})}),t.jsx("div",{className:"chart-container",children:this.renderRankingHistory()})]}),t.jsxs("div",{className:"profile-section-2",children:[t.jsx("div",{className:"profile-sm-section-header",children:t.jsx("span",{children:i.PLACE_IN_TOP})}),t.jsx("div",{className:"chart-container",children:this.renderPlaceHistory()})]})]}),(()=>{const l=s.dayRange||e.filterRange,o=le(l[0]*1e3*60*60*24).format("L"),f=le(l[1]*1e3*60*60*24).format("L"),p=Math.max(l[0]-1,e.minMaxRange[0]),h=Math.min(l[0]+1,l[1]),x=Math.max(l[1]-1,l[0]),d=Math.min(l[1]+1,e.minMaxRange[1]);return t.jsxs("div",{className:"range-container",children:[t.jsx(Re,{range:l,min:e.minMaxRange[0],max:e.minMaxRange[1],onChange:this.onChangeDayRange}),t.jsxs("div",{className:"range-controls _flex-row",children:[t.jsx("button",{className:"btn btn-sm btn-dark",onClick:()=>this.onChangeDayRange([p,l[1]]),children:t.jsx(ce,{})}),t.jsx("span",{className:"date-text",children:o}),t.jsx("button",{className:"btn btn-sm btn-dark",onClick:()=>this.onChangeDayRange([h,l[1]]),children:t.jsx(de,{})}),t.jsx("div",{className:"_flex-fill"}),t.jsx("button",{className:"btn btn-sm btn-dark",onClick:()=>this.onChangeDayRange([l[0],x]),children:t.jsx(ce,{})}),t.jsx("span",{className:"date-text",children:f}),t.jsx("button",{className:"btn btn-sm btn-dark",onClick:()=>this.onChangeDayRange([l[0],d]),children:t.jsx(de,{})})]})]})})()]})]}),t.jsxs("div",{className:"profile-section-horizontal-container",children:[t.jsx("div",{className:"profile-section",children:t.jsx("div",{className:"profile-section-content",children:t.jsxs("div",{className:"profile-section-2",children:[t.jsx("div",{className:"profile-sm-section-header",children:t.jsx("span",{children:i.ACCURACY_BY_LEVEL})}),t.jsx("div",{className:"chart-container",children:this.renderAccuracyPoints()})]})})}),t.jsx("div",{className:"profile-section",children:t.jsx("div",{className:"profile-section-content",children:t.jsxs("div",{className:"profile-section-2",children:[t.jsx("div",{className:"profile-sm-section-header",children:t.jsx("span",{children:i.ACCURACY_BY_LEVEL})}),t.jsx("div",{className:"chart-container",children:this.renderAccuracyPoints(!0)})]})})})]})]})}render(){const{isLoading:i,profile:e,error:r}=this.props;Ie&&console.log("profile:",e);const s=this.context;return t.jsx("div",{className:"profile-compare-page",children:t.jsxs("div",{className:"content",children:[r&&r.message,t.jsxs("div",{className:"top-controls",children:[t.jsx("div",{className:"_flex-fill"}),t.jsxs("button",{disabled:i,className:"btn btn-sm btn-dark btn-icon",onClick:this.onRefresh,children:[t.jsx(Le,{})," ",s.UPDATE]})]}),i&&t.jsx(Se,{}),!i&&P.isEmpty(e)&&t.jsx("div",{className:"profile",children:"Profile not found"}),!i&&!P.isEmpty(e)&&this.renderProfile()]})})}}g(X,"contextType",ke),g(X,"propTypes",{profile:S.object,error:S.object,isLoading:S.bool.isRequired}),g(X,"defaultProps",{profile:{},profile2:{},combinedData:{}});const Lt=De(we(bt,Et)(X));export{Lt as default};
//# sourceMappingURL=ProfileCompare-206fcd8b.js.map
