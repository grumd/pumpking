{"version":3,"file":"SongsTop-5667e9e8.js","sources":["../../src/legacy-code/components/SongsTop/SongsTop.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { FaPlay } from 'react-icons/fa';\nimport classNames from 'classnames';\n\n// styles\nimport './songs-top.scss';\n\n// components\nimport Loader from 'legacy-code/components/Shared/Loader';\n\n// constants\n\n// reducers\nimport { fetchMostPlayed } from 'legacy-code/reducers/trackStats/mostPlayed';\nimport { fetchMostPlayedMonth } from 'legacy-code/reducers/trackStats/mostPlayedMonth';\nimport { fetchLeastPlayed } from 'legacy-code/reducers/trackStats/leastPlayed';\n\n// utils\nimport { getTimeAgo } from 'legacy-code/utils/leaderboards';\nimport { parseDate } from 'legacy-code/utils/date';\nimport { useLanguage } from 'utils/context/translation';\n\n// code\nfunction TopList({ fetchList, title, renderRightSide }) {\n  const [data, setData] = useState([]);\n  const [isLoading, setLoading] = useState(false);\n\n  const getRightSide =\n    renderRightSide ||\n    ((item) => (\n      <div className=\"playcount\">\n        <FaPlay />\n        <span>{item.countplay}</span>\n      </div>\n    ));\n\n  useEffect(() => {\n    setLoading(true);\n    fetchList()\n      .then((data) => {\n        data.success && setData(data.data);\n        setLoading(false);\n      })\n      .catch(() => {\n        setLoading(false);\n      });\n  }, [fetchList]);\n\n  return (\n    <div className=\"top-songs-list\">\n      <div className=\"top-songs-header\">\n        <span>{title}</span>\n      </div>\n      {isLoading && <Loader />}\n      {!isLoading &&\n        data.map((item, index) => {\n          return (\n            <div key={item.id} className=\"top-songs-item\">\n              <div className={classNames('place', `top-${index + 1}`, { best: index < 3 })}>\n                <span>{index + 1}.</span>\n              </div>\n              <div className=\"song-name\">{item.full_name}</div>\n              {getRightSide(item)}\n            </div>\n          );\n        })}\n    </div>\n  );\n}\n\nfunction leastPlayedRightSide(lang) {\n  const resultFunc = (item) => (\n    <div className=\"date\">\n      <span>{item.last_play ? getTimeAgo(lang, parseDate(item.last_play)) : lang.NEVER}</span>\n    </div>\n  );\n  return resultFunc;\n}\n\nexport default connect(null, {\n  fetchMostPlayed,\n  fetchMostPlayedMonth,\n  fetchLeastPlayed,\n})(function SongsTop({ fetchMostPlayed, fetchMostPlayedMonth, fetchLeastPlayed }) {\n  const lang = useLanguage();\n  return (\n    <div className=\"songs-top-page\">\n      <TopList fetchList={fetchMostPlayed} title={lang.TOP_POPULAR_TRACKS} />\n      <TopList fetchList={fetchMostPlayedMonth} title={lang.MONTHLY_TOP_POPULAR_TRACKS} />\n      <TopList\n        fetchList={fetchLeastPlayed}\n        title={lang.TRACKS_PLAYED_LONG_TIME_AGO}\n        renderRightSide={leastPlayedRightSide(lang)}\n      />\n      <div className=\"top-songs-list -placeholder\" />\n    </div>\n  );\n});\n"],"names":["TopList","fetchList","title","renderRightSide","data","setData","useState","isLoading","setLoading","getRightSide","item","jsxs","jsx","FaPlay","useEffect","Loader","index","classNames","leastPlayedRightSide","lang","getTimeAgo","parseDate","SongsTop","connect","fetchMostPlayed","fetchMostPlayedMonth","fetchLeastPlayed","useLanguage"],"mappings":"0PAwBA,SAASA,EAAQ,CAAE,UAAAC,EAAW,MAAAC,EAAO,gBAAAC,GAAmB,CACtD,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAA,SAAS,CAAE,CAAA,EAC7B,CAACC,EAAWC,CAAU,EAAIF,WAAS,EAAK,EAExCG,EACJN,IACEO,GACCC,EAAAA,KAAA,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAA,IAACC,EAAO,EAAA,EACRD,EAAAA,IAAC,OAAM,CAAA,SAAAF,EAAK,SAAU,CAAA,CACxB,CAAA,CAAA,GAGJI,OAAAA,EAAAA,UAAU,IAAM,CACdN,EAAW,EAAI,EACLP,EAAA,EACP,KAAMG,GAAS,CACdA,EAAK,SAAWC,EAAQD,EAAK,IAAI,EACjCI,EAAW,EAAK,CAAA,CACjB,EACA,MAAM,IAAM,CACXA,EAAW,EAAK,CAAA,CACjB,CAAA,EACF,CAACP,CAAS,CAAC,EAGZU,EAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,mBACb,SAACA,MAAA,OAAA,CAAM,WAAM,CACf,CAAA,EACCL,SAAcQ,EAAO,EAAA,EACrB,CAACR,GACAH,EAAK,IAAI,CAACM,EAAMM,IAEZL,EAAA,KAAC,MAAkB,CAAA,UAAU,iBAC3B,SAAA,CAAAC,MAAC,MAAI,CAAA,UAAWK,EAAW,QAAS,OAAOD,EAAQ,IAAK,CAAE,KAAMA,EAAQ,CAAG,CAAA,EACzE,gBAAC,OAAM,CAAA,SAAA,CAAQA,EAAA,EAAE,GAAA,CAAA,CAAC,CACpB,CAAA,EACCJ,EAAA,IAAA,MAAA,CAAI,UAAU,YAAa,WAAK,UAAU,EAC1CH,EAAaC,CAAI,CAAA,GALVA,EAAK,EAMf,CAEH,CACL,CAAA,CAAA,CAEJ,CAEA,SAASQ,EAAqBC,EAAM,CAM3B,OALaT,GAClBE,EAAAA,IAAC,OAAI,UAAU,OACb,eAAC,OAAM,CAAA,SAAAF,EAAK,UAAYU,EAAWD,EAAME,EAAUX,EAAK,SAAS,CAAC,EAAIS,EAAK,KAAM,CAAA,CACnF,CAAA,CAGJ,CAEA,MAAeG,EAAAC,EAAQ,KAAM,CAC3B,gBAAAC,EACA,qBAAAC,EACA,iBAAAC,CACF,CAAC,EAAE,SAAkB,CAAE,gBAAAF,EAAiB,qBAAAC,EAAsB,iBAAAC,GAAoB,CAChF,MAAMP,EAAOQ,IAEX,OAAAhB,EAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAAAC,EAAA,IAACZ,EAAQ,CAAA,UAAWwB,EAAiB,MAAOL,EAAK,mBAAoB,QACpEnB,EAAQ,CAAA,UAAWyB,EAAsB,MAAON,EAAK,2BAA4B,EAClFP,EAAA,IAACZ,EAAA,CACC,UAAW0B,EACX,MAAOP,EAAK,4BACZ,gBAAiBD,EAAqBC,CAAI,CAAA,CAC5C,EACAP,EAAAA,IAAC,MAAI,CAAA,UAAU,6BAA8B,CAAA,CAC/C,CAAA,CAAA,CAEJ,CAAC"}