{"version":3,"file":"SongsTop-BQRi7I4K.js","sources":["../../src/features/songs/SongsTop.tsx"],"sourcesContent":["import { Container, Flex, Group, SimpleGrid, Stack, Text } from '@mantine/core';\nimport { useQuery } from '@tanstack/react-query';\nimport { FaPlay } from 'react-icons/fa';\n\nimport { Card } from 'components/Card/Card';\nimport Loader from 'components/Loader/Loader';\n\nimport { useLanguage } from 'utils/context/translation';\nimport { getLongTimeAgo } from 'utils/timeAgo';\nimport { api } from 'utils/trpc';\n\ninterface TrackListItem {\n  id: number;\n  full_name: string;\n}\n\ninterface TrackListProps<T extends TrackListItem> {\n  title: string;\n  data: T[] | undefined;\n  isLoading: boolean;\n  renderRightSide: (item: T, index: number) => React.ReactNode;\n}\n\nfunction TrackList<T extends TrackListItem>({\n  title,\n  data,\n  isLoading,\n  renderRightSide,\n}: TrackListProps<T>): JSX.Element {\n  return (\n    <Card title={title} p=\"sm\">\n      {isLoading && <Loader />}\n      {!isLoading && data && (\n        <Stack component=\"ol\" gap=\"xxs\" p={0} m={0} style={{ listStyle: 'none' }}>\n          {data.map((item, index) => (\n            <Card key={item.id} component=\"li\" level={2} p=\"xs\" pt=\"xxs\" pb=\"xxs\">\n              <Flex align=\"center\" gap=\"sm\">\n                <Text\n                  fw={index < 3 ? 700 : 400}\n                  c={\n                    index === 0\n                      ? 'yellow.4'\n                      : index === 1\n                      ? 'gray.4'\n                      : index === 2\n                      ? 'orange.6'\n                      : 'dimmed'\n                  }\n                  w=\"1.6em\"\n                >\n                  {index + 1}.\n                </Text>\n                <Text flex={1}>{item.full_name}</Text>\n                {renderRightSide(item, index)}\n              </Flex>\n            </Card>\n          ))}\n        </Stack>\n      )}\n    </Card>\n  );\n}\n\ninterface PlaycountProps {\n  count: number;\n}\n\nfunction Playcount({ count }: PlaycountProps): JSX.Element {\n  return (\n    <Group gap=\"xs\" fw={600}>\n      <FaPlay style={{ fontSize: '60%' }} />\n      <span>{count}</span>\n    </Group>\n  );\n}\n\ninterface LastPlayedProps {\n  date: Date | null;\n  neverLabel: string;\n}\n\nfunction LastPlayed({ date, neverLabel }: LastPlayedProps): JSX.Element {\n  const lang = useLanguage();\n  return (\n    <Text fz=\"sm\" c=\"dimmed\">\n      {date ? getLongTimeAgo(lang, new Date(date)) : neverLabel}\n    </Text>\n  );\n}\n\nexport default function SongsTop(): JSX.Element {\n  const lang = useLanguage();\n\n  const mostPlayed = useQuery(api.tracks.mostPlayed.queryOptions());\n  const mostPlayedMonthly = useQuery(api.tracks.mostPlayedMonthly.queryOptions());\n  const leastRecentlyPlayed = useQuery(api.tracks.leastRecentlyPlayed.queryOptions());\n  const leastPlayed = useQuery(api.tracks.leastPlayed.queryOptions());\n\n  return (\n    <Container component=\"main\" size=\"md\" p=\"sm\">\n      <SimpleGrid cols={{ base: 1, sm: 2 }} spacing=\"md\">\n        <TrackList\n          title={lang.TOP_POPULAR_TRACKS}\n          data={mostPlayed.data}\n          isLoading={mostPlayed.isLoading}\n          renderRightSide={(item) => <Playcount count={item.countplay} />}\n        />\n        <TrackList\n          title={lang.MONTHLY_TOP_POPULAR_TRACKS}\n          data={mostPlayedMonthly.data}\n          isLoading={mostPlayedMonthly.isLoading}\n          renderRightSide={(item) => <Playcount count={item.countplay} />}\n        />\n        <TrackList\n          title={lang.TRACKS_PLAYED_LONG_TIME_AGO}\n          data={leastRecentlyPlayed.data}\n          isLoading={leastRecentlyPlayed.isLoading}\n          renderRightSide={(item) => (\n            <LastPlayed\n              date={item.last_play ? new Date(item.last_play) : null}\n              neverLabel={lang.NEVER}\n            />\n          )}\n        />\n        <TrackList\n          title={lang.LEAST_PLAYED_TRACKS}\n          data={leastPlayed.data}\n          isLoading={leastPlayed.isLoading}\n          renderRightSide={(item) => <Playcount count={item.countplay} />}\n        />\n      </SimpleGrid>\n    </Container>\n  );\n}\n"],"names":["TrackList","title","data","isLoading","renderRightSide","jsxs","Card","Loader","Stack","item","index","jsx","Flex","Text","Playcount","count","Group","FaPlay","LastPlayed","date","neverLabel","lang","useLanguage","getLongTimeAgo","SongsTop","mostPlayed","useQuery","api","mostPlayedMonthly","leastRecentlyPlayed","leastPlayed","Container","SimpleGrid"],"mappings":"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"}