import{G as br,r as De,j as G,R as _r,u as yr,a as Cr,b as Pr,c as Ur,d as In,g as Wn,F as Nr,e as Rr}from"./index-eb8b41e8.js";import{u as Or}from"./index.esm-58836504.js";import{u as Dr}from"./useUser-cd8f65e3.js";import{c as Yn}from"./index-19cebc34.js";import{u as Mr}from"./useSingleChartQuery-a62d1ac5.js";import{A as vr}from"./useFilter-c3e873b4.js";function Lr(e){return br({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M228.9 79.9L51.8 403.1C40.6 423.3 55.5 448 78.9 448h354.3c23.3 0 38.2-24.7 27.1-44.9L283.1 79.9c-11.7-21.2-42.5-21.2-54.2 0zM273.6 214L270 336h-28l-3.6-122h35.2zM256 402.4c-10.7 0-19.1-8.1-19.1-18.4s8.4-18.4 19.1-18.4 19.1 8.1 19.1 18.4-8.4 18.4-19.1 18.4z"}}]})(e)}const wr="_addResultPage_1gb69_1",kr="_addResultForm_1gb69_9",Gr="_fileInput_1gb69_19",Br="_confirmation_1gb69_23",Hr="_splitPanels_1gb69_23",jr="_screenshotPanel_1gb69_28",Zr="_formPanel_1gb69_31",$r="_chartName_1gb69_34",zr="_grid_1gb69_39",Xr="_warning_1gb69_45",be={addResultPage:wr,addResultForm:kr,fileInput:Gr,confirmation:Br,splitPanels:Hr,screenshotPanel:jr,formPanel:Zr,chartName:$r,grid:zr,warning:Xr},Wr="_popup_1p1u0_1",Yr="_overlay_1p1u0_13",Kr="_buttons_1p1u0_22",$e={popup:Wr,overlay:Yr,buttons:Kr},qr=({okText:e="OK"})=>{const[n,r]=De.useState(!1),i=De.useRef(null),t=o=>{n&&(r(!1),i.current&&i.current(o))};return{renderPopup:({content:o})=>n?G.jsxs(_r,{className:$e.popup,overlayClassName:$e.overlay,onRequestClose:()=>t(!1),isOpen:n,children:[G.jsx("div",{className:$e.content,children:o}),G.jsxs("div",{className:$e.buttons,children:[G.jsx("button",{className:Yn("btn btn-danger",$e.cancel),onClick:()=>t(!1),children:"Cancel"}),G.jsx("button",{className:Yn("btn btn-success",$e.ok),onClick:()=>t(!0),children:e})]})]}):null,confirm:()=>(r(!0),new Promise((o,c)=>{i.current=a=>{a?o():c()}}))}},Jr=e=>new Promise((n,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>{var t;return n(((t=i.result)==null?void 0:t.toString())??"")},i.onerror=r});var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});const Qr=new RegExp("^(\\d{4}):(\\d{2}):(\\d{2}) (\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,3}))?(?:([zZ])|([-+])(\\d{2}):(\\d{2}))?$");function ze(e,n){let r=e.toString(),i=n-r.length;for(;i>0;)i-=1,r=`0${r}`;return r}function Vr(e){const n=Qr.exec(e);if(n==null)return new Date(NaN);const r=new Date,i=n[8]?0:n[9]?(Number(n[10])*60+Number(n[11]))*(n[9]==="+"?1:-1):0;return r.setUTCFullYear(Number(n[1])),r.setUTCMonth(Number(n[2])-1),r.setUTCDate(Number(n[3])),r.setUTCHours(Number(n[4])),r.setUTCMinutes(Number(n[5])+i),r.setUTCSeconds(Number(n[6])),r.setUTCMilliseconds(Number(n[7])||0),r}var ei=Bn.parse=Vr;function ni(e,n,r){if(isNaN(e.getTime()))return"";const i=ze(e.getUTCFullYear(),4),t=ze(e.getUTCMonth()+1,2),o=ze(e.getUTCDate(),2),c=ze(e.getUTCHours(),2),a=ze(e.getUTCMinutes(),2),h=ze(e.getUTCSeconds(),2),x=n?`.${Math.round(e.getUTCMilliseconds()/10)}`:"";return`${i}:${t}:${o} ${c}:${a}:${h}${x}${r?"Z":""}`}Bn.format=ni;function X(e,n,r){const i=[];for(let t=0;t<r&&n+t<e.byteLength;t++)i.push(e.getUint8(n+t));return Ke(i)}function ti(e,n,r){const i=[];for(let t=0;t<r&&n+t<e.byteLength;t+=2)i.push(e.getUint16(n+t));return Ke(i)}function Ke(e){return e.map(n=>String.fromCharCode(n)).join("")}function K(){for(let e=1;e<arguments.length;e++)for(const n in arguments[e])arguments[0][n]=arguments[e][n];return arguments[0]}function Rt(e,n,r){let i=!1;Object.defineProperty(e,n,{get(){return i||(i=!0,Object.defineProperty(e,n,{configurable:!0,enumerable:!0,value:r.apply(e),writable:!0})),e[n]},configurable:!0,enumerable:!0})}function Ot(e){if(typeof btoa<"u")return btoa(typeof e=="string"?e:Array.prototype.reduce.call(new Uint8Array(e),(n,r)=>n+String.fromCharCode(r),""));if(!(typeof Buffer>"u"))return typeof Buffer.from!==void 0?Buffer.from(e).toString("base64"):new Buffer(e).toString("base64")}function ri(e){const n=e.substring(e.indexOf(",")+1);if(e.indexOf(";base64")!==-1)return typeof atob<"u"?Uint8Array.from(atob(n),i=>i.charCodeAt(0)).buffer:typeof Buffer>"u"?void 0:typeof Buffer.from!==void 0?Buffer.from(n,"base64"):new Buffer(n,"base64");const r=decodeURIComponent(n);return typeof Buffer<"u"?typeof Buffer.from!==void 0?Buffer.from(r):new Buffer(r):Uint8Array.from(r,i=>i.charCodeAt(0)).buffer}let ii=class{constructor(n){if(oi(n))throw new Error("DataView: Passed buffer type is unsupported.");this.buffer=n,this.byteLength=this.buffer.length}getUint8(n){return this.buffer.readUInt8(n)}getUint16(n,r){return r?this.buffer.readUInt16LE(n):this.buffer.readUInt16BE(n)}getUint32(n,r){return r?this.buffer.readUInt32LE(n):this.buffer.readUInt32BE(n)}getInt32(n,r){return r?this.buffer.readInt32LE(n):this.buffer.readInt32BE(n)}};function oi(e){return typeof e!="object"||e.length===void 0||e.readUInt8===void 0||e.readUInt16LE===void 0||e.readUInt16BE===void 0||e.readUInt32LE===void 0||e.readUInt32BE===void 0||e.readInt32LE===void 0||e.readInt32BE===void 0}function oe(e){return e.map(n=>String.fromCharCode(n)).join("")}function Pn(e){if(e.length>=8){const n=oe(e.slice(0,8));if(n==="ASCII\0\0\0")return oe(e.slice(8));if(n==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(n==="UNICODE\0")return"[Unicode encoded text]";if(n==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}function cn(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}const Un=18761,Nn=19789,He={BIG_ENDIAN:Nn,LITTLE_ENDIAN:Un,getByteOrder:si};function si(e,n){if(e.getUint16(n)===Un)return Un;if(e.getUint16(n)===Nn)return Nn;throw new Error("Illegal byte order value. Faulty image.")}const Kn={isTiffFile:ai,findTiffOffsets:ui};function ai(e){return!!e&&e.byteLength>=4&&ci(e)}function ci(e){const i=e.getUint16(0)===He.LITTLE_ENDIAN;return e.getUint16(2,i)===42}function ui(){return{hasAppMarkers:!0,tiffHeaderOffset:0}}const qn={isJpegFile:yi,findJpegOffsets:Ci},fi=2,li=65496,Jn=2,Se=4,ge=2,di=2,hi=10,gi=18,Qn=33,Vn=79,et=18,pi=8,Rn="ICC_PROFILE\0",Dt=Se+Rn.length,mi=Dt+1,nt="MPF\0",Mt=65472,vt=65474,xi=65476,Ei=65499,Si=65501,Ti=65498,Lt=65504,Hn=65505,wt=65506,Ii=65517,Ai=65519,Fi=65534,bi=65535,_i="JFIF",On="Exif",tt="http://ns.adobe.com/xap/1.0/\0",rt="http://ns.adobe.com/xmp/extension/\0",it="Photoshop 3.0";function yi(e){return!!e&&e.byteLength>=fi&&e.getUint16(0)===li}function Ci(e){let n=Jn,r,i,t,o,c,a,h,x,s;for(;n+Se+5<=e.byteLength;){if(Pi(e,n))i=n+ge;else if(Ui(e,n))t=n+ge;else if(Oi(e,n))r=e.getUint16(n+ge),o=n+di;else if(Di(e,n))r=e.getUint16(n+ge),c=n+hi;else if(Mi(e,n))h||(h=[]),r=e.getUint16(n+ge),h.push(ki(n,r));else if(Li(e,n))h||(h=[]),r=e.getUint16(n+ge),h.push(Gi(n,r));else if(Bi(e,n))r=e.getUint16(n+ge),a=n+gi;else if(Ni(e,n)){r=e.getUint16(n+ge);const f=n+et,u=r-(et-ge),l=e.getUint8(n+Dt),E=e.getUint8(n+mi);x||(x=[]),x.push({offset:f,length:u,chunkNumber:l,chunksTotal:E})}else if(Ri(e,n))r=e.getUint16(n+ge),s=n+pi;else if(Hi(e,n))r=e.getUint16(n+ge);else if(ji(e,n)){n++;continue}else break;n+=ge+r}return{hasAppMarkers:n>Jn,fileDataOffset:i||t,jfifDataOffset:o,tiffHeaderOffset:c,iptcDataOffset:a,xmpChunks:h,iccChunks:x,mpfDataOffset:s}}function Pi(e,n){return e.getUint16(n)===Mt}function Ui(e,n){return e.getUint16(n)===vt}function Ni(e,n){const r=Rn.length;return e.getUint16(n)===wt&&X(e,n+Se,r)===Rn}function Ri(e,n){const r=nt.length;return e.getUint16(n)===wt&&X(e,n+Se,r)===nt}function Oi(e,n){const r=On.length;return e.getUint16(n)===Lt&&X(e,n+Se,r)===_i&&e.getUint8(n+Se+r)===0}function Di(e,n){const r=On.length;return e.getUint16(n)===Hn&&X(e,n+Se,r)===On&&e.getUint8(n+Se+r)===0}function Mi(e,n){return e.getUint16(n)===Hn&&vi(e,n)}function vi(e,n){const r=tt.length;return X(e,n+Se,r)===tt}function Li(e,n){return e.getUint16(n)===Hn&&wi(e,n)}function wi(e,n){const r=rt.length;return X(e,n+Se,r)===rt}function ki(e,n){return{dataOffset:e+Qn,length:n-(Qn-ge)}}function Gi(e,n){return{dataOffset:e+Vn,length:n-(Vn-ge)}}function Bi(e,n){const r=it.length;return e.getUint16(n)===Ii&&X(e,n+Se,r)===it&&e.getUint8(n+Se+r)===0}function Hi(e,n){const r=e.getUint16(n);return r>=Lt&&r<=Ai||r===Fi||r===Mt||r===vt||r===xi||r===Ei||r===Si||r===Ti}function ji(e,n){return e.getUint16(n)===bi}const ot={isPngFile:zi,findPngOffsets:Xi},Dn=`PNG\r

`,un=4,ye=4,nn=0,je=un,le=un+ye,Mn="XML:com.adobe.xmp\0",Zi="tEXt",kt="iTXt",Gt="pHYs",Bt="tIME",$i="eXIf";function zi(e){return!!e&&X(e,0,Dn.length)===Dn}function Xi(e){const r={hasAppMarkers:!1};let i=Dn.length;for(;i+un+ye<=e.byteLength;){if(Wi(e,i))r.hasAppMarkers=!0,r.pngHeaderOffset=i+le;else if(Yi(e,i)){const t=Qi(e,i);t!==void 0&&(r.hasAppMarkers=!0,r.xmpChunks=[{dataOffset:t,length:e.getUint32(i+nn)-(t-(i+le))}])}else if(Ki(e,i)){r.hasAppMarkers=!0;const t=X(e,i+je,ye);r.pngTextChunks||(r.pngTextChunks=[]),r.pngTextChunks.push({length:e.getUint32(i+nn),type:t,offset:i+le})}else qi(e,i)?(r.hasAppMarkers=!0,r.tiffHeaderOffset=i+le):Ji(e,i)&&(r.hasAppMarkers=!0,r.pngChunkOffsets||(r.pngChunkOffsets=[]),r.pngChunkOffsets.push(i+nn));i+=e.getUint32(i+nn)+un+ye+4}return r}function Wi(e,n){const r="IHDR";return X(e,n+je,ye)===r}function Yi(e,n){const r="iTXt";return X(e,n+je,ye)===r&&X(e,n+le,Mn.length)===Mn}function Ki(e,n){const r="tEXt",i="iTXt",t=X(e,n+je,ye);return t===r||t===i}function qi(e,n){return X(e,n+je,ye)===$i}function Ji(e,n){const r=[Gt,Bt],i=X(e,n+je,ye);return r.includes(i)}function Qi(e,n){n+=le+Mn.length+1+1;let t=0;for(;t<2&&n<e.byteLength;)e.getUint8(n)===0&&t++,n++;if(!(t<2))return n}const st={isHeicFile:Vi,findHeicOffsets:eo};function Vi(e){if(!e)return!1;const n="ftyp",r=4,i=["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"],t=4,o=X(e,r+n.length,t);return X(e,r,n.length)===n&&i.indexOf(o)!==-1}function eo(e){{const{offset:n,length:r}=no(e);if(n===void 0)return{hasAppMarkers:!1};const i=Math.min(n+r,e.byteLength),{exifItemOffset:t,ilocOffset:o,colrOffset:c}=oo(e,n,i),a=so(e,t,o,i),h=ao(e,c,i);return{hasAppMarkers:a!==void 0||h!==void 0,tiffHeaderOffset:a,iccChunks:h}}}function no(e){let o=0;for(;o+4+4<=e.byteLength;){const c=Ht(e,o);if(c>=8&&X(e,o+4,4)==="meta")return{offset:o,length:c};o+=c}return{offset:void 0,length:0}}function Ht(e,n){const i=e.getUint32(n);return to(i)?e.byteLength-n:ro(i)&&io(e,n)?e.getUint32(n+12):i}function to(e){return e===0}function ro(e){return e===1}function io(e,n){return e.getUint32(n+8)===0}function oo(e,n,r){const o={ilocOffset:void 0,exifItemOffset:void 0,colrOffset:void 0};for(;n+4<=r&&(!o.ilocOffset||!o.exifItemOffset||!o.colrOffset);){const c=X(e,n,4);c==="iloc"?o.ilocOffset=n:c==="Exif"?o.exifItemOffset=n+-4:c==="colr"&&(o.colrOffset=n+-4),n++}return o}function so(e,n,r,i){if(!r||!n||n+2>i)return;const s=e.getUint16(n);for(r+=12;r+16<=i;){if(e.getUint16(r)===s){const u=e.getUint32(r+8);if(u+4<=e.byteLength){const E=e.getUint32(u)+4;return u+E}}r+=16}}function ao(e,n,r){if(!n||n+12>r)return;const c=X(e,n+8,4);if(!(c!=="prof"&&c!=="rICC"))return[{offset:n+12,length:Ht(e,n)-12,chunkNumber:1,chunksTotal:1}]}const at={isWebpFile:co,findOffsets:uo};function co(e){const r="RIFF",t="WEBP";return!!e&&X(e,0,r.length)===r&&X(e,8,t.length)===t}function uo(e){const i="Exif\0\0";let o=12,c=!1,a,h,x;for(;o+8<e.byteLength;){const s=X(e,o,4),f=e.getUint32(o+4,!0);s==="EXIF"?(c=!0,X(e,o+8,i.length)===i?a=o+8+i.length:a=o+8):s==="XMP "?(c=!0,h=[{dataOffset:o+8,length:f}]):s==="ICCP"&&(c=!0,x=[{offset:o+8,length:f,chunkNumber:1,chunksTotal:1}]),o+=8+(f%2===0?f:f+1)}return{hasAppMarkers:c,tiffHeaderOffset:a,xmpChunks:h,iccChunks:x}}const fo={parseAppMarkers:lo};function lo(e){if(Kn.isTiffFile(e))return Kn.findTiffOffsets();if(qn.isJpegFile(e))return qn.findJpegOffsets(e);if(ot.isPngFile(e))return ot.findPngOffsets(e);if(st.isHeicFile(e))return st.findHeicOffsets(e);if(at.isWebpFile(e))return at.findOffsets(e);throw new Error("Invalid image format")}const jt={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},vn={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},H={getAsciiValue:ho,getByteAt:Zt,getAsciiAt:go,getShortAt:po,getLongAt:fn,getRationalAt:mo,getUndefinedAt:xo,getSlongAt:Ln,getSrationalAt:Eo,getIfdPointerAt:So,typeSizes:jt,tagTypes:vn,getTypeSize:To};function ho(e){return e.map(n=>String.fromCharCode(n))}function Zt(e,n){return e.getUint8(n)}function go(e,n){return e.getUint8(n)}function po(e,n,r){return e.getUint16(n,r===He.LITTLE_ENDIAN)}function fn(e,n,r){return e.getUint32(n,r===He.LITTLE_ENDIAN)}function mo(e,n,r){return[fn(e,n,r),fn(e,n+4,r)]}function xo(e,n){return Zt(e,n)}function Ln(e,n,r){return e.getInt32(n,r===He.LITTLE_ENDIAN)}function Eo(e,n,r){return[Ln(e,n,r),Ln(e,n+4,r)]}function So(e,n,r){return fn(e,n,r)}function To(e){if(vn[e]===void 0)throw new Error("No such type found.");return jt[vn[e]]}const z={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace(e){return e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(e){return e.map(n=>{if(n===49)return"Y";if(n===50)return"Cb";if(n===51)return"Cr";if(n===52)return"R";if(n===53)return"G";if(n===54)return"B"}).join("")},Contrast(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},CustomRendered(e){return e===0?"Normal process":e===1?"Custom process":"Unknown"},ExposureMode(e){return e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},ExposureProgram(e){return e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},ExposureTime(e){return e[0]>=e[1]?`${Math.round(e[0]/e[1])}`:e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${e[0]/e[1]}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700 – 7100K)":e===13?"Day white fluorescent (N 4600 – 5400K)":e===14?"Cool white fluorescent (W 3900 – 4500K)":e===15?"White fluorescent (WW 3200 – 3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown",MeteringMode(e){return e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},ResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},Saturation(e){return e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},SceneCaptureType(e){return e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},Sharpness(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},ShutterSpeedValue(e){const n=Math.pow(2,e[0]/e[1]);return n<=1?`${Math.round(1/n)}`:`1/${Math.round(n)}`},WhiteBalance(e){return e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])},Io={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:z.XResolution},283:{name:"YResolution",description:z.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:z.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(n=>`${n[0]}/${n[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(n=>`${n[0]}/${n[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{const n={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(r=>n[r]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(n=>""+n[0]/n[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(n=>""+n[0]/n[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:z.LightSource},50779:{name:"CalibrationIlluminant2",description:z.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"},Ao={33434:{name:"ExposureTime",description:z.ExposureTime},33437:{name:"FNumber",description:z.FNumber},34850:{name:"ExposureProgram",description:z.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>oe(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:z.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:z.ShutterSpeedValue},37378:{name:"ApertureValue",description:z.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:z.MeteringMode},37384:{name:"LightSource",description:z.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:z.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:Pn},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" °C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" °"},40960:{name:"FlashpixVersion",description:e=>e.map(n=>String.fromCharCode(n)).join("")},40961:{name:"ColorSpace",description:z.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:z.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,n])=>`X: ${e}, Y: ${n}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:z.CustomRendered},41986:{name:"ExposureMode",description:z.ExposureMode},41987:{name:"WhiteBalance",description:z.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:e=>e===0?"Unknown":e},41990:{name:"SceneCaptureType",description:z.SceneCaptureType},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:z.Contrast},41993:{name:"Saturation",description:z.Saturation},41994:{name:"Sharpness",description:z.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{const n=`${e[0][0]/e[0][1]}-${e[1][0]/e[1][1]} mm`;return e[3][1]===0?`${n} f/?`:`${n} f/${1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},Fo={0:{name:"GPSVersionID",description:e=>e[0]===2&&e[1]===2&&e[2]===0&&e[3]===0?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{const n=e.join("");return n==="N"?"North latitude":n==="S"?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:cn},3:{name:"GPSLongitudeRef",description:e=>{const n=e.join("");return n==="E"?"East longitude":n==="W"?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:cn},5:{name:"GPSAltitudeRef",description:e=>e===0?"Sea level":e===1?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map(([n,r])=>{const i=n/r;return/^\d(\.|$)/.test(`${i}`)?`0${i}`:i}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{const n=e.join("");return n==="A"?"Measurement in progress":n==="V"?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{const n=e.join("");return n==="2"?"2-dimensional measurement":n==="3"?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{const n=e.join("");return n==="K"?"Kilometers per hour":n==="M"?"Miles per hour":n==="N"?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{const n=e.join("");return n==="T"?"True direction":n==="M"?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{const n=e.join("");return n==="T"?"True direction":n==="M"?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{const n=e.join("");return n==="N"?"North latitude":n==="S"?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{const n=e.join("");return n==="E"?"East longitude":n==="W"?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{const n=e.join("");return n==="T"?"True direction":n==="M"?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{const n=e.join("");return n==="K"?"Kilometers":n==="M"?"Miles":n==="N"?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:Pn},28:{name:"GPSAreaInformation",description:Pn},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>e===0?"Measurement without differential correction":e===1?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"},bo={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>oe(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"},_o={45056:{name:"MPFVersion",description:e=>oe(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"},ct=K({},Io,Ao),Oe={"0th":ct,exif:ct,gps:Fo,interoperability:bo,mpf:_o},ut="Exif IFD Pointer",ft="GPS Info IFD Pointer",lt="Interoperability IFD Pointer",yo={1:H.getByteAt,2:H.getAsciiAt,3:H.getShortAt,4:H.getLongAt,5:H.getRationalAt,7:H.getUndefinedAt,9:H.getSlongAt,10:H.getSrationalAt,13:H.getIfdPointerAt},dt={read:Co,readMpf:Oo};function Co(e,n,r){const i=He.getByteOrder(e,n);let t=Po(e,n,i,r);return t=Uo(t,e,n,i,r),t=No(t,e,n,i,r),t=Ro(t,e,n,i,r),t}function Po(e,n,r,i){return qe(e,"0th",n,$t(e,n,r),r,i)}function $t(e,n,r){return n+H.getLongAt(e,n+4,r)}function Uo(e,n,r,i,t){return e[ut]!==void 0?K(e,qe(n,"exif",r,r+e[ut].value,i,t)):e}function No(e,n,r,i,t){return e[ft]!==void 0?K(e,qe(n,"gps",r,r+e[ft].value,i,t)):e}function Ro(e,n,r,i,t){return e[lt]!==void 0?K(e,qe(n,"interoperability",r,r+e[lt].value,i,t)):e}function Oo(e,n,r){const i=He.getByteOrder(e,n),t=qe(e,"mpf",n,$t(e,n,i),i,r);return Do(e,n,t,i)}function Do(e,n,r,i){if(!r.MPEntry)return r;const o=[];for(let c=0;c<Math.ceil(r.MPEntry.value.length/16);c++){o[c]={};const a=Ve(r.MPEntry.value,c*16,H.getTypeSize("LONG"),i);o[c].ImageFlags=Mo(a),o[c].ImageFormat=vo(a),o[c].ImageType=Lo(a);const h=Ve(r.MPEntry.value,c*16+4,H.getTypeSize("LONG"),i);o[c].ImageSize={value:h,description:""+h};const x=wo(c)?0:Ve(r.MPEntry.value,c*16+8,H.getTypeSize("LONG"),i)+n;o[c].ImageOffset={value:x,description:""+x};const s=Ve(r.MPEntry.value,c*16+12,H.getTypeSize("SHORT"),i);o[c].DependentImage1EntryNumber={value:s,description:""+s};const f=Ve(r.MPEntry.value,c*16+14,H.getTypeSize("SHORT"),i);o[c].DependentImage2EntryNumber={value:f,description:""+f},o[c].image=e.buffer.slice(x,x+h),Rt(o[c],"base64",function(){return Ot(this.image)})}return r.Images=o,r}function Ve(e,n,r,i){if(i===He.LITTLE_ENDIAN){let o=0;for(let c=0;c<r;c++)o+=e[n+c]<<8*c;return o}let t=0;for(let o=0;o<r;o++)t+=e[n+o]<<8*(r-1-o);return t}function Mo(e){const n=[e>>31&1,e>>30&1,e>>29&1],r=[];return n[0]&&r.push("Dependent Parent Image"),n[1]&&r.push("Dependent Child Image"),n[2]&&r.push("Representative Image"),{value:n,description:r.join(", ")||"None"}}function vo(e){const n=e>>24&7;return{value:n,description:n===0?"JPEG":"Unknown"}}function Lo(e){const n=e&16777215;return{value:n,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[n]||"Unknown"}}function wo(e){return e===0}function qe(e,n,r,i,t,o){const c=H.getTypeSize("SHORT"),a=12,h={},x=ko(e,i,t);i+=c;for(let s=0;s<x&&!(i+a>e.byteLength);s++){const f=Go(e,n,r,i,t,o);f!==void 0&&(h[f.name]={id:f.id,value:f.value,description:f.description}),i+=a}if(i<e.byteLength-H.getTypeSize("LONG")){const s=H.getLongAt(e,i,t);s!==0&&(h.Thumbnail=qe(e,n,r,r+s,t,!0))}return h}function ko(e,n,r){return n+H.getTypeSize("SHORT")<=e.byteLength?H.getShortAt(e,n,r):0}function Go(e,n,r,i,t,o){const a=H.getTypeSize("SHORT"),h=a+H.getTypeSize("SHORT"),x=h+H.getTypeSize("LONG"),s=H.getShortAt(e,i,t),f=H.getShortAt(e,i+a,t),u=H.getLongAt(e,i+h,t);let l;if(H.typeSizes[f]===void 0||!o&&Oe[n][s]===void 0)return;if(Bo(f,u))l=ht(e,i+x,f,u,t);else{const I=H.getLongAt(e,i+x,t);if(Ho(e,r,I,f,u)){const T=s===33723;l=ht(e,r+I,f,u,t,T)}else l="<faulty value>"}f===H.tagTypes.ASCII&&(l=jo(l),l=Zo(l));let E=`undefined-${s}`,y=l;if(Oe[n][s]!==void 0)if(Oe[n][s].name!==void 0&&Oe[n][s].description!==void 0){E=Oe[n][s].name;try{y=Oe[n][s].description(l)}catch{y=gt(l)}}else f===H.tagTypes.RATIONAL||f===H.tagTypes.SRATIONAL?(E=Oe[n][s],y=""+l[0]/l[1]):(E=Oe[n][s],y=gt(l));return{id:s,name:E,value:l,description:y}}function Bo(e,n){return H.typeSizes[e]*n<=H.getTypeSize("LONG")}function ht(e,n,r,i,t,o=!1){let c=[];o&&(i=i*H.typeSizes[r],r=H.tagTypes.BYTE);for(let a=0;a<i;a++)c.push(yo[r](e,n,t)),n+=H.typeSizes[r];return r===H.tagTypes.ASCII?c=H.getAsciiValue(c):c.length===1&&(c=c[0]),c}function Ho(e,n,r,i,t){return n+r+H.typeSizes[i]*t<=e.byteLength}function jo(e){const n=[];let r=0;for(let i=0;i<e.length;i++){if(e[i]==="\0"){r++;continue}n[r]===void 0&&(n[r]=""),n[r]+=e[i]}return n}function Zo(e){try{return e.map(n=>decodeURIComponent(escape(n)))}catch{return e}}function gt(e){return e instanceof Array?e.join(", "):e}const $o={read:zo};function zo(e,n){const r=Xo(e,n),i=qo(e,n,r);return{"Bits Per Sample":Wo(e,n,r),"Image Height":Yo(e,n,r),"Image Width":Ko(e,n,r),"Color Components":i,Subsampling:i&&Jo(e,n,i.value,r)}}function Xo(e,n){return H.getShortAt(e,n)}function Wo(e,n,r){if(2+1>r)return;const o=H.getByteAt(e,n+2);return{value:o,description:""+o}}function Yo(e,n,r){if(3+2>r)return;const o=H.getShortAt(e,n+3);return{value:o,description:`${o}px`}}function Ko(e,n,r){if(5+2>r)return;const o=H.getShortAt(e,n+5);return{value:o,description:`${o}px`}}function qo(e,n,r){if(7+1>r)return;const o=H.getByteAt(e,n+7);return{value:o,description:""+o}}function Jo(e,n,r,i){if(8+3*r>i)return;const c=[];for(let a=0;a<r;a++){const h=n+8+a*3;c.push([H.getByteAt(e,h),H.getByteAt(e,h+1),H.getByteAt(e,h+2)])}return{value:c,description:c.length>1?Qo(c)+Vo(c):""}}function Qo(e){const n={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(r=>n[r[0]]).join("")}function Vo(e){const n={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return e.length===0||e[0][1]===void 0||n[e[0][1]]===void 0?"":n[e[0][1]]}const es={read:ns};function ns(e,n){const r=ts(e,n),i=cs(e,n,r),t=us(e,n,r),o={"JFIF Version":rs(e,n,r),"Resolution Unit":is(e,n,r),XResolution:ss(e,n,r),YResolution:as(e,n,r),"JFIF Thumbnail Width":i,"JFIF Thumbnail Height":t};if(i!==void 0&&t!==void 0){const c=fs(e,n,3*i.value*t.value,r);c&&(o["JFIF Thumbnail"]=c)}for(const c in o)o[c]===void 0&&delete o[c];return o}function ts(e,n){return H.getShortAt(e,n)}function rs(e,n,r){if(7+2>r)return;const o=H.getByteAt(e,n+7),c=H.getByteAt(e,n+7+1);return{value:o*256+c,description:o+"."+c}}function is(e,n,r){if(9+1>r)return;const o=H.getByteAt(e,n+9);return{value:o,description:os(o)}}function os(e){return e===0?"None":e===1?"inches":e===2?"cm":"Unknown"}function ss(e,n,r){if(10+2>r)return;const o=H.getShortAt(e,n+10);return{value:o,description:""+o}}function as(e,n,r){if(12+2>r)return;const o=H.getShortAt(e,n+12);return{value:o,description:""+o}}function cs(e,n,r){if(14+1>r)return;const o=H.getByteAt(e,n+14);return{value:o,description:`${o}px`}}function us(e,n,r){if(15+1>r)return;const o=H.getByteAt(e,n+15);return{value:o,description:`${o}px`}}function fs(e,n,r,i){return r===0||16+r>i?void 0:{value:e.buffer.slice(n+16,n+16+r),description:"<24-bit RGB pixel data>"}}const Me={iptc:{256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:An},336:{name:"Time Sent",description:Fn},346:{name:"Coded Character Set",description:pt,encoding_name:pt},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>oe(e)==="01"?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:e=>{const n=oe(e).split(":");return n[2]+(n[3]?"/"+n[3]:"")+(n[4]?"/"+n[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{const n=oe(e);return n==="01"?"Object Kill":n==="02"?"Object Replace":n==="03"?"Object Append":n==="04"?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:An},572:{name:"Time Created",description:Fn},574:{name:"Digital Creation Date",description:An},575:{name:"Digital Creation Time",description:Fn},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{const n=oe(e);return n==="a"?"morning":n==="p"?"evening":n==="b"?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{const n=oe(e);return n==="P"?"Portrait":n==="L"?"Landscape":n==="S"?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{const n=oe(e),r=n.charAt(0),i=n.charAt(1);let t="";return r==="1"?t+="Mono":r==="2"&&(t+="Stereo"),i==="A"?t+=", actuality":i==="C"?t+=", question and answer session":i==="M"?t+=", music, transmitted by itself":i==="Q"?t+=", response to a question":i==="R"?t+=", raw sound":i==="S"?t+=", scener":i==="V"?t+=", voicer":i==="W"&&(t+=", wrap"),t!==""?t:n}},663:{name:"Audio Sampling Rate",description:e=>parseInt(oe(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{const n=parseInt(oe(e),10);return n+(n===1?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{const n=oe(e);return n.length>=6?n.substr(0,2)+":"+n.substr(2,2)+":"+n.substr(4,2):n}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>e.length===2?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(e.length===2){const n=(e[0]<<8)+e[1];return n===0?"No ObjectData":n===1?"IPTC-NAA Digital Newsphoto Parameter Record":n===2?"IPTC7901 Recommended Message Format":n===3?"Tagged Image File Format (Adobe/Aldus Image data)":n===4?"Illustrator (Adobe Graphics data)":n===5?"AppleSingle (Apple Computer Inc)":n===6?"NAA 89-3 (ANPA 1312)":n===7?"MacBinary II":n===8?"IPTC Unstructured Character Oriented File Format (UCOFF)":n===9?"United Press International ANPA 1312 variant":n===10?"United Press International Down-Load Message":n===11?"JPEG File Interchange (JFIF)":n===12?"Photo-CD Image-Pac (Eastman Kodak)":n===13?"Microsoft Bit Mapped Graphics File [*.BMP]":n===14?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":n===15?"Audio plus Moving Video [*.AVI] (Microsoft)":n===16?"PC DOS/Windows Executable Files [*.COM][*.EXE]":n===17?"Compressed Binary File [*.ZIP] (PKWare Inc)":n===18?"Audio Interchange File Format AIFF (Apple Computer Inc)":n===19?"RIFF Wave (Microsoft Corporation)":n===20?"Freehand (Macromedia/Aldus)":n===21?'Hypertext Markup Language "HTML" (The Internet Society)':n===22?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":n===23?"MPEG 2 Audio Layer 3, ISO/IEC":n===24?"Portable Document File (*.PDF) Adobe":n===25?"News Industry Text Format (NITF)":n===26?"Tape Archive (*.TAR)":n===27?"Tidningarnas Telegrambyrå NITF version (TTNITF DTD)":n===28?"Ritzaus Bureau NITF version (RBNITF DTD)":n===29?"Corel Draw [*.CDR]":`Unknown format ${n}`}return oe(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,n)=>{const r={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},i=oe(e);if(n["ObjectData Preview File Format"]){const t=oe(n["ObjectData Preview File Format"].value);if(r[t]&&r[t][i])return r[t][i]}return i}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let n=0;for(let r=0;r<e.length;r++)n=(n<<8)+e[r];return n.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let n=0;for(let r=0;r<e.length;r++)n=(n<<8)+e[r];return n.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let n=0;for(let r=0;r<e.length;r++)n=(n<<8)+e[r];return n.toString()}}}};function An(e){const n=oe(e);return n.length>=8?n.substr(0,4)+"-"+n.substr(4,2)+"-"+n.substr(6,2):n}function Fn(e){const n=oe(e);let r=n;return n.length>=6&&(r=n.substr(0,2)+":"+n.substr(2,2)+":"+n.substr(4,2),n.length===11&&(r+=n.substr(6,1)+n.substr(7,2)+":"+n.substr(9,2))),r}function pt(e){const n=oe(e);return n==="\x1B%G"?"UTF-8":n==="\x1B%5"?"Windows-1252":n==="\x1B%/G"?"UTF-8 Level 1":n==="\x1B%/H"?"UTF-8 Level 2":n==="\x1B%/I"?"UTF-8 Level 3":n==="\x1B/A"?"ISO-8859-1":n==="\x1B/B"?"ISO-8859-2":n==="\x1B/C"?"ISO-8859-3":n==="\x1B/D"?"ISO-8859-4":n==="\x1B/@"?"ISO-8859-5":n==="\x1B/G"?"ISO-8859-6":n==="\x1B/F"?"ISO-8859-7":n==="\x1B/H"?"ISO-8859-8":"Unknown"}const ls={get:ds};function ds(){if(typeof TextDecoder<"u")return TextDecoder}const hs=5,zt={decode:gs,TAG_HEADER_SIZE:hs};function gs(e,n){const r=ls.get();if(typeof r<"u"&&e!==void 0)try{return new r(e).decode(Uint8Array.from(n))}catch{}const i=n.map(t=>String.fromCharCode(t)).join("");return ps(i)}function ps(e){try{return decodeURIComponent(escape(e))}catch{return e}}const ms=943868237,Xt=4,bn=Xt+8,xs=1028,Wt=5,mt={read:Es};function Es(e,n,r){try{if(Array.isArray(e))return xt(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,r);const{naaBlock:i,dataOffset:t}=Ss(e,n);return xt(e,i,t,r)}catch{return{}}}function Ss(e,n){for(;n+bn<=e.byteLength;){const r=Ts(e,n);if(Is(r))return{naaBlock:r,dataOffset:n+bn};n+=bn+r.size+As(r)}throw new Error("No IPTC NAA resource block.")}function Ts(e,n){if(e.getUint32(n,!1)!==ms)throw new Error("Not an IPTC resource block.");return{type:e.getUint16(n+Xt),size:e.getUint16(n+10)}}function Is(e){return e.type===xs}function As(e){return e.size%2!==0?1:0}function xt(e,n,r,i){const t={};let o;const c=r+n.size;for(;r<c&&r<e.byteLength;){const{tag:a,tagSize:h}=Fs(e,r,t,o,i);if(a===null)break;a&&("encoding"in a&&(o=a.encoding),t[a.name]===void 0||a.repeatable===void 0?t[a.name]={id:a.id,value:a.value,description:a.description}:(t[a.name]instanceof Array||(t[a.name]=[{id:t[a.name].id,value:t[a.name].value,description:t[a.name].description}]),t[a.name].push({id:a.id,value:a.value,description:a.description}))),r+=Wt+h}return t}function Fs(e,n,r,i,t){if(bs(e,n))return{tag:null,tagSize:0};const a=e.getUint16(n+1),h=e.getUint16(n+3);if(!t&&!Me.iptc[a])return{tag:void 0,tagSize:h};const x=_s(e,n+Wt,h),s={id:a,name:ys(Me.iptc[a],a,x),value:x,description:Us(Me.iptc[a],x,r,i)};return Os(a)&&(s.repeatable=!0),Ds(a)&&(s.encoding=Me.iptc[a].encoding_name(x)),{tag:s,tagSize:h}}function bs(e,n){return e.getUint8(n)!==28}function _s(e,n,r){const i=[];for(let t=0;t<r;t++)i.push(e.getUint8(n+t));return i}function ys(e,n,r){return e?Cs(e)?e:Ps(e)?e.name(r):e.name:`undefined-${n}`}function Cs(e){return typeof e=="string"}function Ps(e){return typeof e.name=="function"}function Us(e,n,r,i){if(Rs(e))try{return e.description(n,r)}catch{}return Ns(e,n)?zt.decode(i,n):n}function Ns(e,n){return e&&n instanceof Array}function Rs(e){return e&&e.description!==void 0}function Os(e){return Me.iptc[e]&&Me.iptc[e].repeatable}function Ds(e){return Me.iptc[e]&&Me.iptc[e].encoding_name!==void 0}const on={"tiff:Orientation"(e){return e==="1"?"Horizontal (normal)":e==="2"?"Mirror horizontal":e==="3"?"Rotate 180":e==="4"?"Mirror vertical":e==="5"?"Mirror horizontal and rotate 270 CW":e==="6"?"Rotate 90 CW":e==="7"?"Mirror horizontal and rotate 90 CW":e==="8"?"Rotate 270 CW":e},"tiff:ResolutionUnit":e=>z.ResolutionUnit(parseInt(e,10)),"tiff:XResolution":e=>Xe(z.XResolution,e),"tiff:YResolution":e=>Xe(z.YResolution,e),"exif:ApertureValue":e=>Xe(z.ApertureValue,e),"exif:GPSLatitude":Et,"exif:GPSLongitude":Et,"exif:FNumber":e=>Xe(z.FNumber,e),"exif:FocalLength":e=>Xe(z.FocalLength,e),"exif:FocalPlaneResolutionUnit":e=>z.FocalPlaneResolutionUnit(parseInt(e,10)),"exif:ColorSpace":e=>z.ColorSpace(Ms(e)),"exif:ComponentsConfiguration"(e,n){if(/^\d, \d, \d, \d$/.test(n)){const r=n.split(", ").map(i=>i.charCodeAt(0));return z.ComponentsConfiguration(r)}return n},"exif:Contrast":e=>z.Contrast(parseInt(e,10)),"exif:CustomRendered":e=>z.CustomRendered(parseInt(e,10)),"exif:ExposureMode":e=>z.ExposureMode(parseInt(e,10)),"exif:ExposureProgram":e=>z.ExposureProgram(parseInt(e,10)),"exif:ExposureTime"(e){return Yt(e)?z.ExposureTime(e.split("/").map(n=>parseInt(n,10))):e},"exif:MeteringMode":e=>z.MeteringMode(parseInt(e,10)),"exif:Saturation":e=>z.Saturation(parseInt(e,10)),"exif:SceneCaptureType":e=>z.SceneCaptureType(parseInt(e,10)),"exif:Sharpness":e=>z.Sharpness(parseInt(e,10)),"exif:ShutterSpeedValue":e=>Xe(z.ShutterSpeedValue,e),"exif:WhiteBalance":e=>z.WhiteBalance(parseInt(e,10))};function Xe(e,n){return Yt(n)?e(n.split("/")):n}function Ms(e){return e.substring(0,2)==="0x"?parseInt(e.substring(2),16):parseInt(e,10)}function Yt(e){return/^-?\d+\/-?\d+$/.test(e)}function Et(e){const[n,r]=e.split(",");if(n!==void 0&&r!==void 0){const i=parseFloat(n),t=parseFloat(r),o=r.charAt(r.length-1);if(!Number.isNaN(i)&&!Number.isNaN(t))return""+(i+t/60)+o}return e}const vs={get:Ls};function Ls(){if(typeof DOMParser<"u")return DOMParser;try{return __non_webpack_require__("@xmldom/xmldom").DOMParser}catch{return}}const St={read:ws};function ws(e,n){return typeof e=="string"?It({},e):ks(e,n).reduce(It,{})}function ks(e,n){if(n.length===0)return[];const r=[Tt(e,n.slice(0,1))];return n.length>1&&r.push(Tt(e,n.slice(1))),r}function Tt(e,n){const r=n.reduce((o,c)=>o+c.length,0),i=new Uint8Array(r);let t=0;for(let o=0;o<n.length;o++){const c=n[o],a=e.buffer.slice(c.dataOffset,c.dataOffset+c.length);i.set(new Uint8Array(a),t),t+=c.length}return new DataView(i.buffer)}function It(e,n){try{const{doc:r,raw:i}=Gs(n);e._raw=(e._raw||"")+i;const t=Kt(r);return K(e,Jt(qt(t,!0)))}catch{return e}}function Gs(e){const n=vs.get();if(!n)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),new Error;const r=new n,i=typeof e=="string"?e:X(e,0,e.byteLength),t=r.parseFromString(Bs(i),"application/xml");if(t.documentElement.nodeName==="parsererror")throw new Error(t.documentElement.textContent);return{doc:t,raw:i}}function Bs(e){return e.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")}function Kt(e){for(let n=0;n<e.childNodes.length;n++){if(e.childNodes[n].tagName==="x:xmpmeta")return Kt(e.childNodes[n]);if(e.childNodes[n].tagName==="rdf:RDF")return e.childNodes[n]}throw new Error}function qt(e,n=!1){const r=Hs(e);return js(r)?n?{}:Zs(r[0]):$s(r)}function Hs(e){const n=[];for(let r=0;r<e.childNodes.length;r++)n.push(e.childNodes[r]);return n}function js(e){return e.length===1&&e[0].nodeName==="#text"}function Zs(e){return e.nodeValue}function $s(e){const n={};return e.forEach(r=>{if(zs(r)){const i=Xs(r);n[r.nodeName]!==void 0?(Array.isArray(n[r.nodeName])||(n[r.nodeName]=[n[r.nodeName]]),n[r.nodeName].push(i)):n[r.nodeName]=i}}),n}function zs(e){return e.nodeName&&e.nodeName!=="#text"}function Xs(e){return{attributes:Ws(e),value:qt(e)}}function Ws(e){const n={};for(let r=0;r<e.attributes.length;r++)n[e.attributes[r].nodeName]=decodeURIComponent(escape(e.attributes[r].value));return n}function Jt(e){const n={};if(typeof e=="string")return e;for(const r in e){let i=e[r];Array.isArray(i)||(i=[i]),i.forEach(t=>{K(n,jn(t.attributes)),typeof t.value=="object"&&K(n,Qt(t.value))})}return n}function jn(e){const n={};for(const r in e)Ys(r)&&(n[mn(r)]={value:e[r],attributes:{},description:Pe(e[r],r)});return n}function Ys(e){return e!=="rdf:parseType"&&!pn(e)}function pn(e){return e.split(":")[0]==="xmlns"}function mn(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function Pe(e,n=void 0){if(Array.isArray(e)){const r=Ks(e);return n&&typeof on[n]=="function"?on[n](e,r):r}if(typeof e=="object")return qs(e);try{return n&&typeof on[n]=="function"?on[n](e):decodeURIComponent(escape(e))}catch{return e}}function Ks(e){return e.map(n=>n.value!==void 0?Pe(n.value):Pe(n)).join(", ")}function qs(e){const n=[];for(const r in e)n.push(`${Js(r)}: ${Pe(e[r].value)}`);return n.join("; ")}function Js(e){return e==="CiAdrCity"?"CreatorCity":e==="CiAdrCtry"?"CreatorCountry":e==="CiAdrExtadr"?"CreatorAddress":e==="CiAdrPcode"?"CreatorPostalCode":e==="CiAdrRegion"?"CreatorRegion":e==="CiEmailWork"?"CreatorWorkEmail":e==="CiTelWork"?"CreatorWorkPhone":e==="CiUrlWork"?"CreatorWorkUrl":e}function Qt(e){const n={};for(const r in e)pn(r)||(n[mn(r)]=Qs(e[r],r));return n}function Qs(e,n){return Vt(e)?er(e,n):nr(e)?tr(e,n):rr(e)?ir(e,n):na(e)?ta(e,n):sr(e,n)}function Vt(e){return e.attributes["rdf:parseType"]==="Resource"&&e.value["rdf:value"]!==void 0||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]!==void 0}function er(e,n){const r=tn(e);e.value["rdf:Description"]!==void 0&&(e=e.value["rdf:Description"]),K(r,tn(e),Vs(e));const i=ea(e);return{value:i,attributes:r,description:Pe(i,n)}}function tn(e){const n={};for(const r in e.attributes)r!=="rdf:parseType"&&r!=="rdf:resource"&&!pn(r)&&(n[mn(r)]=e.attributes[r]);return n}function Vs(e){const n={};for(const r in e.value)r!=="rdf:value"&&!pn(r)&&(n[mn(r)]=e.value[r].value);return n}function ea(e){return ar(e.value["rdf:value"])||e.value["rdf:value"].value}function nr(e){return e.attributes["rdf:parseType"]==="Resource"||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]===void 0}function tr(e,n){const r={value:{},attributes:{}};return e.value["rdf:Description"]!==void 0&&(K(r.value,jn(e.value["rdf:Description"].attributes)),K(r.attributes,tn(e)),e=e.value["rdf:Description"]),K(r.value,Qt(e.value)),r.description=Pe(r.value,n),r}function rr(e){return Object.keys(e.value).length===0&&e.attributes["xml:lang"]===void 0&&e.attributes["rdf:resource"]===void 0}function ir(e,n){const r=jn(e.attributes);return{value:r,attributes:{},description:Pe(r,n)}}function na(e){return or(e.value)!==void 0}function or(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function ta(e,n){let r=or(e.value).value["rdf:li"];const i=tn(e),t=[];return r===void 0?r=[]:Array.isArray(r)||(r=[r]),r.forEach(o=>{t.push(ra(o))}),{value:t,attributes:i,description:Pe(t,n)}}function ra(e){return Vt(e)?er(e):nr(e)?tr(e).value:rr(e)?ir(e).value:sr(e)}function sr(e,n){const r=ar(e)||Jt(e.value);return{value:r,attributes:tn(e),description:Pe(r,n)}}function ar(e){return e.attributes&&e.attributes["rdf:resource"]}const At={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},Ft={4:{name:"Preferred CMM type",value:(e,n)=>X(e,n,4),description:e=>e!==null?_n(e):""},8:{name:"Profile Version",value:(e,n)=>e.getUint8(n).toString(10)+"."+(e.getUint8(n+1)>>4).toString(10)+"."+(e.getUint8(n+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,n)=>X(e,n,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,n)=>X(e,n,4)},20:{name:"Connection Space",value:(e,n)=>X(e,n,4)},24:{name:"ICC Profile Date",value:(e,n)=>ia(e,n).toISOString()},36:{name:"ICC Signature",value:(e,n)=>oa(e.buffer.slice(n,n+4))},40:{name:"Primary Platform",value:(e,n)=>X(e,n,4),description:e=>_n(e)},48:{name:"Device Manufacturer",value:(e,n)=>X(e,n,4),description:e=>_n(e)},52:{name:"Device Model Number",value:(e,n)=>X(e,n,4)},64:{name:"Rendering Intent",value:(e,n)=>e.getUint32(n),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,n)=>X(e,n,4)}};function ia(e,n){const r=e.getUint16(n),i=e.getUint16(n+2)-1,t=e.getUint16(n+4),o=e.getUint16(n+6),c=e.getUint16(n+8),a=e.getUint16(n+10);return new Date(Date.UTC(r,i,t,o,c,a))}function oa(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function _n(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}const bt={read:ga},sa=84,aa=128,ca="acsp",ua="desc",fa="mluc",la="text",da="sig ",ha=12;function ga(e,n){try{const r=n.reduce((c,a)=>c+a.length,0),i=new Uint8Array(r);let t=0;const o=pa(e);for(let c=1;c<=n.length;c++){const a=n.find(s=>s.chunkNumber===c);if(!a)throw new Error(`ICC chunk ${c} not found`);const h=o.slice(a.offset,a.offset+a.length),x=new Uint8Array(h);i.set(x,t),t+=x.length}return Ea(new DataView(i.buffer))}catch{return{}}}function pa(e){return Array.isArray(e)?new DataView(Uint8Array.from(e).buffer).buffer:e.buffer}function ma(e){return e.length<aa+4}function xa(e,n){return e.length<n+ha}function Ea(e){const n=e.buffer,r=e.getUint32();if(e.byteLength!==r)throw new Error("ICC profile length not matching");if(e.length<sa)throw new Error("ICC profile too short");const i={},t=Object.keys(Ft);for(let h=0;h<t.length;h++){const x=t[h],s=Ft[x],f=s.value(e,parseInt(x,10));let u=f;s.description&&(u=s.description(f)),i[s.name]={value:f,description:u}}if(sn(n.slice(36,40))!==ca)throw new Error("ICC profile: missing signature");if(ma(n))return i;const c=e.getUint32(128);let a=132;for(let h=0;h<c;h++){if(xa(n,a))return i;const x=X(e,a,4),s=e.getUint32(a+4),f=e.getUint32(a+8);if(s>n.length)return i;const u=X(e,s,4);if(u===ua){const l=e.getUint32(s+8);if(l>f)return i;const E=sn(n.slice(s+12,s+l+11));en(i,x,E)}else if(u===fa){const l=e.getUint32(s+8),E=e.getUint32(s+12);let y=s+16;const I=[];for(let T=0;T<l;T++){const v=X(e,y+0,2),D=X(e,y+2,2),N=e.getUint32(y+4),L=e.getUint32(y+8),S=ti(e,s+L,N);I.push({languageCode:v,countryCode:D,text:S}),y+=E}if(l===1)en(i,x,I[0].text);else{const T={};for(let v=0;v<I.length;v++)T[`${I[v].languageCode}-${I[v].countryCode}`]=I[v].text;en(i,x,T)}}else if(u===la){const l=sn(n.slice(s+8,s+f-7));en(i,x,l)}else if(u===da){const l=sn(n.slice(s+8,s+12));en(i,x,l)}a=a+12}return i}function sn(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function en(e,n,r){At[n]?e[At[n].name]={value:r,description:r}:e[n]={value:r,description:r}}const Sa={read:Ta};function Ta(e,n){return{"Image Width":Ia(e,n),"Image Height":Aa(e,n),"Bit Depth":Fa(e,n),"Color Type":ba(e,n),Compression:_a(e,n),Filter:ya(e,n),Interlace:Ca(e,n)}}function Ia(e,n){if(n+0+4>e.byteLength)return;const t=H.getLongAt(e,n);return{value:t,description:`${t}px`}}function Aa(e,n){if(n+4+4>e.byteLength)return;const t=H.getLongAt(e,n+4);return{value:t,description:`${t}px`}}function Fa(e,n){if(n+8+1>e.byteLength)return;const t=H.getByteAt(e,n+8);return{value:t,description:`${t}`}}function ba(e,n){const t={0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"};if(n+9+1>e.byteLength)return;const o=H.getByteAt(e,n+9);return{value:o,description:t[o]||"Unknown"}}function _a(e,n){if(n+10+1>e.byteLength)return;const t=H.getByteAt(e,n+10);return{value:t,description:t===0?"Deflate/Inflate":"Unknown"}}function ya(e,n){if(n+11+1>e.byteLength)return;const t=H.getByteAt(e,n+11);return{value:t,description:t===0?"Adaptive":"Unknown"}}function Ca(e,n){const t={0:"Noninterlaced",1:"Adam7 Interlace"};if(n+12+1>e.byteLength)return;const o=H.getByteAt(e,n+12);return{value:o,description:t[o]||"Unknown"}}const Pa={read:Ra},wn="STATE_KEYWORD",kn="STATE_COMPRESSION",Gn="STATE_LANG",cr="STATE_TRANSLATED_KEYWORD",Ua="STATE_TEXT",Na=2;function Ra(e,n){return n.reduce((r,{offset:i,length:t,type:o})=>{const{name:c,value:a,description:h}=Oa(e,i,t,o);return c&&(r[c]={value:a,description:h}),r},{})}function Oa(e,n,r,i){const t=[],o=[],c=[];let a=wn;for(let x=0;x<r&&n+x<e.byteLength;x++){if(a===kn){if(e.getUint8(n+x)!==0)return{};x+=Na,a=_t(i,a)}const s=e.getUint8(n+x);s===0?a=_t(i,a):a===wn?t.push(s):a===Gn?o.push(s):a===cr||c.push(s)}const h=Ke(c);return{name:Da(i,o,t),value:h,description:i===kt?zt.decode("UTF-8",c):h}}function _t(e,n){return n===wn&&e===kt?kn:n===kn?Gn:n===Gn?cr:Ua}function Da(e,n,r){const i=Ke(r);if(e===Zi||n.length===0)return i;const t=Ke(n);return`${i} (${t})`}const Ma={read:va};function va(e,n){const r={};for(let i=0;i<n.length;i++){const t=H.getLongAt(e,n[i]+nn),o=X(e,n[i]+je,ye);o===Gt?(r["Pixels Per Unit X"]=La(e,n[i],t),r["Pixels Per Unit Y"]=wa(e,n[i],t),r["Pixel Units"]=ka(e,n[i],t)):o===Bt&&(r["Modify Date"]=Ga(e,n[i],t))}return r}function La(e,n,r){if(!xn(e,n,r,0,4))return;const o=H.getLongAt(e,n+le+0);return{value:o,description:""+o}}function wa(e,n,r){if(!xn(e,n,r,4,4))return;const o=H.getLongAt(e,n+le+4);return{value:o,description:""+o}}function ka(e,n,r){if(!xn(e,n,r,8,1))return;const o=H.getByteAt(e,n+le+8);return{value:o,description:o===1?"meters":"Unknown"}}function Ga(e,n,r){if(!xn(e,n,r,0,7))return;const t=H.getShortAt(e,n+le),o=H.getByteAt(e,n+le+2),c=H.getByteAt(e,n+le+3),a=H.getByteAt(e,n+le+4),h=H.getByteAt(e,n+le+5),x=H.getByteAt(e,n+le+6);return{value:[t,o,c,a,h,x],description:`${We(t,4)}-${We(o,2)}-${We(c,2)} ${We(a,2)}:${We(h,2)}:${We(x,2)}`}}function xn(e,n,r,i,t){return i+t<=r&&n+le+i+t<=e.byteLength}function We(e,n){return`${"0".repeat(n-(""+e).length)}${e}`}const Ba=[6,7,99],Ha={get:ja};function ja(e,n,r){if(Za(n)){n.type="image/jpeg";const i=r+n.JPEGInterchangeFormat.value;n.image=e.buffer.slice(i,i+n.JPEGInterchangeFormatLength.value),Rt(n,"base64",function(){return Ot(this.image)})}return n}function Za(e){return e&&(e.Compression===void 0||Ba.includes(e.Compression.value))&&e.JPEGInterchangeFormat&&e.JPEGInterchangeFormat.value&&e.JPEGInterchangeFormatLength&&e.JPEGInterchangeFormatLength.value}function ur(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=new Error().stack}ur.prototype=new Error;const $a={MetadataMissingError:ur};function za(e,n){return Xa(e)?Wa(e,n).then(r=>yn(r,n)):ec(e)?nc(e).then(r=>yn(r,n)):yn(e,n)}function Xa(e){return typeof e=="string"}function Wa(e,n){return/^https?:\/\//.test(e)?typeof fetch<"u"?Ya(e,n):Ka(e,n):Ja(e)?Promise.resolve(ri(e)):Qa(e,n)}function Ya(e,{length:n}={}){const r={method:"GET"};return Number.isInteger(n)&&n>=0&&(r.headers={range:`bytes=0-${n-1}`}),fetch(e,r).then(i=>i.arrayBuffer())}function Ka(e,{length:n}={}){return new Promise((r,i)=>{const t={};Number.isInteger(n)&&n>=0&&(t.headers={range:`bytes=0-${n-1}`}),qa(e)(e,t,c=>{if(c.statusCode>=200&&c.statusCode<=299){const a=[];c.on("data",h=>a.push(Buffer.from(h))),c.on("error",h=>i(h)),c.on("end",()=>r(Buffer.concat(a)))}else i(`Could not fetch file: ${c.statusCode} ${c.statusMessage}`),c.resume()}).on("error",c=>i(c))})}function qa(e){return/^https:\/\//.test(e)?__non_webpack_require__("https").get:__non_webpack_require__("http").get}function Ja(e){return/^data:[^;,]*(;base64)?,/.test(e)}function Qa(e,{length:n}={}){return new Promise((r,i)=>{const t=Va();t.open(e,(o,c)=>{o?i(o):t.stat(e,(a,h)=>{if(a)i(a);else{const x=Math.min(h.size,n!==void 0?n:h.size),s=Buffer.alloc(x),f={buffer:s,length:x};t.read(c,f,u=>{u?i(u):t.close(c,l=>{l&&console.warn(`Could not close file ${e}:`,l),r(s)})})}})})})}function Va(){try{return __non_webpack_require__("fs")}catch{return}}function ec(e){return typeof window<"u"&&typeof File<"u"&&e instanceof File}function nc(e){return new Promise((n,r)=>{const i=new FileReader;i.onload=t=>n(t.target.result),i.onerror=()=>r(i.error),i.readAsArrayBuffer(e)})}function yn(e,n){return tc(e)&&(e=new Uint8Array(e).buffer),ic(rc(e),n)}function tc(e){try{return Buffer.isBuffer(e)}catch{return!1}}function rc(e){try{return new DataView(e)}catch{return new ii(e)}}function ic(e,{expanded:n=!1,includeUnknown:r=!1}={expanded:!1,includeUnknown:!1}){let i=!1,t={};const{fileDataOffset:o,jfifDataOffset:c,tiffHeaderOffset:a,iptcDataOffset:h,xmpChunks:x,iccChunks:s,mpfDataOffset:f,pngHeaderOffset:u,pngTextChunks:l,pngChunkOffsets:E}=fo.parseAppMarkers(e);if(oc(o)){i=!0;const I=$o.read(e,o);n?t.file=I:t=K({},t,I)}if(sc(c)){i=!0;const I=es.read(e,c);n?t.jfif=I:t=K({},t,I)}if(ac(a)){i=!0;const I=dt.read(e,a,r);if(I.Thumbnail&&(t.Thumbnail=I.Thumbnail,delete I.Thumbnail),n?(t.exif=I,cc(t)):t=K({},t,I),I["IPTC-NAA"]&&!yt(h)){const T=mt.read(I["IPTC-NAA"].value,0,r);n?t.iptc=T:t=K({},t,T)}if(I.ApplicationNotes&&!Ct(x)){const T=St.read(Ke(I.ApplicationNotes.value));n?t.xmp=T:(delete T._raw,t=K({},t,T))}if(I.ICC_Profile&&!Pt(s)){const T=bt.read(I.ICC_Profile.value,[{offset:0,length:I.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);n?t.icc=T:t=K({},t,T)}}if(yt(h)){i=!0;const I=mt.read(e,h,r);n?t.iptc=I:t=K({},t,I)}if(Ct(x)){i=!0;const I=St.read(e,x);n?t.xmp=I:(delete I._raw,t=K({},t,I))}if(Pt(s)){i=!0;const I=bt.read(e,s);n?t.icc=I:t=K({},t,I)}if(uc(f)){i=!0;const I=dt.readMpf(e,f,r);n?t.mpf=I:t=K({},t,I)}if(fc(u)){i=!0;const I=Sa.read(e,u);n?(t.png=t.png?K({},t.png,I):I,t.pngFile=I):t=K({},t,I)}if(lc(l)){i=!0;const I=Pa.read(e,l);n?(t.png=t.png?K({},t.png,I):I,t.pngText=I):t=K({},t,I)}if(dc(E)){i=!0;const I=Ma.read(e,E);n?t.png=t.png?K({},t.png,I):I:t=K({},t,I)}const y=Ha.get(e,t.Thumbnail,a);if(y?(i=!0,t.Thumbnail=y):delete t.Thumbnail,!i)throw new $a.MetadataMissingError;return t}function oc(e){return e!==void 0}function sc(e){return e!==void 0}function ac(e){return e!==void 0}function cc(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=cn(e.exif.GPSLatitude.value),e.exif.GPSLatitudeRef.value.join("")==="S"&&(e.gps.Latitude=-e.gps.Latitude)}catch{}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=cn(e.exif.GPSLongitude.value),e.exif.GPSLongitudeRef.value.join("")==="W"&&(e.gps.Longitude=-e.gps.Longitude)}catch{}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],e.exif.GPSAltitudeRef.value===1&&(e.gps.Altitude=-e.gps.Altitude)}catch{}}}function yt(e){return e!==void 0}function Ct(e){return Array.isArray(e)&&e.length>0}function Pt(e){return Array.isArray(e)&&e.length>0}function uc(e){return e!==void 0}function fc(e){return e!==void 0}function lc(e){return e!==void 0}function dc(e){return e!==void 0}const fr=async e=>{var i,t,o;const n=await za(e),r=((i=n.DateTimeOriginal)==null?void 0:i.description)||((t=n.DateTimeDigitized)==null?void 0:t.description)||((o=n.DateTime)==null?void 0:o.description);return typeof r!="string"?null:ei(r)},Ut=({file:e,showDate:n})=>{const[r,i]=De.useState(null),[t,o]=De.useState(null),[c,a]=De.useState(null);return De.useEffect(()=>{if(!FileReader){a("FileReader not supported");return}if(e)try{const h=new FileReader;h.onload=async()=>{const x=h.result;if(typeof x!="string")throw new Error("Invalid file");i(x);const s=await fr(x);a(null),o(s)},h.readAsDataURL(e)}catch(h){h instanceof Error&&a(h.message)}else i(null),o(null),a(null)},[e]),r?G.jsxs("div",{children:[G.jsx("img",{style:{maxHeight:270,maxWidth:"100%",objectFit:"contain"},src:r,alt:"Screenshot preview"}),n&&G.jsxs("div",{style:{fontSize:"75%",padding:"0.4em"},children:["Date taken: ",t?t.toLocaleString():"Unknown"]}),c&&G.jsxs("div",{style:{fontSize:"75%",padding:"0.4em"},children:["Error: ",c]})]}):null};function hc(e,n){return n.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(i){if(i!=="default"&&!(i in e)){var t=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,t.get?t:{enumerable:!0,get:function(){return r[i]}})}})}),Object.freeze(e)}function lr(e,n){return new Promise(function(r,i){let t;return gc(e).then(function(o){try{return t=o,r(new Blob([n.slice(0,2),t,n.slice(2)],{type:"image/jpeg"}))}catch(c){return i(c)}},i)})}const gc=e=>new Promise((n,r)=>{const i=new FileReader;i.addEventListener("load",({target:{result:t}})=>{const o=new DataView(t);let c=0;if(o.getUint16(c)!==65496)return r("not a valid JPEG");for(c+=2;;){const a=o.getUint16(c);if(a===65498)break;const h=o.getUint16(c+2);if(a===65505&&o.getUint32(c+4)===1165519206){const x=c+10;let s;switch(o.getUint16(x)){case 18761:s=!0;break;case 19789:s=!1;break;default:return r("TIFF header contains invalid endian")}if(o.getUint16(x+2,s)!==42)return r("TIFF header contains invalid version");const f=o.getUint32(x+4,s),u=x+f+2+12*o.getUint16(x+f,s);for(let l=x+f+2;l<u;l+=12)if(o.getUint16(l,s)==274){if(o.getUint16(l+2,s)!==3)return r("Orientation data type is invalid");if(o.getUint32(l+4,s)!==1)return r("Orientation data count is invalid");o.setUint16(l+8,1,s);break}return n(t.slice(c,c+2+h))}c+=2+h}return n(new Blob)}),i.readAsArrayBuffer(e)});var ln={},pc={get exports(){return ln},set exports(e){ln=e}};(function(e){var n,r,i={};pc.exports=i,i.parse=function(t,o){for(var c=i.bin.readUshort,a=i.bin.readUint,h=0,x={},s=new Uint8Array(t),f=s.length-4;a(s,f)!=101010256;)f--;h=f,h+=4;var u=c(s,h+=4);c(s,h+=2);var l=a(s,h+=2),E=a(s,h+=4);h+=4,h=E;for(var y=0;y<u;y++){a(s,h),h+=4,h+=4,h+=4,a(s,h+=4),l=a(s,h+=4);var I=a(s,h+=4),T=c(s,h+=4),v=c(s,h+2),D=c(s,h+4);h+=6;var N=a(s,h+=8);h+=4,h+=T+v+D,i._readLocal(s,N,x,l,I,o)}return x},i._readLocal=function(t,o,c,a,h,x){var s=i.bin.readUshort,f=i.bin.readUint;f(t,o),s(t,o+=4),s(t,o+=2);var u=s(t,o+=2);f(t,o+=2),f(t,o+=4),o+=4;var l=s(t,o+=8),E=s(t,o+=2);o+=2;var y=i.bin.readUTF8(t,o,l);if(o+=l,o+=E,x)c[y]={size:h,csize:a};else{var I=new Uint8Array(t.buffer,o);if(u==0)c[y]=new Uint8Array(I.buffer.slice(o,o+a));else{if(u!=8)throw"unknown compression method: "+u;var T=new Uint8Array(h);i.inflateRaw(I,T),c[y]=T}}},i.inflateRaw=function(t,o){return i.F.inflate(t,o)},i.inflate=function(t,o){return t[0],t[1],i.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),o)},i.deflate=function(t,o){o==null&&(o={level:6});var c=0,a=new Uint8Array(50+Math.floor(1.1*t.length));a[c]=120,a[c+1]=156,c+=2,c=i.F.deflateRaw(t,a,c,o.level);var h=i.adler(t,0,t.length);return a[c+0]=h>>>24&255,a[c+1]=h>>>16&255,a[c+2]=h>>>8&255,a[c+3]=h>>>0&255,new Uint8Array(a.buffer,0,c+4)},i.deflateRaw=function(t,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*t.length)),a=i.F.deflateRaw(t,c,a,o.level);return new Uint8Array(c.buffer,0,a)},i.encode=function(t,o){o==null&&(o=!1);var c=0,a=i.bin.writeUint,h=i.bin.writeUshort,x={};for(var s in t){var f=!i._noNeed(s)&&!o,u=t[s],l=i.crc.crc(u,0,u.length);x[s]={cpr:f,usize:u.length,crc:l,file:f?i.deflateRaw(u):u}}for(var s in x)c+=x[s].file.length+30+46+2*i.bin.sizeUTF8(s);c+=22;var E=new Uint8Array(c),y=0,I=[];for(var s in x){var T=x[s];I.push(y),y=i._writeHeader(E,y,s,T,0)}var v=0,D=y;for(var s in x)T=x[s],I.push(y),y=i._writeHeader(E,y,s,T,1,I[v++]);var N=y-D;return a(E,y,101010256),y+=4,h(E,y+=4,v),h(E,y+=2,v),a(E,y+=2,N),a(E,y+=4,D),y+=4,y+=2,E.buffer},i._noNeed=function(t){var o=t.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},i._writeHeader=function(t,o,c,a,h,x){var s=i.bin.writeUint,f=i.bin.writeUshort,u=a.file;return s(t,o,h==0?67324752:33639248),o+=4,h==1&&(o+=2),f(t,o,20),f(t,o+=2,0),f(t,o+=2,a.cpr?8:0),s(t,o+=2,0),s(t,o+=4,a.crc),s(t,o+=4,u.length),s(t,o+=4,a.usize),f(t,o+=4,i.bin.sizeUTF8(c)),f(t,o+=2,0),o+=2,h==1&&(o+=2,o+=2,s(t,o+=6,x),o+=4),o+=i.bin.writeUTF8(t,o,c),h==0&&(t.set(u,o),o+=u.length),o},i.crc={table:function(){for(var t=new Uint32Array(256),o=0;o<256;o++){for(var c=o,a=0;a<8;a++)1&c?c=3988292384^c>>>1:c>>>=1;t[o]=c}return t}(),update:function(t,o,c,a){for(var h=0;h<a;h++)t=i.crc.table[255&(t^o[c+h])]^t>>>8;return t},crc:function(t,o,c){return 4294967295^i.crc.update(4294967295,t,o,c)}},i.adler=function(t,o,c){for(var a=1,h=0,x=o,s=o+c;x<s;){for(var f=Math.min(x+5552,s);x<f;)h+=a+=t[x++];a%=65521,h%=65521}return h<<16|a},i.bin={readUshort:function(t,o){return t[o]|t[o+1]<<8},writeUshort:function(t,o,c){t[o]=255&c,t[o+1]=c>>8&255},readUint:function(t,o){return 16777216*t[o+3]+(t[o+2]<<16|t[o+1]<<8|t[o])},writeUint:function(t,o,c){t[o]=255&c,t[o+1]=c>>8&255,t[o+2]=c>>16&255,t[o+3]=c>>24&255},readASCII:function(t,o,c){for(var a="",h=0;h<c;h++)a+=String.fromCharCode(t[o+h]);return a},writeASCII:function(t,o,c){for(var a=0;a<c.length;a++)t[o+a]=c.charCodeAt(a)},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,o,c){for(var a,h="",x=0;x<c;x++)h+="%"+i.bin.pad(t[o+x].toString(16));try{a=decodeURIComponent(h)}catch{return i.bin.readASCII(t,o,c)}return a},writeUTF8:function(t,o,c){for(var a=c.length,h=0,x=0;x<a;x++){var s=c.charCodeAt(x);if(!(4294967168&s))t[o+h]=s,h++;else if(!(4294965248&s))t[o+h]=192|s>>6,t[o+h+1]=128|s>>0&63,h+=2;else if(!(4294901760&s))t[o+h]=224|s>>12,t[o+h+1]=128|s>>6&63,t[o+h+2]=128|s>>0&63,h+=3;else{if(4292870144&s)throw"e";t[o+h]=240|s>>18,t[o+h+1]=128|s>>12&63,t[o+h+2]=128|s>>6&63,t[o+h+3]=128|s>>0&63,h+=4}}return h},sizeUTF8:function(t){for(var o=t.length,c=0,a=0;a<o;a++){var h=t.charCodeAt(a);if(!(4294967168&h))c++;else if(!(4294965248&h))c+=2;else if(!(4294901760&h))c+=3;else{if(4292870144&h)throw"e";c+=4}}return c}},i.F={},i.F.deflateRaw=function(t,o,c,a){var h=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],x=i.F.U,s=i.F._goodIndex;i.F._hash;var f=i.F._putsE,u=0,l=c<<3,E=0,y=t.length;if(a==0){for(;u<y;)f(o,l,u+(_=Math.min(65535,y-u))==y?1:0),l=i.F._copyExact(t,u,_,o,l+8),u+=_;return l>>>3}var I=x.lits,T=x.strt,v=x.prev,D=0,N=0,L=0,S=0,R=0,p=0;for(y>2&&(T[p=i.F._hash(t,0)]=0),u=0;u<y;u++){if(R=p,u+1<y-2){p=i.F._hash(t,u+1);var g=u+1&32767;v[g]=T[p],T[p]=g}if(E<=u){(D>14e3||N>26697)&&y-u>100&&(E<u&&(I[D]=u-E,D+=2,E=u),l=i.F._writeBlock(u==y-1||E==y?1:0,I,D,S,t,L,u-L,o,l),D=N=S=0,L=u);var F=0;u<y-2&&(F=i.F._bestMatch(t,u,v,R,Math.min(h[2],y-u),h[3]));var _=F>>>16,b=65535&F;if(F!=0){b=65535&F;var C=s(_=F>>>16,x.of0);x.lhst[257+C]++;var A=s(b,x.df0);x.dhst[A]++,S+=x.exb[C]+x.dxb[A],I[D]=_<<23|u-E,I[D+1]=b<<16|C<<8|A,D+=2,E=u+_}else x.lhst[t[u]]++;N++}}for(L==u&&t.length!=0||(E<u&&(I[D]=u-E,D+=2,E=u),l=i.F._writeBlock(1,I,D,S,t,L,u-L,o,l),D=0,N=0,D=N=S=0,L=u);7&l;)l++;return l>>>3},i.F._bestMatch=function(t,o,c,a,h,x){var s=32767&o,f=c[s],u=s-f+32768&32767;if(f==s||a!=i.F._hash(t,o-u))return 0;for(var l=0,E=0,y=Math.min(32767,o);u<=y&&--x!=0&&f!=s;){if(l==0||t[o+l]==t[o+l-u]){var I=i.F._howLong(t,o,u);if(I>l){if(E=u,(l=I)>=h)break;u+2<I&&(I=u+2);for(var T=0,v=0;v<I-2;v++){var D=o-u+v+32768&32767,N=D-c[D]+32768&32767;N>T&&(T=N,f=D)}}}u+=(s=f)-(f=c[s])+32768&32767}return l<<16|E},i.F._howLong=function(t,o,c){if(t[o]!=t[o-c]||t[o+1]!=t[o+1-c]||t[o+2]!=t[o+2-c])return 0;var a=o,h=Math.min(t.length,o+258);for(o+=3;o<h&&t[o]==t[o-c];)o++;return o-a},i.F._hash=function(t,o){return(t[o]<<8|t[o+1])+(t[o+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(t,o,c,a,h,x,s,f,u){var l,E,y,I,T,v,D,N,L,S=i.F.U,R=i.F._putsF,p=i.F._putsE;S.lhst[256]++,E=(l=i.F.getTrees())[0],y=l[1],I=l[2],T=l[3],v=l[4],D=l[5],N=l[6],L=l[7];var g=32+(u+3&7?8-(u+3&7):0)+(s<<3),F=a+i.F.contSize(S.fltree,S.lhst)+i.F.contSize(S.fdtree,S.dhst),_=a+i.F.contSize(S.ltree,S.lhst)+i.F.contSize(S.dtree,S.dhst);_+=14+3*D+i.F.contSize(S.itree,S.ihst)+(2*S.ihst[16]+3*S.ihst[17]+7*S.ihst[18]);for(var b=0;b<286;b++)S.lhst[b]=0;for(b=0;b<30;b++)S.dhst[b]=0;for(b=0;b<19;b++)S.ihst[b]=0;var C=g<F&&g<_?0:F<_?1:2;if(R(f,u,t),R(f,u+1,C),u+=3,C==0){for(;7&u;)u++;u=i.F._copyExact(h,x,s,f,u)}else{var A,P;if(C==1&&(A=S.fltree,P=S.fdtree),C==2){i.F.makeCodes(S.ltree,E),i.F.revCodes(S.ltree,E),i.F.makeCodes(S.dtree,y),i.F.revCodes(S.dtree,y),i.F.makeCodes(S.itree,I),i.F.revCodes(S.itree,I),A=S.ltree,P=S.dtree,p(f,u,T-257),p(f,u+=5,v-1),p(f,u+=5,D-4),u+=4;for(var m=0;m<D;m++)p(f,u+3*m,S.itree[1+(S.ordr[m]<<1)]);u+=3*D,u=i.F._codeTiny(N,S.itree,f,u),u=i.F._codeTiny(L,S.itree,f,u)}for(var d=x,M=0;M<c;M+=2){for(var U=o[M],w=U>>>23,Z=d+(8388607&U);d<Z;)u=i.F._writeLit(h[d++],A,f,u);if(w!=0){var B=o[M+1],j=B>>16,k=B>>8&255,O=255&B;p(f,u=i.F._writeLit(257+k,A,f,u),w-S.of0[k]),u+=S.exb[k],R(f,u=i.F._writeLit(O,P,f,u),j-S.df0[O]),u+=S.dxb[O],d+=w}}u=i.F._writeLit(256,A,f,u)}return u},i.F._copyExact=function(t,o,c,a,h){var x=h>>>3;return a[x]=c,a[x+1]=c>>>8,a[x+2]=255-a[x],a[x+3]=255-a[x+1],x+=4,a.set(new Uint8Array(t.buffer,o,c),x),h+(c+4<<3)},i.F.getTrees=function(){for(var t=i.F.U,o=i.F._hufTree(t.lhst,t.ltree,15),c=i.F._hufTree(t.dhst,t.dtree,15),a=[],h=i.F._lenCodes(t.ltree,a),x=[],s=i.F._lenCodes(t.dtree,x),f=0;f<a.length;f+=2)t.ihst[a[f]]++;for(f=0;f<x.length;f+=2)t.ihst[x[f]]++;for(var u=i.F._hufTree(t.ihst,t.itree,7),l=19;l>4&&t.itree[1+(t.ordr[l-1]<<1)]==0;)l--;return[o,c,u,h,s,l,a,x]},i.F.getSecond=function(t){for(var o=[],c=0;c<t.length;c+=2)o.push(t[c+1]);return o},i.F.nonZero=function(t){for(var o="",c=0;c<t.length;c+=2)t[c+1]!=0&&(o+=(c>>1)+",");return o},i.F.contSize=function(t,o){for(var c=0,a=0;a<o.length;a++)c+=o[a]*t[1+(a<<1)];return c},i.F._codeTiny=function(t,o,c,a){for(var h=0;h<t.length;h+=2){var x=t[h],s=t[h+1];a=i.F._writeLit(x,o,c,a);var f=x==16?2:x==17?3:7;x>15&&(i.F._putsE(c,a,s,f),a+=f)}return a},i.F._lenCodes=function(t,o){for(var c=t.length;c!=2&&t[c-1]==0;)c-=2;for(var a=0;a<c;a+=2){var h=t[a+1],x=a+3<c?t[a+3]:-1,s=a+5<c?t[a+5]:-1,f=a==0?-1:t[a-1];if(h==0&&x==h&&s==h){for(var u=a+5;u+2<c&&t[u+2]==h;)u+=2;(l=Math.min(u+1-a>>>1,138))<11?o.push(17,l-3):o.push(18,l-11),a+=2*l-2}else if(h==f&&x==h&&s==h){for(u=a+5;u+2<c&&t[u+2]==h;)u+=2;var l=Math.min(u+1-a>>>1,6);o.push(16,l-3),a+=2*l-2}else o.push(h,0)}return c>>>1},i.F._hufTree=function(t,o,c){var a=[],h=t.length,x=o.length,s=0;for(s=0;s<x;s+=2)o[s]=0,o[s+1]=0;for(s=0;s<h;s++)t[s]!=0&&a.push({lit:s,f:t[s]});var f=a.length,u=a.slice(0);if(f==0)return 0;if(f==1){var l=a[0].lit;return u=l==0?1:0,o[1+(l<<1)]=1,o[1+(u<<1)]=1,1}a.sort(function(N,L){return N.f-L.f});var E=a[0],y=a[1],I=0,T=1,v=2;for(a[0]={lit:-1,f:E.f+y.f,l:E,r:y,d:0};T!=f-1;)E=I!=T&&(v==f||a[I].f<a[v].f)?a[I++]:a[v++],y=I!=T&&(v==f||a[I].f<a[v].f)?a[I++]:a[v++],a[T++]={lit:-1,f:E.f+y.f,l:E,r:y};var D=i.F.setDepth(a[T-1],0);for(D>c&&(i.F.restrictDepth(u,c,D),D=c),s=0;s<f;s++)o[1+(u[s].lit<<1)]=u[s].d;return D},i.F.setDepth=function(t,o){return t.lit!=-1?(t.d=o,o):Math.max(i.F.setDepth(t.l,o+1),i.F.setDepth(t.r,o+1))},i.F.restrictDepth=function(t,o,c){var a=0,h=1<<c-o,x=0;for(t.sort(function(f,u){return u.d==f.d?f.f-u.f:u.d-f.d}),a=0;a<t.length&&t[a].d>o;a++){var s=t[a].d;t[a].d=o,x+=h-(1<<c-s)}for(x>>>=c-o;x>0;)(s=t[a].d)<o?(t[a].d++,x-=1<<o-s-1):a++;for(;a>=0;a--)t[a].d==o&&x<0&&(t[a].d--,x++);x!=0&&console.log("debt left")},i.F._goodIndex=function(t,o){var c=0;return o[16|c]<=t&&(c|=16),o[8|c]<=t&&(c|=8),o[4|c]<=t&&(c|=4),o[2|c]<=t&&(c|=2),o[1|c]<=t&&(c|=1),c},i.F._writeLit=function(t,o,c,a){return i.F._putsF(c,a,o[t<<1]),a+o[1+(t<<1)]},i.F.inflate=function(t,o){var c=Uint8Array;if(t[0]==3&&t[1]==0)return o||new c(0);var a=i.F,h=a._bitsF,x=a._bitsE,s=a._decodeTiny,f=a.makeCodes,u=a.codes2map,l=a._get17,E=a.U,y=o==null;y&&(o=new c(t.length>>>2<<3));for(var I,T,v=0,D=0,N=0,L=0,S=0,R=0,p=0,g=0,F=0;v==0;)if(v=h(t,F,1),D=h(t,F+1,2),F+=3,D!=0){if(y&&(o=i.F._check(o,g+(1<<17))),D==1&&(I=E.flmap,T=E.fdmap,R=511,p=31),D==2){N=x(t,F,5)+257,L=x(t,F+5,5)+1,S=x(t,F+10,4)+4,F+=14;for(var _=0;_<38;_+=2)E.itree[_]=0,E.itree[_+1]=0;var b=1;for(_=0;_<S;_++){var C=x(t,F+3*_,3);E.itree[1+(E.ordr[_]<<1)]=C,C>b&&(b=C)}F+=3*S,f(E.itree,b),u(E.itree,b,E.imap),I=E.lmap,T=E.dmap,F=s(E.imap,(1<<b)-1,N+L,t,F,E.ttree);var A=a._copyOut(E.ttree,0,N,E.ltree);R=(1<<A)-1;var P=a._copyOut(E.ttree,N,L,E.dtree);p=(1<<P)-1,f(E.ltree,A),u(E.ltree,A,I),f(E.dtree,P),u(E.dtree,P,T)}for(;;){var m=I[l(t,F)&R];F+=15&m;var d=m>>>4;if(!(d>>>8))o[g++]=d;else{if(d==256)break;var M=g+d-254;if(d>264){var U=E.ldef[d-257];M=g+(U>>>3)+x(t,F,7&U),F+=7&U}var w=T[l(t,F)&p];F+=15&w;var Z=w>>>4,B=E.ddef[Z],j=(B>>>4)+h(t,F,15&B);for(F+=15&B,y&&(o=i.F._check(o,g+(1<<17)));g<M;)o[g]=o[g++-j],o[g]=o[g++-j],o[g]=o[g++-j],o[g]=o[g++-j];g=M}}}else{7&F&&(F+=8-(7&F));var k=4+(F>>>3),O=t[k-4]|t[k-3]<<8;y&&(o=i.F._check(o,g+O)),o.set(new c(t.buffer,t.byteOffset+k,O),g),F=k+O<<3,g+=O}return o.length==g?o:o.slice(0,g)},i.F._check=function(t,o){var c=t.length;if(o<=c)return t;var a=new Uint8Array(Math.max(c<<1,o));return a.set(t,0),a},i.F._decodeTiny=function(t,o,c,a,h,x){for(var s=i.F._bitsE,f=i.F._get17,u=0;u<c;){var l=t[f(a,h)&o];h+=15&l;var E=l>>>4;if(E<=15)x[u]=E,u++;else{var y=0,I=0;E==16?(I=3+s(a,h,2),h+=2,y=x[u-1]):E==17?(I=3+s(a,h,3),h+=3):E==18&&(I=11+s(a,h,7),h+=7);for(var T=u+I;u<T;)x[u]=y,u++}}return h},i.F._copyOut=function(t,o,c,a){for(var h=0,x=0,s=a.length>>>1;x<c;){var f=t[x+o];a[x<<1]=0,a[1+(x<<1)]=f,f>h&&(h=f),x++}for(;x<s;)a[x<<1]=0,a[1+(x<<1)]=0,x++;return h},i.F.makeCodes=function(t,o){for(var c,a,h,x,s=i.F.U,f=t.length,u=s.bl_count,l=0;l<=o;l++)u[l]=0;for(l=1;l<f;l+=2)u[t[l]]++;var E=s.next_code;for(c=0,u[0]=0,a=1;a<=o;a++)c=c+u[a-1]<<1,E[a]=c;for(h=0;h<f;h+=2)(x=t[h+1])!=0&&(t[h]=E[x],E[x]++)},i.F.codes2map=function(t,o,c){for(var a=t.length,h=i.F.U.rev15,x=0;x<a;x+=2)if(t[x+1]!=0)for(var s=x>>1,f=t[x+1],u=s<<4|f,l=o-f,E=t[x]<<l,y=E+(1<<l);E!=y;)c[h[E]>>>15-o]=u,E++},i.F.revCodes=function(t,o){for(var c=i.F.U.rev15,a=15-o,h=0;h<t.length;h+=2){var x=t[h]<<o-t[h+1];t[h]=c[x]>>>a}},i.F._putsE=function(t,o,c){c<<=7&o;var a=o>>>3;t[a]|=c,t[a+1]|=c>>>8},i.F._putsF=function(t,o,c){c<<=7&o;var a=o>>>3;t[a]|=c,t[a+1]|=c>>>8,t[a+2]|=c>>>16},i.F._bitsE=function(t,o,c){return(t[o>>>3]|t[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},i.F._bitsF=function(t,o,c){return(t[o>>>3]|t[1+(o>>>3)]<<8|t[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},i.F._get17=function(t,o){return(t[o>>>3]|t[1+(o>>>3)]<<8|t[2+(o>>>3)]<<16)>>>(7&o)},i.F._get25=function(t,o){return(t[o>>>3]|t[1+(o>>>3)]<<8|t[2+(o>>>3)]<<16|t[3+(o>>>3)]<<24)>>>(7&o)},i.F.U=(n=Uint16Array,r=Uint32Array,{next_code:new n(16),bl_count:new n(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new n(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new n(512),fltree:[],fdmap:new n(32),fdtree:[],lmap:new n(32768),ltree:[],ttree:[],dmap:new n(32768),dtree:[],imap:new n(512),itree:[],rev15:new n(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new n(65536),prev:new n(32768)}),function(){for(var t=i.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,t.rev15[o]=(c>>>16|c<<16)>>>17}function a(h,x,s){for(;x--!=0;)h.push(0,s)}for(o=0;o<32;o++)t.ldef[o]=t.of0[o]<<3|t.exb[o],t.ddef[o]=t.df0[o]<<4|t.dxb[o];a(t.fltree,144,8),a(t.fltree,112,9),a(t.fltree,24,7),a(t.fltree,8,8),i.F.makeCodes(t.fltree,9),i.F.codes2map(t.fltree,9,t.flmap),i.F.revCodes(t.fltree,9),a(t.fdtree,32,5),i.F.makeCodes(t.fdtree,5),i.F.codes2map(t.fdtree,5,t.fdmap),i.F.revCodes(t.fdtree,5),a(t.itree,19,0),a(t.ltree,286,0),a(t.dtree,30,0),a(t.ttree,320,0)}()})();var mc=hc({__proto__:null,default:ln},[ln]);const Ie=function(){var e={nextZero(s,f){for(;s[f]!=0;)f++;return f},readUshort:(s,f)=>s[f]<<8|s[f+1],writeUshort(s,f,u){s[f]=u>>8&255,s[f+1]=255&u},readUint:(s,f)=>16777216*s[f]+(s[f+1]<<16|s[f+2]<<8|s[f+3]),writeUint(s,f,u){s[f]=u>>24&255,s[f+1]=u>>16&255,s[f+2]=u>>8&255,s[f+3]=255&u},readASCII(s,f,u){let l="";for(let E=0;E<u;E++)l+=String.fromCharCode(s[f+E]);return l},writeASCII(s,f,u){for(let l=0;l<u.length;l++)s[f+l]=u.charCodeAt(l)},readBytes(s,f,u){const l=[];for(let E=0;E<u;E++)l.push(s[f+E]);return l},pad:s=>s.length<2?`0${s}`:s,readUTF8(s,f,u){let l,E="";for(let y=0;y<u;y++)E+=`%${e.pad(s[f+y].toString(16))}`;try{l=decodeURIComponent(E)}catch{return e.readASCII(s,f,u)}return l}};function n(s,f,u,l){const E=f*u,y=o(l),I=Math.ceil(f*y/8),T=new Uint8Array(4*E),v=new Uint32Array(T.buffer),{ctype:D}=l,{depth:N}=l,L=e.readUshort;if(D==6){const U=E<<2;if(N==8)for(var S=0;S<U;S+=4)T[S]=s[S],T[S+1]=s[S+1],T[S+2]=s[S+2],T[S+3]=s[S+3];if(N==16)for(S=0;S<U;S++)T[S]=s[S<<1]}else if(D==2){const U=l.tabs.tRNS;if(U==null){if(N==8)for(S=0;S<E;S++){var R=3*S;v[S]=255<<24|s[R+2]<<16|s[R+1]<<8|s[R]}if(N==16)for(S=0;S<E;S++)R=6*S,v[S]=255<<24|s[R+4]<<16|s[R+2]<<8|s[R]}else{var p=U[0];const w=U[1],Z=U[2];if(N==8)for(S=0;S<E;S++){var g=S<<2;R=3*S,v[S]=255<<24|s[R+2]<<16|s[R+1]<<8|s[R],s[R]==p&&s[R+1]==w&&s[R+2]==Z&&(T[g+3]=0)}if(N==16)for(S=0;S<E;S++)g=S<<2,R=6*S,v[S]=255<<24|s[R+4]<<16|s[R+2]<<8|s[R],L(s,R)==p&&L(s,R+2)==w&&L(s,R+4)==Z&&(T[g+3]=0)}}else if(D==3){const U=l.tabs.PLTE,w=l.tabs.tRNS,Z=w?w.length:0;if(N==1)for(var F=0;F<u;F++){var _=F*I,b=F*f;for(S=0;S<f;S++){g=b+S<<2;var C=3*(A=s[_+(S>>3)]>>7-((7&S)<<0)&1);T[g]=U[C],T[g+1]=U[C+1],T[g+2]=U[C+2],T[g+3]=A<Z?w[A]:255}}if(N==2)for(F=0;F<u;F++)for(_=F*I,b=F*f,S=0;S<f;S++)g=b+S<<2,C=3*(A=s[_+(S>>2)]>>6-((3&S)<<1)&3),T[g]=U[C],T[g+1]=U[C+1],T[g+2]=U[C+2],T[g+3]=A<Z?w[A]:255;if(N==4)for(F=0;F<u;F++)for(_=F*I,b=F*f,S=0;S<f;S++)g=b+S<<2,C=3*(A=s[_+(S>>1)]>>4-((1&S)<<2)&15),T[g]=U[C],T[g+1]=U[C+1],T[g+2]=U[C+2],T[g+3]=A<Z?w[A]:255;if(N==8)for(S=0;S<E;S++){var A;g=S<<2,C=3*(A=s[S]),T[g]=U[C],T[g+1]=U[C+1],T[g+2]=U[C+2],T[g+3]=A<Z?w[A]:255}}else if(D==4){if(N==8)for(S=0;S<E;S++){g=S<<2;var P=s[m=S<<1];T[g]=P,T[g+1]=P,T[g+2]=P,T[g+3]=s[m+1]}if(N==16)for(S=0;S<E;S++){var m;g=S<<2,P=s[m=S<<2],T[g]=P,T[g+1]=P,T[g+2]=P,T[g+3]=s[m+2]}}else if(D==0)for(p=l.tabs.tRNS?l.tabs.tRNS:-1,F=0;F<u;F++){const U=F*I,w=F*f;if(N==1)for(var d=0;d<f;d++){var M=(P=255*(s[U+(d>>>3)]>>>7-(7&d)&1))==255*p?0:255;v[w+d]=M<<24|P<<16|P<<8|P}else if(N==2)for(d=0;d<f;d++)M=(P=85*(s[U+(d>>>2)]>>>6-((3&d)<<1)&3))==85*p?0:255,v[w+d]=M<<24|P<<16|P<<8|P;else if(N==4)for(d=0;d<f;d++)M=(P=17*(s[U+(d>>>1)]>>>4-((1&d)<<2)&15))==17*p?0:255,v[w+d]=M<<24|P<<16|P<<8|P;else if(N==8)for(d=0;d<f;d++)M=(P=s[U+d])==p?0:255,v[w+d]=M<<24|P<<16|P<<8|P;else if(N==16)for(d=0;d<f;d++)P=s[U+(d<<1)],M=L(s,U+(d<<1))==p?0:255,v[w+d]=M<<24|P<<16|P<<8|P}return T}function r(s,f,u,l){const E=o(s),y=Math.ceil(u*E/8),I=new Uint8Array((y+1+s.interlace)*l);return f=s.tabs.CgBI?t(f,I):i(f,I),s.interlace==0?f=c(f,s,0,u,l):s.interlace==1&&(f=function(v,D){const N=D.width,L=D.height,S=o(D),R=S>>3,p=Math.ceil(N*S/8),g=new Uint8Array(L*p);let F=0;const _=[0,0,4,0,2,0,1],b=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],A=[8,8,4,4,2,2,1];let P=0;for(;P<7;){const d=C[P],M=A[P];let U=0,w=0,Z=_[P];for(;Z<L;)Z+=d,w++;let B=b[P];for(;B<N;)B+=M,U++;const j=Math.ceil(U*S/8);c(v,D,F,U,w);let k=0,O=_[P];for(;O<L;){let $=b[P],V=F+k*j<<3;for(;$<N;){var m;if(S==1&&(m=(m=v[V>>3])>>7-(7&V)&1,g[O*p+($>>3)]|=m<<7-((7&$)<<0)),S==2&&(m=(m=v[V>>3])>>6-(7&V)&3,g[O*p+($>>2)]|=m<<6-((3&$)<<1)),S==4&&(m=(m=v[V>>3])>>4-(7&V)&15,g[O*p+($>>1)]|=m<<4-((1&$)<<2)),S>=8){const Y=O*p+$*R;for(let W=0;W<R;W++)g[Y+W]=v[(V>>3)+W]}V+=S,$+=M}k++,O+=d}U*w!=0&&(F+=w*(1+j)),P+=1}return g}(f,s)),f}function i(s,f){return t(new Uint8Array(s.buffer,2,s.length-6),f)}var t=function(){const s={H:{}};return s.H.N=function(f,u){const l=Uint8Array;let E,y,I=0,T=0,v=0,D=0,N=0,L=0,S=0,R=0,p=0;if(f[0]==3&&f[1]==0)return u||new l(0);const g=s.H,F=g.b,_=g.e,b=g.R,C=g.n,A=g.A,P=g.Z,m=g.m,d=u==null;for(d&&(u=new l(f.length>>>2<<5));I==0;)if(I=F(f,p,1),T=F(f,p+1,2),p+=3,T!=0){if(d&&(u=s.H.W(u,R+(1<<17))),T==1&&(E=m.J,y=m.h,L=511,S=31),T==2){v=_(f,p,5)+257,D=_(f,p+5,5)+1,N=_(f,p+10,4)+4,p+=14;let U=1;for(var M=0;M<38;M+=2)m.Q[M]=0,m.Q[M+1]=0;for(M=0;M<N;M++){const B=_(f,p+3*M,3);m.Q[1+(m.X[M]<<1)]=B,B>U&&(U=B)}p+=3*N,C(m.Q,U),A(m.Q,U,m.u),E=m.w,y=m.d,p=b(m.u,(1<<U)-1,v+D,f,p,m.v);const w=g.V(m.v,0,v,m.C);L=(1<<w)-1;const Z=g.V(m.v,v,D,m.D);S=(1<<Z)-1,C(m.C,w),A(m.C,w,E),C(m.D,Z),A(m.D,Z,y)}for(;;){const U=E[P(f,p)&L];p+=15&U;const w=U>>>4;if(!(w>>>8))u[R++]=w;else{if(w==256)break;{let Z=R+w-254;if(w>264){const $=m.q[w-257];Z=R+($>>>3)+_(f,p,7&$),p+=7&$}const B=y[P(f,p)&S];p+=15&B;const j=B>>>4,k=m.c[j],O=(k>>>4)+F(f,p,15&k);for(p+=15&k;R<Z;)u[R]=u[R++-O],u[R]=u[R++-O],u[R]=u[R++-O],u[R]=u[R++-O];R=Z}}}}else{7&p&&(p+=8-(7&p));const U=4+(p>>>3),w=f[U-4]|f[U-3]<<8;d&&(u=s.H.W(u,R+w)),u.set(new l(f.buffer,f.byteOffset+U,w),R),p=U+w<<3,R+=w}return u.length==R?u:u.slice(0,R)},s.H.W=function(f,u){const l=f.length;if(u<=l)return f;const E=new Uint8Array(l<<1);return E.set(f,0),E},s.H.R=function(f,u,l,E,y,I){const T=s.H.e,v=s.H.Z;let D=0;for(;D<l;){const N=f[v(E,y)&u];y+=15&N;const L=N>>>4;if(L<=15)I[D]=L,D++;else{let S=0,R=0;L==16?(R=3+T(E,y,2),y+=2,S=I[D-1]):L==17?(R=3+T(E,y,3),y+=3):L==18&&(R=11+T(E,y,7),y+=7);const p=D+R;for(;D<p;)I[D]=S,D++}}return y},s.H.V=function(f,u,l,E){let y=0,I=0;const T=E.length>>>1;for(;I<l;){const v=f[I+u];E[I<<1]=0,E[1+(I<<1)]=v,v>y&&(y=v),I++}for(;I<T;)E[I<<1]=0,E[1+(I<<1)]=0,I++;return y},s.H.n=function(f,u){const l=s.H.m,E=f.length;let y,I,T,v;const D=l.j;for(var N=0;N<=u;N++)D[N]=0;for(N=1;N<E;N+=2)D[f[N]]++;const L=l.K;for(y=0,D[0]=0,I=1;I<=u;I++)y=y+D[I-1]<<1,L[I]=y;for(T=0;T<E;T+=2)v=f[T+1],v!=0&&(f[T]=L[v],L[v]++)},s.H.A=function(f,u,l){const E=f.length,y=s.H.m.r;for(let I=0;I<E;I+=2)if(f[I+1]!=0){const T=I>>1,v=f[I+1],D=T<<4|v,N=u-v;let L=f[I]<<N;const S=L+(1<<N);for(;L!=S;)l[y[L]>>>15-u]=D,L++}},s.H.l=function(f,u){const l=s.H.m.r,E=15-u;for(let y=0;y<f.length;y+=2){const I=f[y]<<u-f[y+1];f[y]=l[I]>>>E}},s.H.M=function(f,u,l){l<<=7&u;const E=u>>>3;f[E]|=l,f[E+1]|=l>>>8},s.H.I=function(f,u,l){l<<=7&u;const E=u>>>3;f[E]|=l,f[E+1]|=l>>>8,f[E+2]|=l>>>16},s.H.e=function(f,u,l){return(f[u>>>3]|f[1+(u>>>3)]<<8)>>>(7&u)&(1<<l)-1},s.H.b=function(f,u,l){return(f[u>>>3]|f[1+(u>>>3)]<<8|f[2+(u>>>3)]<<16)>>>(7&u)&(1<<l)-1},s.H.Z=function(f,u){return(f[u>>>3]|f[1+(u>>>3)]<<8|f[2+(u>>>3)]<<16)>>>(7&u)},s.H.i=function(f,u){return(f[u>>>3]|f[1+(u>>>3)]<<8|f[2+(u>>>3)]<<16|f[3+(u>>>3)]<<24)>>>(7&u)},s.H.m=function(){const f=Uint16Array,u=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new u(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new u(286),Y:new u(30),a:new u(19),t:new u(15e3),k:new f(65536),g:new f(32768)}}(),function(){const f=s.H.m;for(var u=0;u<32768;u++){let E=u;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,f.r[u]=(E>>>16|E<<16)>>>17}function l(E,y,I){for(;y--!=0;)E.push(0,I)}for(u=0;u<32;u++)f.q[u]=f.S[u]<<3|f.T[u],f.c[u]=f.p[u]<<4|f.z[u];l(f._,144,8),l(f._,112,9),l(f._,24,7),l(f._,8,8),s.H.n(f._,9),s.H.A(f._,9,f.J),s.H.l(f._,9),l(f.$,32,5),s.H.n(f.$,5),s.H.A(f.$,5,f.h),s.H.l(f.$,5),l(f.Q,19,0),l(f.C,286,0),l(f.D,30,0),l(f.v,320,0)}(),s.H.N}();function o(s){return[1,null,3,1,2,null,4][s.ctype]*s.depth}function c(s,f,u,l,E){let y=o(f);const I=Math.ceil(l*y/8);let T,v;y=Math.ceil(y/8);let D=s[u],N=0;if(D>1&&(s[u]=[0,0,1][D-2]),D==3)for(N=y;N<I;N++)s[N+1]=s[N+1]+(s[N+1-y]>>>1)&255;for(let L=0;L<E;L++)if(T=u+L*I,v=T+L+1,D=s[v-1],N=0,D==0)for(;N<I;N++)s[T+N]=s[v+N];else if(D==1){for(;N<y;N++)s[T+N]=s[v+N];for(;N<I;N++)s[T+N]=s[v+N]+s[T+N-y]}else if(D==2)for(;N<I;N++)s[T+N]=s[v+N]+s[T+N-I];else if(D==3){for(;N<y;N++)s[T+N]=s[v+N]+(s[T+N-I]>>>1);for(;N<I;N++)s[T+N]=s[v+N]+(s[T+N-I]+s[T+N-y]>>>1)}else{for(;N<y;N++)s[T+N]=s[v+N]+a(0,s[T+N-I],0);for(;N<I;N++)s[T+N]=s[v+N]+a(s[T+N-y],s[T+N-I],s[T+N-y-I])}return s}function a(s,f,u){const l=s+f-u,E=l-s,y=l-f,I=l-u;return E*E<=y*y&&E*E<=I*I?s:y*y<=I*I?f:u}function h(s,f,u){u.width=e.readUint(s,f),f+=4,u.height=e.readUint(s,f),f+=4,u.depth=s[f],f++,u.ctype=s[f],f++,u.compress=s[f],f++,u.filter=s[f],f++,u.interlace=s[f],f++}function x(s,f,u,l,E,y,I,T,v){const D=Math.min(f,E),N=Math.min(u,y);let L=0,S=0;for(let P=0;P<N;P++)for(let m=0;m<D;m++)if(I>=0&&T>=0?(L=P*f+m<<2,S=(T+P)*E+I+m<<2):(L=(-T+P)*f-I+m<<2,S=P*E+m<<2),v==0)l[S]=s[L],l[S+1]=s[L+1],l[S+2]=s[L+2],l[S+3]=s[L+3];else if(v==1){var R=s[L+3]*.00392156862745098,p=s[L]*R,g=s[L+1]*R,F=s[L+2]*R,_=l[S+3]*(1/255),b=l[S]*_,C=l[S+1]*_,A=l[S+2]*_;const d=1-R,M=R+_*d,U=M==0?0:1/M;l[S+3]=255*M,l[S+0]=(p+b*d)*U,l[S+1]=(g+C*d)*U,l[S+2]=(F+A*d)*U}else if(v==2)R=s[L+3],p=s[L],g=s[L+1],F=s[L+2],_=l[S+3],b=l[S],C=l[S+1],A=l[S+2],R==_&&p==b&&g==C&&F==A?(l[S]=0,l[S+1]=0,l[S+2]=0,l[S+3]=0):(l[S]=p,l[S+1]=g,l[S+2]=F,l[S+3]=R);else if(v==3){if(R=s[L+3],p=s[L],g=s[L+1],F=s[L+2],_=l[S+3],b=l[S],C=l[S+1],A=l[S+2],R==_&&p==b&&g==C&&F==A)continue;if(R<220&&_>20)return!1}return!0}return{decode:function(f){const u=new Uint8Array(f);let l=8;const E=e,y=E.readUshort,I=E.readUint,T={tabs:{},frames:[]},v=new Uint8Array(u.length);let D,N=0,L=0;const S=[137,80,78,71,13,10,26,10];for(var R=0;R<8;R++)if(u[R]!=S[R])throw"The input is not a PNG file!";for(;l<u.length;){const P=E.readUint(u,l);l+=4;const m=E.readASCII(u,l,4);if(l+=4,m=="IHDR")h(u,l,T);else if(m=="iCCP"){for(var p=l;u[p]!=0;)p++;E.readASCII(u,l,p-l),u[p+1];const d=u.slice(p+2,l+P);let M=null;try{M=i(d)}catch{M=t(d)}T.tabs[m]=M}else if(m=="CgBI")T.tabs[m]=u.slice(l,l+4);else if(m=="IDAT"){for(R=0;R<P;R++)v[N+R]=u[l+R];N+=P}else if(m=="acTL")T.tabs[m]={num_frames:I(u,l),num_plays:I(u,l+4)},D=new Uint8Array(u.length);else if(m=="fcTL"){L!=0&&((A=T.frames[T.frames.length-1]).data=r(T,D.slice(0,L),A.rect.width,A.rect.height),L=0);const d={x:I(u,l+12),y:I(u,l+16),width:I(u,l+4),height:I(u,l+8)};let M=y(u,l+22);M=y(u,l+20)/(M==0?100:M);const U={rect:d,delay:Math.round(1e3*M),dispose:u[l+24],blend:u[l+25]};T.frames.push(U)}else if(m=="fdAT"){for(R=0;R<P-4;R++)D[L+R]=u[l+R+4];L+=P-4}else if(m=="pHYs")T.tabs[m]=[E.readUint(u,l),E.readUint(u,l+4),u[l+8]];else if(m=="cHRM")for(T.tabs[m]=[],R=0;R<8;R++)T.tabs[m].push(E.readUint(u,l+4*R));else if(m=="tEXt"||m=="zTXt"){T.tabs[m]==null&&(T.tabs[m]={});var g=E.nextZero(u,l),F=E.readASCII(u,l,g-l),_=l+P-g-1;if(m=="tEXt")C=E.readASCII(u,g+1,_);else{var b=i(u.slice(g+2,g+2+_));C=E.readUTF8(b,0,b.length)}T.tabs[m][F]=C}else if(m=="iTXt"){T.tabs[m]==null&&(T.tabs[m]={}),g=0,p=l,g=E.nextZero(u,p),F=E.readASCII(u,p,g-p);const d=u[p=g+1];var C;u[p+1],p+=2,g=E.nextZero(u,p),E.readASCII(u,p,g-p),p=g+1,g=E.nextZero(u,p),E.readUTF8(u,p,g-p),_=P-((p=g+1)-l),d==0?C=E.readUTF8(u,p,_):(b=i(u.slice(p,p+_)),C=E.readUTF8(b,0,b.length)),T.tabs[m][F]=C}else if(m=="PLTE")T.tabs[m]=E.readBytes(u,l,P);else if(m=="hIST"){const d=T.tabs.PLTE.length/3;for(T.tabs[m]=[],R=0;R<d;R++)T.tabs[m].push(y(u,l+2*R))}else if(m=="tRNS")T.ctype==3?T.tabs[m]=E.readBytes(u,l,P):T.ctype==0?T.tabs[m]=y(u,l):T.ctype==2&&(T.tabs[m]=[y(u,l),y(u,l+2),y(u,l+4)]);else if(m=="gAMA")T.tabs[m]=E.readUint(u,l)/1e5;else if(m=="sRGB")T.tabs[m]=u[l];else if(m=="bKGD")T.ctype==0||T.ctype==4?T.tabs[m]=[y(u,l)]:T.ctype==2||T.ctype==6?T.tabs[m]=[y(u,l),y(u,l+2),y(u,l+4)]:T.ctype==3&&(T.tabs[m]=u[l]);else if(m=="IEND")break;l+=P,E.readUint(u,l),l+=4}var A;return L!=0&&((A=T.frames[T.frames.length-1]).data=r(T,D.slice(0,L),A.rect.width,A.rect.height)),T.data=r(T,v,T.width,T.height),delete T.compress,delete T.interlace,delete T.filter,T},toRGBA8:function(f){const u=f.width,l=f.height;if(f.tabs.acTL==null)return[n(f.data,u,l,f).buffer];const E=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const y=u*l*4,I=new Uint8Array(y),T=new Uint8Array(y),v=new Uint8Array(y);for(let N=0;N<f.frames.length;N++){const L=f.frames[N],S=L.rect.x,R=L.rect.y,p=L.rect.width,g=L.rect.height,F=n(L.data,p,g,f);if(N!=0)for(var D=0;D<y;D++)v[D]=I[D];if(L.blend==0?x(F,p,g,I,u,l,S,R,0):L.blend==1&&x(F,p,g,I,u,l,S,R,1),E.push(I.buffer.slice(0)),L.dispose!=0){if(L.dispose==1)x(T,p,g,I,u,l,S,R,0);else if(L.dispose==2)for(D=0;D<y;D++)I[D]=v[D]}}return E},_paeth:a,_copyTile:x,_bin:e}}();(function(){const{_copyTile:e}=Ie,{_bin:n}=Ie,r=Ie._paeth;var i={table:function(){const p=new Uint32Array(256);for(let g=0;g<256;g++){let F=g;for(let _=0;_<8;_++)1&F?F=3988292384^F>>>1:F>>>=1;p[g]=F}return p}(),update(p,g,F,_){for(let b=0;b<_;b++)p=i.table[255&(p^g[F+b])]^p>>>8;return p},crc:(p,g,F)=>4294967295^i.update(4294967295,p,g,F)};function t(p,g,F,_){g[F]+=p[0]*_>>4,g[F+1]+=p[1]*_>>4,g[F+2]+=p[2]*_>>4,g[F+3]+=p[3]*_>>4}function o(p){return Math.max(0,Math.min(255,p))}function c(p,g){const F=p[0]-g[0],_=p[1]-g[1],b=p[2]-g[2],C=p[3]-g[3];return F*F+_*_+b*b+C*C}function a(p,g,F,_,b,C,A){A==null&&(A=1);const P=_.length,m=[];for(var d=0;d<P;d++){const O=_[d];m.push([O>>>0&255,O>>>8&255,O>>>16&255,O>>>24&255])}for(d=0;d<P;d++){let O=4294967295;for(var M=0,U=0;U<P;U++){var w=c(m[d],m[U]);U!=d&&w<O&&(O=w,M=U)}}const Z=new Uint32Array(b.buffer),B=new Int16Array(g*F*4),j=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(d=0;d<j.length;d++)j[d]=255*((j[d]+.5)/16-.5);for(let O=0;O<F;O++)for(let $=0;$<g;$++){var k;d=4*(O*g+$),A!=2?k=[o(p[d]+B[d]),o(p[d+1]+B[d+1]),o(p[d+2]+B[d+2]),o(p[d+3]+B[d+3])]:(w=j[4*(3&O)+(3&$)],k=[o(p[d]+w),o(p[d+1]+w),o(p[d+2]+w),o(p[d+3]+w)]),M=0;let V=16777215;for(U=0;U<P;U++){const q=c(k,m[U]);q<V&&(V=q,M=U)}const Y=m[M],W=[k[0]-Y[0],k[1]-Y[1],k[2]-Y[2],k[3]-Y[3]];A==1&&($!=g-1&&t(W,B,d+4,7),O!=F-1&&($!=0&&t(W,B,d+4*g-4,3),t(W,B,d+4*g,5),$!=g-1&&t(W,B,d+4*g+4,1))),C[d>>2]=M,Z[d>>2]=_[M]}}function h(p,g,F,_,b){b==null&&(b={});const{crc:C}=i,A=n.writeUint,P=n.writeUshort,m=n.writeASCII;let d=8;const M=p.frames.length>1;let U,w=!1,Z=33+(M?20:0);if(b.sRGB!=null&&(Z+=13),b.pHYs!=null&&(Z+=21),b.iCCP!=null&&(U=pako.deflate(b.iCCP),Z+=21+U.length+4),p.ctype==3){for(var B=p.plte.length,j=0;j<B;j++)p.plte[j]>>>24!=255&&(w=!0);Z+=8+3*B+4+(w?8+1*B+4:0)}for(var k=0;k<p.frames.length;k++)M&&(Z+=38),Z+=(Y=p.frames[k]).cimg.length+12,k!=0&&(Z+=4);Z+=12;const O=new Uint8Array(Z),$=[137,80,78,71,13,10,26,10];for(j=0;j<8;j++)O[j]=$[j];if(A(O,d,13),d+=4,m(O,d,"IHDR"),d+=4,A(O,d,g),d+=4,A(O,d,F),d+=4,O[d]=p.depth,d++,O[d]=p.ctype,d++,O[d]=0,d++,O[d]=0,d++,O[d]=0,d++,A(O,d,C(O,d-17,17)),d+=4,b.sRGB!=null&&(A(O,d,1),d+=4,m(O,d,"sRGB"),d+=4,O[d]=b.sRGB,d++,A(O,d,C(O,d-5,5)),d+=4),b.iCCP!=null){const W=13+U.length;A(O,d,W),d+=4,m(O,d,"iCCP"),d+=4,m(O,d,"ICC profile"),d+=11,d+=2,O.set(U,d),d+=U.length,A(O,d,C(O,d-(W+4),W+4)),d+=4}if(b.pHYs!=null&&(A(O,d,9),d+=4,m(O,d,"pHYs"),d+=4,A(O,d,b.pHYs[0]),d+=4,A(O,d,b.pHYs[1]),d+=4,O[d]=b.pHYs[2],d++,A(O,d,C(O,d-13,13)),d+=4),M&&(A(O,d,8),d+=4,m(O,d,"acTL"),d+=4,A(O,d,p.frames.length),d+=4,A(O,d,b.loop!=null?b.loop:0),d+=4,A(O,d,C(O,d-12,12)),d+=4),p.ctype==3){for(A(O,d,3*(B=p.plte.length)),d+=4,m(O,d,"PLTE"),d+=4,j=0;j<B;j++){const W=3*j,q=p.plte[j],te=255&q,se=q>>>8&255,ve=q>>>16&255;O[d+W+0]=te,O[d+W+1]=se,O[d+W+2]=ve}if(d+=3*B,A(O,d,C(O,d-3*B-4,3*B+4)),d+=4,w){for(A(O,d,B),d+=4,m(O,d,"tRNS"),d+=4,j=0;j<B;j++)O[d+j]=p.plte[j]>>>24&255;d+=B,A(O,d,C(O,d-B-4,B+4)),d+=4}}let V=0;for(k=0;k<p.frames.length;k++){var Y=p.frames[k];M&&(A(O,d,26),d+=4,m(O,d,"fcTL"),d+=4,A(O,d,V++),d+=4,A(O,d,Y.rect.width),d+=4,A(O,d,Y.rect.height),d+=4,A(O,d,Y.rect.x),d+=4,A(O,d,Y.rect.y),d+=4,P(O,d,_[k]),d+=2,P(O,d,1e3),d+=2,O[d]=Y.dispose,d++,O[d]=Y.blend,d++,A(O,d,C(O,d-30,30)),d+=4);const W=Y.cimg;A(O,d,(B=W.length)+(k==0?0:4)),d+=4;const q=d;m(O,d,k==0?"IDAT":"fdAT"),d+=4,k!=0&&(A(O,d,V++),d+=4),O.set(W,d),d+=B,A(O,d,C(O,q,d-q)),d+=4}return A(O,d,0),d+=4,m(O,d,"IEND"),d+=4,A(O,d,C(O,d-4,4)),d+=4,O.buffer}function x(p,g,F){for(let _=0;_<p.frames.length;_++){const b=p.frames[_];b.rect.width;const C=b.rect.height,A=new Uint8Array(C*b.bpl+C);b.cimg=l(b.img,C,b.bpp,b.bpl,A,g,F)}}function s(p,g,F,_,b){const C=b[0],A=b[1],P=b[2],m=b[3],d=b[4],M=b[5];let U=6,w=8,Z=255;for(var B=0;B<p.length;B++){const ce=new Uint8Array(p[B]);for(var j=ce.length,k=0;k<j;k+=4)Z&=ce[k+3]}const O=Z!=255,$=function(ee,J,ae,de,re,me){const ie=[];for(var Q=0;Q<ee.length;Q++){const he=new Uint8Array(ee[Q]),Te=new Uint32Array(he.buffer);var xe;let Ee=0,Ce=0,Fe=J,we=ae,Sn=de?1:0;if(Q!=0){const Ar=me||de||Q==1||ie[Q-2].dispose!=0?1:2;let Tn=0,zn=1e9;for(let Je=0;Je<Ar;Je++){var Ue=new Uint8Array(ee[Q-1-Je]);const Fr=new Uint32Array(ee[Q-1-Je]);let Ne=J,Re=ae,Ze=-1,Qe=-1;for(let ke=0;ke<ae;ke++)for(let Ge=0;Ge<J;Ge++)Te[ue=ke*J+Ge]!=Fr[ue]&&(Ge<Ne&&(Ne=Ge),Ge>Ze&&(Ze=Ge),ke<Re&&(Re=ke),ke>Qe&&(Qe=ke));Ze==-1&&(Ne=Re=Ze=Qe=0),re&&((1&Ne)==1&&Ne--,(1&Re)==1&&Re--);const Xn=(Ze-Ne+1)*(Qe-Re+1);Xn<zn&&(zn=Xn,Tn=Je,Ee=Ne,Ce=Re,Fe=Ze-Ne+1,we=Qe-Re+1)}Ue=new Uint8Array(ee[Q-1-Tn]),Tn==1&&(ie[Q-1].dispose=2),xe=new Uint8Array(Fe*we*4),e(Ue,J,ae,xe,Fe,we,-Ee,-Ce,0),Sn=e(he,J,ae,xe,Fe,we,-Ee,-Ce,3)?1:0,Sn==1?u(he,J,ae,xe,{x:Ee,y:Ce,width:Fe,height:we}):e(he,J,ae,xe,Fe,we,-Ee,-Ce,0)}else xe=he.slice(0);ie.push({rect:{x:Ee,y:Ce,width:Fe,height:we},img:xe,blend:Sn,dispose:0})}if(de)for(Q=0;Q<ie.length;Q++){if((Le=ie[Q]).blend==1)continue;const he=Le.rect,Te=ie[Q-1].rect,Ee=Math.min(he.x,Te.x),Ce=Math.min(he.y,Te.y),Fe={x:Ee,y:Ce,width:Math.max(he.x+he.width,Te.x+Te.width)-Ee,height:Math.max(he.y+he.height,Te.y+Te.height)-Ce};ie[Q-1].dispose=1,Q-1!=0&&f(ee,J,ae,ie,Q-1,Fe,re),f(ee,J,ae,ie,Q,Fe,re)}let rn=0;if(ee.length!=1)for(var ue=0;ue<ie.length;ue++){var Le;rn+=(Le=ie[ue]).rect.width*Le.rect.height}return ie}(p,g,F,C,A,P),V={},Y=[],W=[];if(_!=0){const ce=[];for(k=0;k<$.length;k++)ce.push($[k].img.buffer);const ee=function(re){let me=0;for(var ie=0;ie<re.length;ie++)me+=re[ie].byteLength;const Q=new Uint8Array(me);let xe=0;for(ie=0;ie<re.length;ie++){const Ue=new Uint8Array(re[ie]),rn=Ue.length;for(let ue=0;ue<rn;ue+=4){let Le=Ue[ue],he=Ue[ue+1],Te=Ue[ue+2];const Ee=Ue[ue+3];Ee==0&&(Le=he=Te=0),Q[xe+ue]=Le,Q[xe+ue+1]=he,Q[xe+ue+2]=Te,Q[xe+ue+3]=Ee}xe+=rn}return Q.buffer}(ce),J=y(ee,_);for(k=0;k<J.plte.length;k++)Y.push(J.plte[k].est.rgba);let ae=0;for(k=0;k<$.length;k++){const de=(te=$[k]).img.length;var q=new Uint8Array(J.inds.buffer,ae>>2,de>>2);W.push(q);const re=new Uint8Array(J.abuf,ae,de);M&&a(te.img,te.rect.width,te.rect.height,Y,re,q),te.img.set(re),ae+=de}}else for(B=0;B<$.length;B++){var te=$[B];const ce=new Uint32Array(te.img.buffer);var se=te.rect.width;for(j=ce.length,q=new Uint8Array(j),W.push(q),k=0;k<j;k++){const ee=ce[k];if(k!=0&&ee==ce[k-1])q[k]=q[k-1];else if(k>se&&ee==ce[k-se])q[k]=q[k-se];else{let J=V[ee];if(J==null&&(V[ee]=J=Y.length,Y.push(ee),Y.length>=300))break;q[k]=J}}}const ve=Y.length;for(ve<=256&&d==0&&(w=ve<=2?1:ve<=4?2:ve<=16?4:8,w=Math.max(w,m)),B=0;B<$.length;B++){(te=$[B]).rect.x,te.rect.y,se=te.rect.width;const ce=te.rect.height;let ee=te.img;new Uint32Array(ee.buffer);let J=4*se,ae=4;if(ve<=256&&d==0){J=Math.ceil(w*se/8);var Ae=new Uint8Array(J*ce);const de=W[B];for(let re=0;re<ce;re++){k=re*J;const me=re*se;if(w==8)for(var ne=0;ne<se;ne++)Ae[k+ne]=de[me+ne];else if(w==4)for(ne=0;ne<se;ne++)Ae[k+(ne>>1)]|=de[me+ne]<<4-4*(1&ne);else if(w==2)for(ne=0;ne<se;ne++)Ae[k+(ne>>2)]|=de[me+ne]<<6-2*(3&ne);else if(w==1)for(ne=0;ne<se;ne++)Ae[k+(ne>>3)]|=de[me+ne]<<7-1*(7&ne)}ee=Ae,U=3,ae=1}else if(O==0&&$.length==1){Ae=new Uint8Array(se*ce*3);const de=se*ce;for(k=0;k<de;k++){const re=3*k,me=4*k;Ae[re]=ee[me],Ae[re+1]=ee[me+1],Ae[re+2]=ee[me+2]}ee=Ae,U=2,ae=3,J=3*se}te.img=ee,te.bpl=J,te.bpp=ae}return{ctype:U,depth:w,plte:Y,frames:$}}function f(p,g,F,_,b,C,A){const P=Uint8Array,m=Uint32Array,d=new P(p[b-1]),M=new m(p[b-1]),U=b+1<p.length?new P(p[b+1]):null,w=new P(p[b]),Z=new m(w.buffer);let B=g,j=F,k=-1,O=-1;for(let V=0;V<C.height;V++)for(let Y=0;Y<C.width;Y++){const W=C.x+Y,q=C.y+V,te=q*g+W,se=Z[te];se==0||_[b-1].dispose==0&&M[te]==se&&(U==null||U[4*te+3]!=0)||(W<B&&(B=W),W>k&&(k=W),q<j&&(j=q),q>O&&(O=q))}k==-1&&(B=j=k=O=0),A&&((1&B)==1&&B--,(1&j)==1&&j--),C={x:B,y:j,width:k-B+1,height:O-j+1};const $=_[b];$.rect=C,$.blend=1,$.img=new Uint8Array(C.width*C.height*4),_[b-1].dispose==0?(e(d,g,F,$.img,C.width,C.height,-C.x,-C.y,0),u(w,g,F,$.img,C)):e(w,g,F,$.img,C.width,C.height,-C.x,-C.y,0)}function u(p,g,F,_,b){e(p,g,F,_,b.width,b.height,-b.x,-b.y,2)}function l(p,g,F,_,b,C,A){const P=[];let m,d=[0,1,2,3,4];C!=-1?d=[C]:(g*_>5e5||F==1)&&(d=[0]),A&&(m={level:0});const M=mc;for(var U=0;U<d.length;U++){for(let B=0;B<g;B++)E(b,p,B,_,F,d[U]);P.push(M.deflate(b,m))}let w,Z=1e9;for(U=0;U<P.length;U++)P[U].length<Z&&(w=U,Z=P[U].length);return P[w]}function E(p,g,F,_,b,C){const A=F*_;let P=A+F;if(p[P]=C,P++,C==0)if(_<500)for(var m=0;m<_;m++)p[P+m]=g[A+m];else p.set(new Uint8Array(g.buffer,A,_),P);else if(C==1){for(m=0;m<b;m++)p[P+m]=g[A+m];for(m=b;m<_;m++)p[P+m]=g[A+m]-g[A+m-b]+256&255}else if(F==0){for(m=0;m<b;m++)p[P+m]=g[A+m];if(C==2)for(m=b;m<_;m++)p[P+m]=g[A+m];if(C==3)for(m=b;m<_;m++)p[P+m]=g[A+m]-(g[A+m-b]>>1)+256&255;if(C==4)for(m=b;m<_;m++)p[P+m]=g[A+m]-r(g[A+m-b],0,0)+256&255}else{if(C==2)for(m=0;m<_;m++)p[P+m]=g[A+m]+256-g[A+m-_]&255;if(C==3){for(m=0;m<b;m++)p[P+m]=g[A+m]+256-(g[A+m-_]>>1)&255;for(m=b;m<_;m++)p[P+m]=g[A+m]+256-(g[A+m-_]+g[A+m-b]>>1)&255}if(C==4){for(m=0;m<b;m++)p[P+m]=g[A+m]+256-r(0,g[A+m-_],0)&255;for(m=b;m<_;m++)p[P+m]=g[A+m]+256-r(g[A+m-b],g[A+m-_],g[A+m-b-_])&255}}}function y(p,g){const F=new Uint8Array(p),_=F.slice(0),b=new Uint32Array(_.buffer),C=I(_,g),A=C[0],P=C[1],m=F.length,d=new Uint8Array(m>>2);let M;if(F.length<2e7)for(var U=0;U<m;U+=4)M=T(A,w=F[U]*(1/255),Z=F[U+1]*(1/255),B=F[U+2]*(1/255),j=F[U+3]*(1/255)),d[U>>2]=M.ind,b[U>>2]=M.est.rgba;else for(U=0;U<m;U+=4){var w=F[U]*.00392156862745098,Z=F[U+1]*(1/255),B=F[U+2]*(1/255),j=F[U+3]*(1/255);for(M=A;M.left;)M=v(M.est,w,Z,B,j)<=0?M.left:M.right;d[U>>2]=M.ind,b[U>>2]=M.est.rgba}return{abuf:_.buffer,inds:d,plte:P}}function I(p,g,F){F==null&&(F=1e-4);const _=new Uint32Array(p.buffer),b={i0:0,i1:p.length,bst:null,est:null,tdst:0,left:null,right:null};b.bst=L(p,b.i0,b.i1),b.est=S(b.bst);const C=[b];for(;C.length<g;){let P=0,m=0;for(var A=0;A<C.length;A++)C[A].est.L>P&&(P=C[A].est.L,m=A);if(P<F)break;const d=C[m],M=D(p,_,d.i0,d.i1,d.est.e,d.est.eMq255);if(d.i0>=M||d.i1<=M){d.est.L=0;continue}const U={i0:d.i0,i1:M,bst:null,est:null,tdst:0,left:null,right:null};U.bst=L(p,U.i0,U.i1),U.est=S(U.bst);const w={i0:M,i1:d.i1,bst:null,est:null,tdst:0,left:null,right:null};for(w.bst={R:[],m:[],N:d.bst.N-U.bst.N},A=0;A<16;A++)w.bst.R[A]=d.bst.R[A]-U.bst.R[A];for(A=0;A<4;A++)w.bst.m[A]=d.bst.m[A]-U.bst.m[A];w.est=S(w.bst),d.left=U,d.right=w,C[m]=U,C.push(w)}for(C.sort((P,m)=>m.bst.N-P.bst.N),A=0;A<C.length;A++)C[A].ind=A;return[b,C]}function T(p,g,F,_,b){if(p.left==null)return p.tdst=function(U,w,Z,B,j){const k=w-U[0],O=Z-U[1],$=B-U[2],V=j-U[3];return k*k+O*O+$*$+V*V}(p.est.q,g,F,_,b),p;const C=v(p.est,g,F,_,b);let A=p.left,P=p.right;C>0&&(A=p.right,P=p.left);const m=T(A,g,F,_,b);if(m.tdst<=C*C)return m;const d=T(P,g,F,_,b);return d.tdst<m.tdst?d:m}function v(p,g,F,_,b){const{e:C}=p;return C[0]*g+C[1]*F+C[2]*_+C[3]*b-p.eMq}function D(p,g,F,_,b,C){for(_-=4;F<_;){for(;N(p,F,b)<=C;)F+=4;for(;N(p,_,b)>C;)_-=4;if(F>=_)break;const A=g[F>>2];g[F>>2]=g[_>>2],g[_>>2]=A,F+=4,_-=4}for(;N(p,F,b)>C;)F-=4;return F+4}function N(p,g,F){return p[g]*F[0]+p[g+1]*F[1]+p[g+2]*F[2]+p[g+3]*F[3]}function L(p,g,F){const _=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=[0,0,0,0],C=F-g>>2;for(let A=g;A<F;A+=4){const P=p[A]*.00392156862745098,m=p[A+1]*(1/255),d=p[A+2]*(1/255),M=p[A+3]*(1/255);b[0]+=P,b[1]+=m,b[2]+=d,b[3]+=M,_[0]+=P*P,_[1]+=P*m,_[2]+=P*d,_[3]+=P*M,_[5]+=m*m,_[6]+=m*d,_[7]+=m*M,_[10]+=d*d,_[11]+=d*M,_[15]+=M*M}return _[4]=_[1],_[8]=_[2],_[9]=_[6],_[12]=_[3],_[13]=_[7],_[14]=_[11],{R:_,m:b,N:C}}function S(p){const{R:g}=p,{m:F}=p,{N:_}=p,b=F[0],C=F[1],A=F[2],P=F[3],m=_==0?0:1/_,d=[g[0]-b*b*m,g[1]-b*C*m,g[2]-b*A*m,g[3]-b*P*m,g[4]-C*b*m,g[5]-C*C*m,g[6]-C*A*m,g[7]-C*P*m,g[8]-A*b*m,g[9]-A*C*m,g[10]-A*A*m,g[11]-A*P*m,g[12]-P*b*m,g[13]-P*C*m,g[14]-P*A*m,g[15]-P*P*m],M=d,U=R;let w=[Math.random(),Math.random(),Math.random(),Math.random()],Z=0,B=0;if(_!=0)for(let k=0;k<16&&(w=U.multVec(M,w),B=Math.sqrt(U.dot(w,w)),w=U.sml(1/B,w),!(k!=0&&Math.abs(B-Z)<1e-9));k++)Z=B;const j=[b*m,C*m,A*m,P*m];return{Cov:d,q:j,e:w,L:Z,eMq255:U.dot(U.sml(255,j),w),eMq:U.dot(w,j),rgba:(Math.round(255*j[3])<<24|Math.round(255*j[2])<<16|Math.round(255*j[1])<<8|Math.round(255*j[0])<<0)>>>0}}var R={multVec:(p,g)=>[p[0]*g[0]+p[1]*g[1]+p[2]*g[2]+p[3]*g[3],p[4]*g[0]+p[5]*g[1]+p[6]*g[2]+p[7]*g[3],p[8]*g[0]+p[9]*g[1]+p[10]*g[2]+p[11]*g[3],p[12]*g[0]+p[13]*g[1]+p[14]*g[2]+p[15]*g[3]],dot:(p,g)=>p[0]*g[0]+p[1]*g[1]+p[2]*g[2]+p[3]*g[3],sml:(p,g)=>[p*g[0],p*g[1],p*g[2],p*g[3]]};Ie.encode=function(g,F,_,b,C,A,P){b==null&&(b=0),P==null&&(P=!1);const m=s(g,F,_,b,[!1,!1,!1,0,P,!1]);return x(m,-1),h(m,F,_,C,A)},Ie.encodeLL=function(g,F,_,b,C,A,P,m){const d={ctype:0+(b==1?0:2)+(C==0?0:4),depth:A,frames:[]},M=(b+C)*A,U=M*F;for(let w=0;w<g.length;w++)d.frames.push({rect:{x:0,y:0,width:F,height:_},img:new Uint8Array(g[w]),blend:0,dispose:1,bpp:Math.ceil(M/8),bpl:Math.ceil(U/8)});return x(d,0,!0),h(d,F,_,P,m)},Ie.encode.compress=s,Ie.encode.dither=a,Ie.quantize=y,Ie.quantize.getKDtree=I,Ie.quantize.getNearest=T})();const dr={toArrayBuffer(e,n){const r=e.width,i=e.height,t=r<<2,o=e.getContext("2d").getImageData(0,0,r,i),c=new Uint32Array(o.data.buffer),a=(32*r+31)/32<<2,h=a*i,x=122+h,s=new ArrayBuffer(x),f=new DataView(s),u=1<<20;let l,E,y,I,T=u,v=0,D=0,N=0;function L(p){f.setUint16(D,p,!0),D+=2}function S(p){f.setUint32(D,p,!0),D+=4}function R(p){D+=p}L(19778),S(x),R(4),S(122),S(108),S(r),S(-i>>>0),L(1),L(32),S(3),S(h),S(2835),S(2835),R(8),S(16711680),S(65280),S(255),S(4278190080),S(1466527264),function p(){for(;v<i&&T>0;){for(I=122+v*a,l=0;l<t;)T--,E=c[N++],y=E>>>24,f.setUint32(I+l,E<<8|y),l+=4;v++}N<c.length?(T=u,setTimeout(p,dr._dly)):n(s)}()},toBlob(e,n){this.toArrayBuffer(e,r=>{n(new Blob([r],{type:"image/bmp"}))})},_dly:9};var pe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},xc={[pe.CHROME]:16384,[pe.FIREFOX]:11180,[pe.DESKTOP_SAFARI]:16384,[pe.IE]:8192,[pe.IOS]:4096,[pe.ETC]:8192};const Zn=typeof window<"u",hr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,dn=Zn&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Ec=(Zn||hr)&&(dn&&dn.getOriginalSymbol(window,"File")||typeof File<"u"&&File),gr=(Zn||hr)&&(dn&&dn.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function $n(e,n,r=Date.now()){return new Promise(i=>{const t=e.split(","),o=t[0].match(/:(.*?);/)[1],c=globalThis.atob(t[1]);let a=c.length;const h=new Uint8Array(a);for(;a--;)h[a]=c.charCodeAt(a);const x=new Blob([h],{type:o});x.name=n,x.lastModified=r,i(x)})}function pr(e){return new Promise((n,r)=>{const i=new gr;i.onload=()=>n(i.result),i.onerror=t=>r(t),i.readAsDataURL(e)})}function mr(e){return new Promise((n,r)=>{const i=new Image;i.onload=()=>n(i),i.onerror=t=>r(t),i.src=e})}function Be(){if(Be.cachedResult!==void 0)return Be.cachedResult;let e=pe.ETC;const{userAgent:n}=navigator;return/Chrom(e|ium)/i.test(n)?e=pe.CHROME:/iP(ad|od|hone)/i.test(n)&&/WebKit/i.test(n)?e=pe.IOS:/Safari/i.test(n)?e=pe.DESKTOP_SAFARI:/Firefox/i.test(n)?e=pe.FIREFOX:(/MSIE/i.test(n)||document.documentMode)&&(e=pe.IE),Be.cachedResult=e,Be.cachedResult}function xr(e,n){const r=Be(),i=xc[r];let t=e,o=n,c=t*o;const a=t>o?o/t:t/o;for(;c>i*i;){const h=(i+t)/2,x=(i+o)/2;h<x?(o=x,t=x*a):(o=h*a,t=h),c=t*o}return{width:t,height:o}}function En(e,n){let r,i;try{if(r=new OffscreenCanvas(e,n),i=r.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),i=r.getContext("2d")}return r.width=e,r.height=n,[r,i]}function Er(e,n){const{width:r,height:i}=xr(e.width,e.height),[t,o]=En(r,i);return n&&/jpe?g/.test(n)&&(o.fillStyle="white",o.fillRect(0,0,t.width,t.height)),o.drawImage(e,0,0,t.width,t.height),t}function an(){return an.cachedResult!==void 0||(an.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),an.cachedResult}function hn(e,n={}){return new Promise(function(r,i){let t,o;var c=function(){try{return o=Er(t,n.fileType||e.type),r([t,o])}catch(h){return i(h)}},a=function(h){try{var x=function(s){try{throw s}catch(f){return i(f)}};try{let s;return pr(e).then(function(f){try{return s=f,mr(s).then(function(u){try{return t=u,function(){try{return c()}catch(l){return i(l)}}()}catch(l){return x(l)}},x)}catch(u){return x(u)}},x)}catch(s){x(s)}}catch(s){return i(s)}};try{if(an()||[pe.DESKTOP_SAFARI,pe.MOBILE_SAFARI].includes(Be()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(h){try{return t=h,c()}catch{return a()}},a)}catch{a()}})}function gn(e,n,r,i,t=1){return new Promise(function(o,c){let a;if(n==="image/png"){let x,s,f;return x=e.getContext("2d"),{data:s}=x.getImageData(0,0,e.width,e.height),f=Ie.encode([s.buffer],e.width,e.height,4096*t),a=new Blob([f],{type:n}),a.name=r,a.lastModified=i,h.call(this)}{let x=function(){return h.call(this)};if(n==="image/bmp")return new Promise(s=>dr.toBlob(e,s)).then(function(s){try{return a=s,a.name=r,a.lastModified=i,x.call(this)}catch(f){return c(f)}}.bind(this),c);{let s=function(){return x.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:n,quality:t}).then(function(f){try{return a=f,a.name=r,a.lastModified=i,s.call(this)}catch(u){return c(u)}}.bind(this),c);{let f;return f=e.toDataURL(n,t),$n(f,r,i).then(function(u){try{return a=u,s.call(this)}catch(l){return c(l)}}.bind(this),c)}}}function h(){return o(a)}})}function _e(e){e.width=0,e.height=0}function Ye(){return new Promise(function(e,n){let r,i,t,o;return Ye.cachedResult!==void 0?e(Ye.cachedResult):$n("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(c){try{return r=c,hn(r).then(function(a){try{return i=a[1],gn(i,r.type,r.name,r.lastModified).then(function(h){try{return t=h,_e(i),hn(t).then(function(x){try{return o=x[0],Ye.cachedResult=o.width===1&&o.height===2,e(Ye.cachedResult)}catch(s){return n(s)}},n)}catch(x){return n(x)}},n)}catch(h){return n(h)}},n)}catch(a){return n(a)}},n)})}function Sr(e){return new Promise((n,r)=>{const i=new gr;i.onload=t=>{const o=new DataView(t.target.result);if(o.getUint16(0,!1)!=65496)return n(-2);const c=o.byteLength;let a=2;for(;a<c;){if(o.getUint16(a+2,!1)<=8)return n(-1);const h=o.getUint16(a,!1);if(a+=2,h==65505){if(o.getUint32(a+=2,!1)!=1165519206)return n(-1);const x=o.getUint16(a+=6,!1)==18761;a+=o.getUint32(a+4,x);const s=o.getUint16(a,x);a+=2;for(let f=0;f<s;f++)if(o.getUint16(a+12*f,x)==274)return n(o.getUint16(a+12*f+8,x))}else{if((65280&h)!=65280)break;a+=o.getUint16(a,!1)}}return n(-1)},i.onerror=t=>r(t),i.readAsArrayBuffer(e)})}function Tr(e,n){const{width:r}=e,{height:i}=e,{maxWidthOrHeight:t}=n;let o,c=e;return isFinite(t)&&(r>t||i>t)&&([c,o]=En(r,i),r>i?(c.width=t,c.height=i/r*t):(c.width=r/i*t,c.height=t),o.drawImage(e,0,0,c.width,c.height),_e(e)),c}function Ir(e,n){const{width:r}=e,{height:i}=e,[t,o]=En(r,i);switch(n>4&&n<9?(t.width=i,t.height=r):(t.width=r,t.height=i),n){case 2:o.transform(-1,0,0,1,r,0);break;case 3:o.transform(-1,0,0,-1,r,i);break;case 4:o.transform(1,0,0,-1,0,i);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,i,0);break;case 7:o.transform(0,-1,-1,0,i,r);break;case 8:o.transform(0,-1,1,0,0,r)}return o.drawImage(e,0,0,r,i),_e(e),t}function Nt(e,n,r=0){return new Promise(function(i,t){let o,c,a,h,x,s,f,u,l,E,y,I,T,v,D,N,L,S,R,p;function g(_=5){if(n.signal&&n.signal.aborted)throw n.signal.reason;o+=_,n.onProgress(Math.min(o,100))}function F(_){if(n.signal&&n.signal.aborted)throw n.signal.reason;o=Math.min(Math.max(_,o),100),n.onProgress(o)}return o=r,c=n.maxIteration||10,a=1024*n.maxSizeMB*1024,g(),hn(e,n).then(function(_){try{return[,h]=_,g(),x=Tr(h,n),g(),new Promise(function(b,C){var A;if(!(A=n.exifOrientation))return Sr(e).then(function(m){try{return A=m,P.call(this)}catch(d){return C(d)}}.bind(this),C);function P(){return b(A)}return P.call(this)}).then(function(b){try{return s=b,g(),Ye().then(function(C){try{return f=C?x:Ir(x,s),g(),u=n.initialQuality||1,l=n.fileType||e.type,gn(f,l,e.name,e.lastModified,u).then(function(A){try{{let m=function(){if(c--&&(D>a||D>T)){let M,U;return M=p?.95*R.width:R.width,U=p?.95*R.height:R.height,[L,S]=En(M,U),S.drawImage(R,0,0,M,U),u*=l==="image/png"?.85:.95,gn(L,l,e.name,e.lastModified,u).then(function(w){try{return N=w,_e(R),R=L,D=N.size,F(Math.min(99,Math.floor((v-D)/(v-a)*100))),m}catch(Z){return t(Z)}},t)}return[1]},d=function(){return _e(R),_e(L),_e(x),_e(f),_e(h),F(100),i(N)};if(E=A,g(),y=E.size>a,I=E.size>e.size,!y&&!I)return F(100),i(E);var P;return T=e.size,v=E.size,D=v,R=f,p=!n.alwaysKeepResolution&&y,(P=function(M){for(;M;){if(M.then)return void M.then(P,t);try{if(M.pop){if(M.length)return M.pop()?d.call(this):M;M=m}else M=M.call(this)}catch(U){return t(U)}}}.bind(this))(m)}}catch(m){return t(m)}}.bind(this),t)}catch(A){return t(A)}}.bind(this),t)}catch(C){return t(C)}}.bind(this),t)}catch(b){return t(b)}}.bind(this),t)})}const Sc=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Cn;function Tc(e,n){return new Promise((r,i)=>{Cn||(Cn=function(c){const a=[];return typeof c=="function"?a.push(`(${c})()`):a.push(c),URL.createObjectURL(new Blob(a))}(Sc));const t=new Worker(Cn);t.addEventListener("message",function(c){if(n.signal&&n.signal.aborted)t.terminate();else if(c.data.progress===void 0){if(c.data.error)return i(new Error(c.data.error)),void t.terminate();r(c.data.file),t.terminate()}else n.onProgress(c.data.progress)}),t.addEventListener("error",i),n.signal&&n.signal.addEventListener("abort",()=>{i(n.signal.reason),t.terminate()}),t.postMessage({file:e,imageCompressionLibUrl:n.libURL,options:{...n,onProgress:void 0,signal:void 0}})})}function fe(e,n){return new Promise(function(r,i){let t,o,c,a,h,x;if(t={...n},c=0,{onProgress:a}=t,t.maxSizeMB=t.maxSizeMB||Number.POSITIVE_INFINITY,h=typeof t.useWebWorker!="boolean"||t.useWebWorker,delete t.useWebWorker,t.onProgress=l=>{c=l,typeof a=="function"&&a(c)},!(e instanceof Blob||e instanceof Ec))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return i(new Error("The file given is not an image"));if(x=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!h||typeof Worker!="function"||x)return Nt(e,t).then(function(l){try{return o=l,u.call(this)}catch(E){return i(E)}}.bind(this),i);var s=function(){try{return u.call(this)}catch(l){return i(l)}}.bind(this),f=function(l){try{return Nt(e,t).then(function(E){try{return o=E,s()}catch(y){return i(y)}},i)}catch(E){return i(E)}};try{return t.libURL=t.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Tc(e,t).then(function(l){try{return o=l,s()}catch{return f()}},f)}catch{f()}function u(){try{o.name=e.name,o.lastModified=e.lastModified}catch{}try{t.preserveExif&&e.type==="image/jpeg"&&(!t.fileType||t.fileType&&t.fileType===e.type)&&(o=lr(e,o))}catch{}return r(o)}})}fe.getDataUrlFromFile=pr,fe.getFilefromDataUrl=$n,fe.loadImage=mr,fe.drawImageInCanvas=Er,fe.drawFileInCanvas=hn,fe.canvasToFile=gn,fe.getExifOrientation=Sr,fe.handleMaxWidthOrHeight=Tr,fe.followExifOrientation=Ir,fe.cleanupCanvasMemory=_e,fe.isAutoOrientationInBrowser=Ye,fe.approximateBelowMaximumCanvasSizeOfBrowser=xr,fe.copyExifWithoutOrientation=lr,fe.getBrowserName=Be,fe.version="2.0.2";const Ic=e=>fe(e,{maxWidthOrHeight:1400,maxSizeMB:.1,initialQuality:.7}),Uc=()=>{var g,F,_,b;const e=yr(),n=Cr(),r=Pr(),i=Dr(),t=Ur(),o=In.results.addResultMutation.useMutation({onSuccess:()=>{t.invalidateQueries(Wn(In.charts.chart)),t.invalidateQueries(Wn(In.charts.search))}}),c=Mr({sharedChartId:r.sharedChartId?Number(r.sharedChartId):0}),a=(g=i.data)==null?void 0:g.id,h=!!((F=i.data)!=null&&F.can_add_results_manually),x=(_=c.data)==null?void 0:_.items[0],s=x&&`${x.songName} ${x.chartInstances[0].label}`,[f,u]=De.useState(null),[l,E]=De.useState(!1),{renderPopup:y,confirm:I}=qr({okText:"Submit"}),{register:T,handleSubmit:v,reset:D,watch:N,formState:L}=Or({defaultValues:{grade:"",mix:"XX",mod:""}}),S=N("screenshot"),R=N(),p=async({screenshot:C,...A})=>{if(!(!a||!r.sharedChartId)){try{await I()}catch{return}E(!0),u(null);try{const P=await Ic(C[0]),m=await fr(C[0]),d={...A,screenshot:await Jr(P),fileName:C[0].name,date:m||new Date,isExactDate:!!m,sharedChartId:Number(r.sharedChartId),playerId:a};await o.mutateAsync(d),D(),n(Rr.leaderboard.sharedChart.getPath(r))}catch(P){console.error(P),u(P)}E(!1)}};return a?h?G.jsxs("div",{className:be.addResultPage,children:[y({content:G.jsxs("div",{className:be.confirmation,children:[G.jsxs("div",{className:be.splitPanels,children:[G.jsx("div",{className:be.screenshotPanel,children:S&&G.jsx(Ut,{file:S[0]})}),G.jsxs("div",{className:be.formPanel,children:[G.jsx("div",{className:be.chartName,children:s}),G.jsxs("div",{className:be.grid,children:[G.jsx("div",{children:"Grade"}),G.jsx("div",{children:R.grade}),G.jsx("div",{style:{color:"#29D7FF"},children:"Perfect"}),G.jsx("div",{style:{color:"#29D7FF"},children:R.perfect}),G.jsx("div",{style:{color:"#21d021"},children:"Great"}),G.jsx("div",{style:{color:"#21d021"},children:R.great}),G.jsx("div",{style:{color:"#dede3a"},children:"Good"}),G.jsx("div",{style:{color:"#dede3a"},children:R.good}),G.jsx("div",{style:{color:"#f278fc"},children:"Bad"}),G.jsx("div",{style:{color:"#f278fc"},children:R.bad}),G.jsx("div",{style:{color:"#f48181"},children:"Miss"}),G.jsx("div",{style:{color:"#f48181"},children:R.miss}),G.jsx("div",{children:"Combo"}),G.jsx("div",{children:R.combo}),G.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:"Score"}),G.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:R.score}),G.jsx("div",{children:"Mods"}),G.jsx("div",{children:R.mod||"None (normal mode)"})]})]})]}),G.jsxs("div",{className:be.warning,children:[G.jsx(Lr,{}),G.jsx("span",{children:"Submitting false results may result in a BAN. Make sure your screenshot is readable and the numbers you selected are correct."})]})]})}),G.jsx("h2",{children:"Submit a result"}),G.jsxs("p",{children:["Chart: ",s]}),G.jsxs("form",{onSubmit:v(p),className:be.addResultForm,children:[G.jsxs("label",{children:[G.jsx("span",{children:"Screenshot *"}),G.jsx("input",{className:`${be.fileInput} form-control`,type:"file",...T("screenshot",{required:!0})})]}),S&&((b=S[0])==null?void 0:b.name.toLowerCase().endsWith(".heic"))&&G.jsx("p",{children:"HEIC files are not supported. Please convert your screenshot to JPG or PNG."}),S&&G.jsx(Ut,{showDate:!0,file:S[0]}),G.jsxs("label",{children:[G.jsx("span",{children:"Grade *"}),G.jsxs("select",{className:"form-control",...T("grade",{required:!0,minLength:1}),children:[G.jsx("option",{value:"",disabled:!0,hidden:!0,children:"(select a grade)"}),G.jsx("option",{value:"SSS",children:"SSS"}),G.jsx("option",{value:"SS",children:"SS"}),G.jsx("option",{value:"S",children:"S"}),G.jsx("option",{value:"A+",children:"A+"}),G.jsx("option",{value:"A",children:"A"}),G.jsx("option",{value:"B",children:"B"}),G.jsx("option",{value:"C",children:"C"}),G.jsx("option",{value:"D",children:"D"}),G.jsx("option",{value:"F",children:"F"}),G.jsx("option",{value:"B+",children:"B+"}),G.jsx("option",{value:"C+",children:"C+"}),G.jsx("option",{value:"D+",children:"D+"}),G.jsx("option",{value:"F+",children:"F+"})]})]}),["perfect","great","good","bad","miss","combo"].map(C=>G.jsxs("label",{children:[G.jsxs("span",{children:[C[0].toUpperCase()+C.slice(1)," *"]}),G.jsx("input",{className:"form-control",inputMode:"numeric",placeholder:"000",...T(C,{required:!0,valueAsNumber:!0})})]})),G.jsxs("label",{children:[G.jsx("span",{children:"Score *"}),G.jsx("input",{className:"form-control",inputMode:"numeric",placeholder:"000000",...T("score",{required:!0,minLength:4,valueAsNumber:!0})})]}),G.jsxs("label",{children:[G.jsx("span",{children:"Mix *"}),G.jsxs("select",{className:"form-control",...T("mix",{required:!0}),children:[G.jsx("option",{value:"XX",children:"XX"}),G.jsx("option",{value:"Prime2",children:"Prime 2"}),G.jsx("option",{value:"Prime",children:"Prime"})]})]}),G.jsxs("label",{children:[G.jsx("span",{children:"Judge/rank *"}),G.jsxs("select",{className:"form-control",...T("mod"),children:[G.jsx("option",{value:"",children:"No mods"}),G.jsx("option",{value:"VJ",children:"Rank (VJ)"}),G.jsx("option",{value:"HJ",children:"HJ"})]})]}),G.jsx("button",{disabled:l||!L.isValid,className:"btn btn-dark",type:"submit",children:l?"Loading...":"Submit"}),f instanceof Error?G.jsx("div",{className:"alert alert-danger",children:f.message}):null]})]}):G.jsx(vr,{radius:"md",variant:"light",color:"red",title:e.ERROR,icon:G.jsx(Nr,{}),children:"You don't have access to this page"}):null};export{Uc as default};
//# sourceMappingURL=AddResult-0026e2bd.js.map
