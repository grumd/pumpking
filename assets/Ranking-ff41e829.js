import{e as b,l as f,j as s,_ as l,U as w,b as m,a6 as p,a7 as A,a8 as S,a9 as q,Q as g,h as N,aa as k,f as o,ab as u,ac as j,ad as v,ae as R,X as C,i as D}from"./index-be7aa5df.js";import{c as F}from"./index-fa5dac72.js";import{G as c}from"./index-67a4af2e.js";import{F as Q}from"./index-5b7efee4.js";import{T as E}from"./Toggle-bdc5f927.js";function P({ranking:i,isLoading:d,preferences:r}){const h=b(),n=f();return s.jsxs("div",{className:"ranking-list",children:[l.isEmpty(i)&&!d&&"ничего не найдено",d&&s.jsx(w,{}),!d&&s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"place",children:n.RANK}),s.jsx("th",{className:"change"}),s.jsx("th",{className:"exp-rank",children:n.EXP}),s.jsx("th",{className:"name",children:n.NAME}),s.jsx("th",{className:"name name-piu",children:n.AMPASS}),s.jsx("th",{className:"rating",children:"pp"}),s.jsx("th",{className:"rating-change-cell"}),s.jsx("th",{className:"grades sss",children:s.jsx(c,{grade:"SSS"})}),s.jsx("th",{className:"grades ss",children:s.jsx(c,{grade:"SS"})}),s.jsx("th",{className:"grades s",children:s.jsx(c,{grade:"S"})}),s.jsx("th",{className:"grades a",children:s.jsx(c,{grade:"A+"})}),s.jsx("th",{className:"grades b",children:s.jsx(c,{grade:"B"})}),s.jsx("th",{className:"grades c",children:s.jsx(c,{grade:"C"})}),s.jsx("th",{className:"grades d",children:s.jsx(c,{grade:"D"})}),s.jsx("th",{className:"grades f",children:s.jsx(c,{grade:"F"})}),s.jsx("th",{className:"playcount",children:n.SCORES_count}),s.jsx("th",{className:"accuracy",children:n.ACCURACY}),s.jsx("th",{className:"hide-col",children:" "})]})}),s.jsx("tbody",{children:i.map((e,x)=>{const t=r.playersHiddenStatus[e.id];if(t&&!r.showHiddenPlayersInRanking)return null;const a=(Math.floor(e.pp*10)-Math.floor(e.prevRating*10))/10||0;return s.jsxs("tr",{className:m("player",{"hidden-player":t}),children:[s.jsx("td",{className:"place",children:x===0?s.jsx(p,{}):`#${x+1}`}),s.jsxs("td",{className:"change",children:[e.change>0&&s.jsxs("div",{className:"change-holder up",children:[s.jsx("span",{children:e.change}),s.jsx(A,{})]}),e.change<0&&s.jsxs("div",{className:"change-holder down",children:[s.jsx("span",{children:-e.change}),s.jsx(S,{})]}),!!e.change&&l.isString(e.change)&&s.jsx("div",{className:"change-holder text",children:s.jsx("span",{children:e.change})})]}),s.jsx("td",{className:"exp-rank",children:q(e.expRank)}),s.jsx("td",{className:"name",children:s.jsxs("div",{className:"name-container",children:[s.jsx(Q,{region:e.region}),s.jsx(g,{exact:!0,to:N.profile.getPath({id:e.id}),children:e.name})]})}),s.jsx("td",{className:"name name-piu",children:s.jsx(g,{exact:!0,to:N.profile.getPath({id:e.id}),children:e.nameArcade})}),s.jsx("td",{className:"rating secondary",children:Math.floor(e.pp)}),s.jsx("td",{className:"rating-change-cell",children:e.prevRating&&a!==0&&s.jsxs("span",{className:m("rating-change",{down:e.prevRating>e.pp,up:e.prevRating<e.pp}),children:[e.prevRating<e.pp?"+":"",a.toFixed(1)]})}),s.jsx("td",{className:"grades sss",children:e.grades.SSS}),s.jsx("td",{className:"grades ss",children:e.grades.SS}),s.jsx("td",{className:"grades s",children:e.grades.S}),s.jsx("td",{className:"grades a",children:e.grades.A}),s.jsx("td",{className:"grades b",children:e.grades.B}),s.jsx("td",{className:"grades c",children:e.grades.C}),s.jsx("td",{className:"grades d",children:e.grades.D}),s.jsx("td",{className:"grades f",children:e.grades.F}),s.jsx("td",{className:"playcount",children:e.count}),s.jsx("td",{className:"accuracy",children:e.accuracy?`${e.accuracy.toFixed(2)}%`:""}),s.jsx("td",{className:"hide-col",children:s.jsx(E,{onChange:()=>{h(k(l.set(["playersHiddenStatus",e.id],!t,r)))},checked:!t})})]},e.name)})})]})]})}function H(){return s.jsxs("div",{className:"faq",children:[s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Как считается рейтинг?"}),s.jsxs("div",{className:"answer",children:["A: Используется ",s.jsx("a",{href:"https://en.wikipedia.org/wiki/Elo_rating_system",children:"рейтинг Эло"}),", широко используемый в шахматах и других играх, слегка модицированный под условия игры на пампе. Средний рейтинг - 1000. Коэффициент К зависит от уровня чарта (более сложные чарты сильнее влияют на рейтинг). Количество очков влияет на заработанный рейтинг (маленький отрыв от противника не даст так много очков как большой отрыв)."]})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Что такое рр и чем оно отличается от эло?"}),s.jsxs("div",{className:"answer",children:["A: РР (performance points) - система очков, взятая из osu!. Эло - система рейтинга, взятая из шахмат. Основные отличия:",s.jsx("br",{}),"С эло твои очки зависят от других игроков на этом чарте, с рр твои очки зависят только от того, как ты сыграешь чарт.",s.jsx("br",{}),"С эло можно потерять очки или заставить другого игрока их потерять, с рр можно только набирать больше очков.",s.jsx("br",{}),"С эло намного проще кого-то обогнать, с рр люди редко меняются местами в рейтинге.",s.jsx("br",{}),"Эло показывает кто кого обыгрывает в последнее время, а рр показывает, кто на каком примерно уровне по скиллу.",s.jsx("br",{}),"Сейчас рейтинг сортируется по Эло. РР выступает в качестве дополнительной инфы для интереса, плюс используется как стартовое значение Эло."]})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Система Эло используется для игр 1 на 1, как она используется на пампе, где на одном чарте играет много игроков?"}),s.jsx("div",{className:"answer",children:"A: Рекорды на одном чарте делятся на несколько игр 1 на 1. Если есть 3 игрока: A, B, C; то считается, что было 3 отдельные игры: A vs B, A vs C, B vs C."})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Как считается сумма рр?"}),s.jsx("div",{className:"answer",children:"A: Сначала все скоры игрока сортируются по рр. Затем в общую сумму рр добавляется 100% от лучшего скора, 95% от второго скора, 90% от третьего, 86% от 4-го и так далее. (Формула коэффициента - 0.95^N). Таким образом, на общую сумму рр больше всего влияют самые лучшие результаты человека за всё время, и чтобы поднять свой уровень рр, нужно получать новые топовые результаты (и поднимать свой скилл)."})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Учитываются ли рекорды на ранке в рейтинге?"}),s.jsx("div",{className:"answer",children:"A: Да. Как минимум потому что у нас есть много рекордов, взятых с машин бестов, и мы не знаем наверняка, на ранке они или нет. Если у игрока в топе есть два скора - на ранке и без ранка, используется тот, где больше очков."})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Почему меня нет в рейтинге?"}),s.jsx("div",{className:"answer",children:"A: В таблицу попадают только те, у кого есть хотя бы 20 игр 1 на 1. Первые 20 игр используются для определения изначального рейтинга."})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Почему суммарное количество оценок S-A-B не совпадает с общим количеством скоров?"}),s.jsx("div",{className:"answer",children:"A: Не для каждого результата известна оценка."})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Если у меня есть несколько рекордов на А, несколько на А+, как считается суммарное количество грейдов в таблице?"}),s.jsx("div",{className:"answer",children:"A: В каждой колонке учитываются обе буквы - и треснутые, и с удержанным лайфом. То есть и А, и А+ идут в колонку А. Точно так же для B, C, D."})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Убери аккураси из таблицы!"}),s.jsx("div",{className:"answer",children:"A: Грем, это секция для вопросов."})]})]})}const L=F(i=>i.results.profiles,l.flow(l.values,l.orderBy("pp",["desc"]))),T=()=>{const i=b(),d=f(),r=o(a=>a.charts.isLoading||a.results.isLoadingRanking||a.tracklist.isLoading),h=o(a=>a.charts.error||a.tracklist.error),n=o(L),e=o(a=>a.preferences.data),x=()=>{i(k(l.set(["showHiddenPlayersInRanking"],!e.showHiddenPlayersInRanking,e)))},t=()=>{!r&&i(D())};return s.jsx("div",{className:"ranking-page",children:s.jsxs("div",{className:"content",children:[h&&h.message,s.jsxs("div",{className:"top-controls",children:[s.jsx("div",{className:"_flex-fill"}),s.jsxs(u,{children:[s.jsx(j,{index:!0,element:s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"btn btn-sm btn-dark btn-icon _margin-right",onClick:x,children:e.showHiddenPlayersInRanking?d.HIDE_UNSELECTED:d.SHOW_ALL}),s.jsx(v,{to:"faq",children:s.jsxs("button",{className:"btn btn-sm btn-dark btn-icon _margin-right",children:[s.jsx(R,{})," faq"]})}),s.jsxs("button",{disabled:r,className:"btn btn-sm btn-dark btn-icon",onClick:t,children:[s.jsx(C,{})," ",d.UPDATE]})]})}),s.jsx(j,{path:"faq",element:s.jsx(v,{to:"..",children:s.jsx("button",{className:"btn btn-sm btn-dark btn-icon",children:"назад"})})})]})]}),s.jsxs(u,{children:[s.jsx(j,{index:!0,element:s.jsx(P,{ranking:n,isLoading:r,preferences:e})}),s.jsx(j,{path:"faq",element:s.jsx(H,{})})]})]})})};export{T as default};
//# sourceMappingURL=Ranking-ff41e829.js.map
