var ve=Object.defineProperty;var ge=(n,r,t)=>r in n?ve(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t;var g=(n,r,t)=>(ge(n,typeof r!="symbol"?r+"":r,t),t);import{R as b,c as je,r as me,w as Ae,_ as E,g as be,Y as Ee,Z as we,L as Ne,t as $,$ as K,j as e,a0 as ne,a1 as re,k as se,l as oe,a2 as Pe,W as Te,T as ke}from"./index-221eff9b.js";import{T as q}from"./ToggleButton-0f681791.js";import{T as Ie}from"./Toggle-acfdde08.js";import{R as Oe}from"./index-6f21e9f1.js";import{G as Le,f as xe,_ as I,g as D,a as le,u as _e,b as ce,S as Se,c as Z,L,d as De,A as Ce,i as M,e as Be,E as Re,h as Fe,C as Ke,j as Me,k as We,l as Ve,X as _,Y as S,m as He,w as ze,p as ye,R as W,n as de,o as J,q as pe,T as Q,r as V,B as Ge,P as Ue,s as y}from"./withParams-b747a739.js";import"./index-fa5dac72.js";var U=function(){return null};U.displayName="ZAxis";U.defaultProps={zAxisId:0,range:[64,64],scale:"auto",type:"number"};function H(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?H=function(t){return typeof t}:H=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(n)}function C(){return C=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},C.apply(this,arguments)}function he(n,r){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);r&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,a)}return t}function N(n){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?he(Object(t),!0).forEach(function(a){Ye(n,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(t,a))})}return n}function Ye(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}function Xe(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function fe(n,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}function $e(n,r,t){return r&&fe(n.prototype,r),t&&fe(n,t),n}function qe(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&te(n,r)}function te(n,r){return te=Object.setPrototypeOf||function(a,i){return a.__proto__=i,a},te(n,r)}function Ze(n){var r=et();return function(){var a=G(n),i;if(r){var s=G(this).constructor;i=Reflect.construct(a,arguments,s)}else i=a.apply(this,arguments);return Je(this,i)}}function Je(n,r){return r&&(H(r)==="object"||typeof r=="function")?r:Qe(n)}function Qe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function et(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function G(n){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},G(n)}var B=function(n){qe(t,n);var r=Ze(t);function t(){var a;Xe(this,t);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return a=r.call.apply(r,[this].concat(s)),a.state={isAnimationFinished:!1},a.handleAnimationEnd=function(){a.setState({isAnimationFinished:!0})},a.handleAnimationStart=function(){a.setState({isAnimationFinished:!1})},a.id=_e("recharts-scatter-"),a}return $e(t,[{key:"renderSymbolsStatically",value:function(i){var s=this,c=this.props,l=c.shape,o=c.activeShape,h=c.activeIndex,p=Z(this.props);return i.map(function(u,m){var d=N(N({key:"symbol-".concat(m)},p),u);return b.createElement(L,C({className:"recharts-scatter-symbol"},De(s.props,u,m),{key:"symbol-".concat(m)}),t.renderSymbolItem(h===m?o:l,d))})}},{key:"renderSymbolsWithAnimation",value:function(){var i=this,s=this.props,c=s.points,l=s.isAnimationActive,o=s.animationBegin,h=s.animationDuration,p=s.animationEasing,u=s.animationId,m=this.state.prevPoints;return b.createElement(Ce,{begin:o,duration:h,isActive:l,easing:p,from:{t:0},to:{t:1},key:"pie-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var x=d.t,j=c.map(function(A,P){var T=m&&m[P];if(T){var v=M(T.cx,A.cx),w=M(T.cy,A.cy),k=M(T.size,A.size);return N(N({},A),{},{cx:v(x),cy:w(x),size:k(x)})}var R=M(0,A.size);return N(N({},A),{},{size:R(x)})});return b.createElement(L,null,i.renderSymbolsStatically(j))})}},{key:"renderSymbols",value:function(){var i=this.props,s=i.points,c=i.isAnimationActive,l=this.state.prevPoints;return c&&s&&s.length&&(!l||!Be(l,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,c=s.points,l=s.xAxis,o=s.yAxis,h=s.children,p=xe(h,Re.displayName);if(!p)return null;function u(d,x){return{x:d.cx,y:d.cy,value:+d.node.y,errorVal:D(d,x)}}function m(d,x){return{x:d.cx,y:d.cy,value:+d.node.x,errorVal:D(d,x)}}return p.map(function(d,x){var j=d.props.direction;return b.cloneElement(d,{key:x,data:c,xAxis:l,yAxis:o,layout:j==="x"?"vertical":"horizontal",dataPointFormatter:j==="x"?m:u})})}},{key:"renderLine",value:function(){var i=this.props,s=i.points,c=i.line,l=i.lineType,o=i.lineJointType,h=Z(this.props),p=Z(c),u,m;if(l==="joint")u=s.map(function(w){return{x:w.cx,y:w.cy}});else if(l==="fitting"){var d=Fe(s),x=d.xmin,j=d.xmax,A=d.a,P=d.b,T=function(k){return A*k+P};u=[{x,y:T(x)},{x:j,y:T(j)}]}var v=N(N(N({},h),{},{fill:"none",stroke:h&&h.fill},p),{},{points:u});return b.isValidElement(c)?m=b.cloneElement(c,v):ce(c)?m=c(v):m=b.createElement(Ke,C({},v,{type:o})),b.createElement(L,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var i=this.props,s=i.hide,c=i.points,l=i.line,o=i.className,h=i.xAxis,p=i.yAxis,u=i.left,m=i.top,d=i.width,x=i.height,j=i.id,A=i.isAnimationActive;if(s||!c||!c.length)return null;var P=this.state.isAnimationFinished,T=je("recharts-scatter",o),v=h&&h.allowDataOverflow||p&&p.allowDataOverflow,w=I(j)?this.id:j;return b.createElement(L,{className:T,clipPath:v?"url(#clipPath-".concat(w,")"):null},v?b.createElement("defs",null,b.createElement("clipPath",{id:"clipPath-".concat(w)},b.createElement("rect",{x:u,y:m,width:d,height:x}))):null,l&&this.renderLine(),this.renderErrorBar(),b.createElement(L,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!A||P)&&Me.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(i,s){return i.animationId!==s.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:s.curPoints}:i.points!==s.curPoints?{curPoints:i.points}:null}},{key:"renderSymbolItem",value:function(i,s){var c;return b.isValidElement(i)?c=b.cloneElement(i,s):ce(i)?c=i(s):typeof i=="string"&&(c=b.createElement(Se,C({},s,{type:i}))),c}}]),t}(me.PureComponent);B.displayName="Scatter";B.defaultProps={xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Le.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"};B.getComposedData=function(n){var r=n.xAxis,t=n.yAxis,a=n.zAxis,i=n.item,s=n.displayedData,c=n.xAxisTicks,l=n.yAxisTicks,o=n.offset,h=i.props.tooltipType,p=xe(i.props.children,We.displayName),u=I(r.dataKey)?i.props.dataKey:r.dataKey,m=I(t.dataKey)?i.props.dataKey:t.dataKey,d=a&&a.dataKey,x=a?a.range:U.defaultProps.range,j=x&&x[0],A=r.scale.bandwidth?r.scale.bandwidth():0,P=t.scale.bandwidth?t.scale.bandwidth():0,T=s.map(function(v,w){var k=D(v,u),R=D(v,m),O=!I(d)&&D(v,d)||"-",ae=[{name:I(r.dataKey)?i.props.name:r.name||r.dataKey,unit:r.unit||"",value:k,payload:v,dataKey:u,type:h},{name:I(t.dataKey)?i.props.name:t.name||t.dataKey,unit:t.unit||"",value:R,payload:v,dataKey:m,type:h}];O!=="-"&&ae.push({name:a.name||a.dataKey,unit:a.unit||"",value:O,payload:v,dataKey:d,type:h});var Y=le({axis:r,ticks:c,bandSize:A,entry:v,index:w,dataKey:u}),X=le({axis:t,ticks:l,bandSize:P,entry:v,index:w,dataKey:m}),ie=O!=="-"?a.scale(O):j,F=Math.sqrt(Math.max(ie,0)/Math.PI);return N(N({},v),{},{cx:Y,cy:X,x:Y-F,y:X-F,xAxis:r,yAxis:t,zAxis:a,width:2*F,height:2*F,size:ie,node:{x:k,y:R,z:O},tooltipPayload:ae,tooltipPosition:{x:Y,y:X},payload:v},p&&p[w]&&p[w].props)});return N({points:T},o)};var tt=Ve({chartName:"ScatterChart",GraphicalChild:B,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:_},{axisType:"yAxis",AxisComp:S},{axisType:"zAxis",AxisComp:U}],formatAxisMap:He}),ue=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)};function at(n,r){function t(a,i){if(n(a,i))return!0;if(Array.isArray(a))return!(!Array.isArray(i)||a.length!==i.length||!a.every(function(p,u){return t(p,i[u])}));if(Array.isArray(i))return!1;if(typeof a=="object"){if(typeof i!="object")return!1;var s=a===null,c=i===null;if(s||c)return s===c;var l=Object.keys(a),o=Object.keys(i);if(l.length!==o.length)return!1;var h=r?t:n;return!!l.every(function(p){return ue(a,p)&&ue(i,p)&&h(a[p],i[p])})}return!1}return t}var it=function(r,t){for(var a=0;a<r.length;a++)if(t(r[a]))return a;return-1};function nt(n,r){var t=[];function a(s){var c=it(t,function(o){return r(s,o.key)});if(c>-1){var l=t[c];return c>0&&(t.splice(c,1),t.unshift(l)),l.value}}function i(s,c){a(s)||(t.unshift({key:s,value:c}),t.length>n&&t.pop())}return{get:a,put:i}}function rt(n){var r;return{get:function(a){if(r&&n(a,r.key))return r.value},put:function(a,i){r={key:a,value:i}}}}function st(n,r){return n===1?rt(r):nt(n,r)}function ot(n,r){var t=r?at(n,r):n;return function(a,i){if(a.length!==i.length)return!1;for(var s=0;s<a.length;s+=1)if(!t(a[s],i[s]))return!1;return!0}}function lt(){for(var n=1,r=function(o,h){return o===h},t=!1,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];typeof i[0]=="number"&&(n=i.shift()),typeof i[0]=="function"?r=i.shift():typeof i[0]>"u"&&i.shift(),typeof i[0]=="boolean"&&(t=i[0]);var c=st(n,ot(r,t));return function(l){return function(){for(var o=arguments.length,h=new Array(o),p=0;p<o;p++)h[p]=arguments[p];var u=c.get(h);return u===void 0&&(u=l.apply(l,h),c.put(h,u)),u}}}const f={SINGLE_TWO:"SINGLE_TWO",SINGLE_FIVE:"SINGLE_FIVE",DOUBLE_TWO:"DOUBLE_TWO",DOUBLE_FIVE:"DOUBLE_FIVE",BOTH_TWO:"BOTH_TWO",BOTH_FIVE:"BOTH_FIVE"},ct=n=>{switch(n){case f.SINGLE_TWO:return[e.jsx(y,{dataKey:"single.twoBars.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"11"),e.jsx(y,{dataKey:"single.twoBars.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"22")];case f.SINGLE_FIVE:return[e.jsx(y,{dataKey:"single.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"1"),e.jsx(y,{dataKey:"single.p2notPlayed",fill:"#899db3",stackId:"stack",isAnimationActive:!0},"2"),e.jsx(y,{dataKey:"single.notPlayed",fill:"#70707060",stackId:"stack",isAnimationActive:!0},"3"),e.jsx(y,{dataKey:"single.p1notPlayed",fill:"#bfa988",stackId:"stack",isAnimationActive:!0},"4"),e.jsx(y,{dataKey:"single.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"5")];case f.DOUBLE_TWO:return[e.jsx(y,{dataKey:"double.twoBars.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"11"),e.jsx(y,{dataKey:"double.twoBars.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"22")];case f.DOUBLE_FIVE:return[e.jsx(y,{dataKey:"double.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"1"),e.jsx(y,{dataKey:"double.p2notPlayed",fill:"#899db3",stackId:"stack",isAnimationActive:!0},"2"),e.jsx(y,{dataKey:"double.notPlayed",fill:"#70707060",stackId:"stack",isAnimationActive:!0},"3"),e.jsx(y,{dataKey:"double.p1notPlayed",fill:"#bfa988",stackId:"stack",isAnimationActive:!0},"4"),e.jsx(y,{dataKey:"double.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"5")];case f.BOTH_TWO:return[e.jsx(y,{dataKey:"all.twoBars.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"11"),e.jsx(y,{dataKey:"all.twoBars.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"22")];case f.BOTH_FIVE:return[e.jsx(y,{dataKey:"all.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"1"),e.jsx(y,{dataKey:"all.p2notPlayed",fill:"#899db3",stackId:"stack",isAnimationActive:!0},"2"),e.jsx(y,{dataKey:"all.notPlayed",fill:"#70707060",stackId:"stack",isAnimationActive:!0},"3"),e.jsx(y,{dataKey:"all.p1notPlayed",fill:"#bfa988",stackId:"stack",isAnimationActive:!0},"4"),e.jsx(y,{dataKey:"all.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"5")];default:return null}},ee=void 0,dt=ye("id"),pt=ye("compareToId"),ht=lt()((n,r,t)=>{if(!n||!r)return{};let a=n.ratingChanges[0].rating,i=r.ratingChanges[0].rating;const s=E.flow(E.sortBy("date"),E.map(o=>(o.rating&&(a=o.rating),o.rating2&&(i=o.rating2),{rating1:a,rating2:i,date:o.date})),E.sortedUniqBy("date"))([...n.ratingChanges,...r.ratingChanges.map(o=>({date:o.date,rating2:o.rating}))]);a=n.placesChanges[0].place,i=r.placesChanges[0].place;const c=E.flow(E.sortBy("date"),E.map(o=>(o.place&&(a=o.place),o.place2&&(i=o.place2),{place1:a,place2:i,date:o.date})))([...n.placesChanges,...r.placesChanges.map(o=>({date:o.date,place2:o.place}))]),l=E.fromPairs(Array.from({length:28}).map((o,h)=>[h+1,{}]));return E.keys(l).forEach(o=>{const h=E.flow(E.map("chart"),E.uniqBy("sharedChartId"))([...n.resultsByLevel[o],...r.resultsByLevel[o]]),p={x:o,all:{p1win:0,p1notPlayed:0,p2win:0,p2notPlayed:0,notPlayed:0,twoBars:{}},double:{p1win:0,p1notPlayed:0,p2win:0,p2notPlayed:0,notPlayed:0,twoBars:{}},single:{p1win:0,p1notPlayed:0,p2win:0,p2notPlayed:0,notPlayed:0,twoBars:{}}};h.forEach(d=>{const x=d.results.findIndex(P=>P.playerId===n.id),j=d.results.findIndex(P=>P.playerId===r.id),A=d.chartType.startsWith("D")?p.double:p.single;x<0&&j<0?console.log("wtf?"):x<0?(p.all.p1notPlayed++,A.p1notPlayed++):j<0?(p.all.p2notPlayed++,A.p2notPlayed++):x<j?(p.all.p1win++,A.p1win++):j<x&&(p.all.p2win++,A.p2win++)});const u=d=>{const x=d.p1win+d.p2win||1;d.twoBars.p1win=d.p1win/x,d.twoBars.p2win=d.p2win/x};u(p.all),u(p.single),u(p.double);const m=(d,x)=>{d.p1win=d.p1win/x,d.p1notPlayed=d.p1notPlayed/x,d.p2win=d.p2win/x,d.p2notPlayed=d.p2notPlayed/x,d.notPlayed=1-d.p1win-d.p1notPlayed-d.p2win-d.p2notPlayed};m(p.all,t.chartLevels[o]),m(p.double,t.doublesLevels[o]),m(p.single,t.singlesLevels[o]),l[o]=p}),{ratingChanges:s,placesChanges:c,perLevelComparison:E.values(l)}}),ft=(n,r)=>{const t=dt(n,r),a=pt(n,r);return{profile:t,profile2:a,combinedData:ht(t,a,n.tracklist.data),tracklist:n.tracklist.data,filter:n.profiles.filter,error:n.charts.error||n.tracklist.error,isLoading:n.charts.isLoading||n.results.isLoadingRanking||n.tracklist.isLoading}},ut={fetchChartsData:be,setProfilesFilter:Ee,resetProfilesFilter:we};class z extends me.Component{constructor(){super(...arguments);g(this,"state",{isLevelGraphCombined:!0,compareBarsMode:f.BOTH_TWO});g(this,"onRefresh",()=>{const{isLoading:t}=this.props;!t&&this.props.fetchChartsData()});g(this,"onChangeDayRange",t=>{const{filter:a}=this.props;this.props.setProfilesFilter({...a,dayRange:t})});g(this,"rhMargin",{top:5,bottom:5,right:5,left:0});g(this,"rhXDomain",["dataMin","dataMax"]);g(this,"rhYDomain",["dataMin - 100","dataMax + 100"]);g(this,"rhXTickFormatter",t=>K(t).toLocaleDateString());g(this,"rhTooltip",({active:t,payload:a,label:i})=>{const{profile:s,profile2:c}=this.props,l=s.name,o=c.name;return!a||!a[0]?null:e.jsxs("div",{className:"history-tooltip",children:[e.jsx("div",{children:K(a[0].payload.date).toLocaleDateString()}),a[1]&&e.jsxs("div",{style:{fontWeight:"bold",color:a[1].color},children:[l,": ",Math.round(a[1].value)]}),a[0]&&e.jsxs("div",{style:{fontWeight:"bold",color:a[0].color},children:[o,": ",Math.round(a[0].value)]})]})});g(this,"circleShape",t=>e.jsx("circle",{cx:t.cx,cy:t.cy,r:4,fill:t.fill},t.key));g(this,"plcMargin",{top:5,bottom:5,right:5,left:0});g(this,"plcTooltip",({active:t,payload:a,label:i})=>{const{profile:s,profile2:c}=this.props,{compareBarsMode:l}=this.state,o=[f.SINGLE_TWO,f.DOUBLE_TWO,f.BOTH_TWO].includes(l),h=s.name,p=c.name;if(!a||!a[0])return null;const u=(m,d)=>e.jsxs("div",{style:{fontWeight:"bold",color:m.color},children:[d,": ",Math.round(E.get(m.dataKey,m.payload)*100),"%"]},m.name);return e.jsxs("div",{className:"history-tooltip",children:[e.jsxs("div",{children:["Level: ",a[0].payload.x]}),u(a[0],`${h} wins`),!o&&u(a[1],`${p} has no score`),!o&&u(a[2],"Both have no score"),!o&&u(a[3],`${h} has no score`),u(o?a[1]:a[4],`${p} wins`)]})});g(this,"plcXDomain",[0,1]);g(this,"plcXTicks",[0,.5,1]);g(this,"plcXFormatter",t=>`${Math.round(t*100)}%`)}renderRankingHistory(){const{combinedData:t}=this.props;return e.jsx(W,{minHeight:ee,aspect:1.6,children:e.jsxs(de,{data:t.ratingChanges,margin:this.rhMargin,children:[e.jsx(J,{strokeDasharray:"3 3"}),e.jsx(_,{dataKey:"date",type:"number",domain:this.rhXDomain,tickFormatter:this.rhXTickFormatter}),e.jsx(S,{allowDecimals:!1,domain:this.rhYDomain,tickFormatter:Math.round,width:40}),e.jsx(pe,{y:1e3,stroke:"white"}),e.jsx(Q,{isAnimationActive:!1,content:this.rhTooltip}),e.jsx(V,{type:"monotone",isAnimationActive:!1,dataKey:"rating2",stroke:"#ffd388",strokeWidth:3,dot:!1}),e.jsx(V,{type:"monotone",isAnimationActive:!1,dataKey:"rating1",stroke:"#88d3ff",strokeWidth:3,dot:!1})]})})}renderAccuracyPoints(t=!1){const{profile:a,profile2:i}=this.props;return e.jsx(W,{minHeight:ee,aspect:1.6,children:e.jsxs(tt,{margin:{top:5,bottom:5,right:5,left:0},children:[e.jsx(J,{strokeDasharray:"3 3"}),e.jsx(_,{dataKey:"[0]",type:"number",domain:[1,28],tickFormatter:s=>Math.round(s),ticks:[1,3,5,7,9,11,13,15,17,19,21,23,25,27]}),e.jsx(S,{dataKey:"[1]",type:"number",domain:[0,100],width:40,tickFormatter:s=>Math.round(s)+"%"}),e.jsx(B,{shape:this.circleShape,data:(t?i:a).accuracyPointsRaw,fill:t?"#ffd388":"#88d3ff"})]})})}renderPlaceHistory(){const{combinedData:t,profile:a,profile2:i}=this.props,s=a.name,c=i.name;return e.jsx(W,{minHeight:ee,aspect:1.6,children:e.jsxs(de,{data:t.placesChanges,margin:{top:5,bottom:5,right:5,left:0},children:[e.jsx(J,{strokeDasharray:"3 3"}),e.jsx(_,{dataKey:"date",type:"number",domain:["dataMin","dataMax"],tickFormatter:l=>K(l).toLocaleDateString()}),e.jsx(S,{allowDecimals:!1,domain:[1,l=>l<3?l+2:l+1],interval:0,reversed:!0,width:40}),e.jsx(Q,{isAnimationActive:!1,content:({active:l,payload:o,label:h})=>!o||!o[0]?null:e.jsxs("div",{className:"history-tooltip",children:[e.jsx("div",{children:K(o[0].payload.date).toLocaleDateString()}),o[1]&&e.jsxs("div",{style:{fontWeight:"bold",color:o[1].color},children:[s,": #",o[1].value]}),o[0]&&e.jsxs("div",{style:{fontWeight:"bold",color:o[0].color},children:[c,": #",o[0].value]})]})}),e.jsx(V,{isAnimationActive:!1,type:"stepAfter",dataKey:"place2",stroke:"#ffd388",strokeWidth:3,dot:!1}),e.jsx(V,{isAnimationActive:!1,type:"stepAfter",dataKey:"place1",stroke:"#88d3ff",strokeWidth:3,dot:!1})]})})}renderPerLevelComparison(){const{combinedData:t}=this.props,{compareBarsMode:a}=this.state;return e.jsx(W,{width:"100%",aspect:.7,children:e.jsxs(Ge,{layout:"vertical",data:[...t.perLevelComparison],margin:this.plcMargin,children:[e.jsx(Q,{isAnimationActive:!1,content:this.plcTooltip}),e.jsx(S,{reversed:!0,dataKey:"x",type:"category",width:23}),e.jsx(_,{type:"number",domain:this.plcXDomain,ticks:this.plcXTicks,tickFormatter:this.plcXFormatter}),e.jsx(pe,{x:.5,stroke:"#666"}),ct(a)]})})}renderProfile(){const t=this.context,{profile:a,profile2:i,filter:s}=this.props,{compareBarsMode:c}=this.state;return e.jsxs("div",{className:"profile",children:[e.jsxs("div",{className:"profile-header",children:[e.jsxs("div",{className:"profile-name text-with-header blue",children:[e.jsx("div",{className:"text-header",children:t.PLAYER}),e.jsx("div",{children:a.name})]}),e.jsxs("div",{className:"text-with-header",children:[e.jsx("div",{className:"text-header",children:t.RANK}),e.jsxs("div",{children:["#",a.rank]})]}),e.jsxs("div",{className:"text-with-header",children:[e.jsx("div",{className:"text-header",children:t.PP}),e.jsx("div",{children:Math.floor(a.pp)})]}),e.jsxs("div",{className:"text-with-header",children:[e.jsx("div",{className:"text-header",children:t.LAST_TIME_PLAYED}),e.jsx("div",{children:a.lastResultDate?ne(t,a.lastResultDate):t.NEVER})]}),e.jsx("div",{className:"_flex-fill"}),e.jsxs("div",{className:"text-with-header -select",children:[e.jsx("div",{className:"text-header",children:t.COMPARE_WITH}),e.jsx("div",{children:e.jsx(Ue,{})})]})]}),e.jsxs("div",{className:"profile-header right-align",children:[e.jsxs("div",{className:"profile-name text-with-header orange",children:[e.jsx("div",{className:"text-header",children:t.PLAYER}),e.jsx("div",{children:i.name})]}),e.jsxs("div",{className:"text-with-header",children:[e.jsx("div",{className:"text-header",children:t.RANK}),e.jsxs("div",{children:["#",i.rank]})]}),e.jsxs("div",{className:"text-with-header",children:[e.jsx("div",{className:"text-header",children:t.PP}),e.jsx("div",{children:Math.floor(i.pp)})]}),e.jsxs("div",{className:"text-with-header",children:[e.jsx("div",{className:"text-header",children:t.LAST_TIME_PLAYED}),e.jsx("div",{children:i.lastResultDate?ne(t,i.lastResultDate):t.NEVER})]})]}),e.jsxs("div",{className:"profile-section-horizontal-container",children:[e.jsx("div",{className:"profile-section",children:e.jsx("div",{className:"profile-section-content",children:e.jsxs("div",{className:"profile-section-2",children:[e.jsx("div",{className:"profile-sm-section-header flex",children:e.jsx("span",{children:t.VICTORIES_BY_LEVEL})}),e.jsx("div",{className:"profile-sm-section-header flex",children:(()=>{const l=[f.SINGLE_TWO,f.DOUBLE_TWO,f.BOTH_TWO].includes(c);return e.jsxs("div",{className:"toggle-holder",children:[e.jsx(Ie,{className:"combine-toggle",checked:!l,onChange:()=>this.setState(o=>({compareBarsMode:{[f.SINGLE_TWO]:f.SINGLE_FIVE,[f.DOUBLE_TWO]:f.DOUBLE_FIVE,[f.BOTH_TWO]:f.BOTH_FIVE,[f.SINGLE_FIVE]:f.SINGLE_TWO,[f.DOUBLE_FIVE]:f.DOUBLE_TWO,[f.BOTH_FIVE]:f.BOTH_TWO}[o.compareBarsMode]})),children:t.DETAILED}),e.jsxs("div",{className:"tabs-holder",children:[e.jsx(q,{text:t.ALL,active:[f.BOTH_TWO,f.BOTH_FIVE].includes(c),onToggle:()=>{this.setState(o=>({compareBarsMode:l?f.BOTH_TWO:f.BOTH_FIVE}))}}),e.jsx(q,{text:t.SINGLES,active:[f.SINGLE_TWO,f.SINGLE_FIVE].includes(c),onToggle:o=>{this.setState(h=>({compareBarsMode:l?f.SINGLE_TWO:f.SINGLE_FIVE}))}}),e.jsx(q,{text:t.DOUBLES,active:[f.DOUBLE_TWO,f.DOUBLE_FIVE].includes(c),onToggle:o=>{this.setState(h=>({compareBarsMode:l?f.DOUBLE_TWO:f.DOUBLE_FIVE}))}})]})]})})()}),e.jsx("div",{className:"chart-container",children:this.renderPerLevelComparison()})]})})}),e.jsxs("div",{className:"profile-section",children:[e.jsxs("div",{className:"profile-section-content",children:[e.jsxs("div",{className:"profile-section-2",children:[e.jsx("div",{className:"profile-sm-section-header",children:e.jsx("span",{children:t.ELO})}),e.jsx("div",{className:"chart-container",children:this.renderRankingHistory()})]}),e.jsxs("div",{className:"profile-section-2",children:[e.jsx("div",{className:"profile-sm-section-header",children:e.jsx("span",{children:t.PLACE_IN_TOP})}),e.jsx("div",{className:"chart-container",children:this.renderPlaceHistory()})]})]}),(()=>{const l=s.dayRange||a.filterRange,o=re(l[0]*1e3*60*60*24).format("L"),h=re(l[1]*1e3*60*60*24).format("L"),p=Math.max(l[0]-1,a.minMaxRange[0]),u=Math.min(l[0]+1,l[1]),m=Math.max(l[1]-1,l[0]),d=Math.min(l[1]+1,a.minMaxRange[1]);return e.jsxs("div",{className:"range-container",children:[e.jsx(Oe,{range:l,min:a.minMaxRange[0],max:a.minMaxRange[1],onChange:this.onChangeDayRange}),e.jsxs("div",{className:"range-controls _flex-row",children:[e.jsx("button",{className:"btn btn-sm btn-dark",onClick:()=>this.onChangeDayRange([p,l[1]]),children:e.jsx(se,{})}),e.jsx("span",{className:"date-text",children:o}),e.jsx("button",{className:"btn btn-sm btn-dark",onClick:()=>this.onChangeDayRange([u,l[1]]),children:e.jsx(oe,{})}),e.jsx("div",{className:"_flex-fill"}),e.jsx("button",{className:"btn btn-sm btn-dark",onClick:()=>this.onChangeDayRange([l[0],m]),children:e.jsx(se,{})}),e.jsx("span",{className:"date-text",children:h}),e.jsx("button",{className:"btn btn-sm btn-dark",onClick:()=>this.onChangeDayRange([l[0],d]),children:e.jsx(oe,{})})]})]})})()]})]}),e.jsxs("div",{className:"profile-section-horizontal-container",children:[e.jsx("div",{className:"profile-section",children:e.jsx("div",{className:"profile-section-content",children:e.jsxs("div",{className:"profile-section-2",children:[e.jsx("div",{className:"profile-sm-section-header",children:e.jsx("span",{children:t.ACCURACY_BY_LEVEL})}),e.jsx("div",{className:"chart-container",children:this.renderAccuracyPoints()})]})})}),e.jsx("div",{className:"profile-section",children:e.jsx("div",{className:"profile-section-content",children:e.jsxs("div",{className:"profile-section-2",children:[e.jsx("div",{className:"profile-sm-section-header",children:e.jsx("span",{children:t.ACCURACY_BY_LEVEL})}),e.jsx("div",{className:"chart-container",children:this.renderAccuracyPoints(!0)})]})})})]})]})}render(){const{isLoading:t,profile:a,error:i}=this.props;Pe&&console.log("profile:",a);const s=this.context;return e.jsx("div",{className:"profile-compare-page",children:e.jsxs("div",{className:"content",children:[i&&i.message,e.jsxs("div",{className:"top-controls",children:[e.jsx("div",{className:"_flex-fill"}),e.jsxs("button",{disabled:t,className:"btn btn-sm btn-dark btn-icon",onClick:this.onRefresh,children:[e.jsx(Te,{})," ",s.UPDATE]})]}),t&&e.jsx(ke,{}),!t&&E.isEmpty(a)&&e.jsx("div",{className:"profile",children:"Profile not found"}),!t&&!E.isEmpty(a)&&this.renderProfile()]})})}}g(z,"contextType",Ne),g(z,"propTypes",{profile:$.object,error:$.object,isLoading:$.bool.isRequired}),g(z,"defaultProps",{profile:{},profile2:{},combinedData:{}});const bt=ze(Ae(ft,ut)(z));export{bt as default};
//# sourceMappingURL=ProfileCompare-c37900e2.js.map
