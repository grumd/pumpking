import{r as Me,j as k,G as Fr,B as zn,u as br,a as _r,b as yr,c as Cr,d as Pr,e as Ur,f as Tn,g as Nr,A as Xn,h as Rr}from"./index-B6NMOy3i.js";import{G as Or,F as Mr}from"./index.esm-B-2bGnWi.js";import{M as Dr}from"./Modal-T_qQ-wc4.js";import{u as vr}from"./useSingleChartQuery-DvIFCutf.js";import"./Paper-CPLPkHAx.js";import"./useFilter-BpW6s_pc.js";function Lr(e){return Or({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M228.9 79.9L51.8 403.1C40.6 423.3 55.5 448 78.9 448h354.3c23.3 0 38.2-24.7 27.1-44.9L283.1 79.9c-11.7-21.2-42.5-21.2-54.2 0zM273.6 214L270 336h-28l-3.6-122h35.2zM256 402.4c-10.7 0-19.1-8.1-19.1-18.4s8.4-18.4 19.1-18.4 19.1 8.1 19.1 18.4-8.4 18.4-19.1 18.4z"}}]})(e)}const wr="_addResultPage_1gb69_1",Gr="_addResultForm_1gb69_9",kr="_fileInput_1gb69_19",Br="_confirmation_1gb69_23",Hr="_splitPanels_1gb69_23",jr="_screenshotPanel_1gb69_28",Zr="_formPanel_1gb69_31",$r="_chartName_1gb69_34",zr="_grid_1gb69_39",Ce={addResultPage:wr,addResultForm:Gr,fileInput:kr,confirmation:Br,splitPanels:Hr,screenshotPanel:jr,formPanel:Zr,chartName:$r,grid:zr},Xr=({okText:e="OK"}={})=>{const[n,i]=Me.useState(!1),o=Me.useRef(null),t=r=>{n&&(i(!1),o.current&&o.current(r))};return{renderPopup:({content:r})=>k.jsxs(Dr,{opened:n,onClose:()=>t(!1),centered:!0,size:"lg",radius:"md",withCloseButton:!1,children:[r,k.jsxs(Fr,{justify:"space-between",mt:"md",children:[k.jsx(zn,{color:"red",onClick:()=>t(!1),children:"Cancel"}),k.jsx(zn,{color:"green",onClick:()=>t(!0),children:e})]})]}),confirm:()=>(i(!0),new Promise((r,a)=>{o.current=c=>{c?r():a()}}))}},Wr=e=>new Promise((n,i)=>{const o=new FileReader;o.readAsDataURL(e),o.onload=()=>n(o.result?.toString()??""),o.onerror=i});var Je={},Wn;function Yr(){if(Wn)return Je;Wn=1,Object.defineProperty(Je,"__esModule",{value:!0});const e=new RegExp("^(\\d{4}):(\\d{2}):(\\d{2}) (\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,3}))?(?:([zZ])|([-+])(\\d{2}):(\\d{2}))?$");function n(t,r){let a=t.toString(),c=r-a.length;for(;c>0;)c-=1,a=`0${a}`;return a}function i(t){const r=e.exec(t);if(r==null)return new Date(NaN);const a=new Date,c=r[8]?0:r[9]?(Number(r[10])*60+Number(r[11]))*(r[9]==="+"?1:-1):0;return a.setUTCFullYear(Number(r[1])),a.setUTCMonth(Number(r[2])-1),a.setUTCDate(Number(r[3])),a.setUTCHours(Number(r[4])),a.setUTCMinutes(Number(r[5])+c),a.setUTCSeconds(Number(r[6])),a.setUTCMilliseconds(Number(r[7])||0),a}Je.parse=i;function o(t,r,a){if(isNaN(t.getTime()))return"";const c=n(t.getUTCFullYear(),4),g=n(t.getUTCMonth()+1,2),x=n(t.getUTCDate(),2),s=n(t.getUTCHours(),2),f=n(t.getUTCMinutes(),2),u=n(t.getUTCSeconds(),2),l=r?`.${Math.round(t.getUTCMilliseconds()/10)}`:"";return`${c}:${g}:${x} ${s}:${f}:${u}${l}${a?"Z":""}`}return Je.format=o,Je}var Kr=Yr();function X(e,n,i){const o=[];for(let t=0;t<i&&n+t<e.byteLength;t++)o.push(e.getUint8(n+t));return We(o)}function qr(e,n,i){const o=[];for(let t=0;t<i&&n+t<e.byteLength;t+=2)o.push(e.getUint16(n+t));return We(o)}function We(e){return e.map(n=>String.fromCharCode(n)).join("")}function K(){for(let e=1;e<arguments.length;e++)for(const n in arguments[e])arguments[0][n]=arguments[e][n];return arguments[0]}function Nt(e,n,i){let o=!1;Object.defineProperty(e,n,{get(){return o||(o=!0,Object.defineProperty(e,n,{configurable:!0,enumerable:!0,value:i.apply(e),writable:!0})),e[n]},configurable:!0,enumerable:!0})}function Rt(e){if(typeof btoa<"u")return btoa(typeof e=="string"?e:Array.prototype.reduce.call(new Uint8Array(e),(n,i)=>n+String.fromCharCode(i),""));if(!(typeof Buffer>"u"))return typeof Buffer.from!==void 0?Buffer.from(e).toString("base64"):new Buffer(e).toString("base64")}function Jr(e){const n=e.substring(e.indexOf(",")+1);if(e.indexOf(";base64")!==-1)return typeof atob<"u"?Uint8Array.from(atob(n),o=>o.charCodeAt(0)).buffer:typeof Buffer>"u"?void 0:typeof Buffer.from!==void 0?Buffer.from(n,"base64"):new Buffer(n,"base64");const i=decodeURIComponent(n);return typeof Buffer<"u"?typeof Buffer.from!==void 0?Buffer.from(i):new Buffer(i):Uint8Array.from(i,o=>o.charCodeAt(0)).buffer}let Qr=class{constructor(n){if(Vr(n))throw new Error("DataView: Passed buffer type is unsupported.");this.buffer=n,this.byteLength=this.buffer.length}getUint8(n){return this.buffer.readUInt8(n)}getUint16(n,i){return i?this.buffer.readUInt16LE(n):this.buffer.readUInt16BE(n)}getUint32(n,i){return i?this.buffer.readUInt32LE(n):this.buffer.readUInt32BE(n)}getInt32(n,i){return i?this.buffer.readInt32LE(n):this.buffer.readInt32BE(n)}};function Vr(e){return typeof e!="object"||e.length===void 0||e.readUInt8===void 0||e.readUInt16LE===void 0||e.readUInt16BE===void 0||e.readUInt32LE===void 0||e.readUInt32BE===void 0||e.readInt32LE===void 0||e.readInt32BE===void 0}function oe(e){return e.map(n=>String.fromCharCode(n)).join("")}function Cn(e){if(e.length>=8){const n=oe(e.slice(0,8));if(n==="ASCII\0\0\0")return oe(e.slice(8));if(n==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(n==="UNICODE\0")return"[Unicode encoded text]";if(n==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}function an(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}const Pn=18761,Un=19789,He={BIG_ENDIAN:Un,LITTLE_ENDIAN:Pn,getByteOrder:ei};function ei(e,n){if(e.getUint16(n)===Pn)return Pn;if(e.getUint16(n)===Un)return Un;throw new Error("Illegal byte order value. Faulty image.")}const Yn={isTiffFile:ni,findTiffOffsets:ri};function ni(e){return!!e&&e.byteLength>=4&&ti(e)}function ti(e){const o=e.getUint16(0)===He.LITTLE_ENDIAN;return e.getUint16(2,o)===42}function ri(){return{hasAppMarkers:!0,tiffHeaderOffset:0}}const Kn={isJpegFile:Ti,findJpegOffsets:Ii},ii=2,oi=65496,qn=2,Se=4,he=2,si=2,ai=10,ci=18,Jn=33,Qn=79,Vn=18,ui=8,Nn="ICC_PROFILE\0",Ot=Se+Nn.length,fi=Ot+1,et="MPF\0",Mt=65472,Dt=65474,li=65476,di=65499,gi=65501,hi=65498,vt=65504,kn=65505,Lt=65506,pi=65517,mi=65519,xi=65534,Ei=65535,Si="JFIF",Rn="Exif",nt="http://ns.adobe.com/xap/1.0/\0",tt="http://ns.adobe.com/xmp/extension/\0",rt="Photoshop 3.0";function Ti(e){return!!e&&e.byteLength>=ii&&e.getUint16(0)===oi}function Ii(e){let n=qn,i,o,t,r,a,c,g,x,s;for(;n+Se+5<=e.byteLength;){if(Ai(e,n))o=n+he;else if(Fi(e,n))t=n+he;else if(yi(e,n))i=e.getUint16(n+he),r=n+si;else if(Ci(e,n))i=e.getUint16(n+he),a=n+ai;else if(Pi(e,n))g||(g=[]),i=e.getUint16(n+he),g.push(Oi(n,i));else if(Ni(e,n))g||(g=[]),i=e.getUint16(n+he),g.push(Mi(n,i));else if(Di(e,n))i=e.getUint16(n+he),c=n+ci;else if(bi(e,n)){i=e.getUint16(n+he);const f=n+Vn,u=i-(Vn-he),l=e.getUint8(n+Ot),E=e.getUint8(n+fi);x||(x=[]),x.push({offset:f,length:u,chunkNumber:l,chunksTotal:E})}else if(_i(e,n))i=e.getUint16(n+he),s=n+ui;else if(vi(e,n))i=e.getUint16(n+he);else if(Li(e,n)){n++;continue}else break;n+=he+i}return{hasAppMarkers:n>qn,fileDataOffset:o||t,jfifDataOffset:r,tiffHeaderOffset:a,iptcDataOffset:c,xmpChunks:g,iccChunks:x,mpfDataOffset:s}}function Ai(e,n){return e.getUint16(n)===Mt}function Fi(e,n){return e.getUint16(n)===Dt}function bi(e,n){const i=Nn.length;return e.getUint16(n)===Lt&&X(e,n+Se,i)===Nn}function _i(e,n){const i=et.length;return e.getUint16(n)===Lt&&X(e,n+Se,i)===et}function yi(e,n){const i=Rn.length;return e.getUint16(n)===vt&&X(e,n+Se,i)===Si&&e.getUint8(n+Se+i)===0}function Ci(e,n){const i=Rn.length;return e.getUint16(n)===kn&&X(e,n+Se,i)===Rn&&e.getUint8(n+Se+i)===0}function Pi(e,n){return e.getUint16(n)===kn&&Ui(e,n)}function Ui(e,n){const i=nt.length;return X(e,n+Se,i)===nt}function Ni(e,n){return e.getUint16(n)===kn&&Ri(e,n)}function Ri(e,n){const i=tt.length;return X(e,n+Se,i)===tt}function Oi(e,n){return{dataOffset:e+Jn,length:n-(Jn-he)}}function Mi(e,n){return{dataOffset:e+Qn,length:n-(Qn-he)}}function Di(e,n){const i=rt.length;return e.getUint16(n)===pi&&X(e,n+Se,i)===rt&&e.getUint8(n+Se+i)===0}function vi(e,n){const i=e.getUint16(n);return i>=vt&&i<=mi||i===xi||i===Mt||i===Dt||i===li||i===di||i===gi||i===hi}function Li(e,n){return e.getUint16(n)===Ei}const it={isPngFile:ki,findPngOffsets:Bi},On=`PNG\r

`,cn=4,_e=4,en=0,je=cn,le=cn+_e,Mn="XML:com.adobe.xmp\0",wi="tEXt",wt="iTXt",Gt="pHYs",kt="tIME",Gi="eXIf";function ki(e){return!!e&&X(e,0,On.length)===On}function Bi(e){const i={hasAppMarkers:!1};let o=On.length;for(;o+cn+_e<=e.byteLength;){if(Hi(e,o))i.hasAppMarkers=!0,i.pngHeaderOffset=o+le;else if(ji(e,o)){const t=Xi(e,o);t!==void 0&&(i.hasAppMarkers=!0,i.xmpChunks=[{dataOffset:t,length:e.getUint32(o+en)-(t-(o+le))}])}else if(Zi(e,o)){i.hasAppMarkers=!0;const t=X(e,o+je,_e);i.pngTextChunks||(i.pngTextChunks=[]),i.pngTextChunks.push({length:e.getUint32(o+en),type:t,offset:o+le})}else $i(e,o)?(i.hasAppMarkers=!0,i.tiffHeaderOffset=o+le):zi(e,o)&&(i.hasAppMarkers=!0,i.pngChunkOffsets||(i.pngChunkOffsets=[]),i.pngChunkOffsets.push(o+en));o+=e.getUint32(o+en)+cn+_e+4}return i}function Hi(e,n){return X(e,n+je,_e)==="IHDR"}function ji(e,n){return X(e,n+je,_e)==="iTXt"&&X(e,n+le,Mn.length)===Mn}function Zi(e,n){const i="tEXt",o="iTXt",t=X(e,n+je,_e);return t===i||t===o}function $i(e,n){return X(e,n+je,_e)===Gi}function zi(e,n){const i=[Gt,kt],o=X(e,n+je,_e);return i.includes(o)}function Xi(e,n){n+=le+Mn.length+1+1;let t=0;for(;t<2&&n<e.byteLength;)e.getUint8(n)===0&&t++,n++;if(!(t<2))return n}const ot={isHeicFile:Wi,findHeicOffsets:Yi};function Wi(e){if(!e)return!1;const n="ftyp",i=4,o=["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"],r=X(e,i+n.length,4);return X(e,i,n.length)===n&&o.indexOf(r)!==-1}function Yi(e){{const{offset:n,length:i}=Ki(e);if(n===void 0)return{hasAppMarkers:!1};const o=Math.min(n+i,e.byteLength),{exifItemOffset:t,ilocOffset:r,colrOffset:a}=Vi(e,n,o),c=eo(e,t,r,o),g=no(e,a,o);return{hasAppMarkers:c!==void 0||g!==void 0,tiffHeaderOffset:c,iccChunks:g}}}function Ki(e){let r=0;for(;r+4+4<=e.byteLength;){const a=Bt(e,r);if(a>=8&&X(e,r+4,4)==="meta")return{offset:r,length:a};r+=a}return{offset:void 0,length:0}}function Bt(e,n){const o=e.getUint32(n);return qi(o)?e.byteLength-n:Ji(o)&&Qi(e,n)?e.getUint32(n+12):o}function qi(e){return e===0}function Ji(e){return e===1}function Qi(e,n){return e.getUint32(n+8)===0}function Vi(e,n,i){const r={ilocOffset:void 0,exifItemOffset:void 0,colrOffset:void 0};for(;n+4<=i&&(!r.ilocOffset||!r.exifItemOffset||!r.colrOffset);){const a=X(e,n,4);a==="iloc"?r.ilocOffset=n:a==="Exif"?r.exifItemOffset=n+-4:a==="colr"&&(r.colrOffset=n+-4),n++}return r}function eo(e,n,i,o){if(!i||!n||n+2>o)return;const s=e.getUint16(n);for(i+=12;i+16<=o;){if(e.getUint16(i)===s){const u=e.getUint32(i+8);if(u+4<=e.byteLength){const E=e.getUint32(u)+4;return u+E}}i+=16}}function no(e,n,i){if(!n||n+12>i)return;const a=X(e,n+8,4);if(!(a!=="prof"&&a!=="rICC"))return[{offset:n+12,length:Bt(e,n)-12,chunkNumber:1,chunksTotal:1}]}const st={isWebpFile:to,findOffsets:ro};function to(e){const i="RIFF",t="WEBP";return!!e&&X(e,0,i.length)===i&&X(e,8,t.length)===t}function ro(e){const o="Exif\0\0";let r=12,a=!1,c,g,x;for(;r+8<e.byteLength;){const s=X(e,r,4),f=e.getUint32(r+4,!0);s==="EXIF"?(a=!0,X(e,r+8,o.length)===o?c=r+8+o.length:c=r+8):s==="XMP "?(a=!0,g=[{dataOffset:r+8,length:f}]):s==="ICCP"&&(a=!0,x=[{offset:r+8,length:f,chunkNumber:1,chunksTotal:1}]),r+=8+(f%2===0?f:f+1)}return{hasAppMarkers:a,tiffHeaderOffset:c,xmpChunks:g,iccChunks:x}}const io={parseAppMarkers:oo};function oo(e){if(Yn.isTiffFile(e))return Yn.findTiffOffsets();if(Kn.isJpegFile(e))return Kn.findJpegOffsets(e);if(it.isPngFile(e))return it.findPngOffsets(e);if(ot.isHeicFile(e))return ot.findHeicOffsets(e);if(st.isWebpFile(e))return st.findOffsets(e);throw new Error("Invalid image format")}const Ht={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},Dn={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},H={getAsciiValue:so,getByteAt:jt,getAsciiAt:ao,getShortAt:co,getLongAt:un,getRationalAt:uo,getUndefinedAt:fo,getSlongAt:vn,getSrationalAt:lo,getIfdPointerAt:go,typeSizes:Ht,tagTypes:Dn,getTypeSize:ho};function so(e){return e.map(n=>String.fromCharCode(n))}function jt(e,n){return e.getUint8(n)}function ao(e,n){return e.getUint8(n)}function co(e,n,i){return e.getUint16(n,i===He.LITTLE_ENDIAN)}function un(e,n,i){return e.getUint32(n,i===He.LITTLE_ENDIAN)}function uo(e,n,i){return[un(e,n,i),un(e,n+4,i)]}function fo(e,n){return jt(e,n)}function vn(e,n,i){return e.getInt32(n,i===He.LITTLE_ENDIAN)}function lo(e,n,i){return[vn(e,n,i),vn(e,n+4,i)]}function go(e,n,i){return un(e,n,i)}function ho(e){if(Dn[e]===void 0)throw new Error("No such type found.");return Ht[Dn[e]]}const z={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace(e){return e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(e){return e.map(n=>{if(n===49)return"Y";if(n===50)return"Cb";if(n===51)return"Cr";if(n===52)return"R";if(n===53)return"G";if(n===54)return"B"}).join("")},Contrast(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},CustomRendered(e){return e===0?"Normal process":e===1?"Custom process":"Unknown"},ExposureMode(e){return e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},ExposureProgram(e){return e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},ExposureTime(e){return e[0]>=e[1]?`${Math.round(e[0]/e[1])}`:e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${e[0]/e[1]}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700 – 7100K)":e===13?"Day white fluorescent (N 4600 – 5400K)":e===14?"Cool white fluorescent (W 3900 – 4500K)":e===15?"White fluorescent (WW 3200 – 3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown",MeteringMode(e){return e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},ResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},Saturation(e){return e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},SceneCaptureType(e){return e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},Sharpness(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},ShutterSpeedValue(e){const n=Math.pow(2,e[0]/e[1]);return n<=1?`${Math.round(1/n)}`:`1/${Math.round(n)}`},WhiteBalance(e){return e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])},po={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:z.XResolution},283:{name:"YResolution",description:z.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:z.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(n=>`${n[0]}/${n[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(n=>`${n[0]}/${n[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{const n={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(i=>n[i]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(n=>""+n[0]/n[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(n=>""+n[0]/n[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:z.LightSource},50779:{name:"CalibrationIlluminant2",description:z.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"},mo={33434:{name:"ExposureTime",description:z.ExposureTime},33437:{name:"FNumber",description:z.FNumber},34850:{name:"ExposureProgram",description:z.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>oe(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:z.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:z.ShutterSpeedValue},37378:{name:"ApertureValue",description:z.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:z.MeteringMode},37384:{name:"LightSource",description:z.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:z.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:Cn},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" °C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" °"},40960:{name:"FlashpixVersion",description:e=>e.map(n=>String.fromCharCode(n)).join("")},40961:{name:"ColorSpace",description:z.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:z.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,n])=>`X: ${e}, Y: ${n}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:z.CustomRendered},41986:{name:"ExposureMode",description:z.ExposureMode},41987:{name:"WhiteBalance",description:z.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:e=>e===0?"Unknown":e},41990:{name:"SceneCaptureType",description:z.SceneCaptureType},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:z.Contrast},41993:{name:"Saturation",description:z.Saturation},41994:{name:"Sharpness",description:z.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{const n=`${e[0][0]/e[0][1]}-${e[1][0]/e[1][1]} mm`;return e[3][1]===0?`${n} f/?`:`${n} f/${1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},xo={0:{name:"GPSVersionID",description:e=>e[0]===2&&e[1]===2&&e[2]===0&&e[3]===0?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{const n=e.join("");return n==="N"?"North latitude":n==="S"?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:an},3:{name:"GPSLongitudeRef",description:e=>{const n=e.join("");return n==="E"?"East longitude":n==="W"?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:an},5:{name:"GPSAltitudeRef",description:e=>e===0?"Sea level":e===1?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map(([n,i])=>{const o=n/i;return/^\d(\.|$)/.test(`${o}`)?`0${o}`:o}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{const n=e.join("");return n==="A"?"Measurement in progress":n==="V"?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{const n=e.join("");return n==="2"?"2-dimensional measurement":n==="3"?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{const n=e.join("");return n==="K"?"Kilometers per hour":n==="M"?"Miles per hour":n==="N"?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{const n=e.join("");return n==="T"?"True direction":n==="M"?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{const n=e.join("");return n==="T"?"True direction":n==="M"?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{const n=e.join("");return n==="N"?"North latitude":n==="S"?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{const n=e.join("");return n==="E"?"East longitude":n==="W"?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{const n=e.join("");return n==="T"?"True direction":n==="M"?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{const n=e.join("");return n==="K"?"Kilometers":n==="M"?"Miles":n==="N"?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:Cn},28:{name:"GPSAreaInformation",description:Cn},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>e===0?"Measurement without differential correction":e===1?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"},Eo={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>oe(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"},So={45056:{name:"MPFVersion",description:e=>oe(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"},at=K({},po,mo),Oe={"0th":at,exif:at,gps:xo,interoperability:Eo,mpf:So},ct="Exif IFD Pointer",ut="GPS Info IFD Pointer",ft="Interoperability IFD Pointer",To={1:H.getByteAt,2:H.getAsciiAt,3:H.getShortAt,4:H.getLongAt,5:H.getRationalAt,7:H.getUndefinedAt,9:H.getSlongAt,10:H.getSrationalAt,13:H.getIfdPointerAt},lt={read:Io,readMpf:yo};function Io(e,n,i){const o=He.getByteOrder(e,n);let t=Ao(e,n,o,i);return t=Fo(t,e,n,o,i),t=bo(t,e,n,o,i),t=_o(t,e,n,o,i),t}function Ao(e,n,i,o){return Ye(e,"0th",n,Zt(e,n,i),i,o)}function Zt(e,n,i){return n+H.getLongAt(e,n+4,i)}function Fo(e,n,i,o,t){return e[ct]!==void 0?K(e,Ye(n,"exif",i,i+e[ct].value,o,t)):e}function bo(e,n,i,o,t){return e[ut]!==void 0?K(e,Ye(n,"gps",i,i+e[ut].value,o,t)):e}function _o(e,n,i,o,t){return e[ft]!==void 0?K(e,Ye(n,"interoperability",i,i+e[ft].value,o,t)):e}function yo(e,n,i){const o=He.getByteOrder(e,n),t=Ye(e,"mpf",n,Zt(e,n,o),o,i);return Co(e,n,t,o)}function Co(e,n,i,o){if(!i.MPEntry)return i;const r=[];for(let a=0;a<Math.ceil(i.MPEntry.value.length/16);a++){r[a]={};const c=Qe(i.MPEntry.value,a*16,H.getTypeSize("LONG"),o);r[a].ImageFlags=Po(c),r[a].ImageFormat=Uo(c),r[a].ImageType=No(c);const g=Qe(i.MPEntry.value,a*16+4,H.getTypeSize("LONG"),o);r[a].ImageSize={value:g,description:""+g};const x=Ro(a)?0:Qe(i.MPEntry.value,a*16+8,H.getTypeSize("LONG"),o)+n;r[a].ImageOffset={value:x,description:""+x};const s=Qe(i.MPEntry.value,a*16+12,H.getTypeSize("SHORT"),o);r[a].DependentImage1EntryNumber={value:s,description:""+s};const f=Qe(i.MPEntry.value,a*16+14,H.getTypeSize("SHORT"),o);r[a].DependentImage2EntryNumber={value:f,description:""+f},r[a].image=e.buffer.slice(x,x+g),Nt(r[a],"base64",function(){return Rt(this.image)})}return i.Images=r,i}function Qe(e,n,i,o){if(o===He.LITTLE_ENDIAN){let r=0;for(let a=0;a<i;a++)r+=e[n+a]<<8*a;return r}let t=0;for(let r=0;r<i;r++)t+=e[n+r]<<8*(i-1-r);return t}function Po(e){const n=[e>>31&1,e>>30&1,e>>29&1],i=[];return n[0]&&i.push("Dependent Parent Image"),n[1]&&i.push("Dependent Child Image"),n[2]&&i.push("Representative Image"),{value:n,description:i.join(", ")||"None"}}function Uo(e){const n=e>>24&7;return{value:n,description:n===0?"JPEG":"Unknown"}}function No(e){const n=e&16777215;return{value:n,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[n]||"Unknown"}}function Ro(e){return e===0}function Ye(e,n,i,o,t,r){const a=H.getTypeSize("SHORT"),c=12,g={},x=Oo(e,o,t);o+=a;for(let s=0;s<x&&!(o+c>e.byteLength);s++){const f=Mo(e,n,i,o,t,r);f!==void 0&&(g[f.name]={id:f.id,value:f.value,description:f.description}),o+=c}if(o<e.byteLength-H.getTypeSize("LONG")){const s=H.getLongAt(e,o,t);s!==0&&(g.Thumbnail=Ye(e,n,i,i+s,t,!0))}return g}function Oo(e,n,i){return n+H.getTypeSize("SHORT")<=e.byteLength?H.getShortAt(e,n,i):0}function Mo(e,n,i,o,t,r){const c=H.getTypeSize("SHORT"),g=c+H.getTypeSize("SHORT"),x=g+H.getTypeSize("LONG"),s=H.getShortAt(e,o,t),f=H.getShortAt(e,o+c,t),u=H.getLongAt(e,o+g,t);let l;if(H.typeSizes[f]===void 0||!r&&Oe[n][s]===void 0)return;if(Do(f,u))l=dt(e,o+x,f,u,t);else{const I=H.getLongAt(e,o+x,t);if(vo(e,i,I,f,u)){const T=s===33723;l=dt(e,i+I,f,u,t,T)}else l="<faulty value>"}f===H.tagTypes.ASCII&&(l=Lo(l),l=wo(l));let E=`undefined-${s}`,_=l;if(Oe[n][s]!==void 0)if(Oe[n][s].name!==void 0&&Oe[n][s].description!==void 0){E=Oe[n][s].name;try{_=Oe[n][s].description(l)}catch{_=gt(l)}}else f===H.tagTypes.RATIONAL||f===H.tagTypes.SRATIONAL?(E=Oe[n][s],_=""+l[0]/l[1]):(E=Oe[n][s],_=gt(l));return{id:s,name:E,value:l,description:_}}function Do(e,n){return H.typeSizes[e]*n<=H.getTypeSize("LONG")}function dt(e,n,i,o,t,r=!1){let a=[];r&&(o=o*H.typeSizes[i],i=H.tagTypes.BYTE);for(let c=0;c<o;c++)a.push(To[i](e,n,t)),n+=H.typeSizes[i];return i===H.tagTypes.ASCII?a=H.getAsciiValue(a):a.length===1&&(a=a[0]),a}function vo(e,n,i,o,t){return n+i+H.typeSizes[o]*t<=e.byteLength}function Lo(e){const n=[];let i=0;for(let o=0;o<e.length;o++){if(e[o]==="\0"){i++;continue}n[i]===void 0&&(n[i]=""),n[i]+=e[o]}return n}function wo(e){try{return e.map(n=>decodeURIComponent(escape(n)))}catch{return e}}function gt(e){return e instanceof Array?e.join(", "):e}const Go={read:ko};function ko(e,n){const i=Bo(e,n),o=$o(e,n,i);return{"Bits Per Sample":Ho(e,n,i),"Image Height":jo(e,n,i),"Image Width":Zo(e,n,i),"Color Components":o,Subsampling:o&&zo(e,n,o.value,i)}}function Bo(e,n){return H.getShortAt(e,n)}function Ho(e,n,i){if(3>i)return;const r=H.getByteAt(e,n+2);return{value:r,description:""+r}}function jo(e,n,i){if(5>i)return;const r=H.getShortAt(e,n+3);return{value:r,description:`${r}px`}}function Zo(e,n,i){if(7>i)return;const r=H.getShortAt(e,n+5);return{value:r,description:`${r}px`}}function $o(e,n,i){if(8>i)return;const r=H.getByteAt(e,n+7);return{value:r,description:""+r}}function zo(e,n,i,o){if(8+3*i>o)return;const a=[];for(let c=0;c<i;c++){const g=n+8+c*3;a.push([H.getByteAt(e,g),H.getByteAt(e,g+1),H.getByteAt(e,g+2)])}return{value:a,description:a.length>1?Xo(a)+Wo(a):""}}function Xo(e){const n={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(i=>n[i[0]]).join("")}function Wo(e){const n={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return e.length===0||e[0][1]===void 0||n[e[0][1]]===void 0?"":n[e[0][1]]}const Yo={read:Ko};function Ko(e,n){const i=qo(e,n),o=ts(e,n,i),t=rs(e,n,i),r={"JFIF Version":Jo(e,n,i),"Resolution Unit":Qo(e,n,i),XResolution:es(e,n,i),YResolution:ns(e,n,i),"JFIF Thumbnail Width":o,"JFIF Thumbnail Height":t};if(o!==void 0&&t!==void 0){const a=is(e,n,3*o.value*t.value,i);a&&(r["JFIF Thumbnail"]=a)}for(const a in r)r[a]===void 0&&delete r[a];return r}function qo(e,n){return H.getShortAt(e,n)}function Jo(e,n,i){if(9>i)return;const r=H.getByteAt(e,n+7),a=H.getByteAt(e,n+7+1);return{value:r*256+a,description:r+"."+a}}function Qo(e,n,i){if(10>i)return;const r=H.getByteAt(e,n+9);return{value:r,description:Vo(r)}}function Vo(e){return e===0?"None":e===1?"inches":e===2?"cm":"Unknown"}function es(e,n,i){if(12>i)return;const r=H.getShortAt(e,n+10);return{value:r,description:""+r}}function ns(e,n,i){if(14>i)return;const r=H.getShortAt(e,n+12);return{value:r,description:""+r}}function ts(e,n,i){if(15>i)return;const r=H.getByteAt(e,n+14);return{value:r,description:`${r}px`}}function rs(e,n,i){if(16>i)return;const r=H.getByteAt(e,n+15);return{value:r,description:`${r}px`}}function is(e,n,i,o){return i===0||16+i>o?void 0:{value:e.buffer.slice(n+16,n+16+i),description:"<24-bit RGB pixel data>"}}const De={iptc:{256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:In},336:{name:"Time Sent",description:An},346:{name:"Coded Character Set",description:ht,encoding_name:ht},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>oe(e)==="01"?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:e=>{const n=oe(e).split(":");return n[2]+(n[3]?"/"+n[3]:"")+(n[4]?"/"+n[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{const n=oe(e);return n==="01"?"Object Kill":n==="02"?"Object Replace":n==="03"?"Object Append":n==="04"?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:In},572:{name:"Time Created",description:An},574:{name:"Digital Creation Date",description:In},575:{name:"Digital Creation Time",description:An},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{const n=oe(e);return n==="a"?"morning":n==="p"?"evening":n==="b"?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{const n=oe(e);return n==="P"?"Portrait":n==="L"?"Landscape":n==="S"?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{const n=oe(e),i=n.charAt(0),o=n.charAt(1);let t="";return i==="1"?t+="Mono":i==="2"&&(t+="Stereo"),o==="A"?t+=", actuality":o==="C"?t+=", question and answer session":o==="M"?t+=", music, transmitted by itself":o==="Q"?t+=", response to a question":o==="R"?t+=", raw sound":o==="S"?t+=", scener":o==="V"?t+=", voicer":o==="W"&&(t+=", wrap"),t!==""?t:n}},663:{name:"Audio Sampling Rate",description:e=>parseInt(oe(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{const n=parseInt(oe(e),10);return n+(n===1?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{const n=oe(e);return n.length>=6?n.substr(0,2)+":"+n.substr(2,2)+":"+n.substr(4,2):n}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>e.length===2?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(e.length===2){const n=(e[0]<<8)+e[1];return n===0?"No ObjectData":n===1?"IPTC-NAA Digital Newsphoto Parameter Record":n===2?"IPTC7901 Recommended Message Format":n===3?"Tagged Image File Format (Adobe/Aldus Image data)":n===4?"Illustrator (Adobe Graphics data)":n===5?"AppleSingle (Apple Computer Inc)":n===6?"NAA 89-3 (ANPA 1312)":n===7?"MacBinary II":n===8?"IPTC Unstructured Character Oriented File Format (UCOFF)":n===9?"United Press International ANPA 1312 variant":n===10?"United Press International Down-Load Message":n===11?"JPEG File Interchange (JFIF)":n===12?"Photo-CD Image-Pac (Eastman Kodak)":n===13?"Microsoft Bit Mapped Graphics File [*.BMP]":n===14?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":n===15?"Audio plus Moving Video [*.AVI] (Microsoft)":n===16?"PC DOS/Windows Executable Files [*.COM][*.EXE]":n===17?"Compressed Binary File [*.ZIP] (PKWare Inc)":n===18?"Audio Interchange File Format AIFF (Apple Computer Inc)":n===19?"RIFF Wave (Microsoft Corporation)":n===20?"Freehand (Macromedia/Aldus)":n===21?'Hypertext Markup Language "HTML" (The Internet Society)':n===22?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":n===23?"MPEG 2 Audio Layer 3, ISO/IEC":n===24?"Portable Document File (*.PDF) Adobe":n===25?"News Industry Text Format (NITF)":n===26?"Tape Archive (*.TAR)":n===27?"Tidningarnas Telegrambyrå NITF version (TTNITF DTD)":n===28?"Ritzaus Bureau NITF version (RBNITF DTD)":n===29?"Corel Draw [*.CDR]":`Unknown format ${n}`}return oe(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,n)=>{const i={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},o=oe(e);if(n["ObjectData Preview File Format"]){const t=oe(n["ObjectData Preview File Format"].value);if(i[t]&&i[t][o])return i[t][o]}return o}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let n=0;for(let i=0;i<e.length;i++)n=(n<<8)+e[i];return n.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let n=0;for(let i=0;i<e.length;i++)n=(n<<8)+e[i];return n.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let n=0;for(let i=0;i<e.length;i++)n=(n<<8)+e[i];return n.toString()}}}};function In(e){const n=oe(e);return n.length>=8?n.substr(0,4)+"-"+n.substr(4,2)+"-"+n.substr(6,2):n}function An(e){const n=oe(e);let i=n;return n.length>=6&&(i=n.substr(0,2)+":"+n.substr(2,2)+":"+n.substr(4,2),n.length===11&&(i+=n.substr(6,1)+n.substr(7,2)+":"+n.substr(9,2))),i}function ht(e){const n=oe(e);return n==="\x1B%G"?"UTF-8":n==="\x1B%5"?"Windows-1252":n==="\x1B%/G"?"UTF-8 Level 1":n==="\x1B%/H"?"UTF-8 Level 2":n==="\x1B%/I"?"UTF-8 Level 3":n==="\x1B/A"?"ISO-8859-1":n==="\x1B/B"?"ISO-8859-2":n==="\x1B/C"?"ISO-8859-3":n==="\x1B/D"?"ISO-8859-4":n==="\x1B/@"?"ISO-8859-5":n==="\x1B/G"?"ISO-8859-6":n==="\x1B/F"?"ISO-8859-7":n==="\x1B/H"?"ISO-8859-8":"Unknown"}const os={get:ss};function ss(){if(typeof TextDecoder<"u")return TextDecoder}const as=5,$t={decode:cs,TAG_HEADER_SIZE:as};function cs(e,n){const i=os.get();if(typeof i<"u"&&e!==void 0)try{return new i(e).decode(Uint8Array.from(n))}catch{}const o=n.map(t=>String.fromCharCode(t)).join("");return us(o)}function us(e){try{return decodeURIComponent(escape(e))}catch{return e}}const fs=943868237,zt=4,Fn=zt+8,ls=1028,Xt=5,pt={read:ds};function ds(e,n,i){try{if(Array.isArray(e))return mt(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,i);const{naaBlock:o,dataOffset:t}=gs(e,n);return mt(e,o,t,i)}catch{return{}}}function gs(e,n){for(;n+Fn<=e.byteLength;){const i=hs(e,n);if(ps(i))return{naaBlock:i,dataOffset:n+Fn};n+=Fn+i.size+ms(i)}throw new Error("No IPTC NAA resource block.")}function hs(e,n){if(e.getUint32(n,!1)!==fs)throw new Error("Not an IPTC resource block.");return{type:e.getUint16(n+zt),size:e.getUint16(n+10)}}function ps(e){return e.type===ls}function ms(e){return e.size%2!==0?1:0}function mt(e,n,i,o){const t={};let r;const a=i+n.size;for(;i<a&&i<e.byteLength;){const{tag:c,tagSize:g}=xs(e,i,t,r,o);if(c===null)break;c&&("encoding"in c&&(r=c.encoding),t[c.name]===void 0||c.repeatable===void 0?t[c.name]={id:c.id,value:c.value,description:c.description}:(t[c.name]instanceof Array||(t[c.name]=[{id:t[c.name].id,value:t[c.name].value,description:t[c.name].description}]),t[c.name].push({id:c.id,value:c.value,description:c.description}))),i+=Xt+g}return t}function xs(e,n,i,o,t){if(Es(e,n))return{tag:null,tagSize:0};const c=e.getUint16(n+1),g=e.getUint16(n+3);if(!t&&!De.iptc[c])return{tag:void 0,tagSize:g};const x=Ss(e,n+Xt,g),s={id:c,name:Ts(De.iptc[c],c,x),value:x,description:Fs(De.iptc[c],x,i,o)};return ys(c)&&(s.repeatable=!0),Cs(c)&&(s.encoding=De.iptc[c].encoding_name(x)),{tag:s,tagSize:g}}function Es(e,n){return e.getUint8(n)!==28}function Ss(e,n,i){const o=[];for(let t=0;t<i;t++)o.push(e.getUint8(n+t));return o}function Ts(e,n,i){return e?Is(e)?e:As(e)?e.name(i):e.name:`undefined-${n}`}function Is(e){return typeof e=="string"}function As(e){return typeof e.name=="function"}function Fs(e,n,i,o){if(_s(e))try{return e.description(n,i)}catch{}return bs(e,n)?$t.decode(o,n):n}function bs(e,n){return e&&n instanceof Array}function _s(e){return e&&e.description!==void 0}function ys(e){return De.iptc[e]&&De.iptc[e].repeatable}function Cs(e){return De.iptc[e]&&De.iptc[e].encoding_name!==void 0}const rn={"tiff:Orientation"(e){return e==="1"?"Horizontal (normal)":e==="2"?"Mirror horizontal":e==="3"?"Rotate 180":e==="4"?"Mirror vertical":e==="5"?"Mirror horizontal and rotate 270 CW":e==="6"?"Rotate 90 CW":e==="7"?"Mirror horizontal and rotate 90 CW":e==="8"?"Rotate 270 CW":e},"tiff:ResolutionUnit":e=>z.ResolutionUnit(parseInt(e,10)),"tiff:XResolution":e=>$e(z.XResolution,e),"tiff:YResolution":e=>$e(z.YResolution,e),"exif:ApertureValue":e=>$e(z.ApertureValue,e),"exif:GPSLatitude":xt,"exif:GPSLongitude":xt,"exif:FNumber":e=>$e(z.FNumber,e),"exif:FocalLength":e=>$e(z.FocalLength,e),"exif:FocalPlaneResolutionUnit":e=>z.FocalPlaneResolutionUnit(parseInt(e,10)),"exif:ColorSpace":e=>z.ColorSpace(Ps(e)),"exif:ComponentsConfiguration"(e,n){if(/^\d, \d, \d, \d$/.test(n)){const i=n.split(", ").map(o=>o.charCodeAt(0));return z.ComponentsConfiguration(i)}return n},"exif:Contrast":e=>z.Contrast(parseInt(e,10)),"exif:CustomRendered":e=>z.CustomRendered(parseInt(e,10)),"exif:ExposureMode":e=>z.ExposureMode(parseInt(e,10)),"exif:ExposureProgram":e=>z.ExposureProgram(parseInt(e,10)),"exif:ExposureTime"(e){return Wt(e)?z.ExposureTime(e.split("/").map(n=>parseInt(n,10))):e},"exif:MeteringMode":e=>z.MeteringMode(parseInt(e,10)),"exif:Saturation":e=>z.Saturation(parseInt(e,10)),"exif:SceneCaptureType":e=>z.SceneCaptureType(parseInt(e,10)),"exif:Sharpness":e=>z.Sharpness(parseInt(e,10)),"exif:ShutterSpeedValue":e=>$e(z.ShutterSpeedValue,e),"exif:WhiteBalance":e=>z.WhiteBalance(parseInt(e,10))};function $e(e,n){return Wt(n)?e(n.split("/")):n}function Ps(e){return e.substring(0,2)==="0x"?parseInt(e.substring(2),16):parseInt(e,10)}function Wt(e){return/^-?\d+\/-?\d+$/.test(e)}function xt(e){const[n,i]=e.split(",");if(n!==void 0&&i!==void 0){const o=parseFloat(n),t=parseFloat(i),r=i.charAt(i.length-1);if(!Number.isNaN(o)&&!Number.isNaN(t))return""+(o+t/60)+r}return e}const Us={get:Ns};function Ns(){if(typeof DOMParser<"u")return DOMParser;try{return __non_webpack_require__("@xmldom/xmldom").DOMParser}catch{return}}const Et={read:Rs};function Rs(e,n){return typeof e=="string"?Tt({},e):Os(e,n).reduce(Tt,{})}function Os(e,n){if(n.length===0)return[];const i=[St(e,n.slice(0,1))];return n.length>1&&i.push(St(e,n.slice(1))),i}function St(e,n){const i=n.reduce((r,a)=>r+a.length,0),o=new Uint8Array(i);let t=0;for(let r=0;r<n.length;r++){const a=n[r],c=e.buffer.slice(a.dataOffset,a.dataOffset+a.length);o.set(new Uint8Array(c),t),t+=a.length}return new DataView(o.buffer)}function Tt(e,n){try{const{doc:i,raw:o}=Ms(n);e._raw=(e._raw||"")+o;const t=Yt(i);return K(e,qt(Kt(t,!0)))}catch{return e}}function Ms(e){const n=Us.get();if(!n)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),new Error;const i=new n,o=typeof e=="string"?e:X(e,0,e.byteLength),t=i.parseFromString(Ds(o),"application/xml");if(t.documentElement.nodeName==="parsererror")throw new Error(t.documentElement.textContent);return{doc:t,raw:o}}function Ds(e){return e.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")}function Yt(e){for(let n=0;n<e.childNodes.length;n++){if(e.childNodes[n].tagName==="x:xmpmeta")return Yt(e.childNodes[n]);if(e.childNodes[n].tagName==="rdf:RDF")return e.childNodes[n]}throw new Error}function Kt(e,n=!1){const i=vs(e);return Ls(i)?n?{}:ws(i[0]):Gs(i)}function vs(e){const n=[];for(let i=0;i<e.childNodes.length;i++)n.push(e.childNodes[i]);return n}function Ls(e){return e.length===1&&e[0].nodeName==="#text"}function ws(e){return e.nodeValue}function Gs(e){const n={};return e.forEach(i=>{if(ks(i)){const o=Bs(i);n[i.nodeName]!==void 0?(Array.isArray(n[i.nodeName])||(n[i.nodeName]=[n[i.nodeName]]),n[i.nodeName].push(o)):n[i.nodeName]=o}}),n}function ks(e){return e.nodeName&&e.nodeName!=="#text"}function Bs(e){return{attributes:Hs(e),value:Kt(e)}}function Hs(e){const n={};for(let i=0;i<e.attributes.length;i++)n[e.attributes[i].nodeName]=decodeURIComponent(escape(e.attributes[i].value));return n}function qt(e){const n={};if(typeof e=="string")return e;for(const i in e){let o=e[i];Array.isArray(o)||(o=[o]),o.forEach(t=>{K(n,Bn(t.attributes)),typeof t.value=="object"&&K(n,Jt(t.value))})}return n}function Bn(e){const n={};for(const i in e)js(i)&&(n[pn(i)]={value:e[i],attributes:{},description:Pe(e[i],i)});return n}function js(e){return e!=="rdf:parseType"&&!hn(e)}function hn(e){return e.split(":")[0]==="xmlns"}function pn(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function Pe(e,n=void 0){if(Array.isArray(e)){const i=Zs(e);return n&&typeof rn[n]=="function"?rn[n](e,i):i}if(typeof e=="object")return $s(e);try{return n&&typeof rn[n]=="function"?rn[n](e):decodeURIComponent(escape(e))}catch{return e}}function Zs(e){return e.map(n=>n.value!==void 0?Pe(n.value):Pe(n)).join(", ")}function $s(e){const n=[];for(const i in e)n.push(`${zs(i)}: ${Pe(e[i].value)}`);return n.join("; ")}function zs(e){return e==="CiAdrCity"?"CreatorCity":e==="CiAdrCtry"?"CreatorCountry":e==="CiAdrExtadr"?"CreatorAddress":e==="CiAdrPcode"?"CreatorPostalCode":e==="CiAdrRegion"?"CreatorRegion":e==="CiEmailWork"?"CreatorWorkEmail":e==="CiTelWork"?"CreatorWorkPhone":e==="CiUrlWork"?"CreatorWorkUrl":e}function Jt(e){const n={};for(const i in e)hn(i)||(n[pn(i)]=Xs(e[i],i));return n}function Xs(e,n){return Qt(e)?Vt(e,n):er(e)?nr(e,n):tr(e)?rr(e,n):Ks(e)?qs(e,n):or(e,n)}function Qt(e){return e.attributes["rdf:parseType"]==="Resource"&&e.value["rdf:value"]!==void 0||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]!==void 0}function Vt(e,n){const i=nn(e);e.value["rdf:Description"]!==void 0&&(e=e.value["rdf:Description"]),K(i,nn(e),Ws(e));const o=Ys(e);return{value:o,attributes:i,description:Pe(o,n)}}function nn(e){const n={};for(const i in e.attributes)i!=="rdf:parseType"&&i!=="rdf:resource"&&!hn(i)&&(n[pn(i)]=e.attributes[i]);return n}function Ws(e){const n={};for(const i in e.value)i!=="rdf:value"&&!hn(i)&&(n[pn(i)]=e.value[i].value);return n}function Ys(e){return sr(e.value["rdf:value"])||e.value["rdf:value"].value}function er(e){return e.attributes["rdf:parseType"]==="Resource"||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]===void 0}function nr(e,n){const i={value:{},attributes:{}};return e.value["rdf:Description"]!==void 0&&(K(i.value,Bn(e.value["rdf:Description"].attributes)),K(i.attributes,nn(e)),e=e.value["rdf:Description"]),K(i.value,Jt(e.value)),i.description=Pe(i.value,n),i}function tr(e){return Object.keys(e.value).length===0&&e.attributes["xml:lang"]===void 0&&e.attributes["rdf:resource"]===void 0}function rr(e,n){const i=Bn(e.attributes);return{value:i,attributes:{},description:Pe(i,n)}}function Ks(e){return ir(e.value)!==void 0}function ir(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function qs(e,n){let i=ir(e.value).value["rdf:li"];const o=nn(e),t=[];return i===void 0?i=[]:Array.isArray(i)||(i=[i]),i.forEach(r=>{t.push(Js(r))}),{value:t,attributes:o,description:Pe(t,n)}}function Js(e){return Qt(e)?Vt(e):er(e)?nr(e).value:tr(e)?rr(e).value:or(e)}function or(e,n){const i=sr(e)||qt(e.value);return{value:i,attributes:nn(e),description:Pe(i,n)}}function sr(e){return e.attributes&&e.attributes["rdf:resource"]}const It={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},At={4:{name:"Preferred CMM type",value:(e,n)=>X(e,n,4),description:e=>e!==null?bn(e):""},8:{name:"Profile Version",value:(e,n)=>e.getUint8(n).toString(10)+"."+(e.getUint8(n+1)>>4).toString(10)+"."+(e.getUint8(n+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,n)=>X(e,n,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,n)=>X(e,n,4)},20:{name:"Connection Space",value:(e,n)=>X(e,n,4)},24:{name:"ICC Profile Date",value:(e,n)=>Qs(e,n).toISOString()},36:{name:"ICC Signature",value:(e,n)=>Vs(e.buffer.slice(n,n+4))},40:{name:"Primary Platform",value:(e,n)=>X(e,n,4),description:e=>bn(e)},48:{name:"Device Manufacturer",value:(e,n)=>X(e,n,4),description:e=>bn(e)},52:{name:"Device Model Number",value:(e,n)=>X(e,n,4)},64:{name:"Rendering Intent",value:(e,n)=>e.getUint32(n),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,n)=>X(e,n,4)}};function Qs(e,n){const i=e.getUint16(n),o=e.getUint16(n+2)-1,t=e.getUint16(n+4),r=e.getUint16(n+6),a=e.getUint16(n+8),c=e.getUint16(n+10);return new Date(Date.UTC(i,o,t,r,a,c))}function Vs(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function bn(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}const Ft={read:ca},ea=84,na=128,ta="acsp",ra="desc",ia="mluc",oa="text",sa="sig ",aa=12;function ca(e,n){try{const i=n.reduce((a,c)=>a+c.length,0),o=new Uint8Array(i);let t=0;const r=ua(e);for(let a=1;a<=n.length;a++){const c=n.find(s=>s.chunkNumber===a);if(!c)throw new Error(`ICC chunk ${a} not found`);const g=r.slice(c.offset,c.offset+c.length),x=new Uint8Array(g);o.set(x,t),t+=x.length}return da(new DataView(o.buffer))}catch{return{}}}function ua(e){return Array.isArray(e)?new DataView(Uint8Array.from(e).buffer).buffer:e.buffer}function fa(e){return e.length<na+4}function la(e,n){return e.length<n+aa}function da(e){const n=e.buffer,i=e.getUint32();if(e.byteLength!==i)throw new Error("ICC profile length not matching");if(e.length<ea)throw new Error("ICC profile too short");const o={},t=Object.keys(At);for(let g=0;g<t.length;g++){const x=t[g],s=At[x],f=s.value(e,parseInt(x,10));let u=f;s.description&&(u=s.description(f)),o[s.name]={value:f,description:u}}if(on(n.slice(36,40))!==ta)throw new Error("ICC profile: missing signature");if(fa(n))return o;const a=e.getUint32(128);let c=132;for(let g=0;g<a;g++){if(la(n,c))return o;const x=X(e,c,4),s=e.getUint32(c+4),f=e.getUint32(c+8);if(s>n.length)return o;const u=X(e,s,4);if(u===ra){const l=e.getUint32(s+8);if(l>f)return o;const E=on(n.slice(s+12,s+l+11));Ve(o,x,E)}else if(u===ia){const l=e.getUint32(s+8),E=e.getUint32(s+12);let _=s+16;const I=[];for(let T=0;T<l;T++){const v=X(e,_+0,2),O=X(e,_+2,2),N=e.getUint32(_+4),R=e.getUint32(_+8),S=qr(e,s+R,N);I.push({languageCode:v,countryCode:O,text:S}),_+=E}if(l===1)Ve(o,x,I[0].text);else{const T={};for(let v=0;v<I.length;v++)T[`${I[v].languageCode}-${I[v].countryCode}`]=I[v].text;Ve(o,x,T)}}else if(u===oa){const l=on(n.slice(s+8,s+f-7));Ve(o,x,l)}else if(u===sa){const l=on(n.slice(s+8,s+12));Ve(o,x,l)}c=c+12}return o}function on(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function Ve(e,n,i){It[n]?e[It[n].name]={value:i,description:i}:e[n]={value:i,description:i}}const ga={read:ha};function ha(e,n){return{"Image Width":pa(e,n),"Image Height":ma(e,n),"Bit Depth":xa(e,n),"Color Type":Ea(e,n),Compression:Sa(e,n),Filter:Ta(e,n),Interlace:Ia(e,n)}}function pa(e,n){if(n+0+4>e.byteLength)return;const t=H.getLongAt(e,n);return{value:t,description:`${t}px`}}function ma(e,n){if(n+4+4>e.byteLength)return;const t=H.getLongAt(e,n+4);return{value:t,description:`${t}px`}}function xa(e,n){if(n+8+1>e.byteLength)return;const t=H.getByteAt(e,n+8);return{value:t,description:`${t}`}}function Ea(e,n){const t={0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"};if(n+9+1>e.byteLength)return;const r=H.getByteAt(e,n+9);return{value:r,description:t[r]||"Unknown"}}function Sa(e,n){if(n+10+1>e.byteLength)return;const t=H.getByteAt(e,n+10);return{value:t,description:t===0?"Deflate/Inflate":"Unknown"}}function Ta(e,n){if(n+11+1>e.byteLength)return;const t=H.getByteAt(e,n+11);return{value:t,description:t===0?"Adaptive":"Unknown"}}function Ia(e,n){const t={0:"Noninterlaced",1:"Adam7 Interlace"};if(n+12+1>e.byteLength)return;const r=H.getByteAt(e,n+12);return{value:r,description:t[r]||"Unknown"}}const Aa={read:_a},Ln="STATE_KEYWORD",wn="STATE_COMPRESSION",Gn="STATE_LANG",ar="STATE_TRANSLATED_KEYWORD",Fa="STATE_TEXT",ba=2;function _a(e,n){return n.reduce((i,{offset:o,length:t,type:r})=>{const{name:a,value:c,description:g}=ya(e,o,t,r);return a&&(i[a]={value:c,description:g}),i},{})}function ya(e,n,i,o){const t=[],r=[],a=[];let c=Ln;for(let x=0;x<i&&n+x<e.byteLength;x++){if(c===wn){if(e.getUint8(n+x)!==0)return{};x+=ba,c=bt(o,c)}const s=e.getUint8(n+x);s===0?c=bt(o,c):c===Ln?t.push(s):c===Gn?r.push(s):c===ar||a.push(s)}const g=We(a);return{name:Ca(o,r,t),value:g,description:o===wt?$t.decode("UTF-8",a):g}}function bt(e,n){return n===Ln&&e===wt?wn:n===wn?Gn:n===Gn?ar:Fa}function Ca(e,n,i){const o=We(i);if(e===wi||n.length===0)return o;const t=We(n);return`${o} (${t})`}const Pa={read:Ua};function Ua(e,n){const i={};for(let o=0;o<n.length;o++){const t=H.getLongAt(e,n[o]+en),r=X(e,n[o]+je,_e);r===Gt?(i["Pixels Per Unit X"]=Na(e,n[o],t),i["Pixels Per Unit Y"]=Ra(e,n[o],t),i["Pixel Units"]=Oa(e,n[o],t)):r===kt&&(i["Modify Date"]=Ma(e,n[o],t))}return i}function Na(e,n,i){if(!mn(e,n,i,0,4))return;const r=H.getLongAt(e,n+le+0);return{value:r,description:""+r}}function Ra(e,n,i){if(!mn(e,n,i,4,4))return;const r=H.getLongAt(e,n+le+4);return{value:r,description:""+r}}function Oa(e,n,i){if(!mn(e,n,i,8,1))return;const r=H.getByteAt(e,n+le+8);return{value:r,description:r===1?"meters":"Unknown"}}function Ma(e,n,i){if(!mn(e,n,i,0,7))return;const t=H.getShortAt(e,n+le),r=H.getByteAt(e,n+le+2),a=H.getByteAt(e,n+le+3),c=H.getByteAt(e,n+le+4),g=H.getByteAt(e,n+le+5),x=H.getByteAt(e,n+le+6);return{value:[t,r,a,c,g,x],description:`${ze(t,4)}-${ze(r,2)}-${ze(a,2)} ${ze(c,2)}:${ze(g,2)}:${ze(x,2)}`}}function mn(e,n,i,o,t){return o+t<=i&&n+le+o+t<=e.byteLength}function ze(e,n){return`${"0".repeat(n-(""+e).length)}${e}`}const Da=[6,7,99],va={get:La};function La(e,n,i){if(wa(n)){n.type="image/jpeg";const o=i+n.JPEGInterchangeFormat.value;n.image=e.buffer.slice(o,o+n.JPEGInterchangeFormatLength.value),Nt(n,"base64",function(){return Rt(this.image)})}return n}function wa(e){return e&&(e.Compression===void 0||Da.includes(e.Compression.value))&&e.JPEGInterchangeFormat&&e.JPEGInterchangeFormat.value&&e.JPEGInterchangeFormatLength&&e.JPEGInterchangeFormatLength.value}function cr(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=new Error().stack}cr.prototype=new Error;const Ga={MetadataMissingError:cr};function ka(e,n){return Ba(e)?Ha(e,n).then(i=>_n(i,n)):Ya(e)?Ka(e).then(i=>_n(i,n)):_n(e,n)}function Ba(e){return typeof e=="string"}function Ha(e,n){return/^https?:\/\//.test(e)?typeof fetch<"u"?ja(e,n):Za(e,n):za(e)?Promise.resolve(Jr(e)):Xa(e,n)}function ja(e,{length:n}={}){const i={method:"GET"};return Number.isInteger(n)&&n>=0&&(i.headers={range:`bytes=0-${n-1}`}),fetch(e,i).then(o=>o.arrayBuffer())}function Za(e,{length:n}={}){return new Promise((i,o)=>{const t={};Number.isInteger(n)&&n>=0&&(t.headers={range:`bytes=0-${n-1}`}),$a(e)(e,t,a=>{if(a.statusCode>=200&&a.statusCode<=299){const c=[];a.on("data",g=>c.push(Buffer.from(g))),a.on("error",g=>o(g)),a.on("end",()=>i(Buffer.concat(c)))}else o(`Could not fetch file: ${a.statusCode} ${a.statusMessage}`),a.resume()}).on("error",a=>o(a))})}function $a(e){return/^https:\/\//.test(e)?__non_webpack_require__("https").get:__non_webpack_require__("http").get}function za(e){return/^data:[^;,]*(;base64)?,/.test(e)}function Xa(e,{length:n}={}){return new Promise((i,o)=>{const t=Wa();t.open(e,(r,a)=>{r?o(r):t.stat(e,(c,g)=>{if(c)o(c);else{const x=Math.min(g.size,n!==void 0?n:g.size),s=Buffer.alloc(x),f={buffer:s,length:x};t.read(a,f,u=>{u?o(u):t.close(a,l=>{l&&console.warn(`Could not close file ${e}:`,l),i(s)})})}})})})}function Wa(){try{return __non_webpack_require__("fs")}catch{return}}function Ya(e){return typeof window<"u"&&typeof File<"u"&&e instanceof File}function Ka(e){return new Promise((n,i)=>{const o=new FileReader;o.onload=t=>n(t.target.result),o.onerror=()=>i(o.error),o.readAsArrayBuffer(e)})}function _n(e,n){return qa(e)&&(e=new Uint8Array(e).buffer),Qa(Ja(e),n)}function qa(e){try{return Buffer.isBuffer(e)}catch{return!1}}function Ja(e){try{return new DataView(e)}catch{return new Qr(e)}}function Qa(e,{expanded:n=!1,includeUnknown:i=!1}={expanded:!1,includeUnknown:!1}){let o=!1,t={};const{fileDataOffset:r,jfifDataOffset:a,tiffHeaderOffset:c,iptcDataOffset:g,xmpChunks:x,iccChunks:s,mpfDataOffset:f,pngHeaderOffset:u,pngTextChunks:l,pngChunkOffsets:E}=io.parseAppMarkers(e);if(Va(r)){o=!0;const I=Go.read(e,r);n?t.file=I:t=K({},t,I)}if(ec(a)){o=!0;const I=Yo.read(e,a);n?t.jfif=I:t=K({},t,I)}if(nc(c)){o=!0;const I=lt.read(e,c,i);if(I.Thumbnail&&(t.Thumbnail=I.Thumbnail,delete I.Thumbnail),n?(t.exif=I,tc(t)):t=K({},t,I),I["IPTC-NAA"]&&!_t(g)){const T=pt.read(I["IPTC-NAA"].value,0,i);n?t.iptc=T:t=K({},t,T)}if(I.ApplicationNotes&&!yt(x)){const T=Et.read(We(I.ApplicationNotes.value));n?t.xmp=T:(delete T._raw,t=K({},t,T))}if(I.ICC_Profile&&!Ct(s)){const T=Ft.read(I.ICC_Profile.value,[{offset:0,length:I.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);n?t.icc=T:t=K({},t,T)}}if(_t(g)){o=!0;const I=pt.read(e,g,i);n?t.iptc=I:t=K({},t,I)}if(yt(x)){o=!0;const I=Et.read(e,x);n?t.xmp=I:(delete I._raw,t=K({},t,I))}if(Ct(s)){o=!0;const I=Ft.read(e,s);n?t.icc=I:t=K({},t,I)}if(rc(f)){o=!0;const I=lt.readMpf(e,f,i);n?t.mpf=I:t=K({},t,I)}if(ic(u)){o=!0;const I=ga.read(e,u);n?(t.png=t.png?K({},t.png,I):I,t.pngFile=I):t=K({},t,I)}if(oc(l)){o=!0;const I=Aa.read(e,l);n?(t.png=t.png?K({},t.png,I):I,t.pngText=I):t=K({},t,I)}if(sc(E)){o=!0;const I=Pa.read(e,E);n?t.png=t.png?K({},t.png,I):I:t=K({},t,I)}const _=va.get(e,t.Thumbnail,c);if(_?(o=!0,t.Thumbnail=_):delete t.Thumbnail,!o)throw new Ga.MetadataMissingError;return t}function Va(e){return e!==void 0}function ec(e){return e!==void 0}function nc(e){return e!==void 0}function tc(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=an(e.exif.GPSLatitude.value),e.exif.GPSLatitudeRef.value.join("")==="S"&&(e.gps.Latitude=-e.gps.Latitude)}catch{}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=an(e.exif.GPSLongitude.value),e.exif.GPSLongitudeRef.value.join("")==="W"&&(e.gps.Longitude=-e.gps.Longitude)}catch{}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],e.exif.GPSAltitudeRef.value===1&&(e.gps.Altitude=-e.gps.Altitude)}catch{}}}function _t(e){return e!==void 0}function yt(e){return Array.isArray(e)&&e.length>0}function Ct(e){return Array.isArray(e)&&e.length>0}function rc(e){return e!==void 0}function ic(e){return e!==void 0}function oc(e){return e!==void 0}function sc(e){return e!==void 0}const ur=async e=>{const n=await ka(e),i=n.DateTimeOriginal?.description||n.DateTimeDigitized?.description||n.DateTime?.description;return typeof i!="string"?null:Kr.parse(i)},Pt=({file:e,showDate:n})=>{const[i,o]=Me.useState(null),[t,r]=Me.useState(null),[a,c]=Me.useState(null);return Me.useEffect(()=>{if(!FileReader){c("FileReader not supported");return}if(e)try{const g=new FileReader;g.onload=async()=>{const x=g.result;if(typeof x!="string")throw new Error("Invalid file");o(x);const s=await ur(x);c(null),r(s)},g.readAsDataURL(e)}catch(g){g instanceof Error&&c(g.message)}else o(null),r(null),c(null)},[e]),i?k.jsxs("div",{children:[k.jsx("img",{style:{maxHeight:270,maxWidth:"100%",objectFit:"contain"},src:i,alt:"Screenshot preview"}),n&&k.jsxs("div",{style:{fontSize:"75%",padding:"0.4em"},children:["Date taken: ",t?t.toLocaleString():"Unknown"]}),a&&k.jsxs("div",{style:{fontSize:"75%",padding:"0.4em"},children:["Error: ",a]})]}):null};function ac(e,n){return n.forEach((function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach((function(o){if(o!=="default"&&!(o in e)){var t=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(e,o,t.get?t:{enumerable:!0,get:function(){return i[o]}})}}))})),Object.freeze(e)}function fr(e,n){return new Promise((function(i,o){let t;return cc(e).then((function(r){try{return t=r,i(new Blob([n.slice(0,2),t,n.slice(2)],{type:"image/jpeg"}))}catch(a){return o(a)}}),o)}))}const cc=e=>new Promise(((n,i)=>{const o=new FileReader;o.addEventListener("load",(({target:{result:t}})=>{const r=new DataView(t);let a=0;if(r.getUint16(a)!==65496)return i("not a valid JPEG");for(a+=2;;){const c=r.getUint16(a);if(c===65498)break;const g=r.getUint16(a+2);if(c===65505&&r.getUint32(a+4)===1165519206){const x=a+10;let s;switch(r.getUint16(x)){case 18761:s=!0;break;case 19789:s=!1;break;default:return i("TIFF header contains invalid endian")}if(r.getUint16(x+2,s)!==42)return i("TIFF header contains invalid version");const f=r.getUint32(x+4,s),u=x+f+2+12*r.getUint16(x+f,s);for(let l=x+f+2;l<u;l+=12)if(r.getUint16(l,s)==274){if(r.getUint16(l+2,s)!==3)return i("Orientation data type is invalid");if(r.getUint32(l+4,s)!==1)return i("Orientation data count is invalid");r.setUint16(l+8,1,s);break}return n(t.slice(a,a+2+g))}a+=2+g}return n(new Blob)})),o.readAsArrayBuffer(e)}));var fn={},uc={get exports(){return fn},set exports(e){fn=e}};(function(e){var n,i,o={};uc.exports=o,o.parse=function(t,r){for(var a=o.bin.readUshort,c=o.bin.readUint,g=0,x={},s=new Uint8Array(t),f=s.length-4;c(s,f)!=101010256;)f--;g=f,g+=4;var u=a(s,g+=4);a(s,g+=2);var l=c(s,g+=2),E=c(s,g+=4);g+=4,g=E;for(var _=0;_<u;_++){c(s,g),g+=4,g+=4,g+=4,c(s,g+=4),l=c(s,g+=4);var I=c(s,g+=4),T=a(s,g+=4),v=a(s,g+2),O=a(s,g+4);g+=6;var N=c(s,g+=8);g+=4,g+=T+v+O,o._readLocal(s,N,x,l,I,r)}return x},o._readLocal=function(t,r,a,c,g,x){var s=o.bin.readUshort,f=o.bin.readUint;f(t,r),s(t,r+=4),s(t,r+=2);var u=s(t,r+=2);f(t,r+=2),f(t,r+=4),r+=4;var l=s(t,r+=8),E=s(t,r+=2);r+=2;var _=o.bin.readUTF8(t,r,l);if(r+=l,r+=E,x)a[_]={size:g,csize:c};else{var I=new Uint8Array(t.buffer,r);if(u==0)a[_]=new Uint8Array(I.buffer.slice(r,r+c));else{if(u!=8)throw"unknown compression method: "+u;var T=new Uint8Array(g);o.inflateRaw(I,T),a[_]=T}}},o.inflateRaw=function(t,r){return o.F.inflate(t,r)},o.inflate=function(t,r){return t[0],t[1],o.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),r)},o.deflate=function(t,r){r==null&&(r={level:6});var a=0,c=new Uint8Array(50+Math.floor(1.1*t.length));c[a]=120,c[a+1]=156,a+=2,a=o.F.deflateRaw(t,c,a,r.level);var g=o.adler(t,0,t.length);return c[a+0]=g>>>24&255,c[a+1]=g>>>16&255,c[a+2]=g>>>8&255,c[a+3]=g>>>0&255,new Uint8Array(c.buffer,0,a+4)},o.deflateRaw=function(t,r){r==null&&(r={level:6});var a=new Uint8Array(50+Math.floor(1.1*t.length)),c=o.F.deflateRaw(t,a,c,r.level);return new Uint8Array(a.buffer,0,c)},o.encode=function(t,r){r==null&&(r=!1);var a=0,c=o.bin.writeUint,g=o.bin.writeUshort,x={};for(var s in t){var f=!o._noNeed(s)&&!r,u=t[s],l=o.crc.crc(u,0,u.length);x[s]={cpr:f,usize:u.length,crc:l,file:f?o.deflateRaw(u):u}}for(var s in x)a+=x[s].file.length+30+46+2*o.bin.sizeUTF8(s);a+=22;var E=new Uint8Array(a),_=0,I=[];for(var s in x){var T=x[s];I.push(_),_=o._writeHeader(E,_,s,T,0)}var v=0,O=_;for(var s in x)T=x[s],I.push(_),_=o._writeHeader(E,_,s,T,1,I[v++]);var N=_-O;return c(E,_,101010256),_+=4,g(E,_+=4,v),g(E,_+=2,v),c(E,_+=2,N),c(E,_+=4,O),_+=4,_+=2,E.buffer},o._noNeed=function(t){var r=t.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(r)!=-1},o._writeHeader=function(t,r,a,c,g,x){var s=o.bin.writeUint,f=o.bin.writeUshort,u=c.file;return s(t,r,g==0?67324752:33639248),r+=4,g==1&&(r+=2),f(t,r,20),f(t,r+=2,0),f(t,r+=2,c.cpr?8:0),s(t,r+=2,0),s(t,r+=4,c.crc),s(t,r+=4,u.length),s(t,r+=4,c.usize),f(t,r+=4,o.bin.sizeUTF8(a)),f(t,r+=2,0),r+=2,g==1&&(r+=2,r+=2,s(t,r+=6,x),r+=4),r+=o.bin.writeUTF8(t,r,a),g==0&&(t.set(u,r),r+=u.length),r},o.crc={table:(function(){for(var t=new Uint32Array(256),r=0;r<256;r++){for(var a=r,c=0;c<8;c++)1&a?a=3988292384^a>>>1:a>>>=1;t[r]=a}return t})(),update:function(t,r,a,c){for(var g=0;g<c;g++)t=o.crc.table[255&(t^r[a+g])]^t>>>8;return t},crc:function(t,r,a){return 4294967295^o.crc.update(4294967295,t,r,a)}},o.adler=function(t,r,a){for(var c=1,g=0,x=r,s=r+a;x<s;){for(var f=Math.min(x+5552,s);x<f;)g+=c+=t[x++];c%=65521,g%=65521}return g<<16|c},o.bin={readUshort:function(t,r){return t[r]|t[r+1]<<8},writeUshort:function(t,r,a){t[r]=255&a,t[r+1]=a>>8&255},readUint:function(t,r){return 16777216*t[r+3]+(t[r+2]<<16|t[r+1]<<8|t[r])},writeUint:function(t,r,a){t[r]=255&a,t[r+1]=a>>8&255,t[r+2]=a>>16&255,t[r+3]=a>>24&255},readASCII:function(t,r,a){for(var c="",g=0;g<a;g++)c+=String.fromCharCode(t[r+g]);return c},writeASCII:function(t,r,a){for(var c=0;c<a.length;c++)t[r+c]=a.charCodeAt(c)},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,r,a){for(var c,g="",x=0;x<a;x++)g+="%"+o.bin.pad(t[r+x].toString(16));try{c=decodeURIComponent(g)}catch{return o.bin.readASCII(t,r,a)}return c},writeUTF8:function(t,r,a){for(var c=a.length,g=0,x=0;x<c;x++){var s=a.charCodeAt(x);if((4294967168&s)==0)t[r+g]=s,g++;else if((4294965248&s)==0)t[r+g]=192|s>>6,t[r+g+1]=128|s>>0&63,g+=2;else if((4294901760&s)==0)t[r+g]=224|s>>12,t[r+g+1]=128|s>>6&63,t[r+g+2]=128|s>>0&63,g+=3;else{if((4292870144&s)!=0)throw"e";t[r+g]=240|s>>18,t[r+g+1]=128|s>>12&63,t[r+g+2]=128|s>>6&63,t[r+g+3]=128|s>>0&63,g+=4}}return g},sizeUTF8:function(t){for(var r=t.length,a=0,c=0;c<r;c++){var g=t.charCodeAt(c);if((4294967168&g)==0)a++;else if((4294965248&g)==0)a+=2;else if((4294901760&g)==0)a+=3;else{if((4292870144&g)!=0)throw"e";a+=4}}return a}},o.F={},o.F.deflateRaw=function(t,r,a,c){var g=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][c],x=o.F.U,s=o.F._goodIndex;o.F._hash;var f=o.F._putsE,u=0,l=a<<3,E=0,_=t.length;if(c==0){for(;u<_;)f(r,l,u+(y=Math.min(65535,_-u))==_?1:0),l=o.F._copyExact(t,u,y,r,l+8),u+=y;return l>>>3}var I=x.lits,T=x.strt,v=x.prev,O=0,N=0,R=0,S=0,M=0,p=0;for(_>2&&(T[p=o.F._hash(t,0)]=0),u=0;u<_;u++){if(M=p,u+1<_-2){p=o.F._hash(t,u+1);var h=u+1&32767;v[h]=T[p],T[p]=h}if(E<=u){(O>14e3||N>26697)&&_-u>100&&(E<u&&(I[O]=u-E,O+=2,E=u),l=o.F._writeBlock(u==_-1||E==_?1:0,I,O,S,t,R,u-R,r,l),O=N=S=0,R=u);var F=0;u<_-2&&(F=o.F._bestMatch(t,u,v,M,Math.min(g[2],_-u),g[3]));var y=F>>>16,b=65535&F;if(F!=0){b=65535&F;var C=s(y=F>>>16,x.of0);x.lhst[257+C]++;var A=s(b,x.df0);x.dhst[A]++,S+=x.exb[C]+x.dxb[A],I[O]=y<<23|u-E,I[O+1]=b<<16|C<<8|A,O+=2,E=u+y}else x.lhst[t[u]]++;N++}}for(R==u&&t.length!=0||(E<u&&(I[O]=u-E,O+=2,E=u),l=o.F._writeBlock(1,I,O,S,t,R,u-R,r,l),O=0,N=0,O=N=S=0,R=u);(7&l)!=0;)l++;return l>>>3},o.F._bestMatch=function(t,r,a,c,g,x){var s=32767&r,f=a[s],u=s-f+32768&32767;if(f==s||c!=o.F._hash(t,r-u))return 0;for(var l=0,E=0,_=Math.min(32767,r);u<=_&&--x!=0&&f!=s;){if(l==0||t[r+l]==t[r+l-u]){var I=o.F._howLong(t,r,u);if(I>l){if(E=u,(l=I)>=g)break;u+2<I&&(I=u+2);for(var T=0,v=0;v<I-2;v++){var O=r-u+v+32768&32767,N=O-a[O]+32768&32767;N>T&&(T=N,f=O)}}}u+=(s=f)-(f=a[s])+32768&32767}return l<<16|E},o.F._howLong=function(t,r,a){if(t[r]!=t[r-a]||t[r+1]!=t[r+1-a]||t[r+2]!=t[r+2-a])return 0;var c=r,g=Math.min(t.length,r+258);for(r+=3;r<g&&t[r]==t[r-a];)r++;return r-c},o.F._hash=function(t,r){return(t[r]<<8|t[r+1])+(t[r+2]<<4)&65535},o.saved=0,o.F._writeBlock=function(t,r,a,c,g,x,s,f,u){var l,E,_,I,T,v,O,N,R,S=o.F.U,M=o.F._putsF,p=o.F._putsE;S.lhst[256]++,E=(l=o.F.getTrees())[0],_=l[1],I=l[2],T=l[3],v=l[4],O=l[5],N=l[6],R=l[7];var h=32+((u+3&7)==0?0:8-(u+3&7))+(s<<3),F=c+o.F.contSize(S.fltree,S.lhst)+o.F.contSize(S.fdtree,S.dhst),y=c+o.F.contSize(S.ltree,S.lhst)+o.F.contSize(S.dtree,S.dhst);y+=14+3*O+o.F.contSize(S.itree,S.ihst)+(2*S.ihst[16]+3*S.ihst[17]+7*S.ihst[18]);for(var b=0;b<286;b++)S.lhst[b]=0;for(b=0;b<30;b++)S.dhst[b]=0;for(b=0;b<19;b++)S.ihst[b]=0;var C=h<F&&h<y?0:F<y?1:2;if(M(f,u,t),M(f,u+1,C),u+=3,C==0){for(;(7&u)!=0;)u++;u=o.F._copyExact(g,x,s,f,u)}else{var A,U;if(C==1&&(A=S.fltree,U=S.fdtree),C==2){o.F.makeCodes(S.ltree,E),o.F.revCodes(S.ltree,E),o.F.makeCodes(S.dtree,_),o.F.revCodes(S.dtree,_),o.F.makeCodes(S.itree,I),o.F.revCodes(S.itree,I),A=S.ltree,U=S.dtree,p(f,u,T-257),p(f,u+=5,v-1),p(f,u+=5,O-4),u+=4;for(var m=0;m<O;m++)p(f,u+3*m,S.itree[1+(S.ordr[m]<<1)]);u+=3*O,u=o.F._codeTiny(N,S.itree,f,u),u=o.F._codeTiny(R,S.itree,f,u)}for(var d=x,L=0;L<a;L+=2){for(var P=r[L],w=P>>>23,Z=d+(8388607&P);d<Z;)u=o.F._writeLit(g[d++],A,f,u);if(w!=0){var B=r[L+1],j=B>>16,G=B>>8&255,D=255&B;p(f,u=o.F._writeLit(257+G,A,f,u),w-S.of0[G]),u+=S.exb[G],M(f,u=o.F._writeLit(D,U,f,u),j-S.df0[D]),u+=S.dxb[D],d+=w}}u=o.F._writeLit(256,A,f,u)}return u},o.F._copyExact=function(t,r,a,c,g){var x=g>>>3;return c[x]=a,c[x+1]=a>>>8,c[x+2]=255-c[x],c[x+3]=255-c[x+1],x+=4,c.set(new Uint8Array(t.buffer,r,a),x),g+(a+4<<3)},o.F.getTrees=function(){for(var t=o.F.U,r=o.F._hufTree(t.lhst,t.ltree,15),a=o.F._hufTree(t.dhst,t.dtree,15),c=[],g=o.F._lenCodes(t.ltree,c),x=[],s=o.F._lenCodes(t.dtree,x),f=0;f<c.length;f+=2)t.ihst[c[f]]++;for(f=0;f<x.length;f+=2)t.ihst[x[f]]++;for(var u=o.F._hufTree(t.ihst,t.itree,7),l=19;l>4&&t.itree[1+(t.ordr[l-1]<<1)]==0;)l--;return[r,a,u,g,s,l,c,x]},o.F.getSecond=function(t){for(var r=[],a=0;a<t.length;a+=2)r.push(t[a+1]);return r},o.F.nonZero=function(t){for(var r="",a=0;a<t.length;a+=2)t[a+1]!=0&&(r+=(a>>1)+",");return r},o.F.contSize=function(t,r){for(var a=0,c=0;c<r.length;c++)a+=r[c]*t[1+(c<<1)];return a},o.F._codeTiny=function(t,r,a,c){for(var g=0;g<t.length;g+=2){var x=t[g],s=t[g+1];c=o.F._writeLit(x,r,a,c);var f=x==16?2:x==17?3:7;x>15&&(o.F._putsE(a,c,s,f),c+=f)}return c},o.F._lenCodes=function(t,r){for(var a=t.length;a!=2&&t[a-1]==0;)a-=2;for(var c=0;c<a;c+=2){var g=t[c+1],x=c+3<a?t[c+3]:-1,s=c+5<a?t[c+5]:-1,f=c==0?-1:t[c-1];if(g==0&&x==g&&s==g){for(var u=c+5;u+2<a&&t[u+2]==g;)u+=2;(l=Math.min(u+1-c>>>1,138))<11?r.push(17,l-3):r.push(18,l-11),c+=2*l-2}else if(g==f&&x==g&&s==g){for(u=c+5;u+2<a&&t[u+2]==g;)u+=2;var l=Math.min(u+1-c>>>1,6);r.push(16,l-3),c+=2*l-2}else r.push(g,0)}return a>>>1},o.F._hufTree=function(t,r,a){var c=[],g=t.length,x=r.length,s=0;for(s=0;s<x;s+=2)r[s]=0,r[s+1]=0;for(s=0;s<g;s++)t[s]!=0&&c.push({lit:s,f:t[s]});var f=c.length,u=c.slice(0);if(f==0)return 0;if(f==1){var l=c[0].lit;return u=l==0?1:0,r[1+(l<<1)]=1,r[1+(u<<1)]=1,1}c.sort((function(N,R){return N.f-R.f}));var E=c[0],_=c[1],I=0,T=1,v=2;for(c[0]={lit:-1,f:E.f+_.f,l:E,r:_,d:0};T!=f-1;)E=I!=T&&(v==f||c[I].f<c[v].f)?c[I++]:c[v++],_=I!=T&&(v==f||c[I].f<c[v].f)?c[I++]:c[v++],c[T++]={lit:-1,f:E.f+_.f,l:E,r:_};var O=o.F.setDepth(c[T-1],0);for(O>a&&(o.F.restrictDepth(u,a,O),O=a),s=0;s<f;s++)r[1+(u[s].lit<<1)]=u[s].d;return O},o.F.setDepth=function(t,r){return t.lit!=-1?(t.d=r,r):Math.max(o.F.setDepth(t.l,r+1),o.F.setDepth(t.r,r+1))},o.F.restrictDepth=function(t,r,a){var c=0,g=1<<a-r,x=0;for(t.sort((function(f,u){return u.d==f.d?f.f-u.f:u.d-f.d})),c=0;c<t.length&&t[c].d>r;c++){var s=t[c].d;t[c].d=r,x+=g-(1<<a-s)}for(x>>>=a-r;x>0;)(s=t[c].d)<r?(t[c].d++,x-=1<<r-s-1):c++;for(;c>=0;c--)t[c].d==r&&x<0&&(t[c].d--,x++);x!=0&&console.log("debt left")},o.F._goodIndex=function(t,r){var a=0;return r[16|a]<=t&&(a|=16),r[8|a]<=t&&(a|=8),r[4|a]<=t&&(a|=4),r[2|a]<=t&&(a|=2),r[1|a]<=t&&(a|=1),a},o.F._writeLit=function(t,r,a,c){return o.F._putsF(a,c,r[t<<1]),c+r[1+(t<<1)]},o.F.inflate=function(t,r){var a=Uint8Array;if(t[0]==3&&t[1]==0)return r||new a(0);var c=o.F,g=c._bitsF,x=c._bitsE,s=c._decodeTiny,f=c.makeCodes,u=c.codes2map,l=c._get17,E=c.U,_=r==null;_&&(r=new a(t.length>>>2<<3));for(var I,T,v=0,O=0,N=0,R=0,S=0,M=0,p=0,h=0,F=0;v==0;)if(v=g(t,F,1),O=g(t,F+1,2),F+=3,O!=0){if(_&&(r=o.F._check(r,h+(1<<17))),O==1&&(I=E.flmap,T=E.fdmap,M=511,p=31),O==2){N=x(t,F,5)+257,R=x(t,F+5,5)+1,S=x(t,F+10,4)+4,F+=14;for(var y=0;y<38;y+=2)E.itree[y]=0,E.itree[y+1]=0;var b=1;for(y=0;y<S;y++){var C=x(t,F+3*y,3);E.itree[1+(E.ordr[y]<<1)]=C,C>b&&(b=C)}F+=3*S,f(E.itree,b),u(E.itree,b,E.imap),I=E.lmap,T=E.dmap,F=s(E.imap,(1<<b)-1,N+R,t,F,E.ttree);var A=c._copyOut(E.ttree,0,N,E.ltree);M=(1<<A)-1;var U=c._copyOut(E.ttree,N,R,E.dtree);p=(1<<U)-1,f(E.ltree,A),u(E.ltree,A,I),f(E.dtree,U),u(E.dtree,U,T)}for(;;){var m=I[l(t,F)&M];F+=15&m;var d=m>>>4;if(!(d>>>8))r[h++]=d;else{if(d==256)break;var L=h+d-254;if(d>264){var P=E.ldef[d-257];L=h+(P>>>3)+x(t,F,7&P),F+=7&P}var w=T[l(t,F)&p];F+=15&w;var Z=w>>>4,B=E.ddef[Z],j=(B>>>4)+g(t,F,15&B);for(F+=15&B,_&&(r=o.F._check(r,h+(1<<17)));h<L;)r[h]=r[h++-j],r[h]=r[h++-j],r[h]=r[h++-j],r[h]=r[h++-j];h=L}}}else{(7&F)!=0&&(F+=8-(7&F));var G=4+(F>>>3),D=t[G-4]|t[G-3]<<8;_&&(r=o.F._check(r,h+D)),r.set(new a(t.buffer,t.byteOffset+G,D),h),F=G+D<<3,h+=D}return r.length==h?r:r.slice(0,h)},o.F._check=function(t,r){var a=t.length;if(r<=a)return t;var c=new Uint8Array(Math.max(a<<1,r));return c.set(t,0),c},o.F._decodeTiny=function(t,r,a,c,g,x){for(var s=o.F._bitsE,f=o.F._get17,u=0;u<a;){var l=t[f(c,g)&r];g+=15&l;var E=l>>>4;if(E<=15)x[u]=E,u++;else{var _=0,I=0;E==16?(I=3+s(c,g,2),g+=2,_=x[u-1]):E==17?(I=3+s(c,g,3),g+=3):E==18&&(I=11+s(c,g,7),g+=7);for(var T=u+I;u<T;)x[u]=_,u++}}return g},o.F._copyOut=function(t,r,a,c){for(var g=0,x=0,s=c.length>>>1;x<a;){var f=t[x+r];c[x<<1]=0,c[1+(x<<1)]=f,f>g&&(g=f),x++}for(;x<s;)c[x<<1]=0,c[1+(x<<1)]=0,x++;return g},o.F.makeCodes=function(t,r){for(var a,c,g,x,s=o.F.U,f=t.length,u=s.bl_count,l=0;l<=r;l++)u[l]=0;for(l=1;l<f;l+=2)u[t[l]]++;var E=s.next_code;for(a=0,u[0]=0,c=1;c<=r;c++)a=a+u[c-1]<<1,E[c]=a;for(g=0;g<f;g+=2)(x=t[g+1])!=0&&(t[g]=E[x],E[x]++)},o.F.codes2map=function(t,r,a){for(var c=t.length,g=o.F.U.rev15,x=0;x<c;x+=2)if(t[x+1]!=0)for(var s=x>>1,f=t[x+1],u=s<<4|f,l=r-f,E=t[x]<<l,_=E+(1<<l);E!=_;)a[g[E]>>>15-r]=u,E++},o.F.revCodes=function(t,r){for(var a=o.F.U.rev15,c=15-r,g=0;g<t.length;g+=2){var x=t[g]<<r-t[g+1];t[g]=a[x]>>>c}},o.F._putsE=function(t,r,a){a<<=7&r;var c=r>>>3;t[c]|=a,t[c+1]|=a>>>8},o.F._putsF=function(t,r,a){a<<=7&r;var c=r>>>3;t[c]|=a,t[c+1]|=a>>>8,t[c+2]|=a>>>16},o.F._bitsE=function(t,r,a){return(t[r>>>3]|t[1+(r>>>3)]<<8)>>>(7&r)&(1<<a)-1},o.F._bitsF=function(t,r,a){return(t[r>>>3]|t[1+(r>>>3)]<<8|t[2+(r>>>3)]<<16)>>>(7&r)&(1<<a)-1},o.F._get17=function(t,r){return(t[r>>>3]|t[1+(r>>>3)]<<8|t[2+(r>>>3)]<<16)>>>(7&r)},o.F._get25=function(t,r){return(t[r>>>3]|t[1+(r>>>3)]<<8|t[2+(r>>>3)]<<16|t[3+(r>>>3)]<<24)>>>(7&r)},o.F.U=(n=Uint16Array,i=Uint32Array,{next_code:new n(16),bl_count:new n(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new n(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new n(512),fltree:[],fdmap:new n(32),fdtree:[],lmap:new n(32768),ltree:[],ttree:[],dmap:new n(32768),dtree:[],imap:new n(512),itree:[],rev15:new n(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new n(65536),prev:new n(32768)}),(function(){for(var t=o.F.U,r=0;r<32768;r++){var a=r;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,t.rev15[r]=(a>>>16|a<<16)>>>17}function c(g,x,s){for(;x--!=0;)g.push(0,s)}for(r=0;r<32;r++)t.ldef[r]=t.of0[r]<<3|t.exb[r],t.ddef[r]=t.df0[r]<<4|t.dxb[r];c(t.fltree,144,8),c(t.fltree,112,9),c(t.fltree,24,7),c(t.fltree,8,8),o.F.makeCodes(t.fltree,9),o.F.codes2map(t.fltree,9,t.flmap),o.F.revCodes(t.fltree,9),c(t.fdtree,32,5),o.F.makeCodes(t.fdtree,5),o.F.codes2map(t.fdtree,5,t.fdmap),o.F.revCodes(t.fdtree,5),c(t.itree,19,0),c(t.ltree,286,0),c(t.dtree,30,0),c(t.ttree,320,0)})()})();var fc=ac({__proto__:null,default:fn},[fn]);const Ie=(function(){var e={nextZero(s,f){for(;s[f]!=0;)f++;return f},readUshort:(s,f)=>s[f]<<8|s[f+1],writeUshort(s,f,u){s[f]=u>>8&255,s[f+1]=255&u},readUint:(s,f)=>16777216*s[f]+(s[f+1]<<16|s[f+2]<<8|s[f+3]),writeUint(s,f,u){s[f]=u>>24&255,s[f+1]=u>>16&255,s[f+2]=u>>8&255,s[f+3]=255&u},readASCII(s,f,u){let l="";for(let E=0;E<u;E++)l+=String.fromCharCode(s[f+E]);return l},writeASCII(s,f,u){for(let l=0;l<u.length;l++)s[f+l]=u.charCodeAt(l)},readBytes(s,f,u){const l=[];for(let E=0;E<u;E++)l.push(s[f+E]);return l},pad:s=>s.length<2?`0${s}`:s,readUTF8(s,f,u){let l,E="";for(let _=0;_<u;_++)E+=`%${e.pad(s[f+_].toString(16))}`;try{l=decodeURIComponent(E)}catch{return e.readASCII(s,f,u)}return l}};function n(s,f,u,l){const E=f*u,_=r(l),I=Math.ceil(f*_/8),T=new Uint8Array(4*E),v=new Uint32Array(T.buffer),{ctype:O}=l,{depth:N}=l,R=e.readUshort;if(O==6){const P=E<<2;if(N==8)for(var S=0;S<P;S+=4)T[S]=s[S],T[S+1]=s[S+1],T[S+2]=s[S+2],T[S+3]=s[S+3];if(N==16)for(S=0;S<P;S++)T[S]=s[S<<1]}else if(O==2){const P=l.tabs.tRNS;if(P==null){if(N==8)for(S=0;S<E;S++){var M=3*S;v[S]=255<<24|s[M+2]<<16|s[M+1]<<8|s[M]}if(N==16)for(S=0;S<E;S++)M=6*S,v[S]=255<<24|s[M+4]<<16|s[M+2]<<8|s[M]}else{var p=P[0];const w=P[1],Z=P[2];if(N==8)for(S=0;S<E;S++){var h=S<<2;M=3*S,v[S]=255<<24|s[M+2]<<16|s[M+1]<<8|s[M],s[M]==p&&s[M+1]==w&&s[M+2]==Z&&(T[h+3]=0)}if(N==16)for(S=0;S<E;S++)h=S<<2,M=6*S,v[S]=255<<24|s[M+4]<<16|s[M+2]<<8|s[M],R(s,M)==p&&R(s,M+2)==w&&R(s,M+4)==Z&&(T[h+3]=0)}}else if(O==3){const P=l.tabs.PLTE,w=l.tabs.tRNS,Z=w?w.length:0;if(N==1)for(var F=0;F<u;F++){var y=F*I,b=F*f;for(S=0;S<f;S++){h=b+S<<2;var C=3*(A=s[y+(S>>3)]>>7-((7&S)<<0)&1);T[h]=P[C],T[h+1]=P[C+1],T[h+2]=P[C+2],T[h+3]=A<Z?w[A]:255}}if(N==2)for(F=0;F<u;F++)for(y=F*I,b=F*f,S=0;S<f;S++)h=b+S<<2,C=3*(A=s[y+(S>>2)]>>6-((3&S)<<1)&3),T[h]=P[C],T[h+1]=P[C+1],T[h+2]=P[C+2],T[h+3]=A<Z?w[A]:255;if(N==4)for(F=0;F<u;F++)for(y=F*I,b=F*f,S=0;S<f;S++)h=b+S<<2,C=3*(A=s[y+(S>>1)]>>4-((1&S)<<2)&15),T[h]=P[C],T[h+1]=P[C+1],T[h+2]=P[C+2],T[h+3]=A<Z?w[A]:255;if(N==8)for(S=0;S<E;S++){var A;h=S<<2,C=3*(A=s[S]),T[h]=P[C],T[h+1]=P[C+1],T[h+2]=P[C+2],T[h+3]=A<Z?w[A]:255}}else if(O==4){if(N==8)for(S=0;S<E;S++){h=S<<2;var U=s[m=S<<1];T[h]=U,T[h+1]=U,T[h+2]=U,T[h+3]=s[m+1]}if(N==16)for(S=0;S<E;S++){var m;h=S<<2,U=s[m=S<<2],T[h]=U,T[h+1]=U,T[h+2]=U,T[h+3]=s[m+2]}}else if(O==0)for(p=l.tabs.tRNS?l.tabs.tRNS:-1,F=0;F<u;F++){const P=F*I,w=F*f;if(N==1)for(var d=0;d<f;d++){var L=(U=255*(s[P+(d>>>3)]>>>7-(7&d)&1))==255*p?0:255;v[w+d]=L<<24|U<<16|U<<8|U}else if(N==2)for(d=0;d<f;d++)L=(U=85*(s[P+(d>>>2)]>>>6-((3&d)<<1)&3))==85*p?0:255,v[w+d]=L<<24|U<<16|U<<8|U;else if(N==4)for(d=0;d<f;d++)L=(U=17*(s[P+(d>>>1)]>>>4-((1&d)<<2)&15))==17*p?0:255,v[w+d]=L<<24|U<<16|U<<8|U;else if(N==8)for(d=0;d<f;d++)L=(U=s[P+d])==p?0:255,v[w+d]=L<<24|U<<16|U<<8|U;else if(N==16)for(d=0;d<f;d++)U=s[P+(d<<1)],L=R(s,P+(d<<1))==p?0:255,v[w+d]=L<<24|U<<16|U<<8|U}return T}function i(s,f,u,l){const E=r(s),_=Math.ceil(u*E/8),I=new Uint8Array((_+1+s.interlace)*l);return f=s.tabs.CgBI?t(f,I):o(f,I),s.interlace==0?f=a(f,s,0,u,l):s.interlace==1&&(f=(function(v,O){const N=O.width,R=O.height,S=r(O),M=S>>3,p=Math.ceil(N*S/8),h=new Uint8Array(R*p);let F=0;const y=[0,0,4,0,2,0,1],b=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],A=[8,8,4,4,2,2,1];let U=0;for(;U<7;){const d=C[U],L=A[U];let P=0,w=0,Z=y[U];for(;Z<R;)Z+=d,w++;let B=b[U];for(;B<N;)B+=L,P++;const j=Math.ceil(P*S/8);a(v,O,F,P,w);let G=0,D=y[U];for(;D<R;){let $=b[U],V=F+G*j<<3;for(;$<N;){var m;if(S==1&&(m=(m=v[V>>3])>>7-(7&V)&1,h[D*p+($>>3)]|=m<<7-((7&$)<<0)),S==2&&(m=(m=v[V>>3])>>6-(7&V)&3,h[D*p+($>>2)]|=m<<6-((3&$)<<1)),S==4&&(m=(m=v[V>>3])>>4-(7&V)&15,h[D*p+($>>1)]|=m<<4-((1&$)<<2)),S>=8){const Y=D*p+$*M;for(let W=0;W<M;W++)h[Y+W]=v[(V>>3)+W]}V+=S,$+=L}G++,D+=d}P*w!=0&&(F+=w*(1+j)),U+=1}return h})(f,s)),f}function o(s,f){return t(new Uint8Array(s.buffer,2,s.length-6),f)}var t=(function(){const s={H:{}};return s.H.N=function(f,u){const l=Uint8Array;let E,_,I=0,T=0,v=0,O=0,N=0,R=0,S=0,M=0,p=0;if(f[0]==3&&f[1]==0)return u||new l(0);const h=s.H,F=h.b,y=h.e,b=h.R,C=h.n,A=h.A,U=h.Z,m=h.m,d=u==null;for(d&&(u=new l(f.length>>>2<<5));I==0;)if(I=F(f,p,1),T=F(f,p+1,2),p+=3,T!=0){if(d&&(u=s.H.W(u,M+(1<<17))),T==1&&(E=m.J,_=m.h,R=511,S=31),T==2){v=y(f,p,5)+257,O=y(f,p+5,5)+1,N=y(f,p+10,4)+4,p+=14;let P=1;for(var L=0;L<38;L+=2)m.Q[L]=0,m.Q[L+1]=0;for(L=0;L<N;L++){const B=y(f,p+3*L,3);m.Q[1+(m.X[L]<<1)]=B,B>P&&(P=B)}p+=3*N,C(m.Q,P),A(m.Q,P,m.u),E=m.w,_=m.d,p=b(m.u,(1<<P)-1,v+O,f,p,m.v);const w=h.V(m.v,0,v,m.C);R=(1<<w)-1;const Z=h.V(m.v,v,O,m.D);S=(1<<Z)-1,C(m.C,w),A(m.C,w,E),C(m.D,Z),A(m.D,Z,_)}for(;;){const P=E[U(f,p)&R];p+=15&P;const w=P>>>4;if(!(w>>>8))u[M++]=w;else{if(w==256)break;{let Z=M+w-254;if(w>264){const $=m.q[w-257];Z=M+($>>>3)+y(f,p,7&$),p+=7&$}const B=_[U(f,p)&S];p+=15&B;const j=B>>>4,G=m.c[j],D=(G>>>4)+F(f,p,15&G);for(p+=15&G;M<Z;)u[M]=u[M++-D],u[M]=u[M++-D],u[M]=u[M++-D],u[M]=u[M++-D];M=Z}}}}else{(7&p)!=0&&(p+=8-(7&p));const P=4+(p>>>3),w=f[P-4]|f[P-3]<<8;d&&(u=s.H.W(u,M+w)),u.set(new l(f.buffer,f.byteOffset+P,w),M),p=P+w<<3,M+=w}return u.length==M?u:u.slice(0,M)},s.H.W=function(f,u){const l=f.length;if(u<=l)return f;const E=new Uint8Array(l<<1);return E.set(f,0),E},s.H.R=function(f,u,l,E,_,I){const T=s.H.e,v=s.H.Z;let O=0;for(;O<l;){const N=f[v(E,_)&u];_+=15&N;const R=N>>>4;if(R<=15)I[O]=R,O++;else{let S=0,M=0;R==16?(M=3+T(E,_,2),_+=2,S=I[O-1]):R==17?(M=3+T(E,_,3),_+=3):R==18&&(M=11+T(E,_,7),_+=7);const p=O+M;for(;O<p;)I[O]=S,O++}}return _},s.H.V=function(f,u,l,E){let _=0,I=0;const T=E.length>>>1;for(;I<l;){const v=f[I+u];E[I<<1]=0,E[1+(I<<1)]=v,v>_&&(_=v),I++}for(;I<T;)E[I<<1]=0,E[1+(I<<1)]=0,I++;return _},s.H.n=function(f,u){const l=s.H.m,E=f.length;let _,I,T,v;const O=l.j;for(var N=0;N<=u;N++)O[N]=0;for(N=1;N<E;N+=2)O[f[N]]++;const R=l.K;for(_=0,O[0]=0,I=1;I<=u;I++)_=_+O[I-1]<<1,R[I]=_;for(T=0;T<E;T+=2)v=f[T+1],v!=0&&(f[T]=R[v],R[v]++)},s.H.A=function(f,u,l){const E=f.length,_=s.H.m.r;for(let I=0;I<E;I+=2)if(f[I+1]!=0){const T=I>>1,v=f[I+1],O=T<<4|v,N=u-v;let R=f[I]<<N;const S=R+(1<<N);for(;R!=S;)l[_[R]>>>15-u]=O,R++}},s.H.l=function(f,u){const l=s.H.m.r,E=15-u;for(let _=0;_<f.length;_+=2){const I=f[_]<<u-f[_+1];f[_]=l[I]>>>E}},s.H.M=function(f,u,l){l<<=7&u;const E=u>>>3;f[E]|=l,f[E+1]|=l>>>8},s.H.I=function(f,u,l){l<<=7&u;const E=u>>>3;f[E]|=l,f[E+1]|=l>>>8,f[E+2]|=l>>>16},s.H.e=function(f,u,l){return(f[u>>>3]|f[1+(u>>>3)]<<8)>>>(7&u)&(1<<l)-1},s.H.b=function(f,u,l){return(f[u>>>3]|f[1+(u>>>3)]<<8|f[2+(u>>>3)]<<16)>>>(7&u)&(1<<l)-1},s.H.Z=function(f,u){return(f[u>>>3]|f[1+(u>>>3)]<<8|f[2+(u>>>3)]<<16)>>>(7&u)},s.H.i=function(f,u){return(f[u>>>3]|f[1+(u>>>3)]<<8|f[2+(u>>>3)]<<16|f[3+(u>>>3)]<<24)>>>(7&u)},s.H.m=(function(){const f=Uint16Array,u=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new u(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new u(286),Y:new u(30),a:new u(19),t:new u(15e3),k:new f(65536),g:new f(32768)}})(),(function(){const f=s.H.m;for(var u=0;u<32768;u++){let E=u;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,f.r[u]=(E>>>16|E<<16)>>>17}function l(E,_,I){for(;_--!=0;)E.push(0,I)}for(u=0;u<32;u++)f.q[u]=f.S[u]<<3|f.T[u],f.c[u]=f.p[u]<<4|f.z[u];l(f._,144,8),l(f._,112,9),l(f._,24,7),l(f._,8,8),s.H.n(f._,9),s.H.A(f._,9,f.J),s.H.l(f._,9),l(f.$,32,5),s.H.n(f.$,5),s.H.A(f.$,5,f.h),s.H.l(f.$,5),l(f.Q,19,0),l(f.C,286,0),l(f.D,30,0),l(f.v,320,0)})(),s.H.N})();function r(s){return[1,null,3,1,2,null,4][s.ctype]*s.depth}function a(s,f,u,l,E){let _=r(f);const I=Math.ceil(l*_/8);let T,v;_=Math.ceil(_/8);let O=s[u],N=0;if(O>1&&(s[u]=[0,0,1][O-2]),O==3)for(N=_;N<I;N++)s[N+1]=s[N+1]+(s[N+1-_]>>>1)&255;for(let R=0;R<E;R++)if(T=u+R*I,v=T+R+1,O=s[v-1],N=0,O==0)for(;N<I;N++)s[T+N]=s[v+N];else if(O==1){for(;N<_;N++)s[T+N]=s[v+N];for(;N<I;N++)s[T+N]=s[v+N]+s[T+N-_]}else if(O==2)for(;N<I;N++)s[T+N]=s[v+N]+s[T+N-I];else if(O==3){for(;N<_;N++)s[T+N]=s[v+N]+(s[T+N-I]>>>1);for(;N<I;N++)s[T+N]=s[v+N]+(s[T+N-I]+s[T+N-_]>>>1)}else{for(;N<_;N++)s[T+N]=s[v+N]+c(0,s[T+N-I],0);for(;N<I;N++)s[T+N]=s[v+N]+c(s[T+N-_],s[T+N-I],s[T+N-_-I])}return s}function c(s,f,u){const l=s+f-u,E=l-s,_=l-f,I=l-u;return E*E<=_*_&&E*E<=I*I?s:_*_<=I*I?f:u}function g(s,f,u){u.width=e.readUint(s,f),f+=4,u.height=e.readUint(s,f),f+=4,u.depth=s[f],f++,u.ctype=s[f],f++,u.compress=s[f],f++,u.filter=s[f],f++,u.interlace=s[f],f++}function x(s,f,u,l,E,_,I,T,v){const O=Math.min(f,E),N=Math.min(u,_);let R=0,S=0;for(let U=0;U<N;U++)for(let m=0;m<O;m++)if(I>=0&&T>=0?(R=U*f+m<<2,S=(T+U)*E+I+m<<2):(R=(-T+U)*f-I+m<<2,S=U*E+m<<2),v==0)l[S]=s[R],l[S+1]=s[R+1],l[S+2]=s[R+2],l[S+3]=s[R+3];else if(v==1){var M=s[R+3]*.00392156862745098,p=s[R]*M,h=s[R+1]*M,F=s[R+2]*M,y=l[S+3]*(1/255),b=l[S]*y,C=l[S+1]*y,A=l[S+2]*y;const d=1-M,L=M+y*d,P=L==0?0:1/L;l[S+3]=255*L,l[S+0]=(p+b*d)*P,l[S+1]=(h+C*d)*P,l[S+2]=(F+A*d)*P}else if(v==2)M=s[R+3],p=s[R],h=s[R+1],F=s[R+2],y=l[S+3],b=l[S],C=l[S+1],A=l[S+2],M==y&&p==b&&h==C&&F==A?(l[S]=0,l[S+1]=0,l[S+2]=0,l[S+3]=0):(l[S]=p,l[S+1]=h,l[S+2]=F,l[S+3]=M);else if(v==3){if(M=s[R+3],p=s[R],h=s[R+1],F=s[R+2],y=l[S+3],b=l[S],C=l[S+1],A=l[S+2],M==y&&p==b&&h==C&&F==A)continue;if(M<220&&y>20)return!1}return!0}return{decode:function(f){const u=new Uint8Array(f);let l=8;const E=e,_=E.readUshort,I=E.readUint,T={tabs:{},frames:[]},v=new Uint8Array(u.length);let O,N=0,R=0;const S=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(u[M]!=S[M])throw"The input is not a PNG file!";for(;l<u.length;){const U=E.readUint(u,l);l+=4;const m=E.readASCII(u,l,4);if(l+=4,m=="IHDR")g(u,l,T);else if(m=="iCCP"){for(var p=l;u[p]!=0;)p++;E.readASCII(u,l,p-l),u[p+1];const d=u.slice(p+2,l+U);let L=null;try{L=o(d)}catch{L=t(d)}T.tabs[m]=L}else if(m=="CgBI")T.tabs[m]=u.slice(l,l+4);else if(m=="IDAT"){for(M=0;M<U;M++)v[N+M]=u[l+M];N+=U}else if(m=="acTL")T.tabs[m]={num_frames:I(u,l),num_plays:I(u,l+4)},O=new Uint8Array(u.length);else if(m=="fcTL"){R!=0&&((A=T.frames[T.frames.length-1]).data=i(T,O.slice(0,R),A.rect.width,A.rect.height),R=0);const d={x:I(u,l+12),y:I(u,l+16),width:I(u,l+4),height:I(u,l+8)};let L=_(u,l+22);L=_(u,l+20)/(L==0?100:L);const P={rect:d,delay:Math.round(1e3*L),dispose:u[l+24],blend:u[l+25]};T.frames.push(P)}else if(m=="fdAT"){for(M=0;M<U-4;M++)O[R+M]=u[l+M+4];R+=U-4}else if(m=="pHYs")T.tabs[m]=[E.readUint(u,l),E.readUint(u,l+4),u[l+8]];else if(m=="cHRM")for(T.tabs[m]=[],M=0;M<8;M++)T.tabs[m].push(E.readUint(u,l+4*M));else if(m=="tEXt"||m=="zTXt"){T.tabs[m]==null&&(T.tabs[m]={});var h=E.nextZero(u,l),F=E.readASCII(u,l,h-l),y=l+U-h-1;if(m=="tEXt")C=E.readASCII(u,h+1,y);else{var b=o(u.slice(h+2,h+2+y));C=E.readUTF8(b,0,b.length)}T.tabs[m][F]=C}else if(m=="iTXt"){T.tabs[m]==null&&(T.tabs[m]={}),h=0,p=l,h=E.nextZero(u,p),F=E.readASCII(u,p,h-p);const d=u[p=h+1];var C;u[p+1],p+=2,h=E.nextZero(u,p),E.readASCII(u,p,h-p),p=h+1,h=E.nextZero(u,p),E.readUTF8(u,p,h-p),y=U-((p=h+1)-l),d==0?C=E.readUTF8(u,p,y):(b=o(u.slice(p,p+y)),C=E.readUTF8(b,0,b.length)),T.tabs[m][F]=C}else if(m=="PLTE")T.tabs[m]=E.readBytes(u,l,U);else if(m=="hIST"){const d=T.tabs.PLTE.length/3;for(T.tabs[m]=[],M=0;M<d;M++)T.tabs[m].push(_(u,l+2*M))}else if(m=="tRNS")T.ctype==3?T.tabs[m]=E.readBytes(u,l,U):T.ctype==0?T.tabs[m]=_(u,l):T.ctype==2&&(T.tabs[m]=[_(u,l),_(u,l+2),_(u,l+4)]);else if(m=="gAMA")T.tabs[m]=E.readUint(u,l)/1e5;else if(m=="sRGB")T.tabs[m]=u[l];else if(m=="bKGD")T.ctype==0||T.ctype==4?T.tabs[m]=[_(u,l)]:T.ctype==2||T.ctype==6?T.tabs[m]=[_(u,l),_(u,l+2),_(u,l+4)]:T.ctype==3&&(T.tabs[m]=u[l]);else if(m=="IEND")break;l+=U,E.readUint(u,l),l+=4}var A;return R!=0&&((A=T.frames[T.frames.length-1]).data=i(T,O.slice(0,R),A.rect.width,A.rect.height)),T.data=i(T,v,T.width,T.height),delete T.compress,delete T.interlace,delete T.filter,T},toRGBA8:function(f){const u=f.width,l=f.height;if(f.tabs.acTL==null)return[n(f.data,u,l,f).buffer];const E=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const _=u*l*4,I=new Uint8Array(_),T=new Uint8Array(_),v=new Uint8Array(_);for(let N=0;N<f.frames.length;N++){const R=f.frames[N],S=R.rect.x,M=R.rect.y,p=R.rect.width,h=R.rect.height,F=n(R.data,p,h,f);if(N!=0)for(var O=0;O<_;O++)v[O]=I[O];if(R.blend==0?x(F,p,h,I,u,l,S,M,0):R.blend==1&&x(F,p,h,I,u,l,S,M,1),E.push(I.buffer.slice(0)),R.dispose!=0){if(R.dispose==1)x(T,p,h,I,u,l,S,M,0);else if(R.dispose==2)for(O=0;O<_;O++)I[O]=v[O]}}return E},_paeth:c,_copyTile:x,_bin:e}})();(function(){const{_copyTile:e}=Ie,{_bin:n}=Ie,i=Ie._paeth;var o={table:(function(){const p=new Uint32Array(256);for(let h=0;h<256;h++){let F=h;for(let y=0;y<8;y++)1&F?F=3988292384^F>>>1:F>>>=1;p[h]=F}return p})(),update(p,h,F,y){for(let b=0;b<y;b++)p=o.table[255&(p^h[F+b])]^p>>>8;return p},crc:(p,h,F)=>4294967295^o.update(4294967295,p,h,F)};function t(p,h,F,y){h[F]+=p[0]*y>>4,h[F+1]+=p[1]*y>>4,h[F+2]+=p[2]*y>>4,h[F+3]+=p[3]*y>>4}function r(p){return Math.max(0,Math.min(255,p))}function a(p,h){const F=p[0]-h[0],y=p[1]-h[1],b=p[2]-h[2],C=p[3]-h[3];return F*F+y*y+b*b+C*C}function c(p,h,F,y,b,C,A){A==null&&(A=1);const U=y.length,m=[];for(var d=0;d<U;d++){const D=y[d];m.push([D>>>0&255,D>>>8&255,D>>>16&255,D>>>24&255])}for(d=0;d<U;d++){let D=4294967295;for(var L=0,P=0;P<U;P++){var w=a(m[d],m[P]);P!=d&&w<D&&(D=w,L=P)}}const Z=new Uint32Array(b.buffer),B=new Int16Array(h*F*4),j=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(d=0;d<j.length;d++)j[d]=255*((j[d]+.5)/16-.5);for(let D=0;D<F;D++)for(let $=0;$<h;$++){var G;d=4*(D*h+$),A!=2?G=[r(p[d]+B[d]),r(p[d+1]+B[d+1]),r(p[d+2]+B[d+2]),r(p[d+3]+B[d+3])]:(w=j[4*(3&D)+(3&$)],G=[r(p[d]+w),r(p[d+1]+w),r(p[d+2]+w),r(p[d+3]+w)]),L=0;let V=16777215;for(P=0;P<U;P++){const q=a(G,m[P]);q<V&&(V=q,L=P)}const Y=m[L],W=[G[0]-Y[0],G[1]-Y[1],G[2]-Y[2],G[3]-Y[3]];A==1&&($!=h-1&&t(W,B,d+4,7),D!=F-1&&($!=0&&t(W,B,d+4*h-4,3),t(W,B,d+4*h,5),$!=h-1&&t(W,B,d+4*h+4,1))),C[d>>2]=L,Z[d>>2]=y[L]}}function g(p,h,F,y,b){b==null&&(b={});const{crc:C}=o,A=n.writeUint,U=n.writeUshort,m=n.writeASCII;let d=8;const L=p.frames.length>1;let P,w=!1,Z=33+(L?20:0);if(b.sRGB!=null&&(Z+=13),b.pHYs!=null&&(Z+=21),b.iCCP!=null&&(P=pako.deflate(b.iCCP),Z+=21+P.length+4),p.ctype==3){for(var B=p.plte.length,j=0;j<B;j++)p.plte[j]>>>24!=255&&(w=!0);Z+=8+3*B+4+(w?8+1*B+4:0)}for(var G=0;G<p.frames.length;G++)L&&(Z+=38),Z+=(Y=p.frames[G]).cimg.length+12,G!=0&&(Z+=4);Z+=12;const D=new Uint8Array(Z),$=[137,80,78,71,13,10,26,10];for(j=0;j<8;j++)D[j]=$[j];if(A(D,d,13),d+=4,m(D,d,"IHDR"),d+=4,A(D,d,h),d+=4,A(D,d,F),d+=4,D[d]=p.depth,d++,D[d]=p.ctype,d++,D[d]=0,d++,D[d]=0,d++,D[d]=0,d++,A(D,d,C(D,d-17,17)),d+=4,b.sRGB!=null&&(A(D,d,1),d+=4,m(D,d,"sRGB"),d+=4,D[d]=b.sRGB,d++,A(D,d,C(D,d-5,5)),d+=4),b.iCCP!=null){const W=13+P.length;A(D,d,W),d+=4,m(D,d,"iCCP"),d+=4,m(D,d,"ICC profile"),d+=11,d+=2,D.set(P,d),d+=P.length,A(D,d,C(D,d-(W+4),W+4)),d+=4}if(b.pHYs!=null&&(A(D,d,9),d+=4,m(D,d,"pHYs"),d+=4,A(D,d,b.pHYs[0]),d+=4,A(D,d,b.pHYs[1]),d+=4,D[d]=b.pHYs[2],d++,A(D,d,C(D,d-13,13)),d+=4),L&&(A(D,d,8),d+=4,m(D,d,"acTL"),d+=4,A(D,d,p.frames.length),d+=4,A(D,d,b.loop!=null?b.loop:0),d+=4,A(D,d,C(D,d-12,12)),d+=4),p.ctype==3){for(A(D,d,3*(B=p.plte.length)),d+=4,m(D,d,"PLTE"),d+=4,j=0;j<B;j++){const W=3*j,q=p.plte[j],te=255&q,se=q>>>8&255,ve=q>>>16&255;D[d+W+0]=te,D[d+W+1]=se,D[d+W+2]=ve}if(d+=3*B,A(D,d,C(D,d-3*B-4,3*B+4)),d+=4,w){for(A(D,d,B),d+=4,m(D,d,"tRNS"),d+=4,j=0;j<B;j++)D[d+j]=p.plte[j]>>>24&255;d+=B,A(D,d,C(D,d-B-4,B+4)),d+=4}}let V=0;for(G=0;G<p.frames.length;G++){var Y=p.frames[G];L&&(A(D,d,26),d+=4,m(D,d,"fcTL"),d+=4,A(D,d,V++),d+=4,A(D,d,Y.rect.width),d+=4,A(D,d,Y.rect.height),d+=4,A(D,d,Y.rect.x),d+=4,A(D,d,Y.rect.y),d+=4,U(D,d,y[G]),d+=2,U(D,d,1e3),d+=2,D[d]=Y.dispose,d++,D[d]=Y.blend,d++,A(D,d,C(D,d-30,30)),d+=4);const W=Y.cimg;A(D,d,(B=W.length)+(G==0?0:4)),d+=4;const q=d;m(D,d,G==0?"IDAT":"fdAT"),d+=4,G!=0&&(A(D,d,V++),d+=4),D.set(W,d),d+=B,A(D,d,C(D,q,d-q)),d+=4}return A(D,d,0),d+=4,m(D,d,"IEND"),d+=4,A(D,d,C(D,d-4,4)),d+=4,D.buffer}function x(p,h,F){for(let y=0;y<p.frames.length;y++){const b=p.frames[y];b.rect.width;const C=b.rect.height,A=new Uint8Array(C*b.bpl+C);b.cimg=l(b.img,C,b.bpp,b.bpl,A,h,F)}}function s(p,h,F,y,b){const C=b[0],A=b[1],U=b[2],m=b[3],d=b[4],L=b[5];let P=6,w=8,Z=255;for(var B=0;B<p.length;B++){const ce=new Uint8Array(p[B]);for(var j=ce.length,G=0;G<j;G+=4)Z&=ce[G+3]}const D=Z!=255,$=(function(ee,J,ae,de,re,me){const ie=[];for(var Q=0;Q<ee.length;Q++){const ge=new Uint8Array(ee[Q]),Te=new Uint32Array(ge.buffer);var xe;let Ee=0,ye=0,Fe=J,we=ae,En=de?1:0;if(Q!=0){const Ir=me||de||Q==1||ie[Q-2].dispose!=0?1:2;let Sn=0,Zn=1e9;for(let Ke=0;Ke<Ir;Ke++){var Ue=new Uint8Array(ee[Q-1-Ke]);const Ar=new Uint32Array(ee[Q-1-Ke]);let Ne=J,Re=ae,Ze=-1,qe=-1;for(let Ge=0;Ge<ae;Ge++)for(let ke=0;ke<J;ke++)Te[ue=Ge*J+ke]!=Ar[ue]&&(ke<Ne&&(Ne=ke),ke>Ze&&(Ze=ke),Ge<Re&&(Re=Ge),Ge>qe&&(qe=Ge));Ze==-1&&(Ne=Re=Ze=qe=0),re&&((1&Ne)==1&&Ne--,(1&Re)==1&&Re--);const $n=(Ze-Ne+1)*(qe-Re+1);$n<Zn&&(Zn=$n,Sn=Ke,Ee=Ne,ye=Re,Fe=Ze-Ne+1,we=qe-Re+1)}Ue=new Uint8Array(ee[Q-1-Sn]),Sn==1&&(ie[Q-1].dispose=2),xe=new Uint8Array(Fe*we*4),e(Ue,J,ae,xe,Fe,we,-Ee,-ye,0),En=e(ge,J,ae,xe,Fe,we,-Ee,-ye,3)?1:0,En==1?u(ge,J,ae,xe,{x:Ee,y:ye,width:Fe,height:we}):e(ge,J,ae,xe,Fe,we,-Ee,-ye,0)}else xe=ge.slice(0);ie.push({rect:{x:Ee,y:ye,width:Fe,height:we},img:xe,blend:En,dispose:0})}if(de)for(Q=0;Q<ie.length;Q++){if((Le=ie[Q]).blend==1)continue;const ge=Le.rect,Te=ie[Q-1].rect,Ee=Math.min(ge.x,Te.x),ye=Math.min(ge.y,Te.y),Fe={x:Ee,y:ye,width:Math.max(ge.x+ge.width,Te.x+Te.width)-Ee,height:Math.max(ge.y+ge.height,Te.y+Te.height)-ye};ie[Q-1].dispose=1,Q-1!=0&&f(ee,J,ae,ie,Q-1,Fe,re),f(ee,J,ae,ie,Q,Fe,re)}let tn=0;if(ee.length!=1)for(var ue=0;ue<ie.length;ue++){var Le;tn+=(Le=ie[ue]).rect.width*Le.rect.height}return ie})(p,h,F,C,A,U),V={},Y=[],W=[];if(y!=0){const ce=[];for(G=0;G<$.length;G++)ce.push($[G].img.buffer);const ee=(function(re){let me=0;for(var ie=0;ie<re.length;ie++)me+=re[ie].byteLength;const Q=new Uint8Array(me);let xe=0;for(ie=0;ie<re.length;ie++){const Ue=new Uint8Array(re[ie]),tn=Ue.length;for(let ue=0;ue<tn;ue+=4){let Le=Ue[ue],ge=Ue[ue+1],Te=Ue[ue+2];const Ee=Ue[ue+3];Ee==0&&(Le=ge=Te=0),Q[xe+ue]=Le,Q[xe+ue+1]=ge,Q[xe+ue+2]=Te,Q[xe+ue+3]=Ee}xe+=tn}return Q.buffer})(ce),J=_(ee,y);for(G=0;G<J.plte.length;G++)Y.push(J.plte[G].est.rgba);let ae=0;for(G=0;G<$.length;G++){const de=(te=$[G]).img.length;var q=new Uint8Array(J.inds.buffer,ae>>2,de>>2);W.push(q);const re=new Uint8Array(J.abuf,ae,de);L&&c(te.img,te.rect.width,te.rect.height,Y,re,q),te.img.set(re),ae+=de}}else for(B=0;B<$.length;B++){var te=$[B];const ce=new Uint32Array(te.img.buffer);var se=te.rect.width;for(j=ce.length,q=new Uint8Array(j),W.push(q),G=0;G<j;G++){const ee=ce[G];if(G!=0&&ee==ce[G-1])q[G]=q[G-1];else if(G>se&&ee==ce[G-se])q[G]=q[G-se];else{let J=V[ee];if(J==null&&(V[ee]=J=Y.length,Y.push(ee),Y.length>=300))break;q[G]=J}}}const ve=Y.length;for(ve<=256&&d==0&&(w=ve<=2?1:ve<=4?2:ve<=16?4:8,w=Math.max(w,m)),B=0;B<$.length;B++){(te=$[B]).rect.x,te.rect.y,se=te.rect.width;const ce=te.rect.height;let ee=te.img;new Uint32Array(ee.buffer);let J=4*se,ae=4;if(ve<=256&&d==0){J=Math.ceil(w*se/8);var Ae=new Uint8Array(J*ce);const de=W[B];for(let re=0;re<ce;re++){G=re*J;const me=re*se;if(w==8)for(var ne=0;ne<se;ne++)Ae[G+ne]=de[me+ne];else if(w==4)for(ne=0;ne<se;ne++)Ae[G+(ne>>1)]|=de[me+ne]<<4-4*(1&ne);else if(w==2)for(ne=0;ne<se;ne++)Ae[G+(ne>>2)]|=de[me+ne]<<6-2*(3&ne);else if(w==1)for(ne=0;ne<se;ne++)Ae[G+(ne>>3)]|=de[me+ne]<<7-1*(7&ne)}ee=Ae,P=3,ae=1}else if(D==0&&$.length==1){Ae=new Uint8Array(se*ce*3);const de=se*ce;for(G=0;G<de;G++){const re=3*G,me=4*G;Ae[re]=ee[me],Ae[re+1]=ee[me+1],Ae[re+2]=ee[me+2]}ee=Ae,P=2,ae=3,J=3*se}te.img=ee,te.bpl=J,te.bpp=ae}return{ctype:P,depth:w,plte:Y,frames:$}}function f(p,h,F,y,b,C,A){const U=Uint8Array,m=Uint32Array,d=new U(p[b-1]),L=new m(p[b-1]),P=b+1<p.length?new U(p[b+1]):null,w=new U(p[b]),Z=new m(w.buffer);let B=h,j=F,G=-1,D=-1;for(let V=0;V<C.height;V++)for(let Y=0;Y<C.width;Y++){const W=C.x+Y,q=C.y+V,te=q*h+W,se=Z[te];se==0||y[b-1].dispose==0&&L[te]==se&&(P==null||P[4*te+3]!=0)||(W<B&&(B=W),W>G&&(G=W),q<j&&(j=q),q>D&&(D=q))}G==-1&&(B=j=G=D=0),A&&((1&B)==1&&B--,(1&j)==1&&j--),C={x:B,y:j,width:G-B+1,height:D-j+1};const $=y[b];$.rect=C,$.blend=1,$.img=new Uint8Array(C.width*C.height*4),y[b-1].dispose==0?(e(d,h,F,$.img,C.width,C.height,-C.x,-C.y,0),u(w,h,F,$.img,C)):e(w,h,F,$.img,C.width,C.height,-C.x,-C.y,0)}function u(p,h,F,y,b){e(p,h,F,y,b.width,b.height,-b.x,-b.y,2)}function l(p,h,F,y,b,C,A){const U=[];let m,d=[0,1,2,3,4];C!=-1?d=[C]:(h*y>5e5||F==1)&&(d=[0]),A&&(m={level:0});const L=fc;for(var P=0;P<d.length;P++){for(let B=0;B<h;B++)E(b,p,B,y,F,d[P]);U.push(L.deflate(b,m))}let w,Z=1e9;for(P=0;P<U.length;P++)U[P].length<Z&&(w=P,Z=U[P].length);return U[w]}function E(p,h,F,y,b,C){const A=F*y;let U=A+F;if(p[U]=C,U++,C==0)if(y<500)for(var m=0;m<y;m++)p[U+m]=h[A+m];else p.set(new Uint8Array(h.buffer,A,y),U);else if(C==1){for(m=0;m<b;m++)p[U+m]=h[A+m];for(m=b;m<y;m++)p[U+m]=h[A+m]-h[A+m-b]+256&255}else if(F==0){for(m=0;m<b;m++)p[U+m]=h[A+m];if(C==2)for(m=b;m<y;m++)p[U+m]=h[A+m];if(C==3)for(m=b;m<y;m++)p[U+m]=h[A+m]-(h[A+m-b]>>1)+256&255;if(C==4)for(m=b;m<y;m++)p[U+m]=h[A+m]-i(h[A+m-b],0,0)+256&255}else{if(C==2)for(m=0;m<y;m++)p[U+m]=h[A+m]+256-h[A+m-y]&255;if(C==3){for(m=0;m<b;m++)p[U+m]=h[A+m]+256-(h[A+m-y]>>1)&255;for(m=b;m<y;m++)p[U+m]=h[A+m]+256-(h[A+m-y]+h[A+m-b]>>1)&255}if(C==4){for(m=0;m<b;m++)p[U+m]=h[A+m]+256-i(0,h[A+m-y],0)&255;for(m=b;m<y;m++)p[U+m]=h[A+m]+256-i(h[A+m-b],h[A+m-y],h[A+m-b-y])&255}}}function _(p,h){const F=new Uint8Array(p),y=F.slice(0),b=new Uint32Array(y.buffer),C=I(y,h),A=C[0],U=C[1],m=F.length,d=new Uint8Array(m>>2);let L;if(F.length<2e7)for(var P=0;P<m;P+=4)L=T(A,w=F[P]*(1/255),Z=F[P+1]*(1/255),B=F[P+2]*(1/255),j=F[P+3]*(1/255)),d[P>>2]=L.ind,b[P>>2]=L.est.rgba;else for(P=0;P<m;P+=4){var w=F[P]*.00392156862745098,Z=F[P+1]*(1/255),B=F[P+2]*(1/255),j=F[P+3]*(1/255);for(L=A;L.left;)L=v(L.est,w,Z,B,j)<=0?L.left:L.right;d[P>>2]=L.ind,b[P>>2]=L.est.rgba}return{abuf:y.buffer,inds:d,plte:U}}function I(p,h,F){F==null&&(F=1e-4);const y=new Uint32Array(p.buffer),b={i0:0,i1:p.length,bst:null,est:null,tdst:0,left:null,right:null};b.bst=R(p,b.i0,b.i1),b.est=S(b.bst);const C=[b];for(;C.length<h;){let U=0,m=0;for(var A=0;A<C.length;A++)C[A].est.L>U&&(U=C[A].est.L,m=A);if(U<F)break;const d=C[m],L=O(p,y,d.i0,d.i1,d.est.e,d.est.eMq255);if(d.i0>=L||d.i1<=L){d.est.L=0;continue}const P={i0:d.i0,i1:L,bst:null,est:null,tdst:0,left:null,right:null};P.bst=R(p,P.i0,P.i1),P.est=S(P.bst);const w={i0:L,i1:d.i1,bst:null,est:null,tdst:0,left:null,right:null};for(w.bst={R:[],m:[],N:d.bst.N-P.bst.N},A=0;A<16;A++)w.bst.R[A]=d.bst.R[A]-P.bst.R[A];for(A=0;A<4;A++)w.bst.m[A]=d.bst.m[A]-P.bst.m[A];w.est=S(w.bst),d.left=P,d.right=w,C[m]=P,C.push(w)}for(C.sort(((U,m)=>m.bst.N-U.bst.N)),A=0;A<C.length;A++)C[A].ind=A;return[b,C]}function T(p,h,F,y,b){if(p.left==null)return p.tdst=(function(P,w,Z,B,j){const G=w-P[0],D=Z-P[1],$=B-P[2],V=j-P[3];return G*G+D*D+$*$+V*V})(p.est.q,h,F,y,b),p;const C=v(p.est,h,F,y,b);let A=p.left,U=p.right;C>0&&(A=p.right,U=p.left);const m=T(A,h,F,y,b);if(m.tdst<=C*C)return m;const d=T(U,h,F,y,b);return d.tdst<m.tdst?d:m}function v(p,h,F,y,b){const{e:C}=p;return C[0]*h+C[1]*F+C[2]*y+C[3]*b-p.eMq}function O(p,h,F,y,b,C){for(y-=4;F<y;){for(;N(p,F,b)<=C;)F+=4;for(;N(p,y,b)>C;)y-=4;if(F>=y)break;const A=h[F>>2];h[F>>2]=h[y>>2],h[y>>2]=A,F+=4,y-=4}for(;N(p,F,b)>C;)F-=4;return F+4}function N(p,h,F){return p[h]*F[0]+p[h+1]*F[1]+p[h+2]*F[2]+p[h+3]*F[3]}function R(p,h,F){const y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=[0,0,0,0],C=F-h>>2;for(let A=h;A<F;A+=4){const U=p[A]*.00392156862745098,m=p[A+1]*(1/255),d=p[A+2]*(1/255),L=p[A+3]*(1/255);b[0]+=U,b[1]+=m,b[2]+=d,b[3]+=L,y[0]+=U*U,y[1]+=U*m,y[2]+=U*d,y[3]+=U*L,y[5]+=m*m,y[6]+=m*d,y[7]+=m*L,y[10]+=d*d,y[11]+=d*L,y[15]+=L*L}return y[4]=y[1],y[8]=y[2],y[9]=y[6],y[12]=y[3],y[13]=y[7],y[14]=y[11],{R:y,m:b,N:C}}function S(p){const{R:h}=p,{m:F}=p,{N:y}=p,b=F[0],C=F[1],A=F[2],U=F[3],m=y==0?0:1/y,d=[h[0]-b*b*m,h[1]-b*C*m,h[2]-b*A*m,h[3]-b*U*m,h[4]-C*b*m,h[5]-C*C*m,h[6]-C*A*m,h[7]-C*U*m,h[8]-A*b*m,h[9]-A*C*m,h[10]-A*A*m,h[11]-A*U*m,h[12]-U*b*m,h[13]-U*C*m,h[14]-U*A*m,h[15]-U*U*m],L=d,P=M;let w=[Math.random(),Math.random(),Math.random(),Math.random()],Z=0,B=0;if(y!=0)for(let G=0;G<16&&(w=P.multVec(L,w),B=Math.sqrt(P.dot(w,w)),w=P.sml(1/B,w),!(G!=0&&Math.abs(B-Z)<1e-9));G++)Z=B;const j=[b*m,C*m,A*m,U*m];return{Cov:d,q:j,e:w,L:Z,eMq255:P.dot(P.sml(255,j),w),eMq:P.dot(w,j),rgba:(Math.round(255*j[3])<<24|Math.round(255*j[2])<<16|Math.round(255*j[1])<<8|Math.round(255*j[0])<<0)>>>0}}var M={multVec:(p,h)=>[p[0]*h[0]+p[1]*h[1]+p[2]*h[2]+p[3]*h[3],p[4]*h[0]+p[5]*h[1]+p[6]*h[2]+p[7]*h[3],p[8]*h[0]+p[9]*h[1]+p[10]*h[2]+p[11]*h[3],p[12]*h[0]+p[13]*h[1]+p[14]*h[2]+p[15]*h[3]],dot:(p,h)=>p[0]*h[0]+p[1]*h[1]+p[2]*h[2]+p[3]*h[3],sml:(p,h)=>[p*h[0],p*h[1],p*h[2],p*h[3]]};Ie.encode=function(h,F,y,b,C,A,U){b==null&&(b=0),U==null&&(U=!1);const m=s(h,F,y,b,[!1,!1,!1,0,U,!1]);return x(m,-1),g(m,F,y,C,A)},Ie.encodeLL=function(h,F,y,b,C,A,U,m){const d={ctype:0+(b==1?0:2)+(C==0?0:4),depth:A,frames:[]},L=(b+C)*A,P=L*F;for(let w=0;w<h.length;w++)d.frames.push({rect:{x:0,y:0,width:F,height:y},img:new Uint8Array(h[w]),blend:0,dispose:1,bpp:Math.ceil(L/8),bpl:Math.ceil(P/8)});return x(d,0,!0),g(d,F,y,U,m)},Ie.encode.compress=s,Ie.encode.dither=c,Ie.quantize=_,Ie.quantize.getKDtree=I,Ie.quantize.getNearest=T})();const lr={toArrayBuffer(e,n){const i=e.width,o=e.height,t=i<<2,r=e.getContext("2d").getImageData(0,0,i,o),a=new Uint32Array(r.data.buffer),c=(32*i+31)/32<<2,g=c*o,x=122+g,s=new ArrayBuffer(x),f=new DataView(s),u=1<<20;let l,E,_,I,T=u,v=0,O=0,N=0;function R(p){f.setUint16(O,p,!0),O+=2}function S(p){f.setUint32(O,p,!0),O+=4}function M(p){O+=p}R(19778),S(x),M(4),S(122),S(108),S(i),S(-o>>>0),R(1),R(32),S(3),S(g),S(2835),S(2835),M(8),S(16711680),S(65280),S(255),S(4278190080),S(1466527264),(function p(){for(;v<o&&T>0;){for(I=122+v*c,l=0;l<t;)T--,E=a[N++],_=E>>>24,f.setUint32(I+l,E<<8|_),l+=4;v++}N<a.length?(T=u,setTimeout(p,lr._dly)):n(s)})()},toBlob(e,n){this.toArrayBuffer(e,(i=>{n(new Blob([i],{type:"image/bmp"}))}))},_dly:9};var pe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},lc={[pe.CHROME]:16384,[pe.FIREFOX]:11180,[pe.DESKTOP_SAFARI]:16384,[pe.IE]:8192,[pe.IOS]:4096,[pe.ETC]:8192};const Hn=typeof window<"u",dr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,ln=Hn&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),dc=(Hn||dr)&&(ln&&ln.getOriginalSymbol(window,"File")||typeof File<"u"&&File),gr=(Hn||dr)&&(ln&&ln.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function jn(e,n,i=Date.now()){return new Promise((o=>{const t=e.split(","),r=t[0].match(/:(.*?);/)[1],a=globalThis.atob(t[1]);let c=a.length;const g=new Uint8Array(c);for(;c--;)g[c]=a.charCodeAt(c);const x=new Blob([g],{type:r});x.name=n,x.lastModified=i,o(x)}))}function hr(e){return new Promise(((n,i)=>{const o=new gr;o.onload=()=>n(o.result),o.onerror=t=>i(t),o.readAsDataURL(e)}))}function pr(e){return new Promise(((n,i)=>{const o=new Image;o.onload=()=>n(o),o.onerror=t=>i(t),o.src=e}))}function Be(){if(Be.cachedResult!==void 0)return Be.cachedResult;let e=pe.ETC;const{userAgent:n}=navigator;return/Chrom(e|ium)/i.test(n)?e=pe.CHROME:/iP(ad|od|hone)/i.test(n)&&/WebKit/i.test(n)?e=pe.IOS:/Safari/i.test(n)?e=pe.DESKTOP_SAFARI:/Firefox/i.test(n)?e=pe.FIREFOX:(/MSIE/i.test(n)||document.documentMode)&&(e=pe.IE),Be.cachedResult=e,Be.cachedResult}function mr(e,n){const i=Be(),o=lc[i];let t=e,r=n,a=t*r;const c=t>r?r/t:t/r;for(;a>o*o;){const g=(o+t)/2,x=(o+r)/2;g<x?(r=x,t=x*c):(r=g*c,t=g),a=t*r}return{width:t,height:r}}function xn(e,n){let i,o;try{if(i=new OffscreenCanvas(e,n),o=i.getContext("2d"),o===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{i=document.createElement("canvas"),o=i.getContext("2d")}return i.width=e,i.height=n,[i,o]}function xr(e,n){const{width:i,height:o}=mr(e.width,e.height),[t,r]=xn(i,o);return n&&/jpe?g/.test(n)&&(r.fillStyle="white",r.fillRect(0,0,t.width,t.height)),r.drawImage(e,0,0,t.width,t.height),t}function sn(){return sn.cachedResult!==void 0||(sn.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),sn.cachedResult}function dn(e,n={}){return new Promise((function(i,o){let t,r;var a=function(){try{return r=xr(t,n.fileType||e.type),i([t,r])}catch(g){return o(g)}},c=function(g){try{var x=function(s){try{throw s}catch(f){return o(f)}};try{let s;return hr(e).then((function(f){try{return s=f,pr(s).then((function(u){try{return t=u,(function(){try{return a()}catch(l){return o(l)}})()}catch(l){return x(l)}}),x)}catch(u){return x(u)}}),x)}catch(s){x(s)}}catch(s){return o(s)}};try{if(sn()||[pe.DESKTOP_SAFARI,pe.MOBILE_SAFARI].includes(Be()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(g){try{return t=g,a()}catch{return c()}}),c)}catch{c()}}))}function gn(e,n,i,o,t=1){return new Promise((function(r,a){let c;if(n==="image/png"){let x,s,f;return x=e.getContext("2d"),{data:s}=x.getImageData(0,0,e.width,e.height),f=Ie.encode([s.buffer],e.width,e.height,4096*t),c=new Blob([f],{type:n}),c.name=i,c.lastModified=o,g.call(this)}{let x=function(){return g.call(this)};if(n==="image/bmp")return new Promise((s=>lr.toBlob(e,s))).then((function(s){try{return c=s,c.name=i,c.lastModified=o,x.call(this)}catch(f){return a(f)}}).bind(this),a);{let s=function(){return x.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:n,quality:t}).then((function(f){try{return c=f,c.name=i,c.lastModified=o,s.call(this)}catch(u){return a(u)}}).bind(this),a);{let f;return f=e.toDataURL(n,t),jn(f,i,o).then((function(u){try{return c=u,s.call(this)}catch(l){return a(l)}}).bind(this),a)}}}function g(){return r(c)}}))}function be(e){e.width=0,e.height=0}function Xe(){return new Promise((function(e,n){let i,o,t,r;return Xe.cachedResult!==void 0?e(Xe.cachedResult):jn("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(a){try{return i=a,dn(i).then((function(c){try{return o=c[1],gn(o,i.type,i.name,i.lastModified).then((function(g){try{return t=g,be(o),dn(t).then((function(x){try{return r=x[0],Xe.cachedResult=r.width===1&&r.height===2,e(Xe.cachedResult)}catch(s){return n(s)}}),n)}catch(x){return n(x)}}),n)}catch(g){return n(g)}}),n)}catch(c){return n(c)}}),n)}))}function Er(e){return new Promise(((n,i)=>{const o=new gr;o.onload=t=>{const r=new DataView(t.target.result);if(r.getUint16(0,!1)!=65496)return n(-2);const a=r.byteLength;let c=2;for(;c<a;){if(r.getUint16(c+2,!1)<=8)return n(-1);const g=r.getUint16(c,!1);if(c+=2,g==65505){if(r.getUint32(c+=2,!1)!=1165519206)return n(-1);const x=r.getUint16(c+=6,!1)==18761;c+=r.getUint32(c+4,x);const s=r.getUint16(c,x);c+=2;for(let f=0;f<s;f++)if(r.getUint16(c+12*f,x)==274)return n(r.getUint16(c+12*f+8,x))}else{if((65280&g)!=65280)break;c+=r.getUint16(c,!1)}}return n(-1)},o.onerror=t=>i(t),o.readAsArrayBuffer(e)}))}function Sr(e,n){const{width:i}=e,{height:o}=e,{maxWidthOrHeight:t}=n;let r,a=e;return isFinite(t)&&(i>t||o>t)&&([a,r]=xn(i,o),i>o?(a.width=t,a.height=o/i*t):(a.width=i/o*t,a.height=t),r.drawImage(e,0,0,a.width,a.height),be(e)),a}function Tr(e,n){const{width:i}=e,{height:o}=e,[t,r]=xn(i,o);switch(n>4&&n<9?(t.width=o,t.height=i):(t.width=i,t.height=o),n){case 2:r.transform(-1,0,0,1,i,0);break;case 3:r.transform(-1,0,0,-1,i,o);break;case 4:r.transform(1,0,0,-1,0,o);break;case 5:r.transform(0,1,1,0,0,0);break;case 6:r.transform(0,1,-1,0,o,0);break;case 7:r.transform(0,-1,-1,0,o,i);break;case 8:r.transform(0,-1,1,0,0,i)}return r.drawImage(e,0,0,i,o),be(e),t}function Ut(e,n,i=0){return new Promise((function(o,t){let r,a,c,g,x,s,f,u,l,E,_,I,T,v,O,N,R,S,M,p;function h(y=5){if(n.signal&&n.signal.aborted)throw n.signal.reason;r+=y,n.onProgress(Math.min(r,100))}function F(y){if(n.signal&&n.signal.aborted)throw n.signal.reason;r=Math.min(Math.max(y,r),100),n.onProgress(r)}return r=i,a=n.maxIteration||10,c=1024*n.maxSizeMB*1024,h(),dn(e,n).then((function(y){try{return[,g]=y,h(),x=Sr(g,n),h(),new Promise((function(b,C){var A;if(!(A=n.exifOrientation))return Er(e).then((function(m){try{return A=m,U.call(this)}catch(d){return C(d)}}).bind(this),C);function U(){return b(A)}return U.call(this)})).then((function(b){try{return s=b,h(),Xe().then((function(C){try{return f=C?x:Tr(x,s),h(),u=n.initialQuality||1,l=n.fileType||e.type,gn(f,l,e.name,e.lastModified,u).then((function(A){try{{let m=function(){if(a--&&(O>c||O>T)){let L,P;return L=p?.95*M.width:M.width,P=p?.95*M.height:M.height,[R,S]=xn(L,P),S.drawImage(M,0,0,L,P),u*=l==="image/png"?.85:.95,gn(R,l,e.name,e.lastModified,u).then((function(w){try{return N=w,be(M),M=R,O=N.size,F(Math.min(99,Math.floor((v-O)/(v-c)*100))),m}catch(Z){return t(Z)}}),t)}return[1]},d=function(){return be(M),be(R),be(x),be(f),be(g),F(100),o(N)};if(E=A,h(),_=E.size>c,I=E.size>e.size,!_&&!I)return F(100),o(E);var U;return T=e.size,v=E.size,O=v,M=f,p=!n.alwaysKeepResolution&&_,(U=(function(L){for(;L;){if(L.then)return void L.then(U,t);try{if(L.pop){if(L.length)return L.pop()?d.call(this):L;L=m}else L=L.call(this)}catch(P){return t(P)}}}).bind(this))(m)}}catch(m){return t(m)}}).bind(this),t)}catch(A){return t(A)}}).bind(this),t)}catch(C){return t(C)}}).bind(this),t)}catch(b){return t(b)}}).bind(this),t)}))}const gc=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let yn;function hc(e,n){return new Promise(((i,o)=>{yn||(yn=(function(a){const c=[];return c.push(a),URL.createObjectURL(new Blob(c))})(gc));const t=new Worker(yn);t.addEventListener("message",(function(a){if(n.signal&&n.signal.aborted)t.terminate();else if(a.data.progress===void 0){if(a.data.error)return o(new Error(a.data.error)),void t.terminate();i(a.data.file),t.terminate()}else n.onProgress(a.data.progress)})),t.addEventListener("error",o),n.signal&&n.signal.addEventListener("abort",(()=>{o(n.signal.reason),t.terminate()})),t.postMessage({file:e,imageCompressionLibUrl:n.libURL,options:{...n,onProgress:void 0,signal:void 0}})}))}function fe(e,n){return new Promise((function(i,o){let t,r,a,c,g,x;if(t={...n},a=0,{onProgress:c}=t,t.maxSizeMB=t.maxSizeMB||Number.POSITIVE_INFINITY,g=typeof t.useWebWorker!="boolean"||t.useWebWorker,delete t.useWebWorker,t.onProgress=l=>{a=l,typeof c=="function"&&c(a)},!(e instanceof Blob||e instanceof dc))return o(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return o(new Error("The file given is not an image"));if(x=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!g||typeof Worker!="function"||x)return Ut(e,t).then((function(l){try{return r=l,u.call(this)}catch(E){return o(E)}}).bind(this),o);var s=(function(){try{return u.call(this)}catch(l){return o(l)}}).bind(this),f=function(l){try{return Ut(e,t).then((function(E){try{return r=E,s()}catch(_){return o(_)}}),o)}catch(E){return o(E)}};try{return t.libURL=t.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",hc(e,t).then((function(l){try{return r=l,s()}catch{return f()}}),f)}catch{f()}function u(){try{r.name=e.name,r.lastModified=e.lastModified}catch{}try{t.preserveExif&&e.type==="image/jpeg"&&(!t.fileType||t.fileType&&t.fileType===e.type)&&(r=fr(e,r))}catch{}return i(r)}}))}fe.getDataUrlFromFile=hr,fe.getFilefromDataUrl=jn,fe.loadImage=pr,fe.drawImageInCanvas=xr,fe.drawFileInCanvas=dn,fe.canvasToFile=gn,fe.getExifOrientation=Er,fe.handleMaxWidthOrHeight=Sr,fe.followExifOrientation=Tr,fe.cleanupCanvasMemory=be,fe.isAutoOrientationInBrowser=Xe,fe.approximateBelowMaximumCanvasSizeOfBrowser=mr,fe.copyExifWithoutOrientation=fr,fe.getBrowserName=Be,fe.version="2.0.2";const pc=e=>fe(e,{maxWidthOrHeight:1400,maxSizeMB:.1,initialQuality:.7}),Fc=()=>{const e=br(),n=_r(),{sharedChartId:i}=yr(),o=Cr(),t=Pr(),r=Ur(Tn.results.addResultMutation.mutationOptions({onSuccess:()=>{t.invalidateQueries({queryKey:Tn.charts.chart.queryKey()}),t.invalidateQueries({queryKey:Tn.charts.search.queryKey()})}})),a=vr({sharedChartId:i?Number(i):0}),c=o.data?.id,g=!!o.data?.can_add_results_manually,x=a.data?.items[0],s=x&&`${x.songName} ${x.label}`,[f,u]=Me.useState(null),[l,E]=Me.useState(!1),{renderPopup:_,confirm:I}=Xr({okText:"Submit"}),T=Nr({initialValues:{screenshot:null,grade:"",perfect:"",great:"",good:"",bad:"",miss:"",combo:"",score:"",mix:"XX",mod:""},validate:{screenshot:R=>R?null:"Screenshot is required",grade:R=>R?null:"Grade is required",perfect:R=>R?null:"Perfect is required",great:R=>R?null:"Great is required",good:R=>R?null:"Good is required",bad:R=>R?null:"Bad is required",miss:R=>R?null:"Miss is required",combo:R=>R?null:"Combo is required",score:R=>!R||R.length<4?"Score is required (min 4 digits)":null}}),v=T.values.screenshot,O=T.values,N=async({screenshot:R,...S})=>{if(!(!c||!i||!R)){try{await I()}catch{return}E(!0),u(null);try{const M=await pc(R),p=await ur(R),h={grade:S.grade,perfect:Number(S.perfect),great:Number(S.great),good:Number(S.good),bad:Number(S.bad),miss:Number(S.miss),combo:Number(S.combo),score:Number(S.score),mix:S.mix,mod:S.mod,screenshot:await Wr(M),fileName:R.name,date:p||new Date,isExactDate:!!p,sharedChartId:Number(i),playerId:c};await r.mutateAsync(h),T.reset(),n(Rr.leaderboard.sharedChart.getPath({sharedChartId:i}))}catch(M){console.error(M),u(M)}E(!1)}};return c?g?k.jsxs("div",{className:Ce.addResultPage,children:[_({content:k.jsxs("div",{className:Ce.confirmation,children:[k.jsxs("div",{className:Ce.splitPanels,children:[k.jsx("div",{className:Ce.screenshotPanel,children:v&&k.jsx(Pt,{file:v})}),k.jsxs("div",{className:Ce.formPanel,children:[k.jsx("div",{className:Ce.chartName,children:s}),k.jsxs("div",{className:Ce.grid,children:[k.jsx("div",{children:"Grade"}),k.jsx("div",{children:O.grade}),k.jsx("div",{style:{color:"#29D7FF"},children:"Perfect"}),k.jsx("div",{style:{color:"#29D7FF"},children:O.perfect}),k.jsx("div",{style:{color:"#21d021"},children:"Great"}),k.jsx("div",{style:{color:"#21d021"},children:O.great}),k.jsx("div",{style:{color:"#dede3a"},children:"Good"}),k.jsx("div",{style:{color:"#dede3a"},children:O.good}),k.jsx("div",{style:{color:"#f278fc"},children:"Bad"}),k.jsx("div",{style:{color:"#f278fc"},children:O.bad}),k.jsx("div",{style:{color:"#f48181"},children:"Miss"}),k.jsx("div",{style:{color:"#f48181"},children:O.miss}),k.jsx("div",{children:"Combo"}),k.jsx("div",{children:O.combo}),k.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:"Score"}),k.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:O.score}),k.jsx("div",{children:"Mods"}),k.jsx("div",{children:O.mod||"None (normal mode)"})]})]})]}),k.jsx(Xn,{radius:"md",variant:"light",color:"yellow",icon:k.jsx(Lr,{}),children:"Submitting false results may result in a BAN. Make sure your screenshot is readable and the numbers you selected are correct."})]})}),k.jsx("h2",{children:"Submit a result"}),k.jsxs("p",{children:["Chart: ",s]}),k.jsxs("form",{onSubmit:T.onSubmit(N),className:Ce.addResultForm,children:[k.jsxs("label",{children:[k.jsx("span",{children:"Screenshot *"}),k.jsx("input",{className:`${Ce.fileInput} form-control`,type:"file",onChange:R=>T.setFieldValue("screenshot",R.target.files?.[0]??null)})]}),v?.name.toLowerCase().endsWith(".heic")&&k.jsx("p",{children:"HEIC files are not supported. Please convert your screenshot to JPG or PNG."}),v&&k.jsx(Pt,{showDate:!0,file:v}),k.jsxs("label",{children:[k.jsx("span",{children:"Grade *"}),k.jsxs("select",{className:"form-control",...T.getInputProps("grade"),children:[k.jsx("option",{value:"",disabled:!0,hidden:!0,children:"(select a grade)"}),k.jsx("option",{value:"SSS",children:"SSS"}),k.jsx("option",{value:"SS",children:"SS"}),k.jsx("option",{value:"S",children:"S"}),k.jsx("option",{value:"A+",children:"A+"}),k.jsx("option",{value:"A",children:"A"}),k.jsx("option",{value:"B",children:"B"}),k.jsx("option",{value:"C",children:"C"}),k.jsx("option",{value:"D",children:"D"}),k.jsx("option",{value:"F",children:"F"}),k.jsx("option",{value:"B+",children:"B+"}),k.jsx("option",{value:"C+",children:"C+"}),k.jsx("option",{value:"D+",children:"D+"}),k.jsx("option",{value:"F+",children:"F+"})]})]}),["perfect","great","good","bad","miss","combo"].map(R=>k.jsxs("label",{children:[k.jsxs("span",{children:[R[0].toUpperCase()+R.slice(1)," *"]}),k.jsx("input",{className:"form-control",inputMode:"numeric",placeholder:"000",...T.getInputProps(R)})]},R)),k.jsxs("label",{children:[k.jsx("span",{children:"Score *"}),k.jsx("input",{className:"form-control",inputMode:"numeric",placeholder:"000000",...T.getInputProps("score")})]}),k.jsxs("label",{children:[k.jsx("span",{children:"Mix *"}),k.jsxs("select",{className:"form-control",...T.getInputProps("mix"),children:[k.jsx("option",{value:"XX",children:"XX"}),k.jsx("option",{value:"Prime2",children:"Prime 2"}),k.jsx("option",{value:"Prime",children:"Prime"})]})]}),k.jsxs("label",{children:[k.jsx("span",{children:"Judge/rank *"}),k.jsxs("select",{className:"form-control",...T.getInputProps("mod"),children:[k.jsx("option",{value:"",children:"No mods"}),k.jsx("option",{value:"VJ",children:"Rank (VJ)"}),k.jsx("option",{value:"HJ",children:"HJ"})]})]}),k.jsx("button",{disabled:l||!T.isValid(),className:"btn btn-dark",type:"submit",children:l?"Loading...":"Submit"}),f instanceof Error?k.jsx("div",{className:"alert alert-danger",children:f.message}):null]})]}):k.jsx(Xn,{radius:"md",variant:"light",color:"red",title:e.ERROR,icon:k.jsx(Mr,{}),children:"You don't have access to this page"}):null};export{Fc as default};
//# sourceMappingURL=AddResult-UOrizW5S.js.map
