import{r as Ee,u as Ht,a as Dr,j as H,b as Ln,f as wn,c as vr,d as Lr,C as wr,I as Gn,e as Gr,g as kr,h as Br,B as Hr,i as jr,G as $r,k as Pt,l as Zr,m as zr,n as Xr,o as Wr,p as Yr,q as Kr,s as Et,t as qr,A as Tt,T as qt,S as Jr,v as It,w as Jt,x as Qr}from"./index-C6jHs7tA.js";import{G as Vr,F as ei}from"./index.esm-ByIaRpwi.js";import{M as ti}from"./Modal-2ftJWa1c.js";import{u as ni}from"./useSingleChartQuery-BpcPy_2y.js";import"./Paper-B4YJ4AKW.js";import"./useFilter-q81pybn8.js";const ri={multiple:!1},kn=Ee.forwardRef((e,t)=>{const{onChange:r,children:o,multiple:n,accept:i,name:a,form:u,resetRef:g,disabled:x,capture:s,inputProps:f,...c}=Ht("FileButton",ri,e),l=Ee.useRef(null),S=()=>{!x&&l.current?.click()},b=E=>{if(E.currentTarget.files===null)return r(n?[]:null);r(n?Array.from(E.currentTarget.files):E.currentTarget.files[0]||null)};return Dr(g,()=>{l.current&&(l.current.value="")}),H.jsxs(H.Fragment,{children:[H.jsx("input",{style:{display:"none"},type:"file",accept:i,multiple:n,onChange:b,ref:Ln(t,l),name:a,form:u,capture:s,...f}),o({onClick:S,...c})]})});kn.displayName="@mantine/core/FileButton";const ii=({value:e})=>H.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(e)?e.map(t=>t.name).join(", "):e?.name}),oi={valueComponent:ii},jt=wn((e,t)=>{const r=Ht("FileInput",oi,e),{unstyled:o,vars:n,onChange:i,value:a,defaultValue:u,multiple:g,accept:x,name:s,form:f,valueComponent:c,clearable:l,clearButtonProps:S,readOnly:b,capture:I,fileInputProps:E,rightSection:v,size:O,placeholder:N,component:R,resetRef:T,classNames:M,styles:p,attributes:h,...F}=r,_=Ee.useRef(null),{resolvedClassNames:y,resolvedStyles:C}=vr({classNames:M,styles:p,props:r}),[A,P]=Lr({value:a,defaultValue:u,onChange:i,finalValue:g?[]:null}),m=Array.isArray(A)?A.length!==0:A!==null,d=v||(l&&m&&!b?H.jsx(wr,{...S,variant:"subtle",onClick:()=>P(g?[]:null),size:O,unstyled:o}):null);return Ee.useEffect(()=>{(Array.isArray(A)&&A.length===0||A===null)&&_.current?.()},[A]),H.jsx(kn,{onChange:P,multiple:g,accept:x,name:s,form:f,resetRef:Ln(_,T),disabled:b,capture:I,inputProps:E,children:L=>H.jsx(Gn,{component:R||"button",ref:t,rightSection:d,...L,...F,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:r,unstyled:o,size:O,classNames:M,styles:p,attributes:h,children:m?H.jsx(c,{value:A}):H.jsx(Gr.Placeholder,{__staticSelector:"FileInput",classNames:y,styles:C,attributes:h,children:N})})})});jt.classes=Gn.classes;jt.displayName="@mantine/core/FileInput";const si=jt,ai=["h1","h2","h3","h4","h5","h6"],ui=["xs","sm","md","lg","xl"];function ci(e,t){const r=t!==void 0?t:`h${e}`;return ai.includes(r)?{fontSize:`var(--mantine-${r}-font-size)`,fontWeight:`var(--mantine-${r}-font-weight)`,lineHeight:`var(--mantine-${r}-line-height)`}:ui.includes(r)?{fontSize:`var(--mantine-font-size-${r})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:kr(r),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Bn={root:"m_8a5d1357"};const fi={order:1},li=jr((e,{order:t,size:r,lineClamp:o,textWrap:n})=>{const i=ci(t||1,r);return{root:{"--title-fw":i.fontWeight,"--title-lh":i.lineHeight,"--title-fz":i.fontSize,"--title-line-clamp":typeof o=="number"?o.toString():void 0,"--title-text-wrap":n}}}),$t=wn((e,t)=>{const r=Ht("Title",fi,e),{classNames:o,className:n,style:i,styles:a,unstyled:u,order:g,vars:x,size:s,variant:f,lineClamp:c,textWrap:l,mod:S,attributes:b,...I}=r,E=Br({name:"Title",props:r,classes:Bn,className:n,style:i,classNames:o,styles:a,unstyled:u,attributes:b,vars:x,varsResolver:li});return[1,2,3,4,5,6].includes(g)?H.jsx(Hr,{...E("root"),component:`h${g}`,variant:f,ref:t,mod:[{order:g,"data-line-clamp":typeof c=="number"},S],size:s,...I}):null});$t.classes=Bn;$t.displayName="@mantine/core/Title";function di(e){return Vr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M228.9 79.9L51.8 403.1C40.6 423.3 55.5 448 78.9 448h354.3c23.3 0 38.2-24.7 27.1-44.9L283.1 79.9c-11.7-21.2-42.5-21.2-54.2 0zM273.6 214L270 336h-28l-3.6-122h35.2zM256 402.4c-10.7 0-19.1-8.1-19.1-18.4s8.4-18.4 19.1-18.4 19.1 8.1 19.1 18.4-8.4 18.4-19.1 18.4z"}}]})(e)}const gi="_addResultPage_1sd28_1",hi="_confirmation_1sd28_8",pi="_splitPanels_1sd28_8",mi="_screenshotPanel_1sd28_13",xi="_formPanel_1sd28_16",Si="_chartName_1sd28_19",Ei="_grid_1sd28_24",ke={addResultPage:gi,confirmation:hi,splitPanels:pi,screenshotPanel:mi,formPanel:xi,chartName:Si,grid:Ei},Ti=({okText:e="OK"}={})=>{const[t,r]=Ee.useState(!1),o=Ee.useRef(null),n=i=>{t&&(r(!1),o.current&&o.current(i))};return{renderPopup:({content:i})=>H.jsxs(ti,{opened:t,onClose:()=>n(!1),centered:!0,size:"lg",radius:"md",withCloseButton:!1,children:[i,H.jsxs($r,{justify:"space-between",mt:"md",children:[H.jsx(Pt,{color:"red",onClick:()=>n(!1),children:"Cancel"}),H.jsx(Pt,{color:"green",onClick:()=>n(!0),children:e})]})]}),confirm:()=>(r(!0),new Promise((i,a)=>{o.current=u=>{u?i():a()}}))}},Ii=e=>new Promise((t,r)=>{const o=new FileReader;o.readAsDataURL(e),o.onload=()=>t(o.result?.toString()??""),o.onerror=r});var Je={},Qt;function Ai(){if(Qt)return Je;Qt=1,Object.defineProperty(Je,"__esModule",{value:!0});const e=new RegExp("^(\\d{4}):(\\d{2}):(\\d{2}) (\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,3}))?(?:([zZ])|([-+])(\\d{2}):(\\d{2}))?$");function t(n,i){let a=n.toString(),u=i-a.length;for(;u>0;)u-=1,a=`0${a}`;return a}function r(n){const i=e.exec(n);if(i==null)return new Date(NaN);const a=new Date,u=i[8]?0:i[9]?(Number(i[10])*60+Number(i[11]))*(i[9]==="+"?1:-1):0;return a.setUTCFullYear(Number(i[1])),a.setUTCMonth(Number(i[2])-1),a.setUTCDate(Number(i[3])),a.setUTCHours(Number(i[4])),a.setUTCMinutes(Number(i[5])+u),a.setUTCSeconds(Number(i[6])),a.setUTCMilliseconds(Number(i[7])||0),a}Je.parse=r;function o(n,i,a){if(isNaN(n.getTime()))return"";const u=t(n.getUTCFullYear(),4),g=t(n.getUTCMonth()+1,2),x=t(n.getUTCDate(),2),s=t(n.getUTCHours(),2),f=t(n.getUTCMinutes(),2),c=t(n.getUTCSeconds(),2),l=i?`.${Math.round(n.getUTCMilliseconds()/10)}`:"";return`${u}:${g}:${x} ${s}:${f}:${c}${l}${a?"Z":""}`}return Je.format=o,Je}var Fi=Ai();function X(e,t,r){const o=[];for(let n=0;n<r&&t+n<e.byteLength;n++)o.push(e.getUint8(t+n));return We(o)}function bi(e,t,r){const o=[];for(let n=0;n<r&&t+n<e.byteLength;n+=2)o.push(e.getUint16(t+n));return We(o)}function We(e){return e.map(t=>String.fromCharCode(t)).join("")}function K(){for(let e=1;e<arguments.length;e++)for(const t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function Hn(e,t,r){let o=!1;Object.defineProperty(e,t,{get(){return o||(o=!0,Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:r.apply(e),writable:!0})),e[t]},configurable:!0,enumerable:!0})}function jn(e){if(typeof btoa<"u")return btoa(typeof e=="string"?e:Array.prototype.reduce.call(new Uint8Array(e),(t,r)=>t+String.fromCharCode(r),""));if(!(typeof Buffer>"u"))return typeof Buffer.from!==void 0?Buffer.from(e).toString("base64"):new Buffer(e).toString("base64")}function yi(e){const t=e.substring(e.indexOf(",")+1);if(e.indexOf(";base64")!==-1)return typeof atob<"u"?Uint8Array.from(atob(t),o=>o.charCodeAt(0)).buffer:typeof Buffer>"u"?void 0:typeof Buffer.from!==void 0?Buffer.from(t,"base64"):new Buffer(t,"base64");const r=decodeURIComponent(t);return typeof Buffer<"u"?typeof Buffer.from!==void 0?Buffer.from(r):new Buffer(r):Uint8Array.from(r,o=>o.charCodeAt(0)).buffer}let _i=class{constructor(t){if(Ci(t))throw new Error("DataView: Passed buffer type is unsupported.");this.buffer=t,this.byteLength=this.buffer.length}getUint8(t){return this.buffer.readUInt8(t)}getUint16(t,r){return r?this.buffer.readUInt16LE(t):this.buffer.readUInt16BE(t)}getUint32(t,r){return r?this.buffer.readUInt32LE(t):this.buffer.readUInt32BE(t)}getInt32(t,r){return r?this.buffer.readInt32LE(t):this.buffer.readInt32BE(t)}};function Ci(e){return typeof e!="object"||e.length===void 0||e.readUInt8===void 0||e.readUInt16LE===void 0||e.readUInt16BE===void 0||e.readUInt32LE===void 0||e.readUInt32BE===void 0||e.readInt32LE===void 0||e.readInt32BE===void 0}function oe(e){return e.map(t=>String.fromCharCode(t)).join("")}function Ut(e){if(e.length>=8){const t=oe(e.slice(0,8));if(t==="ASCII\0\0\0")return oe(e.slice(8));if(t==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(t==="UNICODE\0")return"[Unicode encoded text]";if(t==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}function st(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}const Nt=18761,Rt=19789,He={BIG_ENDIAN:Rt,LITTLE_ENDIAN:Nt,getByteOrder:Pi};function Pi(e,t){if(e.getUint16(t)===Nt)return Nt;if(e.getUint16(t)===Rt)return Rt;throw new Error("Illegal byte order value. Faulty image.")}const Vt={isTiffFile:Ui,findTiffOffsets:Ri};function Ui(e){return!!e&&e.byteLength>=4&&Ni(e)}function Ni(e){const o=e.getUint16(0)===He.LITTLE_ENDIAN;return e.getUint16(2,o)===42}function Ri(){return{hasAppMarkers:!0,tiffHeaderOffset:0}}const en={isJpegFile:Yi,findJpegOffsets:Ki},Oi=2,Mi=65496,tn=2,Te=4,he=2,Di=2,vi=10,Li=18,nn=33,rn=79,on=18,wi=8,Ot="ICC_PROFILE\0",$n=Te+Ot.length,Gi=$n+1,sn="MPF\0",Zn=65472,zn=65474,ki=65476,Bi=65499,Hi=65501,ji=65498,Xn=65504,Zt=65505,Wn=65506,$i=65517,Zi=65519,zi=65534,Xi=65535,Wi="JFIF",Mt="Exif",an="http://ns.adobe.com/xap/1.0/\0",un="http://ns.adobe.com/xmp/extension/\0",cn="Photoshop 3.0";function Yi(e){return!!e&&e.byteLength>=Oi&&e.getUint16(0)===Mi}function Ki(e){let t=tn,r,o,n,i,a,u,g,x,s;for(;t+Te+5<=e.byteLength;){if(qi(e,t))o=t+he;else if(Ji(e,t))n=t+he;else if(eo(e,t))r=e.getUint16(t+he),i=t+Di;else if(to(e,t))r=e.getUint16(t+he),a=t+vi;else if(no(e,t))g||(g=[]),r=e.getUint16(t+he),g.push(so(t,r));else if(io(e,t))g||(g=[]),r=e.getUint16(t+he),g.push(ao(t,r));else if(uo(e,t))r=e.getUint16(t+he),u=t+Li;else if(Qi(e,t)){r=e.getUint16(t+he);const f=t+on,c=r-(on-he),l=e.getUint8(t+$n),S=e.getUint8(t+Gi);x||(x=[]),x.push({offset:f,length:c,chunkNumber:l,chunksTotal:S})}else if(Vi(e,t))r=e.getUint16(t+he),s=t+wi;else if(co(e,t))r=e.getUint16(t+he);else if(fo(e,t)){t++;continue}else break;t+=he+r}return{hasAppMarkers:t>tn,fileDataOffset:o||n,jfifDataOffset:i,tiffHeaderOffset:a,iptcDataOffset:u,xmpChunks:g,iccChunks:x,mpfDataOffset:s}}function qi(e,t){return e.getUint16(t)===Zn}function Ji(e,t){return e.getUint16(t)===zn}function Qi(e,t){const r=Ot.length;return e.getUint16(t)===Wn&&X(e,t+Te,r)===Ot}function Vi(e,t){const r=sn.length;return e.getUint16(t)===Wn&&X(e,t+Te,r)===sn}function eo(e,t){const r=Mt.length;return e.getUint16(t)===Xn&&X(e,t+Te,r)===Wi&&e.getUint8(t+Te+r)===0}function to(e,t){const r=Mt.length;return e.getUint16(t)===Zt&&X(e,t+Te,r)===Mt&&e.getUint8(t+Te+r)===0}function no(e,t){return e.getUint16(t)===Zt&&ro(e,t)}function ro(e,t){const r=an.length;return X(e,t+Te,r)===an}function io(e,t){return e.getUint16(t)===Zt&&oo(e,t)}function oo(e,t){const r=un.length;return X(e,t+Te,r)===un}function so(e,t){return{dataOffset:e+nn,length:t-(nn-he)}}function ao(e,t){return{dataOffset:e+rn,length:t-(rn-he)}}function uo(e,t){const r=cn.length;return e.getUint16(t)===$i&&X(e,t+Te,r)===cn&&e.getUint8(t+Te+r)===0}function co(e,t){const r=e.getUint16(t);return r>=Xn&&r<=Zi||r===zi||r===Zn||r===zn||r===ki||r===Bi||r===Hi||r===ji}function fo(e,t){return e.getUint16(t)===Xi}const fn={isPngFile:ho,findPngOffsets:po},Dt=`PNG\r

`,at=4,_e=4,et=0,je=at,le=at+_e,vt="XML:com.adobe.xmp\0",lo="tEXt",Yn="iTXt",Kn="pHYs",qn="tIME",go="eXIf";function ho(e){return!!e&&X(e,0,Dt.length)===Dt}function po(e){const r={hasAppMarkers:!1};let o=Dt.length;for(;o+at+_e<=e.byteLength;){if(mo(e,o))r.hasAppMarkers=!0,r.pngHeaderOffset=o+le;else if(xo(e,o)){const n=Io(e,o);n!==void 0&&(r.hasAppMarkers=!0,r.xmpChunks=[{dataOffset:n,length:e.getUint32(o+et)-(n-(o+le))}])}else if(So(e,o)){r.hasAppMarkers=!0;const n=X(e,o+je,_e);r.pngTextChunks||(r.pngTextChunks=[]),r.pngTextChunks.push({length:e.getUint32(o+et),type:n,offset:o+le})}else Eo(e,o)?(r.hasAppMarkers=!0,r.tiffHeaderOffset=o+le):To(e,o)&&(r.hasAppMarkers=!0,r.pngChunkOffsets||(r.pngChunkOffsets=[]),r.pngChunkOffsets.push(o+et));o+=e.getUint32(o+et)+at+_e+4}return r}function mo(e,t){return X(e,t+je,_e)==="IHDR"}function xo(e,t){return X(e,t+je,_e)==="iTXt"&&X(e,t+le,vt.length)===vt}function So(e,t){const r="tEXt",o="iTXt",n=X(e,t+je,_e);return n===r||n===o}function Eo(e,t){return X(e,t+je,_e)===go}function To(e,t){const r=[Kn,qn],o=X(e,t+je,_e);return r.includes(o)}function Io(e,t){t+=le+vt.length+1+1;let n=0;for(;n<2&&t<e.byteLength;)e.getUint8(t)===0&&n++,t++;if(!(n<2))return t}const ln={isHeicFile:Ao,findHeicOffsets:Fo};function Ao(e){if(!e)return!1;const t="ftyp",r=4,o=["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"],i=X(e,r+t.length,4);return X(e,r,t.length)===t&&o.indexOf(i)!==-1}function Fo(e){{const{offset:t,length:r}=bo(e);if(t===void 0)return{hasAppMarkers:!1};const o=Math.min(t+r,e.byteLength),{exifItemOffset:n,ilocOffset:i,colrOffset:a}=Po(e,t,o),u=Uo(e,n,i,o),g=No(e,a,o);return{hasAppMarkers:u!==void 0||g!==void 0,tiffHeaderOffset:u,iccChunks:g}}}function bo(e){let i=0;for(;i+4+4<=e.byteLength;){const a=Jn(e,i);if(a>=8&&X(e,i+4,4)==="meta")return{offset:i,length:a};i+=a}return{offset:void 0,length:0}}function Jn(e,t){const o=e.getUint32(t);return yo(o)?e.byteLength-t:_o(o)&&Co(e,t)?e.getUint32(t+12):o}function yo(e){return e===0}function _o(e){return e===1}function Co(e,t){return e.getUint32(t+8)===0}function Po(e,t,r){const i={ilocOffset:void 0,exifItemOffset:void 0,colrOffset:void 0};for(;t+4<=r&&(!i.ilocOffset||!i.exifItemOffset||!i.colrOffset);){const a=X(e,t,4);a==="iloc"?i.ilocOffset=t:a==="Exif"?i.exifItemOffset=t+-4:a==="colr"&&(i.colrOffset=t+-4),t++}return i}function Uo(e,t,r,o){if(!r||!t||t+2>o)return;const s=e.getUint16(t);for(r+=12;r+16<=o;){if(e.getUint16(r)===s){const c=e.getUint32(r+8);if(c+4<=e.byteLength){const S=e.getUint32(c)+4;return c+S}}r+=16}}function No(e,t,r){if(!t||t+12>r)return;const a=X(e,t+8,4);if(!(a!=="prof"&&a!=="rICC"))return[{offset:t+12,length:Jn(e,t)-12,chunkNumber:1,chunksTotal:1}]}const dn={isWebpFile:Ro,findOffsets:Oo};function Ro(e){const r="RIFF",n="WEBP";return!!e&&X(e,0,r.length)===r&&X(e,8,n.length)===n}function Oo(e){const o="Exif\0\0";let i=12,a=!1,u,g,x;for(;i+8<e.byteLength;){const s=X(e,i,4),f=e.getUint32(i+4,!0);s==="EXIF"?(a=!0,X(e,i+8,o.length)===o?u=i+8+o.length:u=i+8):s==="XMP "?(a=!0,g=[{dataOffset:i+8,length:f}]):s==="ICCP"&&(a=!0,x=[{offset:i+8,length:f,chunkNumber:1,chunksTotal:1}]),i+=8+(f%2===0?f:f+1)}return{hasAppMarkers:a,tiffHeaderOffset:u,xmpChunks:g,iccChunks:x}}const Mo={parseAppMarkers:Do};function Do(e){if(Vt.isTiffFile(e))return Vt.findTiffOffsets();if(en.isJpegFile(e))return en.findJpegOffsets(e);if(fn.isPngFile(e))return fn.findPngOffsets(e);if(ln.isHeicFile(e))return ln.findHeicOffsets(e);if(dn.isWebpFile(e))return dn.findOffsets(e);throw new Error("Invalid image format")}const Qn={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},Lt={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},B={getAsciiValue:vo,getByteAt:Vn,getAsciiAt:Lo,getShortAt:wo,getLongAt:ut,getRationalAt:Go,getUndefinedAt:ko,getSlongAt:wt,getSrationalAt:Bo,getIfdPointerAt:Ho,typeSizes:Qn,tagTypes:Lt,getTypeSize:jo};function vo(e){return e.map(t=>String.fromCharCode(t))}function Vn(e,t){return e.getUint8(t)}function Lo(e,t){return e.getUint8(t)}function wo(e,t,r){return e.getUint16(t,r===He.LITTLE_ENDIAN)}function ut(e,t,r){return e.getUint32(t,r===He.LITTLE_ENDIAN)}function Go(e,t,r){return[ut(e,t,r),ut(e,t+4,r)]}function ko(e,t){return Vn(e,t)}function wt(e,t,r){return e.getInt32(t,r===He.LITTLE_ENDIAN)}function Bo(e,t,r){return[wt(e,t,r),wt(e,t+4,r)]}function Ho(e,t,r){return ut(e,t,r)}function jo(e){if(Lt[e]===void 0)throw new Error("No such type found.");return Qn[Lt[e]]}const z={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace(e){return e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(e){return e.map(t=>{if(t===49)return"Y";if(t===50)return"Cb";if(t===51)return"Cr";if(t===52)return"R";if(t===53)return"G";if(t===54)return"B"}).join("")},Contrast(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},CustomRendered(e){return e===0?"Normal process":e===1?"Custom process":"Unknown"},ExposureMode(e){return e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},ExposureProgram(e){return e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},ExposureTime(e){return e[0]>=e[1]?`${Math.round(e[0]/e[1])}`:e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${e[0]/e[1]}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700 – 7100K)":e===13?"Day white fluorescent (N 4600 – 5400K)":e===14?"Cool white fluorescent (W 3900 – 4500K)":e===15?"White fluorescent (WW 3200 – 3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown",MeteringMode(e){return e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},ResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},Saturation(e){return e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},SceneCaptureType(e){return e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},Sharpness(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},ShutterSpeedValue(e){const t=Math.pow(2,e[0]/e[1]);return t<=1?`${Math.round(1/t)}`:`1/${Math.round(t)}`},WhiteBalance(e){return e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])},$o={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:z.XResolution},283:{name:"YResolution",description:z.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:z.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{const t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(r=>t[r]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(t=>""+t[0]/t[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(t=>""+t[0]/t[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:z.LightSource},50779:{name:"CalibrationIlluminant2",description:z.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"},Zo={33434:{name:"ExposureTime",description:z.ExposureTime},33437:{name:"FNumber",description:z.FNumber},34850:{name:"ExposureProgram",description:z.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>oe(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:z.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:z.ShutterSpeedValue},37378:{name:"ApertureValue",description:z.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:z.MeteringMode},37384:{name:"LightSource",description:z.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:z.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:Ut},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" °C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" °"},40960:{name:"FlashpixVersion",description:e=>e.map(t=>String.fromCharCode(t)).join("")},40961:{name:"ColorSpace",description:z.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:z.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,t])=>`X: ${e}, Y: ${t}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:z.CustomRendered},41986:{name:"ExposureMode",description:z.ExposureMode},41987:{name:"WhiteBalance",description:z.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:e=>e===0?"Unknown":e},41990:{name:"SceneCaptureType",description:z.SceneCaptureType},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:z.Contrast},41993:{name:"Saturation",description:z.Saturation},41994:{name:"Sharpness",description:z.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{const t=`${e[0][0]/e[0][1]}-${e[1][0]/e[1][1]} mm`;return e[3][1]===0?`${t} f/?`:`${t} f/${1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},zo={0:{name:"GPSVersionID",description:e=>e[0]===2&&e[1]===2&&e[2]===0&&e[3]===0?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:st},3:{name:"GPSLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:st},5:{name:"GPSAltitudeRef",description:e=>e===0?"Sea level":e===1?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map(([t,r])=>{const o=t/r;return/^\d(\.|$)/.test(`${o}`)?`0${o}`:o}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{const t=e.join("");return t==="A"?"Measurement in progress":t==="V"?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{const t=e.join("");return t==="2"?"2-dimensional measurement":t==="3"?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers per hour":t==="M"?"Miles per hour":t==="N"?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers":t==="M"?"Miles":t==="N"?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:Ut},28:{name:"GPSAreaInformation",description:Ut},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>e===0?"Measurement without differential correction":e===1?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"},Xo={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>oe(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"},Wo={45056:{name:"MPFVersion",description:e=>oe(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"},gn=K({},$o,Zo),Oe={"0th":gn,exif:gn,gps:zo,interoperability:Xo,mpf:Wo},hn="Exif IFD Pointer",pn="GPS Info IFD Pointer",mn="Interoperability IFD Pointer",Yo={1:B.getByteAt,2:B.getAsciiAt,3:B.getShortAt,4:B.getLongAt,5:B.getRationalAt,7:B.getUndefinedAt,9:B.getSlongAt,10:B.getSrationalAt,13:B.getIfdPointerAt},xn={read:Ko,readMpf:es};function Ko(e,t,r){const o=He.getByteOrder(e,t);let n=qo(e,t,o,r);return n=Jo(n,e,t,o,r),n=Qo(n,e,t,o,r),n=Vo(n,e,t,o,r),n}function qo(e,t,r,o){return Ye(e,"0th",t,er(e,t,r),r,o)}function er(e,t,r){return t+B.getLongAt(e,t+4,r)}function Jo(e,t,r,o,n){return e[hn]!==void 0?K(e,Ye(t,"exif",r,r+e[hn].value,o,n)):e}function Qo(e,t,r,o,n){return e[pn]!==void 0?K(e,Ye(t,"gps",r,r+e[pn].value,o,n)):e}function Vo(e,t,r,o,n){return e[mn]!==void 0?K(e,Ye(t,"interoperability",r,r+e[mn].value,o,n)):e}function es(e,t,r){const o=He.getByteOrder(e,t),n=Ye(e,"mpf",t,er(e,t,o),o,r);return ts(e,t,n,o)}function ts(e,t,r,o){if(!r.MPEntry)return r;const i=[];for(let a=0;a<Math.ceil(r.MPEntry.value.length/16);a++){i[a]={};const u=Qe(r.MPEntry.value,a*16,B.getTypeSize("LONG"),o);i[a].ImageFlags=ns(u),i[a].ImageFormat=rs(u),i[a].ImageType=is(u);const g=Qe(r.MPEntry.value,a*16+4,B.getTypeSize("LONG"),o);i[a].ImageSize={value:g,description:""+g};const x=os(a)?0:Qe(r.MPEntry.value,a*16+8,B.getTypeSize("LONG"),o)+t;i[a].ImageOffset={value:x,description:""+x};const s=Qe(r.MPEntry.value,a*16+12,B.getTypeSize("SHORT"),o);i[a].DependentImage1EntryNumber={value:s,description:""+s};const f=Qe(r.MPEntry.value,a*16+14,B.getTypeSize("SHORT"),o);i[a].DependentImage2EntryNumber={value:f,description:""+f},i[a].image=e.buffer.slice(x,x+g),Hn(i[a],"base64",function(){return jn(this.image)})}return r.Images=i,r}function Qe(e,t,r,o){if(o===He.LITTLE_ENDIAN){let i=0;for(let a=0;a<r;a++)i+=e[t+a]<<8*a;return i}let n=0;for(let i=0;i<r;i++)n+=e[t+i]<<8*(r-1-i);return n}function ns(e){const t=[e>>31&1,e>>30&1,e>>29&1],r=[];return t[0]&&r.push("Dependent Parent Image"),t[1]&&r.push("Dependent Child Image"),t[2]&&r.push("Representative Image"),{value:t,description:r.join(", ")||"None"}}function rs(e){const t=e>>24&7;return{value:t,description:t===0?"JPEG":"Unknown"}}function is(e){const t=e&16777215;return{value:t,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[t]||"Unknown"}}function os(e){return e===0}function Ye(e,t,r,o,n,i){const a=B.getTypeSize("SHORT"),u=12,g={},x=ss(e,o,n);o+=a;for(let s=0;s<x&&!(o+u>e.byteLength);s++){const f=as(e,t,r,o,n,i);f!==void 0&&(g[f.name]={id:f.id,value:f.value,description:f.description}),o+=u}if(o<e.byteLength-B.getTypeSize("LONG")){const s=B.getLongAt(e,o,n);s!==0&&(g.Thumbnail=Ye(e,t,r,r+s,n,!0))}return g}function ss(e,t,r){return t+B.getTypeSize("SHORT")<=e.byteLength?B.getShortAt(e,t,r):0}function as(e,t,r,o,n,i){const u=B.getTypeSize("SHORT"),g=u+B.getTypeSize("SHORT"),x=g+B.getTypeSize("LONG"),s=B.getShortAt(e,o,n),f=B.getShortAt(e,o+u,n),c=B.getLongAt(e,o+g,n);let l;if(B.typeSizes[f]===void 0||!i&&Oe[t][s]===void 0)return;if(us(f,c))l=Sn(e,o+x,f,c,n);else{const I=B.getLongAt(e,o+x,n);if(cs(e,r,I,f,c)){const E=s===33723;l=Sn(e,r+I,f,c,n,E)}else l="<faulty value>"}f===B.tagTypes.ASCII&&(l=fs(l),l=ls(l));let S=`undefined-${s}`,b=l;if(Oe[t][s]!==void 0)if(Oe[t][s].name!==void 0&&Oe[t][s].description!==void 0){S=Oe[t][s].name;try{b=Oe[t][s].description(l)}catch{b=En(l)}}else f===B.tagTypes.RATIONAL||f===B.tagTypes.SRATIONAL?(S=Oe[t][s],b=""+l[0]/l[1]):(S=Oe[t][s],b=En(l));return{id:s,name:S,value:l,description:b}}function us(e,t){return B.typeSizes[e]*t<=B.getTypeSize("LONG")}function Sn(e,t,r,o,n,i=!1){let a=[];i&&(o=o*B.typeSizes[r],r=B.tagTypes.BYTE);for(let u=0;u<o;u++)a.push(Yo[r](e,t,n)),t+=B.typeSizes[r];return r===B.tagTypes.ASCII?a=B.getAsciiValue(a):a.length===1&&(a=a[0]),a}function cs(e,t,r,o,n){return t+r+B.typeSizes[o]*n<=e.byteLength}function fs(e){const t=[];let r=0;for(let o=0;o<e.length;o++){if(e[o]==="\0"){r++;continue}t[r]===void 0&&(t[r]=""),t[r]+=e[o]}return t}function ls(e){try{return e.map(t=>decodeURIComponent(escape(t)))}catch{return e}}function En(e){return e instanceof Array?e.join(", "):e}const ds={read:gs};function gs(e,t){const r=hs(e,t),o=Ss(e,t,r);return{"Bits Per Sample":ps(e,t,r),"Image Height":ms(e,t,r),"Image Width":xs(e,t,r),"Color Components":o,Subsampling:o&&Es(e,t,o.value,r)}}function hs(e,t){return B.getShortAt(e,t)}function ps(e,t,r){if(3>r)return;const i=B.getByteAt(e,t+2);return{value:i,description:""+i}}function ms(e,t,r){if(5>r)return;const i=B.getShortAt(e,t+3);return{value:i,description:`${i}px`}}function xs(e,t,r){if(7>r)return;const i=B.getShortAt(e,t+5);return{value:i,description:`${i}px`}}function Ss(e,t,r){if(8>r)return;const i=B.getByteAt(e,t+7);return{value:i,description:""+i}}function Es(e,t,r,o){if(8+3*r>o)return;const a=[];for(let u=0;u<r;u++){const g=t+8+u*3;a.push([B.getByteAt(e,g),B.getByteAt(e,g+1),B.getByteAt(e,g+2)])}return{value:a,description:a.length>1?Ts(a)+Is(a):""}}function Ts(e){const t={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(r=>t[r[0]]).join("")}function Is(e){const t={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return e.length===0||e[0][1]===void 0||t[e[0][1]]===void 0?"":t[e[0][1]]}const As={read:Fs};function Fs(e,t){const r=bs(e,t),o=Ns(e,t,r),n=Rs(e,t,r),i={"JFIF Version":ys(e,t,r),"Resolution Unit":_s(e,t,r),XResolution:Ps(e,t,r),YResolution:Us(e,t,r),"JFIF Thumbnail Width":o,"JFIF Thumbnail Height":n};if(o!==void 0&&n!==void 0){const a=Os(e,t,3*o.value*n.value,r);a&&(i["JFIF Thumbnail"]=a)}for(const a in i)i[a]===void 0&&delete i[a];return i}function bs(e,t){return B.getShortAt(e,t)}function ys(e,t,r){if(9>r)return;const i=B.getByteAt(e,t+7),a=B.getByteAt(e,t+7+1);return{value:i*256+a,description:i+"."+a}}function _s(e,t,r){if(10>r)return;const i=B.getByteAt(e,t+9);return{value:i,description:Cs(i)}}function Cs(e){return e===0?"None":e===1?"inches":e===2?"cm":"Unknown"}function Ps(e,t,r){if(12>r)return;const i=B.getShortAt(e,t+10);return{value:i,description:""+i}}function Us(e,t,r){if(14>r)return;const i=B.getShortAt(e,t+12);return{value:i,description:""+i}}function Ns(e,t,r){if(15>r)return;const i=B.getByteAt(e,t+14);return{value:i,description:`${i}px`}}function Rs(e,t,r){if(16>r)return;const i=B.getByteAt(e,t+15);return{value:i,description:`${i}px`}}function Os(e,t,r,o){return r===0||16+r>o?void 0:{value:e.buffer.slice(t+16,t+16+r),description:"<24-bit RGB pixel data>"}}const Me={iptc:{256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:At},336:{name:"Time Sent",description:Ft},346:{name:"Coded Character Set",description:Tn,encoding_name:Tn},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>oe(e)==="01"?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:e=>{const t=oe(e).split(":");return t[2]+(t[3]?"/"+t[3]:"")+(t[4]?"/"+t[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{const t=oe(e);return t==="01"?"Object Kill":t==="02"?"Object Replace":t==="03"?"Object Append":t==="04"?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:At},572:{name:"Time Created",description:Ft},574:{name:"Digital Creation Date",description:At},575:{name:"Digital Creation Time",description:Ft},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{const t=oe(e);return t==="a"?"morning":t==="p"?"evening":t==="b"?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{const t=oe(e);return t==="P"?"Portrait":t==="L"?"Landscape":t==="S"?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{const t=oe(e),r=t.charAt(0),o=t.charAt(1);let n="";return r==="1"?n+="Mono":r==="2"&&(n+="Stereo"),o==="A"?n+=", actuality":o==="C"?n+=", question and answer session":o==="M"?n+=", music, transmitted by itself":o==="Q"?n+=", response to a question":o==="R"?n+=", raw sound":o==="S"?n+=", scener":o==="V"?n+=", voicer":o==="W"&&(n+=", wrap"),n!==""?n:t}},663:{name:"Audio Sampling Rate",description:e=>parseInt(oe(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{const t=parseInt(oe(e),10);return t+(t===1?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{const t=oe(e);return t.length>=6?t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2):t}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>e.length===2?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(e.length===2){const t=(e[0]<<8)+e[1];return t===0?"No ObjectData":t===1?"IPTC-NAA Digital Newsphoto Parameter Record":t===2?"IPTC7901 Recommended Message Format":t===3?"Tagged Image File Format (Adobe/Aldus Image data)":t===4?"Illustrator (Adobe Graphics data)":t===5?"AppleSingle (Apple Computer Inc)":t===6?"NAA 89-3 (ANPA 1312)":t===7?"MacBinary II":t===8?"IPTC Unstructured Character Oriented File Format (UCOFF)":t===9?"United Press International ANPA 1312 variant":t===10?"United Press International Down-Load Message":t===11?"JPEG File Interchange (JFIF)":t===12?"Photo-CD Image-Pac (Eastman Kodak)":t===13?"Microsoft Bit Mapped Graphics File [*.BMP]":t===14?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":t===15?"Audio plus Moving Video [*.AVI] (Microsoft)":t===16?"PC DOS/Windows Executable Files [*.COM][*.EXE]":t===17?"Compressed Binary File [*.ZIP] (PKWare Inc)":t===18?"Audio Interchange File Format AIFF (Apple Computer Inc)":t===19?"RIFF Wave (Microsoft Corporation)":t===20?"Freehand (Macromedia/Aldus)":t===21?'Hypertext Markup Language "HTML" (The Internet Society)':t===22?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":t===23?"MPEG 2 Audio Layer 3, ISO/IEC":t===24?"Portable Document File (*.PDF) Adobe":t===25?"News Industry Text Format (NITF)":t===26?"Tape Archive (*.TAR)":t===27?"Tidningarnas Telegrambyrå NITF version (TTNITF DTD)":t===28?"Ritzaus Bureau NITF version (RBNITF DTD)":t===29?"Corel Draw [*.CDR]":`Unknown format ${t}`}return oe(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,t)=>{const r={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},o=oe(e);if(t["ObjectData Preview File Format"]){const n=oe(t["ObjectData Preview File Format"].value);if(r[n]&&r[n][o])return r[n][o]}return o}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}}}};function At(e){const t=oe(e);return t.length>=8?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2):t}function Ft(e){const t=oe(e);let r=t;return t.length>=6&&(r=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2),t.length===11&&(r+=t.substr(6,1)+t.substr(7,2)+":"+t.substr(9,2))),r}function Tn(e){const t=oe(e);return t==="\x1B%G"?"UTF-8":t==="\x1B%5"?"Windows-1252":t==="\x1B%/G"?"UTF-8 Level 1":t==="\x1B%/H"?"UTF-8 Level 2":t==="\x1B%/I"?"UTF-8 Level 3":t==="\x1B/A"?"ISO-8859-1":t==="\x1B/B"?"ISO-8859-2":t==="\x1B/C"?"ISO-8859-3":t==="\x1B/D"?"ISO-8859-4":t==="\x1B/@"?"ISO-8859-5":t==="\x1B/G"?"ISO-8859-6":t==="\x1B/F"?"ISO-8859-7":t==="\x1B/H"?"ISO-8859-8":"Unknown"}const Ms={get:Ds};function Ds(){if(typeof TextDecoder<"u")return TextDecoder}const vs=5,tr={decode:Ls,TAG_HEADER_SIZE:vs};function Ls(e,t){const r=Ms.get();if(typeof r<"u"&&e!==void 0)try{return new r(e).decode(Uint8Array.from(t))}catch{}const o=t.map(n=>String.fromCharCode(n)).join("");return ws(o)}function ws(e){try{return decodeURIComponent(escape(e))}catch{return e}}const Gs=943868237,nr=4,bt=nr+8,ks=1028,rr=5,In={read:Bs};function Bs(e,t,r){try{if(Array.isArray(e))return An(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,r);const{naaBlock:o,dataOffset:n}=Hs(e,t);return An(e,o,n,r)}catch{return{}}}function Hs(e,t){for(;t+bt<=e.byteLength;){const r=js(e,t);if($s(r))return{naaBlock:r,dataOffset:t+bt};t+=bt+r.size+Zs(r)}throw new Error("No IPTC NAA resource block.")}function js(e,t){if(e.getUint32(t,!1)!==Gs)throw new Error("Not an IPTC resource block.");return{type:e.getUint16(t+nr),size:e.getUint16(t+10)}}function $s(e){return e.type===ks}function Zs(e){return e.size%2!==0?1:0}function An(e,t,r,o){const n={};let i;const a=r+t.size;for(;r<a&&r<e.byteLength;){const{tag:u,tagSize:g}=zs(e,r,n,i,o);if(u===null)break;u&&("encoding"in u&&(i=u.encoding),n[u.name]===void 0||u.repeatable===void 0?n[u.name]={id:u.id,value:u.value,description:u.description}:(n[u.name]instanceof Array||(n[u.name]=[{id:n[u.name].id,value:n[u.name].value,description:n[u.name].description}]),n[u.name].push({id:u.id,value:u.value,description:u.description}))),r+=rr+g}return n}function zs(e,t,r,o,n){if(Xs(e,t))return{tag:null,tagSize:0};const u=e.getUint16(t+1),g=e.getUint16(t+3);if(!n&&!Me.iptc[u])return{tag:void 0,tagSize:g};const x=Ws(e,t+rr,g),s={id:u,name:Ys(Me.iptc[u],u,x),value:x,description:Js(Me.iptc[u],x,r,o)};return ea(u)&&(s.repeatable=!0),ta(u)&&(s.encoding=Me.iptc[u].encoding_name(x)),{tag:s,tagSize:g}}function Xs(e,t){return e.getUint8(t)!==28}function Ws(e,t,r){const o=[];for(let n=0;n<r;n++)o.push(e.getUint8(t+n));return o}function Ys(e,t,r){return e?Ks(e)?e:qs(e)?e.name(r):e.name:`undefined-${t}`}function Ks(e){return typeof e=="string"}function qs(e){return typeof e.name=="function"}function Js(e,t,r,o){if(Vs(e))try{return e.description(t,r)}catch{}return Qs(e,t)?tr.decode(o,t):t}function Qs(e,t){return e&&t instanceof Array}function Vs(e){return e&&e.description!==void 0}function ea(e){return Me.iptc[e]&&Me.iptc[e].repeatable}function ta(e){return Me.iptc[e]&&Me.iptc[e].encoding_name!==void 0}const rt={"tiff:Orientation"(e){return e==="1"?"Horizontal (normal)":e==="2"?"Mirror horizontal":e==="3"?"Rotate 180":e==="4"?"Mirror vertical":e==="5"?"Mirror horizontal and rotate 270 CW":e==="6"?"Rotate 90 CW":e==="7"?"Mirror horizontal and rotate 90 CW":e==="8"?"Rotate 270 CW":e},"tiff:ResolutionUnit":e=>z.ResolutionUnit(parseInt(e,10)),"tiff:XResolution":e=>Ze(z.XResolution,e),"tiff:YResolution":e=>Ze(z.YResolution,e),"exif:ApertureValue":e=>Ze(z.ApertureValue,e),"exif:GPSLatitude":Fn,"exif:GPSLongitude":Fn,"exif:FNumber":e=>Ze(z.FNumber,e),"exif:FocalLength":e=>Ze(z.FocalLength,e),"exif:FocalPlaneResolutionUnit":e=>z.FocalPlaneResolutionUnit(parseInt(e,10)),"exif:ColorSpace":e=>z.ColorSpace(na(e)),"exif:ComponentsConfiguration"(e,t){if(/^\d, \d, \d, \d$/.test(t)){const r=t.split(", ").map(o=>o.charCodeAt(0));return z.ComponentsConfiguration(r)}return t},"exif:Contrast":e=>z.Contrast(parseInt(e,10)),"exif:CustomRendered":e=>z.CustomRendered(parseInt(e,10)),"exif:ExposureMode":e=>z.ExposureMode(parseInt(e,10)),"exif:ExposureProgram":e=>z.ExposureProgram(parseInt(e,10)),"exif:ExposureTime"(e){return ir(e)?z.ExposureTime(e.split("/").map(t=>parseInt(t,10))):e},"exif:MeteringMode":e=>z.MeteringMode(parseInt(e,10)),"exif:Saturation":e=>z.Saturation(parseInt(e,10)),"exif:SceneCaptureType":e=>z.SceneCaptureType(parseInt(e,10)),"exif:Sharpness":e=>z.Sharpness(parseInt(e,10)),"exif:ShutterSpeedValue":e=>Ze(z.ShutterSpeedValue,e),"exif:WhiteBalance":e=>z.WhiteBalance(parseInt(e,10))};function Ze(e,t){return ir(t)?e(t.split("/")):t}function na(e){return e.substring(0,2)==="0x"?parseInt(e.substring(2),16):parseInt(e,10)}function ir(e){return/^-?\d+\/-?\d+$/.test(e)}function Fn(e){const[t,r]=e.split(",");if(t!==void 0&&r!==void 0){const o=parseFloat(t),n=parseFloat(r),i=r.charAt(r.length-1);if(!Number.isNaN(o)&&!Number.isNaN(n))return""+(o+n/60)+i}return e}const ra={get:ia};function ia(){if(typeof DOMParser<"u")return DOMParser;try{return __non_webpack_require__("@xmldom/xmldom").DOMParser}catch{return}}const bn={read:oa};function oa(e,t){return typeof e=="string"?_n({},e):sa(e,t).reduce(_n,{})}function sa(e,t){if(t.length===0)return[];const r=[yn(e,t.slice(0,1))];return t.length>1&&r.push(yn(e,t.slice(1))),r}function yn(e,t){const r=t.reduce((i,a)=>i+a.length,0),o=new Uint8Array(r);let n=0;for(let i=0;i<t.length;i++){const a=t[i],u=e.buffer.slice(a.dataOffset,a.dataOffset+a.length);o.set(new Uint8Array(u),n),n+=a.length}return new DataView(o.buffer)}function _n(e,t){try{const{doc:r,raw:o}=aa(t);e._raw=(e._raw||"")+o;const n=or(r);return K(e,ar(sr(n,!0)))}catch{return e}}function aa(e){const t=ra.get();if(!t)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),new Error;const r=new t,o=typeof e=="string"?e:X(e,0,e.byteLength),n=r.parseFromString(ua(o),"application/xml");if(n.documentElement.nodeName==="parsererror")throw new Error(n.documentElement.textContent);return{doc:n,raw:o}}function ua(e){return e.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")}function or(e){for(let t=0;t<e.childNodes.length;t++){if(e.childNodes[t].tagName==="x:xmpmeta")return or(e.childNodes[t]);if(e.childNodes[t].tagName==="rdf:RDF")return e.childNodes[t]}throw new Error}function sr(e,t=!1){const r=ca(e);return fa(r)?t?{}:la(r[0]):da(r)}function ca(e){const t=[];for(let r=0;r<e.childNodes.length;r++)t.push(e.childNodes[r]);return t}function fa(e){return e.length===1&&e[0].nodeName==="#text"}function la(e){return e.nodeValue}function da(e){const t={};return e.forEach(r=>{if(ga(r)){const o=ha(r);t[r.nodeName]!==void 0?(Array.isArray(t[r.nodeName])||(t[r.nodeName]=[t[r.nodeName]]),t[r.nodeName].push(o)):t[r.nodeName]=o}}),t}function ga(e){return e.nodeName&&e.nodeName!=="#text"}function ha(e){return{attributes:pa(e),value:sr(e)}}function pa(e){const t={};for(let r=0;r<e.attributes.length;r++)t[e.attributes[r].nodeName]=decodeURIComponent(escape(e.attributes[r].value));return t}function ar(e){const t={};if(typeof e=="string")return e;for(const r in e){let o=e[r];Array.isArray(o)||(o=[o]),o.forEach(n=>{K(t,zt(n.attributes)),typeof n.value=="object"&&K(t,ur(n.value))})}return t}function zt(e){const t={};for(const r in e)ma(r)&&(t[ht(r)]={value:e[r],attributes:{},description:Pe(e[r],r)});return t}function ma(e){return e!=="rdf:parseType"&&!gt(e)}function gt(e){return e.split(":")[0]==="xmlns"}function ht(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function Pe(e,t=void 0){if(Array.isArray(e)){const r=xa(e);return t&&typeof rt[t]=="function"?rt[t](e,r):r}if(typeof e=="object")return Sa(e);try{return t&&typeof rt[t]=="function"?rt[t](e):decodeURIComponent(escape(e))}catch{return e}}function xa(e){return e.map(t=>t.value!==void 0?Pe(t.value):Pe(t)).join(", ")}function Sa(e){const t=[];for(const r in e)t.push(`${Ea(r)}: ${Pe(e[r].value)}`);return t.join("; ")}function Ea(e){return e==="CiAdrCity"?"CreatorCity":e==="CiAdrCtry"?"CreatorCountry":e==="CiAdrExtadr"?"CreatorAddress":e==="CiAdrPcode"?"CreatorPostalCode":e==="CiAdrRegion"?"CreatorRegion":e==="CiEmailWork"?"CreatorWorkEmail":e==="CiTelWork"?"CreatorWorkPhone":e==="CiUrlWork"?"CreatorWorkUrl":e}function ur(e){const t={};for(const r in e)gt(r)||(t[ht(r)]=Ta(e[r],r));return t}function Ta(e,t){return cr(e)?fr(e,t):lr(e)?dr(e,t):gr(e)?hr(e,t):Fa(e)?ba(e,t):mr(e,t)}function cr(e){return e.attributes["rdf:parseType"]==="Resource"&&e.value["rdf:value"]!==void 0||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]!==void 0}function fr(e,t){const r=tt(e);e.value["rdf:Description"]!==void 0&&(e=e.value["rdf:Description"]),K(r,tt(e),Ia(e));const o=Aa(e);return{value:o,attributes:r,description:Pe(o,t)}}function tt(e){const t={};for(const r in e.attributes)r!=="rdf:parseType"&&r!=="rdf:resource"&&!gt(r)&&(t[ht(r)]=e.attributes[r]);return t}function Ia(e){const t={};for(const r in e.value)r!=="rdf:value"&&!gt(r)&&(t[ht(r)]=e.value[r].value);return t}function Aa(e){return xr(e.value["rdf:value"])||e.value["rdf:value"].value}function lr(e){return e.attributes["rdf:parseType"]==="Resource"||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]===void 0}function dr(e,t){const r={value:{},attributes:{}};return e.value["rdf:Description"]!==void 0&&(K(r.value,zt(e.value["rdf:Description"].attributes)),K(r.attributes,tt(e)),e=e.value["rdf:Description"]),K(r.value,ur(e.value)),r.description=Pe(r.value,t),r}function gr(e){return Object.keys(e.value).length===0&&e.attributes["xml:lang"]===void 0&&e.attributes["rdf:resource"]===void 0}function hr(e,t){const r=zt(e.attributes);return{value:r,attributes:{},description:Pe(r,t)}}function Fa(e){return pr(e.value)!==void 0}function pr(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function ba(e,t){let r=pr(e.value).value["rdf:li"];const o=tt(e),n=[];return r===void 0?r=[]:Array.isArray(r)||(r=[r]),r.forEach(i=>{n.push(ya(i))}),{value:n,attributes:o,description:Pe(n,t)}}function ya(e){return cr(e)?fr(e):lr(e)?dr(e).value:gr(e)?hr(e).value:mr(e)}function mr(e,t){const r=xr(e)||ar(e.value);return{value:r,attributes:tt(e),description:Pe(r,t)}}function xr(e){return e.attributes&&e.attributes["rdf:resource"]}const Cn={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},Pn={4:{name:"Preferred CMM type",value:(e,t)=>X(e,t,4),description:e=>e!==null?yt(e):""},8:{name:"Profile Version",value:(e,t)=>e.getUint8(t).toString(10)+"."+(e.getUint8(t+1)>>4).toString(10)+"."+(e.getUint8(t+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,t)=>X(e,t,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,t)=>X(e,t,4)},20:{name:"Connection Space",value:(e,t)=>X(e,t,4)},24:{name:"ICC Profile Date",value:(e,t)=>_a(e,t).toISOString()},36:{name:"ICC Signature",value:(e,t)=>Ca(e.buffer.slice(t,t+4))},40:{name:"Primary Platform",value:(e,t)=>X(e,t,4),description:e=>yt(e)},48:{name:"Device Manufacturer",value:(e,t)=>X(e,t,4),description:e=>yt(e)},52:{name:"Device Model Number",value:(e,t)=>X(e,t,4)},64:{name:"Rendering Intent",value:(e,t)=>e.getUint32(t),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,t)=>X(e,t,4)}};function _a(e,t){const r=e.getUint16(t),o=e.getUint16(t+2)-1,n=e.getUint16(t+4),i=e.getUint16(t+6),a=e.getUint16(t+8),u=e.getUint16(t+10);return new Date(Date.UTC(r,o,n,i,a,u))}function Ca(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function yt(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}const Un={read:La},Pa=84,Ua=128,Na="acsp",Ra="desc",Oa="mluc",Ma="text",Da="sig ",va=12;function La(e,t){try{const r=t.reduce((a,u)=>a+u.length,0),o=new Uint8Array(r);let n=0;const i=wa(e);for(let a=1;a<=t.length;a++){const u=t.find(s=>s.chunkNumber===a);if(!u)throw new Error(`ICC chunk ${a} not found`);const g=i.slice(u.offset,u.offset+u.length),x=new Uint8Array(g);o.set(x,n),n+=x.length}return Ba(new DataView(o.buffer))}catch{return{}}}function wa(e){return Array.isArray(e)?new DataView(Uint8Array.from(e).buffer).buffer:e.buffer}function Ga(e){return e.length<Ua+4}function ka(e,t){return e.length<t+va}function Ba(e){const t=e.buffer,r=e.getUint32();if(e.byteLength!==r)throw new Error("ICC profile length not matching");if(e.length<Pa)throw new Error("ICC profile too short");const o={},n=Object.keys(Pn);for(let g=0;g<n.length;g++){const x=n[g],s=Pn[x],f=s.value(e,parseInt(x,10));let c=f;s.description&&(c=s.description(f)),o[s.name]={value:f,description:c}}if(it(t.slice(36,40))!==Na)throw new Error("ICC profile: missing signature");if(Ga(t))return o;const a=e.getUint32(128);let u=132;for(let g=0;g<a;g++){if(ka(t,u))return o;const x=X(e,u,4),s=e.getUint32(u+4),f=e.getUint32(u+8);if(s>t.length)return o;const c=X(e,s,4);if(c===Ra){const l=e.getUint32(s+8);if(l>f)return o;const S=it(t.slice(s+12,s+l+11));Ve(o,x,S)}else if(c===Oa){const l=e.getUint32(s+8),S=e.getUint32(s+12);let b=s+16;const I=[];for(let E=0;E<l;E++){const v=X(e,b+0,2),O=X(e,b+2,2),N=e.getUint32(b+4),R=e.getUint32(b+8),T=bi(e,s+R,N);I.push({languageCode:v,countryCode:O,text:T}),b+=S}if(l===1)Ve(o,x,I[0].text);else{const E={};for(let v=0;v<I.length;v++)E[`${I[v].languageCode}-${I[v].countryCode}`]=I[v].text;Ve(o,x,E)}}else if(c===Ma){const l=it(t.slice(s+8,s+f-7));Ve(o,x,l)}else if(c===Da){const l=it(t.slice(s+8,s+12));Ve(o,x,l)}u=u+12}return o}function it(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function Ve(e,t,r){Cn[t]?e[Cn[t].name]={value:r,description:r}:e[t]={value:r,description:r}}const Ha={read:ja};function ja(e,t){return{"Image Width":$a(e,t),"Image Height":Za(e,t),"Bit Depth":za(e,t),"Color Type":Xa(e,t),Compression:Wa(e,t),Filter:Ya(e,t),Interlace:Ka(e,t)}}function $a(e,t){if(t+0+4>e.byteLength)return;const n=B.getLongAt(e,t);return{value:n,description:`${n}px`}}function Za(e,t){if(t+4+4>e.byteLength)return;const n=B.getLongAt(e,t+4);return{value:n,description:`${n}px`}}function za(e,t){if(t+8+1>e.byteLength)return;const n=B.getByteAt(e,t+8);return{value:n,description:`${n}`}}function Xa(e,t){const n={0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"};if(t+9+1>e.byteLength)return;const i=B.getByteAt(e,t+9);return{value:i,description:n[i]||"Unknown"}}function Wa(e,t){if(t+10+1>e.byteLength)return;const n=B.getByteAt(e,t+10);return{value:n,description:n===0?"Deflate/Inflate":"Unknown"}}function Ya(e,t){if(t+11+1>e.byteLength)return;const n=B.getByteAt(e,t+11);return{value:n,description:n===0?"Adaptive":"Unknown"}}function Ka(e,t){const n={0:"Noninterlaced",1:"Adam7 Interlace"};if(t+12+1>e.byteLength)return;const i=B.getByteAt(e,t+12);return{value:i,description:n[i]||"Unknown"}}const qa={read:Va},Gt="STATE_KEYWORD",kt="STATE_COMPRESSION",Bt="STATE_LANG",Sr="STATE_TRANSLATED_KEYWORD",Ja="STATE_TEXT",Qa=2;function Va(e,t){return t.reduce((r,{offset:o,length:n,type:i})=>{const{name:a,value:u,description:g}=eu(e,o,n,i);return a&&(r[a]={value:u,description:g}),r},{})}function eu(e,t,r,o){const n=[],i=[],a=[];let u=Gt;for(let x=0;x<r&&t+x<e.byteLength;x++){if(u===kt){if(e.getUint8(t+x)!==0)return{};x+=Qa,u=Nn(o,u)}const s=e.getUint8(t+x);s===0?u=Nn(o,u):u===Gt?n.push(s):u===Bt?i.push(s):u===Sr||a.push(s)}const g=We(a);return{name:tu(o,i,n),value:g,description:o===Yn?tr.decode("UTF-8",a):g}}function Nn(e,t){return t===Gt&&e===Yn?kt:t===kt?Bt:t===Bt?Sr:Ja}function tu(e,t,r){const o=We(r);if(e===lo||t.length===0)return o;const n=We(t);return`${o} (${n})`}const nu={read:ru};function ru(e,t){const r={};for(let o=0;o<t.length;o++){const n=B.getLongAt(e,t[o]+et),i=X(e,t[o]+je,_e);i===Kn?(r["Pixels Per Unit X"]=iu(e,t[o],n),r["Pixels Per Unit Y"]=ou(e,t[o],n),r["Pixel Units"]=su(e,t[o],n)):i===qn&&(r["Modify Date"]=au(e,t[o],n))}return r}function iu(e,t,r){if(!pt(e,t,r,0,4))return;const i=B.getLongAt(e,t+le+0);return{value:i,description:""+i}}function ou(e,t,r){if(!pt(e,t,r,4,4))return;const i=B.getLongAt(e,t+le+4);return{value:i,description:""+i}}function su(e,t,r){if(!pt(e,t,r,8,1))return;const i=B.getByteAt(e,t+le+8);return{value:i,description:i===1?"meters":"Unknown"}}function au(e,t,r){if(!pt(e,t,r,0,7))return;const n=B.getShortAt(e,t+le),i=B.getByteAt(e,t+le+2),a=B.getByteAt(e,t+le+3),u=B.getByteAt(e,t+le+4),g=B.getByteAt(e,t+le+5),x=B.getByteAt(e,t+le+6);return{value:[n,i,a,u,g,x],description:`${ze(n,4)}-${ze(i,2)}-${ze(a,2)} ${ze(u,2)}:${ze(g,2)}:${ze(x,2)}`}}function pt(e,t,r,o,n){return o+n<=r&&t+le+o+n<=e.byteLength}function ze(e,t){return`${"0".repeat(t-(""+e).length)}${e}`}const uu=[6,7,99],cu={get:fu};function fu(e,t,r){if(lu(t)){t.type="image/jpeg";const o=r+t.JPEGInterchangeFormat.value;t.image=e.buffer.slice(o,o+t.JPEGInterchangeFormatLength.value),Hn(t,"base64",function(){return jn(this.image)})}return t}function lu(e){return e&&(e.Compression===void 0||uu.includes(e.Compression.value))&&e.JPEGInterchangeFormat&&e.JPEGInterchangeFormat.value&&e.JPEGInterchangeFormatLength&&e.JPEGInterchangeFormatLength.value}function Er(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=new Error().stack}Er.prototype=new Error;const du={MetadataMissingError:Er};function gu(e,t){return hu(e)?pu(e,t).then(r=>_t(r,t)):Au(e)?Fu(e).then(r=>_t(r,t)):_t(e,t)}function hu(e){return typeof e=="string"}function pu(e,t){return/^https?:\/\//.test(e)?typeof fetch<"u"?mu(e,t):xu(e,t):Eu(e)?Promise.resolve(yi(e)):Tu(e,t)}function mu(e,{length:t}={}){const r={method:"GET"};return Number.isInteger(t)&&t>=0&&(r.headers={range:`bytes=0-${t-1}`}),fetch(e,r).then(o=>o.arrayBuffer())}function xu(e,{length:t}={}){return new Promise((r,o)=>{const n={};Number.isInteger(t)&&t>=0&&(n.headers={range:`bytes=0-${t-1}`}),Su(e)(e,n,a=>{if(a.statusCode>=200&&a.statusCode<=299){const u=[];a.on("data",g=>u.push(Buffer.from(g))),a.on("error",g=>o(g)),a.on("end",()=>r(Buffer.concat(u)))}else o(`Could not fetch file: ${a.statusCode} ${a.statusMessage}`),a.resume()}).on("error",a=>o(a))})}function Su(e){return/^https:\/\//.test(e)?__non_webpack_require__("https").get:__non_webpack_require__("http").get}function Eu(e){return/^data:[^;,]*(;base64)?,/.test(e)}function Tu(e,{length:t}={}){return new Promise((r,o)=>{const n=Iu();n.open(e,(i,a)=>{i?o(i):n.stat(e,(u,g)=>{if(u)o(u);else{const x=Math.min(g.size,t!==void 0?t:g.size),s=Buffer.alloc(x),f={buffer:s,length:x};n.read(a,f,c=>{c?o(c):n.close(a,l=>{l&&console.warn(`Could not close file ${e}:`,l),r(s)})})}})})})}function Iu(){try{return __non_webpack_require__("fs")}catch{return}}function Au(e){return typeof window<"u"&&typeof File<"u"&&e instanceof File}function Fu(e){return new Promise((t,r)=>{const o=new FileReader;o.onload=n=>t(n.target.result),o.onerror=()=>r(o.error),o.readAsArrayBuffer(e)})}function _t(e,t){return bu(e)&&(e=new Uint8Array(e).buffer),_u(yu(e),t)}function bu(e){try{return Buffer.isBuffer(e)}catch{return!1}}function yu(e){try{return new DataView(e)}catch{return new _i(e)}}function _u(e,{expanded:t=!1,includeUnknown:r=!1}={expanded:!1,includeUnknown:!1}){let o=!1,n={};const{fileDataOffset:i,jfifDataOffset:a,tiffHeaderOffset:u,iptcDataOffset:g,xmpChunks:x,iccChunks:s,mpfDataOffset:f,pngHeaderOffset:c,pngTextChunks:l,pngChunkOffsets:S}=Mo.parseAppMarkers(e);if(Cu(i)){o=!0;const I=ds.read(e,i);t?n.file=I:n=K({},n,I)}if(Pu(a)){o=!0;const I=As.read(e,a);t?n.jfif=I:n=K({},n,I)}if(Uu(u)){o=!0;const I=xn.read(e,u,r);if(I.Thumbnail&&(n.Thumbnail=I.Thumbnail,delete I.Thumbnail),t?(n.exif=I,Nu(n)):n=K({},n,I),I["IPTC-NAA"]&&!Rn(g)){const E=In.read(I["IPTC-NAA"].value,0,r);t?n.iptc=E:n=K({},n,E)}if(I.ApplicationNotes&&!On(x)){const E=bn.read(We(I.ApplicationNotes.value));t?n.xmp=E:(delete E._raw,n=K({},n,E))}if(I.ICC_Profile&&!Mn(s)){const E=Un.read(I.ICC_Profile.value,[{offset:0,length:I.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);t?n.icc=E:n=K({},n,E)}}if(Rn(g)){o=!0;const I=In.read(e,g,r);t?n.iptc=I:n=K({},n,I)}if(On(x)){o=!0;const I=bn.read(e,x);t?n.xmp=I:(delete I._raw,n=K({},n,I))}if(Mn(s)){o=!0;const I=Un.read(e,s);t?n.icc=I:n=K({},n,I)}if(Ru(f)){o=!0;const I=xn.readMpf(e,f,r);t?n.mpf=I:n=K({},n,I)}if(Ou(c)){o=!0;const I=Ha.read(e,c);t?(n.png=n.png?K({},n.png,I):I,n.pngFile=I):n=K({},n,I)}if(Mu(l)){o=!0;const I=qa.read(e,l);t?(n.png=n.png?K({},n.png,I):I,n.pngText=I):n=K({},n,I)}if(Du(S)){o=!0;const I=nu.read(e,S);t?n.png=n.png?K({},n.png,I):I:n=K({},n,I)}const b=cu.get(e,n.Thumbnail,u);if(b?(o=!0,n.Thumbnail=b):delete n.Thumbnail,!o)throw new du.MetadataMissingError;return n}function Cu(e){return e!==void 0}function Pu(e){return e!==void 0}function Uu(e){return e!==void 0}function Nu(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=st(e.exif.GPSLatitude.value),e.exif.GPSLatitudeRef.value.join("")==="S"&&(e.gps.Latitude=-e.gps.Latitude)}catch{}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=st(e.exif.GPSLongitude.value),e.exif.GPSLongitudeRef.value.join("")==="W"&&(e.gps.Longitude=-e.gps.Longitude)}catch{}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],e.exif.GPSAltitudeRef.value===1&&(e.gps.Altitude=-e.gps.Altitude)}catch{}}}function Rn(e){return e!==void 0}function On(e){return Array.isArray(e)&&e.length>0}function Mn(e){return Array.isArray(e)&&e.length>0}function Ru(e){return e!==void 0}function Ou(e){return e!==void 0}function Mu(e){return e!==void 0}function Du(e){return e!==void 0}const Tr=async e=>{const t=await gu(e),r=t.DateTimeOriginal?.description||t.DateTimeDigitized?.description||t.DateTime?.description;return typeof r!="string"?null:Fi.parse(r)},Dn=({file:e,showDate:t})=>{const[r,o]=Ee.useState(null),[n,i]=Ee.useState(null),[a,u]=Ee.useState(null);return Ee.useEffect(()=>{if(!FileReader){u("FileReader not supported");return}if(e)try{const g=new FileReader;g.onload=async()=>{const x=g.result;if(typeof x!="string")throw new Error("Invalid file");o(x);const s=await Tr(x);u(null),i(s)},g.readAsDataURL(e)}catch(g){g instanceof Error&&u(g.message)}else o(null),i(null),u(null)},[e]),r?H.jsxs("div",{children:[H.jsx("img",{style:{maxHeight:270,maxWidth:"100%",objectFit:"contain"},src:r,alt:"Screenshot preview"}),t&&H.jsxs("div",{style:{fontSize:"75%",padding:"0.4em"},children:["Date taken: ",n?n.toLocaleString():"Unknown"]}),a&&H.jsxs("div",{style:{fontSize:"75%",padding:"0.4em"},children:["Error: ",a]})]}):null};function vu(e,t){return t.forEach((function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach((function(o){if(o!=="default"&&!(o in e)){var n=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(e,o,n.get?n:{enumerable:!0,get:function(){return r[o]}})}}))})),Object.freeze(e)}function Ir(e,t){return new Promise((function(r,o){let n;return Lu(e).then((function(i){try{return n=i,r(new Blob([t.slice(0,2),n,t.slice(2)],{type:"image/jpeg"}))}catch(a){return o(a)}}),o)}))}const Lu=e=>new Promise(((t,r)=>{const o=new FileReader;o.addEventListener("load",(({target:{result:n}})=>{const i=new DataView(n);let a=0;if(i.getUint16(a)!==65496)return r("not a valid JPEG");for(a+=2;;){const u=i.getUint16(a);if(u===65498)break;const g=i.getUint16(a+2);if(u===65505&&i.getUint32(a+4)===1165519206){const x=a+10;let s;switch(i.getUint16(x)){case 18761:s=!0;break;case 19789:s=!1;break;default:return r("TIFF header contains invalid endian")}if(i.getUint16(x+2,s)!==42)return r("TIFF header contains invalid version");const f=i.getUint32(x+4,s),c=x+f+2+12*i.getUint16(x+f,s);for(let l=x+f+2;l<c;l+=12)if(i.getUint16(l,s)==274){if(i.getUint16(l+2,s)!==3)return r("Orientation data type is invalid");if(i.getUint32(l+4,s)!==1)return r("Orientation data count is invalid");i.setUint16(l+8,1,s);break}return t(n.slice(a,a+2+g))}a+=2+g}return t(new Blob)})),o.readAsArrayBuffer(e)}));var ct={},wu={get exports(){return ct},set exports(e){ct=e}};(function(e){var t,r,o={};wu.exports=o,o.parse=function(n,i){for(var a=o.bin.readUshort,u=o.bin.readUint,g=0,x={},s=new Uint8Array(n),f=s.length-4;u(s,f)!=101010256;)f--;g=f,g+=4;var c=a(s,g+=4);a(s,g+=2);var l=u(s,g+=2),S=u(s,g+=4);g+=4,g=S;for(var b=0;b<c;b++){u(s,g),g+=4,g+=4,g+=4,u(s,g+=4),l=u(s,g+=4);var I=u(s,g+=4),E=a(s,g+=4),v=a(s,g+2),O=a(s,g+4);g+=6;var N=u(s,g+=8);g+=4,g+=E+v+O,o._readLocal(s,N,x,l,I,i)}return x},o._readLocal=function(n,i,a,u,g,x){var s=o.bin.readUshort,f=o.bin.readUint;f(n,i),s(n,i+=4),s(n,i+=2);var c=s(n,i+=2);f(n,i+=2),f(n,i+=4),i+=4;var l=s(n,i+=8),S=s(n,i+=2);i+=2;var b=o.bin.readUTF8(n,i,l);if(i+=l,i+=S,x)a[b]={size:g,csize:u};else{var I=new Uint8Array(n.buffer,i);if(c==0)a[b]=new Uint8Array(I.buffer.slice(i,i+u));else{if(c!=8)throw"unknown compression method: "+c;var E=new Uint8Array(g);o.inflateRaw(I,E),a[b]=E}}},o.inflateRaw=function(n,i){return o.F.inflate(n,i)},o.inflate=function(n,i){return n[0],n[1],o.inflateRaw(new Uint8Array(n.buffer,n.byteOffset+2,n.length-6),i)},o.deflate=function(n,i){i==null&&(i={level:6});var a=0,u=new Uint8Array(50+Math.floor(1.1*n.length));u[a]=120,u[a+1]=156,a+=2,a=o.F.deflateRaw(n,u,a,i.level);var g=o.adler(n,0,n.length);return u[a+0]=g>>>24&255,u[a+1]=g>>>16&255,u[a+2]=g>>>8&255,u[a+3]=g>>>0&255,new Uint8Array(u.buffer,0,a+4)},o.deflateRaw=function(n,i){i==null&&(i={level:6});var a=new Uint8Array(50+Math.floor(1.1*n.length)),u=o.F.deflateRaw(n,a,u,i.level);return new Uint8Array(a.buffer,0,u)},o.encode=function(n,i){i==null&&(i=!1);var a=0,u=o.bin.writeUint,g=o.bin.writeUshort,x={};for(var s in n){var f=!o._noNeed(s)&&!i,c=n[s],l=o.crc.crc(c,0,c.length);x[s]={cpr:f,usize:c.length,crc:l,file:f?o.deflateRaw(c):c}}for(var s in x)a+=x[s].file.length+30+46+2*o.bin.sizeUTF8(s);a+=22;var S=new Uint8Array(a),b=0,I=[];for(var s in x){var E=x[s];I.push(b),b=o._writeHeader(S,b,s,E,0)}var v=0,O=b;for(var s in x)E=x[s],I.push(b),b=o._writeHeader(S,b,s,E,1,I[v++]);var N=b-O;return u(S,b,101010256),b+=4,g(S,b+=4,v),g(S,b+=2,v),u(S,b+=2,N),u(S,b+=4,O),b+=4,b+=2,S.buffer},o._noNeed=function(n){var i=n.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},o._writeHeader=function(n,i,a,u,g,x){var s=o.bin.writeUint,f=o.bin.writeUshort,c=u.file;return s(n,i,g==0?67324752:33639248),i+=4,g==1&&(i+=2),f(n,i,20),f(n,i+=2,0),f(n,i+=2,u.cpr?8:0),s(n,i+=2,0),s(n,i+=4,u.crc),s(n,i+=4,c.length),s(n,i+=4,u.usize),f(n,i+=4,o.bin.sizeUTF8(a)),f(n,i+=2,0),i+=2,g==1&&(i+=2,i+=2,s(n,i+=6,x),i+=4),i+=o.bin.writeUTF8(n,i,a),g==0&&(n.set(c,i),i+=c.length),i},o.crc={table:(function(){for(var n=new Uint32Array(256),i=0;i<256;i++){for(var a=i,u=0;u<8;u++)1&a?a=3988292384^a>>>1:a>>>=1;n[i]=a}return n})(),update:function(n,i,a,u){for(var g=0;g<u;g++)n=o.crc.table[255&(n^i[a+g])]^n>>>8;return n},crc:function(n,i,a){return 4294967295^o.crc.update(4294967295,n,i,a)}},o.adler=function(n,i,a){for(var u=1,g=0,x=i,s=i+a;x<s;){for(var f=Math.min(x+5552,s);x<f;)g+=u+=n[x++];u%=65521,g%=65521}return g<<16|u},o.bin={readUshort:function(n,i){return n[i]|n[i+1]<<8},writeUshort:function(n,i,a){n[i]=255&a,n[i+1]=a>>8&255},readUint:function(n,i){return 16777216*n[i+3]+(n[i+2]<<16|n[i+1]<<8|n[i])},writeUint:function(n,i,a){n[i]=255&a,n[i+1]=a>>8&255,n[i+2]=a>>16&255,n[i+3]=a>>24&255},readASCII:function(n,i,a){for(var u="",g=0;g<a;g++)u+=String.fromCharCode(n[i+g]);return u},writeASCII:function(n,i,a){for(var u=0;u<a.length;u++)n[i+u]=a.charCodeAt(u)},pad:function(n){return n.length<2?"0"+n:n},readUTF8:function(n,i,a){for(var u,g="",x=0;x<a;x++)g+="%"+o.bin.pad(n[i+x].toString(16));try{u=decodeURIComponent(g)}catch{return o.bin.readASCII(n,i,a)}return u},writeUTF8:function(n,i,a){for(var u=a.length,g=0,x=0;x<u;x++){var s=a.charCodeAt(x);if((4294967168&s)==0)n[i+g]=s,g++;else if((4294965248&s)==0)n[i+g]=192|s>>6,n[i+g+1]=128|s>>0&63,g+=2;else if((4294901760&s)==0)n[i+g]=224|s>>12,n[i+g+1]=128|s>>6&63,n[i+g+2]=128|s>>0&63,g+=3;else{if((4292870144&s)!=0)throw"e";n[i+g]=240|s>>18,n[i+g+1]=128|s>>12&63,n[i+g+2]=128|s>>6&63,n[i+g+3]=128|s>>0&63,g+=4}}return g},sizeUTF8:function(n){for(var i=n.length,a=0,u=0;u<i;u++){var g=n.charCodeAt(u);if((4294967168&g)==0)a++;else if((4294965248&g)==0)a+=2;else if((4294901760&g)==0)a+=3;else{if((4292870144&g)!=0)throw"e";a+=4}}return a}},o.F={},o.F.deflateRaw=function(n,i,a,u){var g=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],x=o.F.U,s=o.F._goodIndex;o.F._hash;var f=o.F._putsE,c=0,l=a<<3,S=0,b=n.length;if(u==0){for(;c<b;)f(i,l,c+(_=Math.min(65535,b-c))==b?1:0),l=o.F._copyExact(n,c,_,i,l+8),c+=_;return l>>>3}var I=x.lits,E=x.strt,v=x.prev,O=0,N=0,R=0,T=0,M=0,p=0;for(b>2&&(E[p=o.F._hash(n,0)]=0),c=0;c<b;c++){if(M=p,c+1<b-2){p=o.F._hash(n,c+1);var h=c+1&32767;v[h]=E[p],E[p]=h}if(S<=c){(O>14e3||N>26697)&&b-c>100&&(S<c&&(I[O]=c-S,O+=2,S=c),l=o.F._writeBlock(c==b-1||S==b?1:0,I,O,T,n,R,c-R,i,l),O=N=T=0,R=c);var F=0;c<b-2&&(F=o.F._bestMatch(n,c,v,M,Math.min(g[2],b-c),g[3]));var _=F>>>16,y=65535&F;if(F!=0){y=65535&F;var C=s(_=F>>>16,x.of0);x.lhst[257+C]++;var A=s(y,x.df0);x.dhst[A]++,T+=x.exb[C]+x.dxb[A],I[O]=_<<23|c-S,I[O+1]=y<<16|C<<8|A,O+=2,S=c+_}else x.lhst[n[c]]++;N++}}for(R==c&&n.length!=0||(S<c&&(I[O]=c-S,O+=2,S=c),l=o.F._writeBlock(1,I,O,T,n,R,c-R,i,l),O=0,N=0,O=N=T=0,R=c);(7&l)!=0;)l++;return l>>>3},o.F._bestMatch=function(n,i,a,u,g,x){var s=32767&i,f=a[s],c=s-f+32768&32767;if(f==s||u!=o.F._hash(n,i-c))return 0;for(var l=0,S=0,b=Math.min(32767,i);c<=b&&--x!=0&&f!=s;){if(l==0||n[i+l]==n[i+l-c]){var I=o.F._howLong(n,i,c);if(I>l){if(S=c,(l=I)>=g)break;c+2<I&&(I=c+2);for(var E=0,v=0;v<I-2;v++){var O=i-c+v+32768&32767,N=O-a[O]+32768&32767;N>E&&(E=N,f=O)}}}c+=(s=f)-(f=a[s])+32768&32767}return l<<16|S},o.F._howLong=function(n,i,a){if(n[i]!=n[i-a]||n[i+1]!=n[i+1-a]||n[i+2]!=n[i+2-a])return 0;var u=i,g=Math.min(n.length,i+258);for(i+=3;i<g&&n[i]==n[i-a];)i++;return i-u},o.F._hash=function(n,i){return(n[i]<<8|n[i+1])+(n[i+2]<<4)&65535},o.saved=0,o.F._writeBlock=function(n,i,a,u,g,x,s,f,c){var l,S,b,I,E,v,O,N,R,T=o.F.U,M=o.F._putsF,p=o.F._putsE;T.lhst[256]++,S=(l=o.F.getTrees())[0],b=l[1],I=l[2],E=l[3],v=l[4],O=l[5],N=l[6],R=l[7];var h=32+((c+3&7)==0?0:8-(c+3&7))+(s<<3),F=u+o.F.contSize(T.fltree,T.lhst)+o.F.contSize(T.fdtree,T.dhst),_=u+o.F.contSize(T.ltree,T.lhst)+o.F.contSize(T.dtree,T.dhst);_+=14+3*O+o.F.contSize(T.itree,T.ihst)+(2*T.ihst[16]+3*T.ihst[17]+7*T.ihst[18]);for(var y=0;y<286;y++)T.lhst[y]=0;for(y=0;y<30;y++)T.dhst[y]=0;for(y=0;y<19;y++)T.ihst[y]=0;var C=h<F&&h<_?0:F<_?1:2;if(M(f,c,n),M(f,c+1,C),c+=3,C==0){for(;(7&c)!=0;)c++;c=o.F._copyExact(g,x,s,f,c)}else{var A,P;if(C==1&&(A=T.fltree,P=T.fdtree),C==2){o.F.makeCodes(T.ltree,S),o.F.revCodes(T.ltree,S),o.F.makeCodes(T.dtree,b),o.F.revCodes(T.dtree,b),o.F.makeCodes(T.itree,I),o.F.revCodes(T.itree,I),A=T.ltree,P=T.dtree,p(f,c,E-257),p(f,c+=5,v-1),p(f,c+=5,O-4),c+=4;for(var m=0;m<O;m++)p(f,c+3*m,T.itree[1+(T.ordr[m]<<1)]);c+=3*O,c=o.F._codeTiny(N,T.itree,f,c),c=o.F._codeTiny(R,T.itree,f,c)}for(var d=x,L=0;L<a;L+=2){for(var U=i[L],w=U>>>23,$=d+(8388607&U);d<$;)c=o.F._writeLit(g[d++],A,f,c);if(w!=0){var k=i[L+1],j=k>>16,G=k>>8&255,D=255&k;p(f,c=o.F._writeLit(257+G,A,f,c),w-T.of0[G]),c+=T.exb[G],M(f,c=o.F._writeLit(D,P,f,c),j-T.df0[D]),c+=T.dxb[D],d+=w}}c=o.F._writeLit(256,A,f,c)}return c},o.F._copyExact=function(n,i,a,u,g){var x=g>>>3;return u[x]=a,u[x+1]=a>>>8,u[x+2]=255-u[x],u[x+3]=255-u[x+1],x+=4,u.set(new Uint8Array(n.buffer,i,a),x),g+(a+4<<3)},o.F.getTrees=function(){for(var n=o.F.U,i=o.F._hufTree(n.lhst,n.ltree,15),a=o.F._hufTree(n.dhst,n.dtree,15),u=[],g=o.F._lenCodes(n.ltree,u),x=[],s=o.F._lenCodes(n.dtree,x),f=0;f<u.length;f+=2)n.ihst[u[f]]++;for(f=0;f<x.length;f+=2)n.ihst[x[f]]++;for(var c=o.F._hufTree(n.ihst,n.itree,7),l=19;l>4&&n.itree[1+(n.ordr[l-1]<<1)]==0;)l--;return[i,a,c,g,s,l,u,x]},o.F.getSecond=function(n){for(var i=[],a=0;a<n.length;a+=2)i.push(n[a+1]);return i},o.F.nonZero=function(n){for(var i="",a=0;a<n.length;a+=2)n[a+1]!=0&&(i+=(a>>1)+",");return i},o.F.contSize=function(n,i){for(var a=0,u=0;u<i.length;u++)a+=i[u]*n[1+(u<<1)];return a},o.F._codeTiny=function(n,i,a,u){for(var g=0;g<n.length;g+=2){var x=n[g],s=n[g+1];u=o.F._writeLit(x,i,a,u);var f=x==16?2:x==17?3:7;x>15&&(o.F._putsE(a,u,s,f),u+=f)}return u},o.F._lenCodes=function(n,i){for(var a=n.length;a!=2&&n[a-1]==0;)a-=2;for(var u=0;u<a;u+=2){var g=n[u+1],x=u+3<a?n[u+3]:-1,s=u+5<a?n[u+5]:-1,f=u==0?-1:n[u-1];if(g==0&&x==g&&s==g){for(var c=u+5;c+2<a&&n[c+2]==g;)c+=2;(l=Math.min(c+1-u>>>1,138))<11?i.push(17,l-3):i.push(18,l-11),u+=2*l-2}else if(g==f&&x==g&&s==g){for(c=u+5;c+2<a&&n[c+2]==g;)c+=2;var l=Math.min(c+1-u>>>1,6);i.push(16,l-3),u+=2*l-2}else i.push(g,0)}return a>>>1},o.F._hufTree=function(n,i,a){var u=[],g=n.length,x=i.length,s=0;for(s=0;s<x;s+=2)i[s]=0,i[s+1]=0;for(s=0;s<g;s++)n[s]!=0&&u.push({lit:s,f:n[s]});var f=u.length,c=u.slice(0);if(f==0)return 0;if(f==1){var l=u[0].lit;return c=l==0?1:0,i[1+(l<<1)]=1,i[1+(c<<1)]=1,1}u.sort((function(N,R){return N.f-R.f}));var S=u[0],b=u[1],I=0,E=1,v=2;for(u[0]={lit:-1,f:S.f+b.f,l:S,r:b,d:0};E!=f-1;)S=I!=E&&(v==f||u[I].f<u[v].f)?u[I++]:u[v++],b=I!=E&&(v==f||u[I].f<u[v].f)?u[I++]:u[v++],u[E++]={lit:-1,f:S.f+b.f,l:S,r:b};var O=o.F.setDepth(u[E-1],0);for(O>a&&(o.F.restrictDepth(c,a,O),O=a),s=0;s<f;s++)i[1+(c[s].lit<<1)]=c[s].d;return O},o.F.setDepth=function(n,i){return n.lit!=-1?(n.d=i,i):Math.max(o.F.setDepth(n.l,i+1),o.F.setDepth(n.r,i+1))},o.F.restrictDepth=function(n,i,a){var u=0,g=1<<a-i,x=0;for(n.sort((function(f,c){return c.d==f.d?f.f-c.f:c.d-f.d})),u=0;u<n.length&&n[u].d>i;u++){var s=n[u].d;n[u].d=i,x+=g-(1<<a-s)}for(x>>>=a-i;x>0;)(s=n[u].d)<i?(n[u].d++,x-=1<<i-s-1):u++;for(;u>=0;u--)n[u].d==i&&x<0&&(n[u].d--,x++);x!=0&&console.log("debt left")},o.F._goodIndex=function(n,i){var a=0;return i[16|a]<=n&&(a|=16),i[8|a]<=n&&(a|=8),i[4|a]<=n&&(a|=4),i[2|a]<=n&&(a|=2),i[1|a]<=n&&(a|=1),a},o.F._writeLit=function(n,i,a,u){return o.F._putsF(a,u,i[n<<1]),u+i[1+(n<<1)]},o.F.inflate=function(n,i){var a=Uint8Array;if(n[0]==3&&n[1]==0)return i||new a(0);var u=o.F,g=u._bitsF,x=u._bitsE,s=u._decodeTiny,f=u.makeCodes,c=u.codes2map,l=u._get17,S=u.U,b=i==null;b&&(i=new a(n.length>>>2<<3));for(var I,E,v=0,O=0,N=0,R=0,T=0,M=0,p=0,h=0,F=0;v==0;)if(v=g(n,F,1),O=g(n,F+1,2),F+=3,O!=0){if(b&&(i=o.F._check(i,h+(1<<17))),O==1&&(I=S.flmap,E=S.fdmap,M=511,p=31),O==2){N=x(n,F,5)+257,R=x(n,F+5,5)+1,T=x(n,F+10,4)+4,F+=14;for(var _=0;_<38;_+=2)S.itree[_]=0,S.itree[_+1]=0;var y=1;for(_=0;_<T;_++){var C=x(n,F+3*_,3);S.itree[1+(S.ordr[_]<<1)]=C,C>y&&(y=C)}F+=3*T,f(S.itree,y),c(S.itree,y,S.imap),I=S.lmap,E=S.dmap,F=s(S.imap,(1<<y)-1,N+R,n,F,S.ttree);var A=u._copyOut(S.ttree,0,N,S.ltree);M=(1<<A)-1;var P=u._copyOut(S.ttree,N,R,S.dtree);p=(1<<P)-1,f(S.ltree,A),c(S.ltree,A,I),f(S.dtree,P),c(S.dtree,P,E)}for(;;){var m=I[l(n,F)&M];F+=15&m;var d=m>>>4;if(!(d>>>8))i[h++]=d;else{if(d==256)break;var L=h+d-254;if(d>264){var U=S.ldef[d-257];L=h+(U>>>3)+x(n,F,7&U),F+=7&U}var w=E[l(n,F)&p];F+=15&w;var $=w>>>4,k=S.ddef[$],j=(k>>>4)+g(n,F,15&k);for(F+=15&k,b&&(i=o.F._check(i,h+(1<<17)));h<L;)i[h]=i[h++-j],i[h]=i[h++-j],i[h]=i[h++-j],i[h]=i[h++-j];h=L}}}else{(7&F)!=0&&(F+=8-(7&F));var G=4+(F>>>3),D=n[G-4]|n[G-3]<<8;b&&(i=o.F._check(i,h+D)),i.set(new a(n.buffer,n.byteOffset+G,D),h),F=G+D<<3,h+=D}return i.length==h?i:i.slice(0,h)},o.F._check=function(n,i){var a=n.length;if(i<=a)return n;var u=new Uint8Array(Math.max(a<<1,i));return u.set(n,0),u},o.F._decodeTiny=function(n,i,a,u,g,x){for(var s=o.F._bitsE,f=o.F._get17,c=0;c<a;){var l=n[f(u,g)&i];g+=15&l;var S=l>>>4;if(S<=15)x[c]=S,c++;else{var b=0,I=0;S==16?(I=3+s(u,g,2),g+=2,b=x[c-1]):S==17?(I=3+s(u,g,3),g+=3):S==18&&(I=11+s(u,g,7),g+=7);for(var E=c+I;c<E;)x[c]=b,c++}}return g},o.F._copyOut=function(n,i,a,u){for(var g=0,x=0,s=u.length>>>1;x<a;){var f=n[x+i];u[x<<1]=0,u[1+(x<<1)]=f,f>g&&(g=f),x++}for(;x<s;)u[x<<1]=0,u[1+(x<<1)]=0,x++;return g},o.F.makeCodes=function(n,i){for(var a,u,g,x,s=o.F.U,f=n.length,c=s.bl_count,l=0;l<=i;l++)c[l]=0;for(l=1;l<f;l+=2)c[n[l]]++;var S=s.next_code;for(a=0,c[0]=0,u=1;u<=i;u++)a=a+c[u-1]<<1,S[u]=a;for(g=0;g<f;g+=2)(x=n[g+1])!=0&&(n[g]=S[x],S[x]++)},o.F.codes2map=function(n,i,a){for(var u=n.length,g=o.F.U.rev15,x=0;x<u;x+=2)if(n[x+1]!=0)for(var s=x>>1,f=n[x+1],c=s<<4|f,l=i-f,S=n[x]<<l,b=S+(1<<l);S!=b;)a[g[S]>>>15-i]=c,S++},o.F.revCodes=function(n,i){for(var a=o.F.U.rev15,u=15-i,g=0;g<n.length;g+=2){var x=n[g]<<i-n[g+1];n[g]=a[x]>>>u}},o.F._putsE=function(n,i,a){a<<=7&i;var u=i>>>3;n[u]|=a,n[u+1]|=a>>>8},o.F._putsF=function(n,i,a){a<<=7&i;var u=i>>>3;n[u]|=a,n[u+1]|=a>>>8,n[u+2]|=a>>>16},o.F._bitsE=function(n,i,a){return(n[i>>>3]|n[1+(i>>>3)]<<8)>>>(7&i)&(1<<a)-1},o.F._bitsF=function(n,i,a){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16)>>>(7&i)&(1<<a)-1},o.F._get17=function(n,i){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16)>>>(7&i)},o.F._get25=function(n,i){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16|n[3+(i>>>3)]<<24)>>>(7&i)},o.F.U=(t=Uint16Array,r=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var n=o.F.U,i=0;i<32768;i++){var a=i;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,n.rev15[i]=(a>>>16|a<<16)>>>17}function u(g,x,s){for(;x--!=0;)g.push(0,s)}for(i=0;i<32;i++)n.ldef[i]=n.of0[i]<<3|n.exb[i],n.ddef[i]=n.df0[i]<<4|n.dxb[i];u(n.fltree,144,8),u(n.fltree,112,9),u(n.fltree,24,7),u(n.fltree,8,8),o.F.makeCodes(n.fltree,9),o.F.codes2map(n.fltree,9,n.flmap),o.F.revCodes(n.fltree,9),u(n.fdtree,32,5),o.F.makeCodes(n.fdtree,5),o.F.codes2map(n.fdtree,5,n.fdmap),o.F.revCodes(n.fdtree,5),u(n.itree,19,0),u(n.ltree,286,0),u(n.dtree,30,0),u(n.ttree,320,0)})()})();var Gu=vu({__proto__:null,default:ct},[ct]);const Ae=(function(){var e={nextZero(s,f){for(;s[f]!=0;)f++;return f},readUshort:(s,f)=>s[f]<<8|s[f+1],writeUshort(s,f,c){s[f]=c>>8&255,s[f+1]=255&c},readUint:(s,f)=>16777216*s[f]+(s[f+1]<<16|s[f+2]<<8|s[f+3]),writeUint(s,f,c){s[f]=c>>24&255,s[f+1]=c>>16&255,s[f+2]=c>>8&255,s[f+3]=255&c},readASCII(s,f,c){let l="";for(let S=0;S<c;S++)l+=String.fromCharCode(s[f+S]);return l},writeASCII(s,f,c){for(let l=0;l<c.length;l++)s[f+l]=c.charCodeAt(l)},readBytes(s,f,c){const l=[];for(let S=0;S<c;S++)l.push(s[f+S]);return l},pad:s=>s.length<2?`0${s}`:s,readUTF8(s,f,c){let l,S="";for(let b=0;b<c;b++)S+=`%${e.pad(s[f+b].toString(16))}`;try{l=decodeURIComponent(S)}catch{return e.readASCII(s,f,c)}return l}};function t(s,f,c,l){const S=f*c,b=i(l),I=Math.ceil(f*b/8),E=new Uint8Array(4*S),v=new Uint32Array(E.buffer),{ctype:O}=l,{depth:N}=l,R=e.readUshort;if(O==6){const U=S<<2;if(N==8)for(var T=0;T<U;T+=4)E[T]=s[T],E[T+1]=s[T+1],E[T+2]=s[T+2],E[T+3]=s[T+3];if(N==16)for(T=0;T<U;T++)E[T]=s[T<<1]}else if(O==2){const U=l.tabs.tRNS;if(U==null){if(N==8)for(T=0;T<S;T++){var M=3*T;v[T]=255<<24|s[M+2]<<16|s[M+1]<<8|s[M]}if(N==16)for(T=0;T<S;T++)M=6*T,v[T]=255<<24|s[M+4]<<16|s[M+2]<<8|s[M]}else{var p=U[0];const w=U[1],$=U[2];if(N==8)for(T=0;T<S;T++){var h=T<<2;M=3*T,v[T]=255<<24|s[M+2]<<16|s[M+1]<<8|s[M],s[M]==p&&s[M+1]==w&&s[M+2]==$&&(E[h+3]=0)}if(N==16)for(T=0;T<S;T++)h=T<<2,M=6*T,v[T]=255<<24|s[M+4]<<16|s[M+2]<<8|s[M],R(s,M)==p&&R(s,M+2)==w&&R(s,M+4)==$&&(E[h+3]=0)}}else if(O==3){const U=l.tabs.PLTE,w=l.tabs.tRNS,$=w?w.length:0;if(N==1)for(var F=0;F<c;F++){var _=F*I,y=F*f;for(T=0;T<f;T++){h=y+T<<2;var C=3*(A=s[_+(T>>3)]>>7-((7&T)<<0)&1);E[h]=U[C],E[h+1]=U[C+1],E[h+2]=U[C+2],E[h+3]=A<$?w[A]:255}}if(N==2)for(F=0;F<c;F++)for(_=F*I,y=F*f,T=0;T<f;T++)h=y+T<<2,C=3*(A=s[_+(T>>2)]>>6-((3&T)<<1)&3),E[h]=U[C],E[h+1]=U[C+1],E[h+2]=U[C+2],E[h+3]=A<$?w[A]:255;if(N==4)for(F=0;F<c;F++)for(_=F*I,y=F*f,T=0;T<f;T++)h=y+T<<2,C=3*(A=s[_+(T>>1)]>>4-((1&T)<<2)&15),E[h]=U[C],E[h+1]=U[C+1],E[h+2]=U[C+2],E[h+3]=A<$?w[A]:255;if(N==8)for(T=0;T<S;T++){var A;h=T<<2,C=3*(A=s[T]),E[h]=U[C],E[h+1]=U[C+1],E[h+2]=U[C+2],E[h+3]=A<$?w[A]:255}}else if(O==4){if(N==8)for(T=0;T<S;T++){h=T<<2;var P=s[m=T<<1];E[h]=P,E[h+1]=P,E[h+2]=P,E[h+3]=s[m+1]}if(N==16)for(T=0;T<S;T++){var m;h=T<<2,P=s[m=T<<2],E[h]=P,E[h+1]=P,E[h+2]=P,E[h+3]=s[m+2]}}else if(O==0)for(p=l.tabs.tRNS?l.tabs.tRNS:-1,F=0;F<c;F++){const U=F*I,w=F*f;if(N==1)for(var d=0;d<f;d++){var L=(P=255*(s[U+(d>>>3)]>>>7-(7&d)&1))==255*p?0:255;v[w+d]=L<<24|P<<16|P<<8|P}else if(N==2)for(d=0;d<f;d++)L=(P=85*(s[U+(d>>>2)]>>>6-((3&d)<<1)&3))==85*p?0:255,v[w+d]=L<<24|P<<16|P<<8|P;else if(N==4)for(d=0;d<f;d++)L=(P=17*(s[U+(d>>>1)]>>>4-((1&d)<<2)&15))==17*p?0:255,v[w+d]=L<<24|P<<16|P<<8|P;else if(N==8)for(d=0;d<f;d++)L=(P=s[U+d])==p?0:255,v[w+d]=L<<24|P<<16|P<<8|P;else if(N==16)for(d=0;d<f;d++)P=s[U+(d<<1)],L=R(s,U+(d<<1))==p?0:255,v[w+d]=L<<24|P<<16|P<<8|P}return E}function r(s,f,c,l){const S=i(s),b=Math.ceil(c*S/8),I=new Uint8Array((b+1+s.interlace)*l);return f=s.tabs.CgBI?n(f,I):o(f,I),s.interlace==0?f=a(f,s,0,c,l):s.interlace==1&&(f=(function(v,O){const N=O.width,R=O.height,T=i(O),M=T>>3,p=Math.ceil(N*T/8),h=new Uint8Array(R*p);let F=0;const _=[0,0,4,0,2,0,1],y=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],A=[8,8,4,4,2,2,1];let P=0;for(;P<7;){const d=C[P],L=A[P];let U=0,w=0,$=_[P];for(;$<R;)$+=d,w++;let k=y[P];for(;k<N;)k+=L,U++;const j=Math.ceil(U*T/8);a(v,O,F,U,w);let G=0,D=_[P];for(;D<R;){let Z=y[P],V=F+G*j<<3;for(;Z<N;){var m;if(T==1&&(m=(m=v[V>>3])>>7-(7&V)&1,h[D*p+(Z>>3)]|=m<<7-((7&Z)<<0)),T==2&&(m=(m=v[V>>3])>>6-(7&V)&3,h[D*p+(Z>>2)]|=m<<6-((3&Z)<<1)),T==4&&(m=(m=v[V>>3])>>4-(7&V)&15,h[D*p+(Z>>1)]|=m<<4-((1&Z)<<2)),T>=8){const Y=D*p+Z*M;for(let W=0;W<M;W++)h[Y+W]=v[(V>>3)+W]}V+=T,Z+=L}G++,D+=d}U*w!=0&&(F+=w*(1+j)),P+=1}return h})(f,s)),f}function o(s,f){return n(new Uint8Array(s.buffer,2,s.length-6),f)}var n=(function(){const s={H:{}};return s.H.N=function(f,c){const l=Uint8Array;let S,b,I=0,E=0,v=0,O=0,N=0,R=0,T=0,M=0,p=0;if(f[0]==3&&f[1]==0)return c||new l(0);const h=s.H,F=h.b,_=h.e,y=h.R,C=h.n,A=h.A,P=h.Z,m=h.m,d=c==null;for(d&&(c=new l(f.length>>>2<<5));I==0;)if(I=F(f,p,1),E=F(f,p+1,2),p+=3,E!=0){if(d&&(c=s.H.W(c,M+(1<<17))),E==1&&(S=m.J,b=m.h,R=511,T=31),E==2){v=_(f,p,5)+257,O=_(f,p+5,5)+1,N=_(f,p+10,4)+4,p+=14;let U=1;for(var L=0;L<38;L+=2)m.Q[L]=0,m.Q[L+1]=0;for(L=0;L<N;L++){const k=_(f,p+3*L,3);m.Q[1+(m.X[L]<<1)]=k,k>U&&(U=k)}p+=3*N,C(m.Q,U),A(m.Q,U,m.u),S=m.w,b=m.d,p=y(m.u,(1<<U)-1,v+O,f,p,m.v);const w=h.V(m.v,0,v,m.C);R=(1<<w)-1;const $=h.V(m.v,v,O,m.D);T=(1<<$)-1,C(m.C,w),A(m.C,w,S),C(m.D,$),A(m.D,$,b)}for(;;){const U=S[P(f,p)&R];p+=15&U;const w=U>>>4;if(!(w>>>8))c[M++]=w;else{if(w==256)break;{let $=M+w-254;if(w>264){const Z=m.q[w-257];$=M+(Z>>>3)+_(f,p,7&Z),p+=7&Z}const k=b[P(f,p)&T];p+=15&k;const j=k>>>4,G=m.c[j],D=(G>>>4)+F(f,p,15&G);for(p+=15&G;M<$;)c[M]=c[M++-D],c[M]=c[M++-D],c[M]=c[M++-D],c[M]=c[M++-D];M=$}}}}else{(7&p)!=0&&(p+=8-(7&p));const U=4+(p>>>3),w=f[U-4]|f[U-3]<<8;d&&(c=s.H.W(c,M+w)),c.set(new l(f.buffer,f.byteOffset+U,w),M),p=U+w<<3,M+=w}return c.length==M?c:c.slice(0,M)},s.H.W=function(f,c){const l=f.length;if(c<=l)return f;const S=new Uint8Array(l<<1);return S.set(f,0),S},s.H.R=function(f,c,l,S,b,I){const E=s.H.e,v=s.H.Z;let O=0;for(;O<l;){const N=f[v(S,b)&c];b+=15&N;const R=N>>>4;if(R<=15)I[O]=R,O++;else{let T=0,M=0;R==16?(M=3+E(S,b,2),b+=2,T=I[O-1]):R==17?(M=3+E(S,b,3),b+=3):R==18&&(M=11+E(S,b,7),b+=7);const p=O+M;for(;O<p;)I[O]=T,O++}}return b},s.H.V=function(f,c,l,S){let b=0,I=0;const E=S.length>>>1;for(;I<l;){const v=f[I+c];S[I<<1]=0,S[1+(I<<1)]=v,v>b&&(b=v),I++}for(;I<E;)S[I<<1]=0,S[1+(I<<1)]=0,I++;return b},s.H.n=function(f,c){const l=s.H.m,S=f.length;let b,I,E,v;const O=l.j;for(var N=0;N<=c;N++)O[N]=0;for(N=1;N<S;N+=2)O[f[N]]++;const R=l.K;for(b=0,O[0]=0,I=1;I<=c;I++)b=b+O[I-1]<<1,R[I]=b;for(E=0;E<S;E+=2)v=f[E+1],v!=0&&(f[E]=R[v],R[v]++)},s.H.A=function(f,c,l){const S=f.length,b=s.H.m.r;for(let I=0;I<S;I+=2)if(f[I+1]!=0){const E=I>>1,v=f[I+1],O=E<<4|v,N=c-v;let R=f[I]<<N;const T=R+(1<<N);for(;R!=T;)l[b[R]>>>15-c]=O,R++}},s.H.l=function(f,c){const l=s.H.m.r,S=15-c;for(let b=0;b<f.length;b+=2){const I=f[b]<<c-f[b+1];f[b]=l[I]>>>S}},s.H.M=function(f,c,l){l<<=7&c;const S=c>>>3;f[S]|=l,f[S+1]|=l>>>8},s.H.I=function(f,c,l){l<<=7&c;const S=c>>>3;f[S]|=l,f[S+1]|=l>>>8,f[S+2]|=l>>>16},s.H.e=function(f,c,l){return(f[c>>>3]|f[1+(c>>>3)]<<8)>>>(7&c)&(1<<l)-1},s.H.b=function(f,c,l){return(f[c>>>3]|f[1+(c>>>3)]<<8|f[2+(c>>>3)]<<16)>>>(7&c)&(1<<l)-1},s.H.Z=function(f,c){return(f[c>>>3]|f[1+(c>>>3)]<<8|f[2+(c>>>3)]<<16)>>>(7&c)},s.H.i=function(f,c){return(f[c>>>3]|f[1+(c>>>3)]<<8|f[2+(c>>>3)]<<16|f[3+(c>>>3)]<<24)>>>(7&c)},s.H.m=(function(){const f=Uint16Array,c=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new c(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new c(286),Y:new c(30),a:new c(19),t:new c(15e3),k:new f(65536),g:new f(32768)}})(),(function(){const f=s.H.m;for(var c=0;c<32768;c++){let S=c;S=(2863311530&S)>>>1|(1431655765&S)<<1,S=(3435973836&S)>>>2|(858993459&S)<<2,S=(4042322160&S)>>>4|(252645135&S)<<4,S=(4278255360&S)>>>8|(16711935&S)<<8,f.r[c]=(S>>>16|S<<16)>>>17}function l(S,b,I){for(;b--!=0;)S.push(0,I)}for(c=0;c<32;c++)f.q[c]=f.S[c]<<3|f.T[c],f.c[c]=f.p[c]<<4|f.z[c];l(f._,144,8),l(f._,112,9),l(f._,24,7),l(f._,8,8),s.H.n(f._,9),s.H.A(f._,9,f.J),s.H.l(f._,9),l(f.$,32,5),s.H.n(f.$,5),s.H.A(f.$,5,f.h),s.H.l(f.$,5),l(f.Q,19,0),l(f.C,286,0),l(f.D,30,0),l(f.v,320,0)})(),s.H.N})();function i(s){return[1,null,3,1,2,null,4][s.ctype]*s.depth}function a(s,f,c,l,S){let b=i(f);const I=Math.ceil(l*b/8);let E,v;b=Math.ceil(b/8);let O=s[c],N=0;if(O>1&&(s[c]=[0,0,1][O-2]),O==3)for(N=b;N<I;N++)s[N+1]=s[N+1]+(s[N+1-b]>>>1)&255;for(let R=0;R<S;R++)if(E=c+R*I,v=E+R+1,O=s[v-1],N=0,O==0)for(;N<I;N++)s[E+N]=s[v+N];else if(O==1){for(;N<b;N++)s[E+N]=s[v+N];for(;N<I;N++)s[E+N]=s[v+N]+s[E+N-b]}else if(O==2)for(;N<I;N++)s[E+N]=s[v+N]+s[E+N-I];else if(O==3){for(;N<b;N++)s[E+N]=s[v+N]+(s[E+N-I]>>>1);for(;N<I;N++)s[E+N]=s[v+N]+(s[E+N-I]+s[E+N-b]>>>1)}else{for(;N<b;N++)s[E+N]=s[v+N]+u(0,s[E+N-I],0);for(;N<I;N++)s[E+N]=s[v+N]+u(s[E+N-b],s[E+N-I],s[E+N-b-I])}return s}function u(s,f,c){const l=s+f-c,S=l-s,b=l-f,I=l-c;return S*S<=b*b&&S*S<=I*I?s:b*b<=I*I?f:c}function g(s,f,c){c.width=e.readUint(s,f),f+=4,c.height=e.readUint(s,f),f+=4,c.depth=s[f],f++,c.ctype=s[f],f++,c.compress=s[f],f++,c.filter=s[f],f++,c.interlace=s[f],f++}function x(s,f,c,l,S,b,I,E,v){const O=Math.min(f,S),N=Math.min(c,b);let R=0,T=0;for(let P=0;P<N;P++)for(let m=0;m<O;m++)if(I>=0&&E>=0?(R=P*f+m<<2,T=(E+P)*S+I+m<<2):(R=(-E+P)*f-I+m<<2,T=P*S+m<<2),v==0)l[T]=s[R],l[T+1]=s[R+1],l[T+2]=s[R+2],l[T+3]=s[R+3];else if(v==1){var M=s[R+3]*.00392156862745098,p=s[R]*M,h=s[R+1]*M,F=s[R+2]*M,_=l[T+3]*(1/255),y=l[T]*_,C=l[T+1]*_,A=l[T+2]*_;const d=1-M,L=M+_*d,U=L==0?0:1/L;l[T+3]=255*L,l[T+0]=(p+y*d)*U,l[T+1]=(h+C*d)*U,l[T+2]=(F+A*d)*U}else if(v==2)M=s[R+3],p=s[R],h=s[R+1],F=s[R+2],_=l[T+3],y=l[T],C=l[T+1],A=l[T+2],M==_&&p==y&&h==C&&F==A?(l[T]=0,l[T+1]=0,l[T+2]=0,l[T+3]=0):(l[T]=p,l[T+1]=h,l[T+2]=F,l[T+3]=M);else if(v==3){if(M=s[R+3],p=s[R],h=s[R+1],F=s[R+2],_=l[T+3],y=l[T],C=l[T+1],A=l[T+2],M==_&&p==y&&h==C&&F==A)continue;if(M<220&&_>20)return!1}return!0}return{decode:function(f){const c=new Uint8Array(f);let l=8;const S=e,b=S.readUshort,I=S.readUint,E={tabs:{},frames:[]},v=new Uint8Array(c.length);let O,N=0,R=0;const T=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(c[M]!=T[M])throw"The input is not a PNG file!";for(;l<c.length;){const P=S.readUint(c,l);l+=4;const m=S.readASCII(c,l,4);if(l+=4,m=="IHDR")g(c,l,E);else if(m=="iCCP"){for(var p=l;c[p]!=0;)p++;S.readASCII(c,l,p-l),c[p+1];const d=c.slice(p+2,l+P);let L=null;try{L=o(d)}catch{L=n(d)}E.tabs[m]=L}else if(m=="CgBI")E.tabs[m]=c.slice(l,l+4);else if(m=="IDAT"){for(M=0;M<P;M++)v[N+M]=c[l+M];N+=P}else if(m=="acTL")E.tabs[m]={num_frames:I(c,l),num_plays:I(c,l+4)},O=new Uint8Array(c.length);else if(m=="fcTL"){R!=0&&((A=E.frames[E.frames.length-1]).data=r(E,O.slice(0,R),A.rect.width,A.rect.height),R=0);const d={x:I(c,l+12),y:I(c,l+16),width:I(c,l+4),height:I(c,l+8)};let L=b(c,l+22);L=b(c,l+20)/(L==0?100:L);const U={rect:d,delay:Math.round(1e3*L),dispose:c[l+24],blend:c[l+25]};E.frames.push(U)}else if(m=="fdAT"){for(M=0;M<P-4;M++)O[R+M]=c[l+M+4];R+=P-4}else if(m=="pHYs")E.tabs[m]=[S.readUint(c,l),S.readUint(c,l+4),c[l+8]];else if(m=="cHRM")for(E.tabs[m]=[],M=0;M<8;M++)E.tabs[m].push(S.readUint(c,l+4*M));else if(m=="tEXt"||m=="zTXt"){E.tabs[m]==null&&(E.tabs[m]={});var h=S.nextZero(c,l),F=S.readASCII(c,l,h-l),_=l+P-h-1;if(m=="tEXt")C=S.readASCII(c,h+1,_);else{var y=o(c.slice(h+2,h+2+_));C=S.readUTF8(y,0,y.length)}E.tabs[m][F]=C}else if(m=="iTXt"){E.tabs[m]==null&&(E.tabs[m]={}),h=0,p=l,h=S.nextZero(c,p),F=S.readASCII(c,p,h-p);const d=c[p=h+1];var C;c[p+1],p+=2,h=S.nextZero(c,p),S.readASCII(c,p,h-p),p=h+1,h=S.nextZero(c,p),S.readUTF8(c,p,h-p),_=P-((p=h+1)-l),d==0?C=S.readUTF8(c,p,_):(y=o(c.slice(p,p+_)),C=S.readUTF8(y,0,y.length)),E.tabs[m][F]=C}else if(m=="PLTE")E.tabs[m]=S.readBytes(c,l,P);else if(m=="hIST"){const d=E.tabs.PLTE.length/3;for(E.tabs[m]=[],M=0;M<d;M++)E.tabs[m].push(b(c,l+2*M))}else if(m=="tRNS")E.ctype==3?E.tabs[m]=S.readBytes(c,l,P):E.ctype==0?E.tabs[m]=b(c,l):E.ctype==2&&(E.tabs[m]=[b(c,l),b(c,l+2),b(c,l+4)]);else if(m=="gAMA")E.tabs[m]=S.readUint(c,l)/1e5;else if(m=="sRGB")E.tabs[m]=c[l];else if(m=="bKGD")E.ctype==0||E.ctype==4?E.tabs[m]=[b(c,l)]:E.ctype==2||E.ctype==6?E.tabs[m]=[b(c,l),b(c,l+2),b(c,l+4)]:E.ctype==3&&(E.tabs[m]=c[l]);else if(m=="IEND")break;l+=P,S.readUint(c,l),l+=4}var A;return R!=0&&((A=E.frames[E.frames.length-1]).data=r(E,O.slice(0,R),A.rect.width,A.rect.height)),E.data=r(E,v,E.width,E.height),delete E.compress,delete E.interlace,delete E.filter,E},toRGBA8:function(f){const c=f.width,l=f.height;if(f.tabs.acTL==null)return[t(f.data,c,l,f).buffer];const S=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const b=c*l*4,I=new Uint8Array(b),E=new Uint8Array(b),v=new Uint8Array(b);for(let N=0;N<f.frames.length;N++){const R=f.frames[N],T=R.rect.x,M=R.rect.y,p=R.rect.width,h=R.rect.height,F=t(R.data,p,h,f);if(N!=0)for(var O=0;O<b;O++)v[O]=I[O];if(R.blend==0?x(F,p,h,I,c,l,T,M,0):R.blend==1&&x(F,p,h,I,c,l,T,M,1),S.push(I.buffer.slice(0)),R.dispose!=0){if(R.dispose==1)x(E,p,h,I,c,l,T,M,0);else if(R.dispose==2)for(O=0;O<b;O++)I[O]=v[O]}}return S},_paeth:u,_copyTile:x,_bin:e}})();(function(){const{_copyTile:e}=Ae,{_bin:t}=Ae,r=Ae._paeth;var o={table:(function(){const p=new Uint32Array(256);for(let h=0;h<256;h++){let F=h;for(let _=0;_<8;_++)1&F?F=3988292384^F>>>1:F>>>=1;p[h]=F}return p})(),update(p,h,F,_){for(let y=0;y<_;y++)p=o.table[255&(p^h[F+y])]^p>>>8;return p},crc:(p,h,F)=>4294967295^o.update(4294967295,p,h,F)};function n(p,h,F,_){h[F]+=p[0]*_>>4,h[F+1]+=p[1]*_>>4,h[F+2]+=p[2]*_>>4,h[F+3]+=p[3]*_>>4}function i(p){return Math.max(0,Math.min(255,p))}function a(p,h){const F=p[0]-h[0],_=p[1]-h[1],y=p[2]-h[2],C=p[3]-h[3];return F*F+_*_+y*y+C*C}function u(p,h,F,_,y,C,A){A==null&&(A=1);const P=_.length,m=[];for(var d=0;d<P;d++){const D=_[d];m.push([D>>>0&255,D>>>8&255,D>>>16&255,D>>>24&255])}for(d=0;d<P;d++){let D=4294967295;for(var L=0,U=0;U<P;U++){var w=a(m[d],m[U]);U!=d&&w<D&&(D=w,L=U)}}const $=new Uint32Array(y.buffer),k=new Int16Array(h*F*4),j=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(d=0;d<j.length;d++)j[d]=255*((j[d]+.5)/16-.5);for(let D=0;D<F;D++)for(let Z=0;Z<h;Z++){var G;d=4*(D*h+Z),A!=2?G=[i(p[d]+k[d]),i(p[d+1]+k[d+1]),i(p[d+2]+k[d+2]),i(p[d+3]+k[d+3])]:(w=j[4*(3&D)+(3&Z)],G=[i(p[d]+w),i(p[d+1]+w),i(p[d+2]+w),i(p[d+3]+w)]),L=0;let V=16777215;for(U=0;U<P;U++){const q=a(G,m[U]);q<V&&(V=q,L=U)}const Y=m[L],W=[G[0]-Y[0],G[1]-Y[1],G[2]-Y[2],G[3]-Y[3]];A==1&&(Z!=h-1&&n(W,k,d+4,7),D!=F-1&&(Z!=0&&n(W,k,d+4*h-4,3),n(W,k,d+4*h,5),Z!=h-1&&n(W,k,d+4*h+4,1))),C[d>>2]=L,$[d>>2]=_[L]}}function g(p,h,F,_,y){y==null&&(y={});const{crc:C}=o,A=t.writeUint,P=t.writeUshort,m=t.writeASCII;let d=8;const L=p.frames.length>1;let U,w=!1,$=33+(L?20:0);if(y.sRGB!=null&&($+=13),y.pHYs!=null&&($+=21),y.iCCP!=null&&(U=pako.deflate(y.iCCP),$+=21+U.length+4),p.ctype==3){for(var k=p.plte.length,j=0;j<k;j++)p.plte[j]>>>24!=255&&(w=!0);$+=8+3*k+4+(w?8+1*k+4:0)}for(var G=0;G<p.frames.length;G++)L&&($+=38),$+=(Y=p.frames[G]).cimg.length+12,G!=0&&($+=4);$+=12;const D=new Uint8Array($),Z=[137,80,78,71,13,10,26,10];for(j=0;j<8;j++)D[j]=Z[j];if(A(D,d,13),d+=4,m(D,d,"IHDR"),d+=4,A(D,d,h),d+=4,A(D,d,F),d+=4,D[d]=p.depth,d++,D[d]=p.ctype,d++,D[d]=0,d++,D[d]=0,d++,D[d]=0,d++,A(D,d,C(D,d-17,17)),d+=4,y.sRGB!=null&&(A(D,d,1),d+=4,m(D,d,"sRGB"),d+=4,D[d]=y.sRGB,d++,A(D,d,C(D,d-5,5)),d+=4),y.iCCP!=null){const W=13+U.length;A(D,d,W),d+=4,m(D,d,"iCCP"),d+=4,m(D,d,"ICC profile"),d+=11,d+=2,D.set(U,d),d+=U.length,A(D,d,C(D,d-(W+4),W+4)),d+=4}if(y.pHYs!=null&&(A(D,d,9),d+=4,m(D,d,"pHYs"),d+=4,A(D,d,y.pHYs[0]),d+=4,A(D,d,y.pHYs[1]),d+=4,D[d]=y.pHYs[2],d++,A(D,d,C(D,d-13,13)),d+=4),L&&(A(D,d,8),d+=4,m(D,d,"acTL"),d+=4,A(D,d,p.frames.length),d+=4,A(D,d,y.loop!=null?y.loop:0),d+=4,A(D,d,C(D,d-12,12)),d+=4),p.ctype==3){for(A(D,d,3*(k=p.plte.length)),d+=4,m(D,d,"PLTE"),d+=4,j=0;j<k;j++){const W=3*j,q=p.plte[j],ne=255&q,se=q>>>8&255,De=q>>>16&255;D[d+W+0]=ne,D[d+W+1]=se,D[d+W+2]=De}if(d+=3*k,A(D,d,C(D,d-3*k-4,3*k+4)),d+=4,w){for(A(D,d,k),d+=4,m(D,d,"tRNS"),d+=4,j=0;j<k;j++)D[d+j]=p.plte[j]>>>24&255;d+=k,A(D,d,C(D,d-k-4,k+4)),d+=4}}let V=0;for(G=0;G<p.frames.length;G++){var Y=p.frames[G];L&&(A(D,d,26),d+=4,m(D,d,"fcTL"),d+=4,A(D,d,V++),d+=4,A(D,d,Y.rect.width),d+=4,A(D,d,Y.rect.height),d+=4,A(D,d,Y.rect.x),d+=4,A(D,d,Y.rect.y),d+=4,P(D,d,_[G]),d+=2,P(D,d,1e3),d+=2,D[d]=Y.dispose,d++,D[d]=Y.blend,d++,A(D,d,C(D,d-30,30)),d+=4);const W=Y.cimg;A(D,d,(k=W.length)+(G==0?0:4)),d+=4;const q=d;m(D,d,G==0?"IDAT":"fdAT"),d+=4,G!=0&&(A(D,d,V++),d+=4),D.set(W,d),d+=k,A(D,d,C(D,q,d-q)),d+=4}return A(D,d,0),d+=4,m(D,d,"IEND"),d+=4,A(D,d,C(D,d-4,4)),d+=4,D.buffer}function x(p,h,F){for(let _=0;_<p.frames.length;_++){const y=p.frames[_];y.rect.width;const C=y.rect.height,A=new Uint8Array(C*y.bpl+C);y.cimg=l(y.img,C,y.bpp,y.bpl,A,h,F)}}function s(p,h,F,_,y){const C=y[0],A=y[1],P=y[2],m=y[3],d=y[4],L=y[5];let U=6,w=8,$=255;for(var k=0;k<p.length;k++){const ue=new Uint8Array(p[k]);for(var j=ue.length,G=0;G<j;G+=4)$&=ue[G+3]}const D=$!=255,Z=(function(ee,J,ae,de,re,me){const ie=[];for(var Q=0;Q<ee.length;Q++){const ge=new Uint8Array(ee[Q]),Ie=new Uint32Array(ge.buffer);var xe;let Se=0,Ce=0,be=J,Le=ae,xt=de?1:0;if(Q!=0){const Or=me||de||Q==1||ie[Q-2].dispose!=0?1:2;let St=0,Yt=1e9;for(let Ke=0;Ke<Or;Ke++){var Ue=new Uint8Array(ee[Q-1-Ke]);const Mr=new Uint32Array(ee[Q-1-Ke]);let Ne=J,Re=ae,$e=-1,qe=-1;for(let we=0;we<ae;we++)for(let Ge=0;Ge<J;Ge++)Ie[ce=we*J+Ge]!=Mr[ce]&&(Ge<Ne&&(Ne=Ge),Ge>$e&&($e=Ge),we<Re&&(Re=we),we>qe&&(qe=we));$e==-1&&(Ne=Re=$e=qe=0),re&&((1&Ne)==1&&Ne--,(1&Re)==1&&Re--);const Kt=($e-Ne+1)*(qe-Re+1);Kt<Yt&&(Yt=Kt,St=Ke,Se=Ne,Ce=Re,be=$e-Ne+1,Le=qe-Re+1)}Ue=new Uint8Array(ee[Q-1-St]),St==1&&(ie[Q-1].dispose=2),xe=new Uint8Array(be*Le*4),e(Ue,J,ae,xe,be,Le,-Se,-Ce,0),xt=e(ge,J,ae,xe,be,Le,-Se,-Ce,3)?1:0,xt==1?c(ge,J,ae,xe,{x:Se,y:Ce,width:be,height:Le}):e(ge,J,ae,xe,be,Le,-Se,-Ce,0)}else xe=ge.slice(0);ie.push({rect:{x:Se,y:Ce,width:be,height:Le},img:xe,blend:xt,dispose:0})}if(de)for(Q=0;Q<ie.length;Q++){if((ve=ie[Q]).blend==1)continue;const ge=ve.rect,Ie=ie[Q-1].rect,Se=Math.min(ge.x,Ie.x),Ce=Math.min(ge.y,Ie.y),be={x:Se,y:Ce,width:Math.max(ge.x+ge.width,Ie.x+Ie.width)-Se,height:Math.max(ge.y+ge.height,Ie.y+Ie.height)-Ce};ie[Q-1].dispose=1,Q-1!=0&&f(ee,J,ae,ie,Q-1,be,re),f(ee,J,ae,ie,Q,be,re)}let nt=0;if(ee.length!=1)for(var ce=0;ce<ie.length;ce++){var ve;nt+=(ve=ie[ce]).rect.width*ve.rect.height}return ie})(p,h,F,C,A,P),V={},Y=[],W=[];if(_!=0){const ue=[];for(G=0;G<Z.length;G++)ue.push(Z[G].img.buffer);const ee=(function(re){let me=0;for(var ie=0;ie<re.length;ie++)me+=re[ie].byteLength;const Q=new Uint8Array(me);let xe=0;for(ie=0;ie<re.length;ie++){const Ue=new Uint8Array(re[ie]),nt=Ue.length;for(let ce=0;ce<nt;ce+=4){let ve=Ue[ce],ge=Ue[ce+1],Ie=Ue[ce+2];const Se=Ue[ce+3];Se==0&&(ve=ge=Ie=0),Q[xe+ce]=ve,Q[xe+ce+1]=ge,Q[xe+ce+2]=Ie,Q[xe+ce+3]=Se}xe+=nt}return Q.buffer})(ue),J=b(ee,_);for(G=0;G<J.plte.length;G++)Y.push(J.plte[G].est.rgba);let ae=0;for(G=0;G<Z.length;G++){const de=(ne=Z[G]).img.length;var q=new Uint8Array(J.inds.buffer,ae>>2,de>>2);W.push(q);const re=new Uint8Array(J.abuf,ae,de);L&&u(ne.img,ne.rect.width,ne.rect.height,Y,re,q),ne.img.set(re),ae+=de}}else for(k=0;k<Z.length;k++){var ne=Z[k];const ue=new Uint32Array(ne.img.buffer);var se=ne.rect.width;for(j=ue.length,q=new Uint8Array(j),W.push(q),G=0;G<j;G++){const ee=ue[G];if(G!=0&&ee==ue[G-1])q[G]=q[G-1];else if(G>se&&ee==ue[G-se])q[G]=q[G-se];else{let J=V[ee];if(J==null&&(V[ee]=J=Y.length,Y.push(ee),Y.length>=300))break;q[G]=J}}}const De=Y.length;for(De<=256&&d==0&&(w=De<=2?1:De<=4?2:De<=16?4:8,w=Math.max(w,m)),k=0;k<Z.length;k++){(ne=Z[k]).rect.x,ne.rect.y,se=ne.rect.width;const ue=ne.rect.height;let ee=ne.img;new Uint32Array(ee.buffer);let J=4*se,ae=4;if(De<=256&&d==0){J=Math.ceil(w*se/8);var Fe=new Uint8Array(J*ue);const de=W[k];for(let re=0;re<ue;re++){G=re*J;const me=re*se;if(w==8)for(var te=0;te<se;te++)Fe[G+te]=de[me+te];else if(w==4)for(te=0;te<se;te++)Fe[G+(te>>1)]|=de[me+te]<<4-4*(1&te);else if(w==2)for(te=0;te<se;te++)Fe[G+(te>>2)]|=de[me+te]<<6-2*(3&te);else if(w==1)for(te=0;te<se;te++)Fe[G+(te>>3)]|=de[me+te]<<7-1*(7&te)}ee=Fe,U=3,ae=1}else if(D==0&&Z.length==1){Fe=new Uint8Array(se*ue*3);const de=se*ue;for(G=0;G<de;G++){const re=3*G,me=4*G;Fe[re]=ee[me],Fe[re+1]=ee[me+1],Fe[re+2]=ee[me+2]}ee=Fe,U=2,ae=3,J=3*se}ne.img=ee,ne.bpl=J,ne.bpp=ae}return{ctype:U,depth:w,plte:Y,frames:Z}}function f(p,h,F,_,y,C,A){const P=Uint8Array,m=Uint32Array,d=new P(p[y-1]),L=new m(p[y-1]),U=y+1<p.length?new P(p[y+1]):null,w=new P(p[y]),$=new m(w.buffer);let k=h,j=F,G=-1,D=-1;for(let V=0;V<C.height;V++)for(let Y=0;Y<C.width;Y++){const W=C.x+Y,q=C.y+V,ne=q*h+W,se=$[ne];se==0||_[y-1].dispose==0&&L[ne]==se&&(U==null||U[4*ne+3]!=0)||(W<k&&(k=W),W>G&&(G=W),q<j&&(j=q),q>D&&(D=q))}G==-1&&(k=j=G=D=0),A&&((1&k)==1&&k--,(1&j)==1&&j--),C={x:k,y:j,width:G-k+1,height:D-j+1};const Z=_[y];Z.rect=C,Z.blend=1,Z.img=new Uint8Array(C.width*C.height*4),_[y-1].dispose==0?(e(d,h,F,Z.img,C.width,C.height,-C.x,-C.y,0),c(w,h,F,Z.img,C)):e(w,h,F,Z.img,C.width,C.height,-C.x,-C.y,0)}function c(p,h,F,_,y){e(p,h,F,_,y.width,y.height,-y.x,-y.y,2)}function l(p,h,F,_,y,C,A){const P=[];let m,d=[0,1,2,3,4];C!=-1?d=[C]:(h*_>5e5||F==1)&&(d=[0]),A&&(m={level:0});const L=Gu;for(var U=0;U<d.length;U++){for(let k=0;k<h;k++)S(y,p,k,_,F,d[U]);P.push(L.deflate(y,m))}let w,$=1e9;for(U=0;U<P.length;U++)P[U].length<$&&(w=U,$=P[U].length);return P[w]}function S(p,h,F,_,y,C){const A=F*_;let P=A+F;if(p[P]=C,P++,C==0)if(_<500)for(var m=0;m<_;m++)p[P+m]=h[A+m];else p.set(new Uint8Array(h.buffer,A,_),P);else if(C==1){for(m=0;m<y;m++)p[P+m]=h[A+m];for(m=y;m<_;m++)p[P+m]=h[A+m]-h[A+m-y]+256&255}else if(F==0){for(m=0;m<y;m++)p[P+m]=h[A+m];if(C==2)for(m=y;m<_;m++)p[P+m]=h[A+m];if(C==3)for(m=y;m<_;m++)p[P+m]=h[A+m]-(h[A+m-y]>>1)+256&255;if(C==4)for(m=y;m<_;m++)p[P+m]=h[A+m]-r(h[A+m-y],0,0)+256&255}else{if(C==2)for(m=0;m<_;m++)p[P+m]=h[A+m]+256-h[A+m-_]&255;if(C==3){for(m=0;m<y;m++)p[P+m]=h[A+m]+256-(h[A+m-_]>>1)&255;for(m=y;m<_;m++)p[P+m]=h[A+m]+256-(h[A+m-_]+h[A+m-y]>>1)&255}if(C==4){for(m=0;m<y;m++)p[P+m]=h[A+m]+256-r(0,h[A+m-_],0)&255;for(m=y;m<_;m++)p[P+m]=h[A+m]+256-r(h[A+m-y],h[A+m-_],h[A+m-y-_])&255}}}function b(p,h){const F=new Uint8Array(p),_=F.slice(0),y=new Uint32Array(_.buffer),C=I(_,h),A=C[0],P=C[1],m=F.length,d=new Uint8Array(m>>2);let L;if(F.length<2e7)for(var U=0;U<m;U+=4)L=E(A,w=F[U]*(1/255),$=F[U+1]*(1/255),k=F[U+2]*(1/255),j=F[U+3]*(1/255)),d[U>>2]=L.ind,y[U>>2]=L.est.rgba;else for(U=0;U<m;U+=4){var w=F[U]*.00392156862745098,$=F[U+1]*(1/255),k=F[U+2]*(1/255),j=F[U+3]*(1/255);for(L=A;L.left;)L=v(L.est,w,$,k,j)<=0?L.left:L.right;d[U>>2]=L.ind,y[U>>2]=L.est.rgba}return{abuf:_.buffer,inds:d,plte:P}}function I(p,h,F){F==null&&(F=1e-4);const _=new Uint32Array(p.buffer),y={i0:0,i1:p.length,bst:null,est:null,tdst:0,left:null,right:null};y.bst=R(p,y.i0,y.i1),y.est=T(y.bst);const C=[y];for(;C.length<h;){let P=0,m=0;for(var A=0;A<C.length;A++)C[A].est.L>P&&(P=C[A].est.L,m=A);if(P<F)break;const d=C[m],L=O(p,_,d.i0,d.i1,d.est.e,d.est.eMq255);if(d.i0>=L||d.i1<=L){d.est.L=0;continue}const U={i0:d.i0,i1:L,bst:null,est:null,tdst:0,left:null,right:null};U.bst=R(p,U.i0,U.i1),U.est=T(U.bst);const w={i0:L,i1:d.i1,bst:null,est:null,tdst:0,left:null,right:null};for(w.bst={R:[],m:[],N:d.bst.N-U.bst.N},A=0;A<16;A++)w.bst.R[A]=d.bst.R[A]-U.bst.R[A];for(A=0;A<4;A++)w.bst.m[A]=d.bst.m[A]-U.bst.m[A];w.est=T(w.bst),d.left=U,d.right=w,C[m]=U,C.push(w)}for(C.sort(((P,m)=>m.bst.N-P.bst.N)),A=0;A<C.length;A++)C[A].ind=A;return[y,C]}function E(p,h,F,_,y){if(p.left==null)return p.tdst=(function(U,w,$,k,j){const G=w-U[0],D=$-U[1],Z=k-U[2],V=j-U[3];return G*G+D*D+Z*Z+V*V})(p.est.q,h,F,_,y),p;const C=v(p.est,h,F,_,y);let A=p.left,P=p.right;C>0&&(A=p.right,P=p.left);const m=E(A,h,F,_,y);if(m.tdst<=C*C)return m;const d=E(P,h,F,_,y);return d.tdst<m.tdst?d:m}function v(p,h,F,_,y){const{e:C}=p;return C[0]*h+C[1]*F+C[2]*_+C[3]*y-p.eMq}function O(p,h,F,_,y,C){for(_-=4;F<_;){for(;N(p,F,y)<=C;)F+=4;for(;N(p,_,y)>C;)_-=4;if(F>=_)break;const A=h[F>>2];h[F>>2]=h[_>>2],h[_>>2]=A,F+=4,_-=4}for(;N(p,F,y)>C;)F-=4;return F+4}function N(p,h,F){return p[h]*F[0]+p[h+1]*F[1]+p[h+2]*F[2]+p[h+3]*F[3]}function R(p,h,F){const _=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=[0,0,0,0],C=F-h>>2;for(let A=h;A<F;A+=4){const P=p[A]*.00392156862745098,m=p[A+1]*(1/255),d=p[A+2]*(1/255),L=p[A+3]*(1/255);y[0]+=P,y[1]+=m,y[2]+=d,y[3]+=L,_[0]+=P*P,_[1]+=P*m,_[2]+=P*d,_[3]+=P*L,_[5]+=m*m,_[6]+=m*d,_[7]+=m*L,_[10]+=d*d,_[11]+=d*L,_[15]+=L*L}return _[4]=_[1],_[8]=_[2],_[9]=_[6],_[12]=_[3],_[13]=_[7],_[14]=_[11],{R:_,m:y,N:C}}function T(p){const{R:h}=p,{m:F}=p,{N:_}=p,y=F[0],C=F[1],A=F[2],P=F[3],m=_==0?0:1/_,d=[h[0]-y*y*m,h[1]-y*C*m,h[2]-y*A*m,h[3]-y*P*m,h[4]-C*y*m,h[5]-C*C*m,h[6]-C*A*m,h[7]-C*P*m,h[8]-A*y*m,h[9]-A*C*m,h[10]-A*A*m,h[11]-A*P*m,h[12]-P*y*m,h[13]-P*C*m,h[14]-P*A*m,h[15]-P*P*m],L=d,U=M;let w=[Math.random(),Math.random(),Math.random(),Math.random()],$=0,k=0;if(_!=0)for(let G=0;G<16&&(w=U.multVec(L,w),k=Math.sqrt(U.dot(w,w)),w=U.sml(1/k,w),!(G!=0&&Math.abs(k-$)<1e-9));G++)$=k;const j=[y*m,C*m,A*m,P*m];return{Cov:d,q:j,e:w,L:$,eMq255:U.dot(U.sml(255,j),w),eMq:U.dot(w,j),rgba:(Math.round(255*j[3])<<24|Math.round(255*j[2])<<16|Math.round(255*j[1])<<8|Math.round(255*j[0])<<0)>>>0}}var M={multVec:(p,h)=>[p[0]*h[0]+p[1]*h[1]+p[2]*h[2]+p[3]*h[3],p[4]*h[0]+p[5]*h[1]+p[6]*h[2]+p[7]*h[3],p[8]*h[0]+p[9]*h[1]+p[10]*h[2]+p[11]*h[3],p[12]*h[0]+p[13]*h[1]+p[14]*h[2]+p[15]*h[3]],dot:(p,h)=>p[0]*h[0]+p[1]*h[1]+p[2]*h[2]+p[3]*h[3],sml:(p,h)=>[p*h[0],p*h[1],p*h[2],p*h[3]]};Ae.encode=function(h,F,_,y,C,A,P){y==null&&(y=0),P==null&&(P=!1);const m=s(h,F,_,y,[!1,!1,!1,0,P,!1]);return x(m,-1),g(m,F,_,C,A)},Ae.encodeLL=function(h,F,_,y,C,A,P,m){const d={ctype:0+(y==1?0:2)+(C==0?0:4),depth:A,frames:[]},L=(y+C)*A,U=L*F;for(let w=0;w<h.length;w++)d.frames.push({rect:{x:0,y:0,width:F,height:_},img:new Uint8Array(h[w]),blend:0,dispose:1,bpp:Math.ceil(L/8),bpl:Math.ceil(U/8)});return x(d,0,!0),g(d,F,_,P,m)},Ae.encode.compress=s,Ae.encode.dither=u,Ae.quantize=b,Ae.quantize.getKDtree=I,Ae.quantize.getNearest=E})();const Ar={toArrayBuffer(e,t){const r=e.width,o=e.height,n=r<<2,i=e.getContext("2d").getImageData(0,0,r,o),a=new Uint32Array(i.data.buffer),u=(32*r+31)/32<<2,g=u*o,x=122+g,s=new ArrayBuffer(x),f=new DataView(s),c=1<<20;let l,S,b,I,E=c,v=0,O=0,N=0;function R(p){f.setUint16(O,p,!0),O+=2}function T(p){f.setUint32(O,p,!0),O+=4}function M(p){O+=p}R(19778),T(x),M(4),T(122),T(108),T(r),T(-o>>>0),R(1),R(32),T(3),T(g),T(2835),T(2835),M(8),T(16711680),T(65280),T(255),T(4278190080),T(1466527264),(function p(){for(;v<o&&E>0;){for(I=122+v*u,l=0;l<n;)E--,S=a[N++],b=S>>>24,f.setUint32(I+l,S<<8|b),l+=4;v++}N<a.length?(E=c,setTimeout(p,Ar._dly)):t(s)})()},toBlob(e,t){this.toArrayBuffer(e,(r=>{t(new Blob([r],{type:"image/bmp"}))}))},_dly:9};var pe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},ku={[pe.CHROME]:16384,[pe.FIREFOX]:11180,[pe.DESKTOP_SAFARI]:16384,[pe.IE]:8192,[pe.IOS]:4096,[pe.ETC]:8192};const Xt=typeof window<"u",Fr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,ft=Xt&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Bu=(Xt||Fr)&&(ft&&ft.getOriginalSymbol(window,"File")||typeof File<"u"&&File),br=(Xt||Fr)&&(ft&&ft.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Wt(e,t,r=Date.now()){return new Promise((o=>{const n=e.split(","),i=n[0].match(/:(.*?);/)[1],a=globalThis.atob(n[1]);let u=a.length;const g=new Uint8Array(u);for(;u--;)g[u]=a.charCodeAt(u);const x=new Blob([g],{type:i});x.name=t,x.lastModified=r,o(x)}))}function yr(e){return new Promise(((t,r)=>{const o=new br;o.onload=()=>t(o.result),o.onerror=n=>r(n),o.readAsDataURL(e)}))}function _r(e){return new Promise(((t,r)=>{const o=new Image;o.onload=()=>t(o),o.onerror=n=>r(n),o.src=e}))}function Be(){if(Be.cachedResult!==void 0)return Be.cachedResult;let e=pe.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=pe.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=pe.IOS:/Safari/i.test(t)?e=pe.DESKTOP_SAFARI:/Firefox/i.test(t)?e=pe.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=pe.IE),Be.cachedResult=e,Be.cachedResult}function Cr(e,t){const r=Be(),o=ku[r];let n=e,i=t,a=n*i;const u=n>i?i/n:n/i;for(;a>o*o;){const g=(o+n)/2,x=(o+i)/2;g<x?(i=x,n=x*u):(i=g*u,n=g),a=n*i}return{width:n,height:i}}function mt(e,t){let r,o;try{if(r=new OffscreenCanvas(e,t),o=r.getContext("2d"),o===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),o=r.getContext("2d")}return r.width=e,r.height=t,[r,o]}function Pr(e,t){const{width:r,height:o}=Cr(e.width,e.height),[n,i]=mt(r,o);return t&&/jpe?g/.test(t)&&(i.fillStyle="white",i.fillRect(0,0,n.width,n.height)),i.drawImage(e,0,0,n.width,n.height),n}function ot(){return ot.cachedResult!==void 0||(ot.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),ot.cachedResult}function lt(e,t={}){return new Promise((function(r,o){let n,i;var a=function(){try{return i=Pr(n,t.fileType||e.type),r([n,i])}catch(g){return o(g)}},u=function(g){try{var x=function(s){try{throw s}catch(f){return o(f)}};try{let s;return yr(e).then((function(f){try{return s=f,_r(s).then((function(c){try{return n=c,(function(){try{return a()}catch(l){return o(l)}})()}catch(l){return x(l)}}),x)}catch(c){return x(c)}}),x)}catch(s){x(s)}}catch(s){return o(s)}};try{if(ot()||[pe.DESKTOP_SAFARI,pe.MOBILE_SAFARI].includes(Be()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(g){try{return n=g,a()}catch{return u()}}),u)}catch{u()}}))}function dt(e,t,r,o,n=1){return new Promise((function(i,a){let u;if(t==="image/png"){let x,s,f;return x=e.getContext("2d"),{data:s}=x.getImageData(0,0,e.width,e.height),f=Ae.encode([s.buffer],e.width,e.height,4096*n),u=new Blob([f],{type:t}),u.name=r,u.lastModified=o,g.call(this)}{let x=function(){return g.call(this)};if(t==="image/bmp")return new Promise((s=>Ar.toBlob(e,s))).then((function(s){try{return u=s,u.name=r,u.lastModified=o,x.call(this)}catch(f){return a(f)}}).bind(this),a);{let s=function(){return x.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:n}).then((function(f){try{return u=f,u.name=r,u.lastModified=o,s.call(this)}catch(c){return a(c)}}).bind(this),a);{let f;return f=e.toDataURL(t,n),Wt(f,r,o).then((function(c){try{return u=c,s.call(this)}catch(l){return a(l)}}).bind(this),a)}}}function g(){return i(u)}}))}function ye(e){e.width=0,e.height=0}function Xe(){return new Promise((function(e,t){let r,o,n,i;return Xe.cachedResult!==void 0?e(Xe.cachedResult):Wt("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(a){try{return r=a,lt(r).then((function(u){try{return o=u[1],dt(o,r.type,r.name,r.lastModified).then((function(g){try{return n=g,ye(o),lt(n).then((function(x){try{return i=x[0],Xe.cachedResult=i.width===1&&i.height===2,e(Xe.cachedResult)}catch(s){return t(s)}}),t)}catch(x){return t(x)}}),t)}catch(g){return t(g)}}),t)}catch(u){return t(u)}}),t)}))}function Ur(e){return new Promise(((t,r)=>{const o=new br;o.onload=n=>{const i=new DataView(n.target.result);if(i.getUint16(0,!1)!=65496)return t(-2);const a=i.byteLength;let u=2;for(;u<a;){if(i.getUint16(u+2,!1)<=8)return t(-1);const g=i.getUint16(u,!1);if(u+=2,g==65505){if(i.getUint32(u+=2,!1)!=1165519206)return t(-1);const x=i.getUint16(u+=6,!1)==18761;u+=i.getUint32(u+4,x);const s=i.getUint16(u,x);u+=2;for(let f=0;f<s;f++)if(i.getUint16(u+12*f,x)==274)return t(i.getUint16(u+12*f+8,x))}else{if((65280&g)!=65280)break;u+=i.getUint16(u,!1)}}return t(-1)},o.onerror=n=>r(n),o.readAsArrayBuffer(e)}))}function Nr(e,t){const{width:r}=e,{height:o}=e,{maxWidthOrHeight:n}=t;let i,a=e;return isFinite(n)&&(r>n||o>n)&&([a,i]=mt(r,o),r>o?(a.width=n,a.height=o/r*n):(a.width=r/o*n,a.height=n),i.drawImage(e,0,0,a.width,a.height),ye(e)),a}function Rr(e,t){const{width:r}=e,{height:o}=e,[n,i]=mt(r,o);switch(t>4&&t<9?(n.width=o,n.height=r):(n.width=r,n.height=o),t){case 2:i.transform(-1,0,0,1,r,0);break;case 3:i.transform(-1,0,0,-1,r,o);break;case 4:i.transform(1,0,0,-1,0,o);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,o,0);break;case 7:i.transform(0,-1,-1,0,o,r);break;case 8:i.transform(0,-1,1,0,0,r)}return i.drawImage(e,0,0,r,o),ye(e),n}function vn(e,t,r=0){return new Promise((function(o,n){let i,a,u,g,x,s,f,c,l,S,b,I,E,v,O,N,R,T,M,p;function h(_=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;i+=_,t.onProgress(Math.min(i,100))}function F(_){if(t.signal&&t.signal.aborted)throw t.signal.reason;i=Math.min(Math.max(_,i),100),t.onProgress(i)}return i=r,a=t.maxIteration||10,u=1024*t.maxSizeMB*1024,h(),lt(e,t).then((function(_){try{return[,g]=_,h(),x=Nr(g,t),h(),new Promise((function(y,C){var A;if(!(A=t.exifOrientation))return Ur(e).then((function(m){try{return A=m,P.call(this)}catch(d){return C(d)}}).bind(this),C);function P(){return y(A)}return P.call(this)})).then((function(y){try{return s=y,h(),Xe().then((function(C){try{return f=C?x:Rr(x,s),h(),c=t.initialQuality||1,l=t.fileType||e.type,dt(f,l,e.name,e.lastModified,c).then((function(A){try{{let m=function(){if(a--&&(O>u||O>E)){let L,U;return L=p?.95*M.width:M.width,U=p?.95*M.height:M.height,[R,T]=mt(L,U),T.drawImage(M,0,0,L,U),c*=l==="image/png"?.85:.95,dt(R,l,e.name,e.lastModified,c).then((function(w){try{return N=w,ye(M),M=R,O=N.size,F(Math.min(99,Math.floor((v-O)/(v-u)*100))),m}catch($){return n($)}}),n)}return[1]},d=function(){return ye(M),ye(R),ye(x),ye(f),ye(g),F(100),o(N)};if(S=A,h(),b=S.size>u,I=S.size>e.size,!b&&!I)return F(100),o(S);var P;return E=e.size,v=S.size,O=v,M=f,p=!t.alwaysKeepResolution&&b,(P=(function(L){for(;L;){if(L.then)return void L.then(P,n);try{if(L.pop){if(L.length)return L.pop()?d.call(this):L;L=m}else L=L.call(this)}catch(U){return n(U)}}}).bind(this))(m)}}catch(m){return n(m)}}).bind(this),n)}catch(A){return n(A)}}).bind(this),n)}catch(C){return n(C)}}).bind(this),n)}catch(y){return n(y)}}).bind(this),n)}))}const Hu=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Ct;function ju(e,t){return new Promise(((r,o)=>{Ct||(Ct=(function(a){const u=[];return u.push(a),URL.createObjectURL(new Blob(u))})(Hu));const n=new Worker(Ct);n.addEventListener("message",(function(a){if(t.signal&&t.signal.aborted)n.terminate();else if(a.data.progress===void 0){if(a.data.error)return o(new Error(a.data.error)),void n.terminate();r(a.data.file),n.terminate()}else t.onProgress(a.data.progress)})),n.addEventListener("error",o),t.signal&&t.signal.addEventListener("abort",(()=>{o(t.signal.reason),n.terminate()})),n.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function fe(e,t){return new Promise((function(r,o){let n,i,a,u,g,x;if(n={...t},a=0,{onProgress:u}=n,n.maxSizeMB=n.maxSizeMB||Number.POSITIVE_INFINITY,g=typeof n.useWebWorker!="boolean"||n.useWebWorker,delete n.useWebWorker,n.onProgress=l=>{a=l,typeof u=="function"&&u(a)},!(e instanceof Blob||e instanceof Bu))return o(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return o(new Error("The file given is not an image"));if(x=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!g||typeof Worker!="function"||x)return vn(e,n).then((function(l){try{return i=l,c.call(this)}catch(S){return o(S)}}).bind(this),o);var s=(function(){try{return c.call(this)}catch(l){return o(l)}}).bind(this),f=function(l){try{return vn(e,n).then((function(S){try{return i=S,s()}catch(b){return o(b)}}),o)}catch(S){return o(S)}};try{return n.libURL=n.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",ju(e,n).then((function(l){try{return i=l,s()}catch{return f()}}),f)}catch{f()}function c(){try{i.name=e.name,i.lastModified=e.lastModified}catch{}try{n.preserveExif&&e.type==="image/jpeg"&&(!n.fileType||n.fileType&&n.fileType===e.type)&&(i=Ir(e,i))}catch{}return r(i)}}))}fe.getDataUrlFromFile=yr,fe.getFilefromDataUrl=Wt,fe.loadImage=_r,fe.drawImageInCanvas=Pr,fe.drawFileInCanvas=lt,fe.canvasToFile=dt,fe.getExifOrientation=Ur,fe.handleMaxWidthOrHeight=Nr,fe.followExifOrientation=Rr,fe.cleanupCanvasMemory=ye,fe.isAutoOrientationInBrowser=Xe,fe.approximateBelowMaximumCanvasSizeOfBrowser=Cr,fe.copyExifWithoutOrientation=Ir,fe.getBrowserName=Be,fe.version="2.0.2";const $u=e=>fe(e,{maxWidthOrHeight:1400,maxSizeMB:.1,initialQuality:.7}),Zu=[{value:"SSS",label:"SSS"},{value:"SS",label:"SS"},{value:"S",label:"S"},{value:"A+",label:"A+"},{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"F",label:"F"},{value:"B+",label:"B+"},{value:"C+",label:"C+"},{value:"D+",label:"D+"},{value:"F+",label:"F+"}],zu=[{value:"XX",label:"XX"},{value:"Prime2",label:"Prime 2"},{value:"Prime",label:"Prime"}],Xu=[{value:"",label:"No mods"},{value:"VJ",label:"Rank (VJ)"},{value:"HJ",label:"HJ"}],ec=()=>{const e=Zr(),t=zr(),{sharedChartId:r}=Xr(),o=Wr(),n=Yr(),i=Kr(Et.results.addResultMutation.mutationOptions({onSuccess:()=>{n.invalidateQueries(Et.charts.chart.queryFilter()),n.invalidateQueries(Et.charts.search.infiniteQueryFilter())}})),a=ni({sharedChartId:r?Number(r):0}),u=o.data?.id,g=!!o.data?.can_add_results_manually,x=a.data?.items[0],s=x&&`${x.songName} ${x.label}`,[f,c]=Ee.useState(null),[l,S]=Ee.useState(!1),{renderPopup:b,confirm:I}=Ti({okText:"Submit"}),E=qr({initialValues:{screenshot:null,grade:"",perfect:"",great:"",good:"",bad:"",miss:"",combo:"",score:"",mix:"XX",mod:""},validate:{screenshot:R=>R?null:"Screenshot is required",grade:R=>R?null:"Grade is required",perfect:R=>R?null:"Perfect is required",great:R=>R?null:"Great is required",good:R=>R?null:"Good is required",bad:R=>R?null:"Bad is required",miss:R=>R?null:"Miss is required",combo:R=>R?null:"Combo is required",score:R=>!R||R.length<4?"Score is required (min 4 digits)":null}}),v=E.values.screenshot,O=E.values,N=async({screenshot:R,...T})=>{if(!(!u||!r||!R)){try{await I()}catch{return}S(!0),c(null);try{const M=await $u(R),p=await Tr(R),h={grade:T.grade,perfect:Number(T.perfect),great:Number(T.great),good:Number(T.good),bad:Number(T.bad),miss:Number(T.miss),combo:Number(T.combo),score:Number(T.score),mix:T.mix,mod:T.mod,screenshot:await Ii(M),fileName:R.name,date:p||new Date,isExactDate:!!p,sharedChartId:Number(r),playerId:u};await i.mutateAsync(h),E.reset(),t(Qr.leaderboard.sharedChart.getPath({sharedChartId:r}))}catch(M){console.error(M),c(M)}S(!1)}};return u?g?H.jsxs("div",{className:ke.addResultPage,children:[b({content:H.jsxs("div",{className:ke.confirmation,children:[H.jsxs("div",{className:ke.splitPanels,children:[H.jsx("div",{className:ke.screenshotPanel,children:v&&H.jsx(Dn,{file:v})}),H.jsxs("div",{className:ke.formPanel,children:[H.jsx("div",{className:ke.chartName,children:s}),H.jsxs("div",{className:ke.grid,children:[H.jsx("div",{children:"Grade"}),H.jsx("div",{children:O.grade}),H.jsx("div",{style:{color:"#29D7FF"},children:"Perfect"}),H.jsx("div",{style:{color:"#29D7FF"},children:O.perfect}),H.jsx("div",{style:{color:"#21d021"},children:"Great"}),H.jsx("div",{style:{color:"#21d021"},children:O.great}),H.jsx("div",{style:{color:"#dede3a"},children:"Good"}),H.jsx("div",{style:{color:"#dede3a"},children:O.good}),H.jsx("div",{style:{color:"#f278fc"},children:"Bad"}),H.jsx("div",{style:{color:"#f278fc"},children:O.bad}),H.jsx("div",{style:{color:"#f48181"},children:"Miss"}),H.jsx("div",{style:{color:"#f48181"},children:O.miss}),H.jsx("div",{children:"Combo"}),H.jsx("div",{children:O.combo}),H.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:"Score"}),H.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:O.score}),H.jsx("div",{children:"Mods"}),H.jsx("div",{children:O.mod||"None (normal mode)"})]})]})]}),H.jsx(Tt,{radius:"md",variant:"light",color:"yellow",icon:H.jsx(di,{}),children:"Submitting false results may result in a BAN. Make sure your screenshot is readable and the numbers you selected are correct."})]})}),H.jsx($t,{order:2,mb:"xs",children:"Submit a result"}),H.jsxs(qt,{mb:"md",children:["Chart: ",s]}),H.jsx("form",{onSubmit:E.onSubmit(N),children:H.jsxs(Jr,{gap:"sm",children:[H.jsx(si,{label:"Screenshot",placeholder:"Select screenshot",accept:"image/*",withAsterisk:!0,...E.getInputProps("screenshot")}),v?.name.toLowerCase().endsWith(".heic")&&H.jsx(qt,{c:"red",size:"sm",children:"HEIC files are not supported. Please convert your screenshot to JPG or PNG."}),v&&H.jsx(Dn,{showDate:!0,file:v}),H.jsx(It,{label:"Grade",placeholder:"Select a grade",data:Zu,withAsterisk:!0,...E.getInputProps("grade")}),["perfect","great","good","bad","miss","combo"].map(R=>H.jsx(Jt,{label:R[0].toUpperCase()+R.slice(1),placeholder:"000",inputMode:"numeric",withAsterisk:!0,...E.getInputProps(R)},R)),H.jsx(Jt,{label:"Score",placeholder:"000000",inputMode:"numeric",withAsterisk:!0,...E.getInputProps("score")}),H.jsx(It,{label:"Mix",data:zu,withAsterisk:!0,...E.getInputProps("mix")}),H.jsx(It,{label:"Judge/rank",data:Xu,withAsterisk:!0,...E.getInputProps("mod")}),H.jsx(Pt,{type:"submit",loading:l,disabled:!E.isValid(),children:"Submit"}),f instanceof Error&&H.jsx(Tt,{color:"red",variant:"light",children:f.message})]})})]}):H.jsx(Tt,{radius:"md",variant:"light",color:"red",title:e.ERROR,icon:H.jsx(ei,{}),children:"You don't have access to this page"}):null};export{ec as default};
//# sourceMappingURL=AddResult-B_s84Mes.js.map
