var ve=Object.defineProperty;var ge=(s,n,t)=>n in s?ve(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t;var g=(s,n,t)=>(ge(s,typeof n!="symbol"?n+"":n,t),t);import{i as b,a8 as je,r as me,a0 as O,j as e,a9 as Ae,a7 as E,aa as be,ab as Ee,ac as Ne,ad as we,ae as M,af as ne,ag as se,ah as re,ai as oe,a4 as Pe,S as Te,Q as ke}from"./index-8f41d3ac.js";import{c as Ie}from"./index-70f455d5.js";import{T as Oe}from"./Toggle-769305fc.js";import{G as Le,f as xe,_ as I,g as D,a as le,u as Se,b as ce,S as _e,c as Z,L as S,d as Ce,A as De,i as W,e as Be,E as Re,h as Fe,C as Ke,j as Me,k as We,l as Ve,X as _,Y as C,m as He,w as ze,p as ye,R as V,n as de,o as J,q as pe,T as Q,r as H,B as Ge,P as Ue,s as Ye,t as y}from"./withParams-c63698fc.js";import"./usePlayers-f20deec1.js";var X=function(){return null};X.displayName="ZAxis";X.defaultProps={zAxisId:0,range:[64,64],scale:"auto",type:"number"};function z(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?z=function(t){return typeof t}:z=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(s)}function B(){return B=Object.assign||function(s){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=t[a])}return s},B.apply(this,arguments)}function he(s,n){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);n&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),t.push.apply(t,a)}return t}function w(s){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?he(Object(t),!0).forEach(function(a){Xe(s,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(t,a))})}return s}function Xe(s,n,t){return n in s?Object.defineProperty(s,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[n]=t,s}function $e(s,n){if(!(s instanceof n))throw new TypeError("Cannot call a class as a function")}function fe(s,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}function qe(s,n,t){return n&&fe(s.prototype,n),t&&fe(s,t),s}function Ze(s,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(n&&n.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),n&&te(s,n)}function te(s,n){return te=Object.setPrototypeOf||function(a,i){return a.__proto__=i,a},te(s,n)}function Je(s){var n=tt();return function(){var a=Y(s),i;if(n){var r=Y(this).constructor;i=Reflect.construct(a,arguments,r)}else i=a.apply(this,arguments);return Qe(this,i)}}function Qe(s,n){return n&&(z(n)==="object"||typeof n=="function")?n:et(s)}function et(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function tt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Y(s){return Y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Y(s)}var R=function(s){Ze(t,s);var n=Je(t);function t(){var a;$e(this,t);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return a=n.call.apply(n,[this].concat(r)),a.state={isAnimationFinished:!1},a.handleAnimationEnd=function(){a.setState({isAnimationFinished:!0})},a.handleAnimationStart=function(){a.setState({isAnimationFinished:!1})},a.id=Se("recharts-scatter-"),a}return qe(t,[{key:"renderSymbolsStatically",value:function(i){var r=this,c=this.props,l=c.shape,o=c.activeShape,h=c.activeIndex,p=Z(this.props);return i.map(function(u,m){var d=w(w({key:"symbol-".concat(m)},p),u);return b.createElement(S,B({className:"recharts-scatter-symbol"},Ce(r.props,u,m),{key:"symbol-".concat(m)}),t.renderSymbolItem(h===m?o:l,d))})}},{key:"renderSymbolsWithAnimation",value:function(){var i=this,r=this.props,c=r.points,l=r.isAnimationActive,o=r.animationBegin,h=r.animationDuration,p=r.animationEasing,u=r.animationId,m=this.state.prevPoints;return b.createElement(De,{begin:o,duration:h,isActive:l,easing:p,from:{t:0},to:{t:1},key:"pie-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var x=d.t,j=c.map(function(A,P){var T=m&&m[P];if(T){var v=W(T.cx,A.cx),N=W(T.cy,A.cy),k=W(T.size,A.size);return w(w({},A),{},{cx:v(x),cy:N(x),size:k(x)})}var F=W(0,A.size);return w(w({},A),{},{size:F(x)})});return b.createElement(S,null,i.renderSymbolsStatically(j))})}},{key:"renderSymbols",value:function(){var i=this.props,r=i.points,c=i.isAnimationActive,l=this.state.prevPoints;return c&&r&&r.length&&(!l||!Be(l,r))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(r)}},{key:"renderErrorBar",value:function(){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var r=this.props,c=r.points,l=r.xAxis,o=r.yAxis,h=r.children,p=xe(h,Re.displayName);if(!p)return null;function u(d,x){return{x:d.cx,y:d.cy,value:+d.node.y,errorVal:D(d,x)}}function m(d,x){return{x:d.cx,y:d.cy,value:+d.node.x,errorVal:D(d,x)}}return p.map(function(d,x){var j=d.props.direction;return b.cloneElement(d,{key:x,data:c,xAxis:l,yAxis:o,layout:j==="x"?"vertical":"horizontal",dataPointFormatter:j==="x"?m:u})})}},{key:"renderLine",value:function(){var i=this.props,r=i.points,c=i.line,l=i.lineType,o=i.lineJointType,h=Z(this.props),p=Z(c),u,m;if(l==="joint")u=r.map(function(N){return{x:N.cx,y:N.cy}});else if(l==="fitting"){var d=Fe(r),x=d.xmin,j=d.xmax,A=d.a,P=d.b,T=function(k){return A*k+P};u=[{x,y:T(x)},{x:j,y:T(j)}]}var v=w(w(w({},h),{},{fill:"none",stroke:h&&h.fill},p),{},{points:u});return b.isValidElement(c)?m=b.cloneElement(c,v):ce(c)?m=c(v):m=b.createElement(Ke,B({},v,{type:o})),b.createElement(S,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var i=this.props,r=i.hide,c=i.points,l=i.line,o=i.className,h=i.xAxis,p=i.yAxis,u=i.left,m=i.top,d=i.width,x=i.height,j=i.id,A=i.isAnimationActive;if(r||!c||!c.length)return null;var P=this.state.isAnimationFinished,T=je("recharts-scatter",o),v=h&&h.allowDataOverflow||p&&p.allowDataOverflow,N=I(j)?this.id:j;return b.createElement(S,{className:T,clipPath:v?"url(#clipPath-".concat(N,")"):null},v?b.createElement("defs",null,b.createElement("clipPath",{id:"clipPath-".concat(N)},b.createElement("rect",{x:u,y:m,width:d,height:x}))):null,l&&this.renderLine(),this.renderErrorBar(),b.createElement(S,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!A||P)&&Me.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(i,r){return i.animationId!==r.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:r.curPoints}:i.points!==r.curPoints?{curPoints:i.points}:null}},{key:"renderSymbolItem",value:function(i,r){var c;return b.isValidElement(i)?c=b.cloneElement(i,r):ce(i)?c=i(r):typeof i=="string"&&(c=b.createElement(_e,B({},r,{type:i}))),c}}]),t}(me.PureComponent);R.displayName="Scatter";R.defaultProps={xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Le.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"};R.getComposedData=function(s){var n=s.xAxis,t=s.yAxis,a=s.zAxis,i=s.item,r=s.displayedData,c=s.xAxisTicks,l=s.yAxisTicks,o=s.offset,h=i.props.tooltipType,p=xe(i.props.children,We.displayName),u=I(n.dataKey)?i.props.dataKey:n.dataKey,m=I(t.dataKey)?i.props.dataKey:t.dataKey,d=a&&a.dataKey,x=a?a.range:X.defaultProps.range,j=x&&x[0],A=n.scale.bandwidth?n.scale.bandwidth():0,P=t.scale.bandwidth?t.scale.bandwidth():0,T=r.map(function(v,N){var k=D(v,u),F=D(v,m),L=!I(d)&&D(v,d)||"-",ae=[{name:I(n.dataKey)?i.props.name:n.name||n.dataKey,unit:n.unit||"",value:k,payload:v,dataKey:u,type:h},{name:I(t.dataKey)?i.props.name:t.name||t.dataKey,unit:t.unit||"",value:F,payload:v,dataKey:m,type:h}];L!=="-"&&ae.push({name:a.name||a.dataKey,unit:a.unit||"",value:L,payload:v,dataKey:d,type:h});var $=le({axis:n,ticks:c,bandSize:A,entry:v,index:N,dataKey:u}),q=le({axis:t,ticks:l,bandSize:P,entry:v,index:N,dataKey:m}),ie=L!=="-"?a.scale(L):j,K=Math.sqrt(Math.max(ie,0)/Math.PI);return w(w({},v),{},{cx:$,cy:q,x:$-K,y:q-K,xAxis:n,yAxis:t,zAxis:a,width:2*K,height:2*K,size:ie,node:{x:k,y:F,z:L},tooltipPayload:ae,tooltipPosition:{x:$,y:q},payload:v},p&&p[N]&&p[N].props)});return w({points:T},o)};var at=Ve({chartName:"ScatterChart",GraphicalChild:R,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:_},{axisType:"yAxis",AxisComp:C},{axisType:"zAxis",AxisComp:X}],formatAxisMap:He}),ue=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)};function it(s,n){function t(a,i){if(s(a,i))return!0;if(Array.isArray(a))return!(!Array.isArray(i)||a.length!==i.length||!a.every(function(p,u){return t(p,i[u])}));if(Array.isArray(i))return!1;if(typeof a=="object"){if(typeof i!="object")return!1;var r=a===null,c=i===null;if(r||c)return r===c;var l=Object.keys(a),o=Object.keys(i);if(l.length!==o.length)return!1;var h=n?t:s;return!!l.every(function(p){return ue(a,p)&&ue(i,p)&&h(a[p],i[p])})}return!1}return t}var nt=function(n,t){for(var a=0;a<n.length;a++)if(t(n[a]))return a;return-1};function st(s,n){var t=[];function a(r){var c=nt(t,function(o){return n(r,o.key)});if(c>-1){var l=t[c];return c>0&&(t.splice(c,1),t.unshift(l)),l.value}}function i(r,c){a(r)||(t.unshift({key:r,value:c}),t.length>s&&t.pop())}return{get:a,put:i}}function rt(s){var n;return{get:function(a){if(n&&s(a,n.key))return n.value},put:function(a,i){n={key:a,value:i}}}}function ot(s,n){return s===1?rt(n):st(s,n)}function lt(s,n){var t=n?it(s,n):s;return function(a,i){if(a.length!==i.length)return!1;for(var r=0;r<a.length;r+=1)if(!t(a[r],i[r]))return!1;return!0}}function ct(){for(var s=1,n=function(o,h){return o===h},t=!1,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];typeof i[0]=="number"&&(s=i.shift()),typeof i[0]=="function"?n=i.shift():typeof i[0]>"u"&&i.shift(),typeof i[0]=="boolean"&&(t=i[0]);var c=ot(s,lt(n,t));return function(l){return function(){for(var o=arguments.length,h=new Array(o),p=0;p<o;p++)h[p]=arguments[p];var u=c.get(h);return u===void 0&&(u=l.apply(l,h),c.put(h,u)),u}}}class G extends b.PureComponent{render(){const{active:n,onToggle:t,text:a}=this.props;return e.jsx("div",{className:Ie("toggle-button",{active:n}),onClick:()=>t(!n),children:a})}}g(G,"propTypes",{text:O.string,onToggle:O.func,active:O.bool});const f={SINGLE_TWO:"SINGLE_TWO",SINGLE_FIVE:"SINGLE_FIVE",DOUBLE_TWO:"DOUBLE_TWO",DOUBLE_FIVE:"DOUBLE_FIVE",BOTH_TWO:"BOTH_TWO",BOTH_FIVE:"BOTH_FIVE"},dt=s=>{switch(s){case f.SINGLE_TWO:return[e.jsx(y,{dataKey:"single.twoBars.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"11"),e.jsx(y,{dataKey:"single.twoBars.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"22")];case f.SINGLE_FIVE:return[e.jsx(y,{dataKey:"single.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"1"),e.jsx(y,{dataKey:"single.p2notPlayed",fill:"#899db3",stackId:"stack",isAnimationActive:!0},"2"),e.jsx(y,{dataKey:"single.notPlayed",fill:"#70707060",stackId:"stack",isAnimationActive:!0},"3"),e.jsx(y,{dataKey:"single.p1notPlayed",fill:"#bfa988",stackId:"stack",isAnimationActive:!0},"4"),e.jsx(y,{dataKey:"single.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"5")];case f.DOUBLE_TWO:return[e.jsx(y,{dataKey:"double.twoBars.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"11"),e.jsx(y,{dataKey:"double.twoBars.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"22")];case f.DOUBLE_FIVE:return[e.jsx(y,{dataKey:"double.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"1"),e.jsx(y,{dataKey:"double.p2notPlayed",fill:"#899db3",stackId:"stack",isAnimationActive:!0},"2"),e.jsx(y,{dataKey:"double.notPlayed",fill:"#70707060",stackId:"stack",isAnimationActive:!0},"3"),e.jsx(y,{dataKey:"double.p1notPlayed",fill:"#bfa988",stackId:"stack",isAnimationActive:!0},"4"),e.jsx(y,{dataKey:"double.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"5")];case f.BOTH_TWO:return[e.jsx(y,{dataKey:"all.twoBars.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"11"),e.jsx(y,{dataKey:"all.twoBars.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"22")];case f.BOTH_FIVE:return[e.jsx(y,{dataKey:"all.p1win",fill:"#4696f0",stackId:"stack",isAnimationActive:!0},"1"),e.jsx(y,{dataKey:"all.p2notPlayed",fill:"#899db3",stackId:"stack",isAnimationActive:!0},"2"),e.jsx(y,{dataKey:"all.notPlayed",fill:"#70707060",stackId:"stack",isAnimationActive:!0},"3"),e.jsx(y,{dataKey:"all.p1notPlayed",fill:"#bfa988",stackId:"stack",isAnimationActive:!0},"4"),e.jsx(y,{dataKey:"all.p2win",fill:"#eda338",stackId:"stack",isAnimationActive:!0},"5")];default:return null}},ee=void 0,pt=ye("id"),ht=ye("compareToId"),ft=ct()((s,n,t)=>{if(!s||!n)return{};let a=s.ratingChanges[0].rating,i=n.ratingChanges[0].rating;const r=E.flow(E.sortBy("date"),E.map(o=>(o.rating&&(a=o.rating),o.rating2&&(i=o.rating2),{rating1:a,rating2:i,date:o.date})),E.sortedUniqBy("date"))([...s.ratingChanges,...n.ratingChanges.map(o=>({date:o.date,rating2:o.rating}))]);a=s.placesChanges[0].place,i=n.placesChanges[0].place;const c=E.flow(E.sortBy("date"),E.map(o=>(o.place&&(a=o.place),o.place2&&(i=o.place2),{place1:a,place2:i,date:o.date})))([...s.placesChanges,...n.placesChanges.map(o=>({date:o.date,place2:o.place}))]),l=E.fromPairs(Array.from({length:28}).map((o,h)=>[h+1,{}]));return E.keys(l).forEach(o=>{const h=E.flow(E.map("chart"),E.uniqBy("sharedChartId"))([...s.resultsByLevel[o],...n.resultsByLevel[o]]),p={x:o,all:{p1win:0,p1notPlayed:0,p2win:0,p2notPlayed:0,notPlayed:0,twoBars:{}},double:{p1win:0,p1notPlayed:0,p2win:0,p2notPlayed:0,notPlayed:0,twoBars:{}},single:{p1win:0,p1notPlayed:0,p2win:0,p2notPlayed:0,notPlayed:0,twoBars:{}}};h.forEach(d=>{const x=d.results.findIndex(P=>P.playerId===s.id),j=d.results.findIndex(P=>P.playerId===n.id),A=d.chartType.startsWith("D")?p.double:p.single;x<0&&j<0?console.log("wtf?"):x<0?(p.all.p1notPlayed++,A.p1notPlayed++):j<0?(p.all.p2notPlayed++,A.p2notPlayed++):x<j?(p.all.p1win++,A.p1win++):j<x&&(p.all.p2win++,A.p2win++)});const u=d=>{const x=d.p1win+d.p2win||1;d.twoBars.p1win=d.p1win/x,d.twoBars.p2win=d.p2win/x};u(p.all),u(p.single),u(p.double);const m=(d,x)=>{d.p1win=d.p1win/x,d.p1notPlayed=d.p1notPlayed/x,d.p2win=d.p2win/x,d.p2notPlayed=d.p2notPlayed/x,d.notPlayed=1-d.p1win-d.p1notPlayed-d.p2win-d.p2notPlayed};m(p.all,t.chartLevels[o]),m(p.double,t.doublesLevels[o]),m(p.single,t.singlesLevels[o]),l[o]=p}),{ratingChanges:r,placesChanges:c,perLevelComparison:E.values(l)}}),ut=(s,n)=>{const t=pt(s,n),a=ht(s,n);return{profile:t??void 0,profile2:a??void 0,combinedData:ft(t,a,s.tracklist.data),tracklist:s.tracklist.data,filter:s.profiles.filter,error:s.charts.error||s.tracklist.error,isLoading:s.charts.isLoading||s.results.isLoadingRanking||s.tracklist.isLoading}},mt={fetchChartsData:be,setProfilesFilter:Ee,resetProfilesFilter:Ne};class U extends me.Component{constructor(){super(...arguments);g(this,"state",{isLevelGraphCombined:!0,compareBarsMode:f.BOTH_TWO});g(this,"onRefresh",()=>{const{isLoading:t}=this.props;!t&&this.props.fetchChartsData()});g(this,"onChangeDayRange",t=>{const{filter:a}=this.props;this.props.setProfilesFilter({...a,dayRange:t})});g(this,"rhMargin",{top:5,bottom:5,right:5,left:0});g(this,"rhXDomain",["dataMin","dataMax"]);g(this,"rhYDomain",["dataMin - 100","dataMax + 100"]);g(this,"rhXTickFormatter",t=>M(t).toLocaleDateString());g(this,"rhTooltip",({active:t,payload:a,label:i})=>{const{profile:r,profile2:c}=this.props,l=r.name,o=c.name;return!a||!a[0]?null:e.jsxs("div",{className:"history-tooltip",children:[e.jsx("div",{children:M(a[0].payload.date).toLocaleDateString()}),a[1]&&e.jsxs("div",{style:{fontWeight:"bold",color:a[1].color},children:[l,": ",Math.round(a[1].value)]}),a[0]&&e.jsxs("div",{style:{fontWeight:"bold",color:a[0].color},children:[o,": ",Math.round(a[0].value)]})]})});g(this,"circleShape",t=>e.jsx("circle",{cx:t.cx,cy:t.cy,r:4,fill:t.fill},t.key));g(this,"plcMargin",{top:5,bottom:5,right:5,left:0});g(this,"plcTooltip",({active:t,payload:a,label:i})=>{const{profile:r,profile2:c}=this.props,{compareBarsMode:l}=this.state,o=[f.SINGLE_TWO,f.DOUBLE_TWO,f.BOTH_TWO].includes(l),h=r.name,p=c.name;if(!a||!a[0])return null;const u=(m,d)=>e.jsxs("div",{style:{fontWeight:"bold",color:m.color},children:[d,": ",Math.round(E.get(m.dataKey,m.payload)*100),"%"]},m.name);return e.jsxs("div",{className:"history-tooltip",children:[e.jsxs("div",{children:["Level: ",a[0].payload.x]}),u(a[0],`${h} wins`),!o&&u(a[1],`${p} has no score`),!o&&u(a[2],"Both have no score"),!o&&u(a[3],`${h} has no score`),u(o?a[1]:a[4],`${p} wins`)]})});g(this,"plcXDomain",[0,1]);g(this,"plcXTicks",[0,.5,1]);g(this,"plcXFormatter",t=>`${Math.round(t*100)}%`)}renderRankingHistory(){const{combinedData:t}=this.props;return e.jsx(V,{minHeight:ee,aspect:1.6,children:e.jsxs(de,{data:t.ratingChanges,margin:this.rhMargin,children:[e.jsx(J,{strokeDasharray:"3 3"}),e.jsx(_,{dataKey:"date",type:"number",domain:this.rhXDomain,tickFormatter:this.rhXTickFormatter}),e.jsx(C,{allowDecimals:!1,domain:this.rhYDomain,tickFormatter:Math.round,width:40}),e.jsx(pe,{y:1e3,stroke:"white"}),e.jsx(Q,{isAnimationActive:!1,content:this.rhTooltip}),e.jsx(H,{type:"monotone",isAnimationActive:!1,dataKey:"rating2",stroke:"#ffd388",strokeWidth:3,dot:!1}),e.jsx(H,{type:"monotone",isAnimationActive:!1,dataKey:"rating1",stroke:"#88d3ff",strokeWidth:3,dot:!1})]})})}renderAccuracyPoints(t=!1){const{profile:a,profile2:i}=this.props;return e.jsx(V,{minHeight:ee,aspect:1.6,children:e.jsxs(at,{margin:{top:5,bottom:5,right:5,left:0},children:[e.jsx(J,{strokeDasharray:"3 3"}),e.jsx(_,{dataKey:"[0]",type:"number",domain:[1,28],tickFormatter:r=>Math.round(r),ticks:[1,3,5,7,9,11,13,15,17,19,21,23,25,27]}),e.jsx(C,{dataKey:"[1]",type:"number",domain:[0,100],width:40,tickFormatter:r=>Math.round(r)+"%"}),e.jsx(R,{shape:this.circleShape,data:(t?i:a).accuracyPointsRaw,fill:t?"#ffd388":"#88d3ff"})]})})}renderPlaceHistory(){const{combinedData:t,profile:a,profile2:i}=this.props,r=a.name,c=i.name;return e.jsx(V,{minHeight:ee,aspect:1.6,children:e.jsxs(de,{data:t.placesChanges,margin:{top:5,bottom:5,right:5,left:0},children:[e.jsx(J,{strokeDasharray:"3 3"}),e.jsx(_,{dataKey:"date",type:"number",domain:["dataMin","dataMax"],tickFormatter:l=>M(l).toLocaleDateString()}),e.jsx(C,{allowDecimals:!1,domain:[1,l=>l<3?l+2:l+1],interval:0,reversed:!0,width:40}),e.jsx(Q,{isAnimationActive:!1,content:({active:l,payload:o,label:h})=>!o||!o[0]?null:e.jsxs("div",{className:"history-tooltip",children:[e.jsx("div",{children:M(o[0].payload.date).toLocaleDateString()}),o[1]&&e.jsxs("div",{style:{fontWeight:"bold",color:o[1].color},children:[r,": #",o[1].value]}),o[0]&&e.jsxs("div",{style:{fontWeight:"bold",color:o[0].color},children:[c,": #",o[0].value]})]})}),e.jsx(H,{isAnimationActive:!1,type:"stepAfter",dataKey:"place2",stroke:"#ffd388",strokeWidth:3,dot:!1}),e.jsx(H,{isAnimationActive:!1,type:"stepAfter",dataKey:"place1",stroke:"#88d3ff",strokeWidth:3,dot:!1})]})})}renderPerLevelComparison(){const{combinedData:t}=this.props,{compareBarsMode:a}=this.state;return t.perLevelComparison&&e.jsx(V,{width:"100%",aspect:.7,children:e.jsxs(Ge,{layout:"vertical",data:[...t.perLevelComparison],margin:this.plcMargin,children:[e.jsx(Q,{isAnimationActive:!1,content:this.plcTooltip}),e.jsx(C,{reversed:!0,dataKey:"x",type:"category",width:23}),e.jsx(_,{type:"number",domain:this.plcXDomain,ticks:this.plcXTicks,tickFormatter:this.plcXFormatter}),e.jsx(pe,{x:.5,stroke:"#666"}),dt(a)]})})}renderProfile(){const t=this.context,{profile:a,profile2:i,filter:r}=this.props,{compareBarsMode:c}=this.state;return e.jsxs("div",{className:"profile",children:[e.jsxs("div",{className:"profile-header",children:[e.jsxs("div",{className:"profile-name text-with-header blue",children:[e.jsx("div",{className:"text-header",children:t.PLAYER}),e.jsx("div",{children:a.name})]}),e.jsxs("div",{className:"text-with-header",children:[e.jsx("div",{className:"text-header",children:t.RANK}),e.jsxs("div",{children:["#",a.rank]})]}),e.jsxs("div",{className:"text-with-header",children:[e.jsx("div",{className:"text-header",children:t.PP}),e.jsx("div",{children:Math.floor(a.pp)})]}),e.jsxs("div",{className:"text-with-header",children:[e.jsx("div",{className:"text-header",children:t.LAST_TIME_PLAYED}),e.jsx("div",{children:a.lastResultDate?ne(t,a.lastResultDate):t.NEVER})]}),e.jsx("div",{className:"_flex-fill"}),e.jsxs("div",{className:"text-with-header -select",children:[e.jsx("div",{className:"text-header",children:t.COMPARE_WITH}),e.jsx("div",{children:e.jsx(Ue,{})})]})]}),e.jsxs("div",{className:"profile-header right-align",children:[e.jsxs("div",{className:"profile-name text-with-header orange",children:[e.jsx("div",{className:"text-header",children:t.PLAYER}),e.jsx("div",{children:i.name})]}),e.jsxs("div",{className:"text-with-header",children:[e.jsx("div",{className:"text-header",children:t.RANK}),e.jsxs("div",{children:["#",i.rank]})]}),e.jsxs("div",{className:"text-with-header",children:[e.jsx("div",{className:"text-header",children:t.PP}),e.jsx("div",{children:Math.floor(i.pp)})]}),e.jsxs("div",{className:"text-with-header",children:[e.jsx("div",{className:"text-header",children:t.LAST_TIME_PLAYED}),e.jsx("div",{children:i.lastResultDate?ne(t,i.lastResultDate):t.NEVER})]})]}),e.jsxs("div",{className:"profile-section-horizontal-container",children:[e.jsx("div",{className:"profile-section",children:e.jsx("div",{className:"profile-section-content",children:e.jsxs("div",{className:"profile-section-2",children:[e.jsx("div",{className:"profile-sm-section-header flex",children:e.jsx("span",{children:t.VICTORIES_BY_LEVEL})}),e.jsx("div",{className:"profile-sm-section-header flex",children:(()=>{const l=[f.SINGLE_TWO,f.DOUBLE_TWO,f.BOTH_TWO].includes(c);return e.jsxs("div",{className:"toggle-holder",children:[e.jsx(Oe,{className:"combine-toggle",checked:!l,onChange:()=>this.setState(o=>({compareBarsMode:{[f.SINGLE_TWO]:f.SINGLE_FIVE,[f.DOUBLE_TWO]:f.DOUBLE_FIVE,[f.BOTH_TWO]:f.BOTH_FIVE,[f.SINGLE_FIVE]:f.SINGLE_TWO,[f.DOUBLE_FIVE]:f.DOUBLE_TWO,[f.BOTH_FIVE]:f.BOTH_TWO}[o.compareBarsMode]})),children:t.DETAILED}),e.jsxs("div",{className:"tabs-holder",children:[e.jsx(G,{text:t.ALL,active:[f.BOTH_TWO,f.BOTH_FIVE].includes(c),onToggle:()=>{this.setState(o=>({compareBarsMode:l?f.BOTH_TWO:f.BOTH_FIVE}))}}),e.jsx(G,{text:t.SINGLES,active:[f.SINGLE_TWO,f.SINGLE_FIVE].includes(c),onToggle:o=>{this.setState(h=>({compareBarsMode:l?f.SINGLE_TWO:f.SINGLE_FIVE}))}}),e.jsx(G,{text:t.DOUBLES,active:[f.DOUBLE_TWO,f.DOUBLE_FIVE].includes(c),onToggle:o=>{this.setState(h=>({compareBarsMode:l?f.DOUBLE_TWO:f.DOUBLE_FIVE}))}})]})]})})()}),e.jsx("div",{className:"chart-container",children:this.renderPerLevelComparison()})]})})}),e.jsxs("div",{className:"profile-section",children:[e.jsxs("div",{className:"profile-section-content",children:[e.jsxs("div",{className:"profile-section-2",children:[e.jsx("div",{className:"profile-sm-section-header",children:e.jsx("span",{children:t.ELO})}),e.jsx("div",{className:"chart-container",children:this.renderRankingHistory()})]}),e.jsxs("div",{className:"profile-section-2",children:[e.jsx("div",{className:"profile-sm-section-header",children:e.jsx("span",{children:t.PLACE_IN_TOP})}),e.jsx("div",{className:"chart-container",children:this.renderPlaceHistory()})]})]}),(()=>{const l=r.dayRange||a.filterRange,o=se(l[0]*1e3*60*60*24).format("L"),h=se(l[1]*1e3*60*60*24).format("L"),p=Math.max(l[0]-1,a.minMaxRange[0]),u=Math.min(l[0]+1,l[1]),m=Math.max(l[1]-1,l[0]),d=Math.min(l[1]+1,a.minMaxRange[1]);return e.jsxs("div",{className:"range-container",children:[e.jsx(Ye,{range:l,min:a.minMaxRange[0],max:a.minMaxRange[1],onChange:this.onChangeDayRange}),e.jsxs("div",{className:"range-controls _flex-row",children:[e.jsx("button",{className:"btn btn-sm btn-dark",onClick:()=>this.onChangeDayRange([p,l[1]]),children:e.jsx(re,{})}),e.jsx("span",{className:"date-text",children:o}),e.jsx("button",{className:"btn btn-sm btn-dark",onClick:()=>this.onChangeDayRange([u,l[1]]),children:e.jsx(oe,{})}),e.jsx("div",{className:"_flex-fill"}),e.jsx("button",{className:"btn btn-sm btn-dark",onClick:()=>this.onChangeDayRange([l[0],m]),children:e.jsx(re,{})}),e.jsx("span",{className:"date-text",children:h}),e.jsx("button",{className:"btn btn-sm btn-dark",onClick:()=>this.onChangeDayRange([l[0],d]),children:e.jsx(oe,{})})]})]})})()]})]}),e.jsxs("div",{className:"profile-section-horizontal-container",children:[e.jsx("div",{className:"profile-section",children:e.jsx("div",{className:"profile-section-content",children:e.jsxs("div",{className:"profile-section-2",children:[e.jsx("div",{className:"profile-sm-section-header",children:e.jsx("span",{children:t.ACCURACY_BY_LEVEL})}),e.jsx("div",{className:"chart-container",children:this.renderAccuracyPoints()})]})})}),e.jsx("div",{className:"profile-section",children:e.jsx("div",{className:"profile-section-content",children:e.jsxs("div",{className:"profile-section-2",children:[e.jsx("div",{className:"profile-sm-section-header",children:e.jsx("span",{children:t.ACCURACY_BY_LEVEL})}),e.jsx("div",{className:"chart-container",children:this.renderAccuracyPoints(!0)})]})})})]})]})}render(){const{isLoading:t,profile:a,error:i}=this.props;Pe&&console.log("profile:",a);const r=this.context;return e.jsx("div",{className:"profile-compare-page",children:e.jsxs("div",{className:"content",children:[i&&i.message,e.jsxs("div",{className:"top-controls",children:[e.jsx("div",{className:"_flex-fill"}),e.jsxs("button",{disabled:t,className:"btn btn-sm btn-dark btn-icon",onClick:this.onRefresh,children:[e.jsx(Te,{})," ",r.UPDATE]})]}),t&&e.jsx(ke,{}),!t&&E.isEmpty(a)&&e.jsx("div",{className:"profile",children:"Profile not found"}),!t&&!E.isEmpty(a)&&this.renderProfile()]})})}}g(U,"contextType",we),g(U,"propTypes",{profile:O.object,error:O.object,isLoading:O.bool.isRequired}),g(U,"defaultProps",{profile:{},profile2:{},combinedData:{}});const bt=ze(Ae(ut,mt)(U));export{bt as default};
//# sourceMappingURL=ProfileCompare-28c6eb3b.js.map
