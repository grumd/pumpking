import{av as w,ai as h,aw as u,j as s,h as b,_ as x,a1 as k,ax as A,O as j,d as N,ay as v,az as o,I as g,aA as y,a4 as C}from"./index-29528a73.js";import{F as Q,u as R}from"./useUser-223653a3.js";import{c as _}from"./index-9b74013f.js";import{T as P}from"./Toggle-eeb1441b.js";const f=()=>{const a=w();return h.user.preferencesMutation.useMutation({onSuccess:n=>{a.setQueryData(u(h.user.current,void 0,"query"),n),a.invalidateQueries(u(h.charts.search))}})};function S(){return s.jsxs("div",{className:"faq",children:[s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Как считается рейтинг?"}),s.jsxs("div",{className:"answer",children:["A: Используется ",s.jsx("a",{href:"https://en.wikipedia.org/wiki/Elo_rating_system",children:"рейтинг Эло"}),", широко используемый в шахматах и других играх, слегка модицированный под условия игры на пампе. Средний рейтинг - 1000. Коэффициент К зависит от уровня чарта (более сложные чарты сильнее влияют на рейтинг). Количество очков влияет на заработанный рейтинг (маленький отрыв от противника не даст так много очков как большой отрыв)."]})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Что такое рр и чем оно отличается от эло?"}),s.jsxs("div",{className:"answer",children:["A: РР (performance points) - система очков, взятая из osu!. Эло - система рейтинга, взятая из шахмат. Основные отличия:",s.jsx("br",{}),"С эло твои очки зависят от других игроков на этом чарте, с рр твои очки зависят только от того, как ты сыграешь чарт.",s.jsx("br",{}),"С эло можно потерять очки или заставить другого игрока их потерять, с рр можно только набирать больше очков.",s.jsx("br",{}),"С эло намного проще кого-то обогнать, с рр люди редко меняются местами в рейтинге.",s.jsx("br",{}),"Эло показывает кто кого обыгрывает в последнее время, а рр показывает, кто на каком примерно уровне по скиллу.",s.jsx("br",{}),"Сейчас рейтинг сортируется по Эло. РР выступает в качестве дополнительной инфы для интереса, плюс используется как стартовое значение Эло."]})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Система Эло используется для игр 1 на 1, как она используется на пампе, где на одном чарте играет много игроков?"}),s.jsx("div",{className:"answer",children:"A: Рекорды на одном чарте делятся на несколько игр 1 на 1. Если есть 3 игрока: A, B, C; то считается, что было 3 отдельные игры: A vs B, A vs C, B vs C."})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Как считается сумма рр?"}),s.jsx("div",{className:"answer",children:"A: Сначала все скоры игрока сортируются по рр. Затем в общую сумму рр добавляется 100% от лучшего скора, 95% от второго скора, 90% от третьего, 86% от 4-го и так далее. (Формула коэффициента - 0.95^N). Таким образом, на общую сумму рр больше всего влияют самые лучшие результаты человека за всё время, и чтобы поднять свой уровень рр, нужно получать новые топовые результаты (и поднимать свой скилл)."})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Учитываются ли рекорды на ранке в рейтинге?"}),s.jsx("div",{className:"answer",children:"A: Да. Как минимум потому что у нас есть много рекордов, взятых с машин бестов, и мы не знаем наверняка, на ранке они или нет. Если у игрока в топе есть два скора - на ранке и без ранка, используется тот, где больше очков."})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Почему меня нет в рейтинге?"}),s.jsx("div",{className:"answer",children:"A: В таблицу попадают только те, у кого есть хотя бы 20 игр 1 на 1. Первые 20 игр используются для определения изначального рейтинга."})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Почему суммарное количество оценок S-A-B не совпадает с общим количеством скоров?"}),s.jsx("div",{className:"answer",children:"A: Не для каждого результата известна оценка."})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Если у меня есть несколько рекордов на А, несколько на А+, как считается суммарное количество грейдов в таблице?"}),s.jsx("div",{className:"answer",children:"A: В каждой колонке учитываются обе буквы - и треснутые, и с удержанным лайфом. То есть и А, и А+ идут в колонку А. Точно так же для B, C, D."})]}),s.jsxs("div",{className:"question-answer",children:[s.jsx("div",{className:"question",children:"Q: Убери аккураси из таблицы!"}),s.jsx("div",{className:"answer",children:"A: Грем, это секция для вопросов."})]})]})}function E({ranking:a,isLoading:t,preferences:n}){const i=b(),l=f();return s.jsxs("div",{className:"ranking-list",children:[x.isEmpty(a)&&!t&&"ничего не найдено",t&&s.jsx(k,{}),!t&&s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"place",children:i.RANK}),s.jsx("th",{className:"name",children:i.NAME}),s.jsx("th",{className:"name name-piu",children:i.AMPASS}),s.jsx("th",{className:"rating",children:"pp"}),s.jsx("th",{className:"playcount",children:i.PLAYCOUNT}),s.jsx("th",{className:"playcount",children:i.SCORES_count}),s.jsx("th",{className:"accuracy",children:i.ACCURACY}),s.jsx("th",{className:"hide-col",children:" "})]})}),s.jsx("tbody",{children:a.map((e,d)=>{const r=n.playersHiddenStatus[e.id];return r&&!n.showHiddenPlayersInRanking?null:s.jsxs("tr",{className:_("player",{"hidden-player":r}),children:[s.jsx("td",{className:"place",children:d===0?s.jsx(A,{}):`#${d+1}`}),s.jsx("td",{className:"name",children:s.jsxs("div",{className:"name-container",children:[s.jsx(Q,{region:e.region}),s.jsx(j,{exact:!0,to:N.profile.getPath({id:e.id}),children:e.nickname})]})}),s.jsx("td",{className:"name name-piu",children:s.jsx(j,{exact:!0,to:N.profile.getPath({id:e.id}),children:e.arcade_name})}),s.jsx("td",{className:"rating secondary",children:Math.floor(e.pp)}),s.jsx("td",{className:"playcount",children:e.results_count}),s.jsx("td",{className:"playcount",children:e.best_results_count}),s.jsx("td",{className:"accuracy",children:e.accuracy?`${e.accuracy.toFixed(2)}%`:""}),s.jsx("td",{className:"hide-col",children:s.jsx(P,{onChange:()=>{l.mutate(x.set(["playersHiddenStatus",e.id],!r,n))},checked:!r})})]},e.id)})})]})]})}const B=()=>{var m;const a=b(),t=R(),{isLoading:n,isFetching:i,error:l,data:e,refetch:d}=h.players.stats.useQuery(),r=f(),c=(m=t.data)==null?void 0:m.preferences,p=()=>{r.mutate(x.set(["showHiddenPlayersInRanking"],!c.showHiddenPlayersInRanking,c))},q=()=>{!n&&d()};return s.jsx("div",{className:"ranking-page",children:s.jsxs("div",{className:"content",children:[l&&l.message,s.jsxs("div",{className:"top-controls",children:[s.jsx("div",{className:"_flex-fill"}),s.jsxs(v,{children:[s.jsx(o,{index:!0,element:s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"btn btn-sm btn-dark btn-icon _margin-right",disabled:!c,onClick:p,children:c!=null&&c.showHiddenPlayersInRanking?a.HIDE_UNSELECTED:a.SHOW_ALL}),s.jsx(g,{to:"faq",children:s.jsxs("button",{className:"btn btn-sm btn-dark btn-icon _margin-right",children:[s.jsx(y,{})," faq"]})}),s.jsxs("button",{disabled:i,className:"btn btn-sm btn-dark btn-icon",onClick:q,children:[s.jsx(C,{})," ",a.UPDATE]})]})}),s.jsx(o,{path:"faq",element:s.jsx(g,{to:"..",children:s.jsx("button",{className:"btn btn-sm btn-dark btn-icon",children:"назад"})})})]})]}),s.jsxs(v,{children:[s.jsx(o,{index:!0,element:s.jsx(E,{ranking:e,isLoading:n,preferences:c})}),s.jsx(o,{path:"faq",element:s.jsx(S,{})})]})]})})};export{B as default};
//# sourceMappingURL=Ranking-76f240a7.js.map
