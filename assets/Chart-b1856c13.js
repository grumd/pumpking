var en=Object.defineProperty;var tn=(e,t,r)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ke=(e,t,r)=>(tn(e,typeof t!="symbol"?t+"":t,r),r);import{q as lt,o as ne,s as ge,i as j,B as W,t as ye,v as vr,r as E,x as ct,E as Ie,L as rn,C as mr,y as hr,A as It,j as i,T as nn,N as an,U as on,V as sn,W as De,X as ln,Y as cn,n as gr,Z as Qe,M as dn,u as dt,_ as pn,e as fn,$ as Dt,a0 as un,a1 as Bt,a2 as vn,a3 as mn,G as hn,a4 as kt,a5 as gn}from"./index-0ef7cbf5.js";import{U as yr,c as pt,f as ft,u as yn}from"./useFilter-6e72a0f4.js";import{u as br}from"./useUser-ea9a3a55.js";import{c as k}from"./index-90441374.js";import{T as Or,G as xr,_ as bn}from"./Tooltip-a70a5681.js";import{n as Lt}from"./numeral-1e0b41f3.js";import{F as On}from"./index-68d8463e.js";var xn={root:"m-8d3f4000",loader:"m-302b9fb1",group:"m-1a0f1b21"};const Ge=xn;var wn=Object.defineProperty,Pn=Object.defineProperties,_n=Object.getOwnPropertyDescriptors,Be=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,Pr=Object.prototype.propertyIsEnumerable,Ft=(e,t,r)=>t in e?wn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mt=(e,t)=>{for(var r in t||(t={}))wr.call(t,r)&&Ft(e,r,t[r]);if(Be)for(var r of Be(t))Pr.call(t,r)&&Ft(e,r,t[r]);return e},jn=(e,t)=>Pn(e,_n(t)),En=(e,t)=>{var r={};for(var n in e)wr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Be)for(var n of Be(e))t.indexOf(n)<0&&Pr.call(e,n)&&(r[n]=e[n]);return r};const Tt={orientation:"horizontal"},Sn=ye((e,{borderWidth:t})=>({group:{"--ai-border-width":vr(t)}})),ut=lt((e,t)=>{const r=ne("ActionIconGroup",Tt,e),n=ne("ActionIconGroup",Tt,e),{className:a,style:o,classNames:p,styles:l,unstyled:c,orientation:d,vars:s,borderWidth:u,variant:f}=n,v=En(n,["className","style","classNames","styles","unstyled","orientation","vars","borderWidth","variant"]),y=ge({name:"ActionIconGroup",props:r,classes:Ge,className:a,style:o,classNames:p,styles:l,unstyled:c,vars:s,varsResolver:Sn,rootSelector:"group"});return j.createElement(W,Mt(jn(Mt({},y("group")),{ref:t,variant:f,mod:{"data-orientation":d},role:"group"}),v))});ut.classes=Ge;ut.displayName="@mantine/core/ActionIconGroup";var $n={root:"m-5ae2e3c",barsLoader:"m-7a2bd4cd",bar:"m-870bb79","bars-loader-animation":"m-5d2b3b9d",dotsLoader:"m-4e3f22d7",dot:"m-870c4af","loader-dots-animation":"m-aac34a1",ovalLoader:"m-b34414df","oval-loader-animation":"m-f8e89c4b"};const G=$n;var Nn=Object.defineProperty,An=Object.defineProperties,Cn=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,_r=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Ht=(e,t,r)=>t in e?Nn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Rn=(e,t)=>{for(var r in t||(t={}))_r.call(t,r)&&Ht(e,r,t[r]);if(ke)for(var r of ke(t))jr.call(t,r)&&Ht(e,r,t[r]);return e},In=(e,t)=>An(e,Cn(t)),Dn=(e,t)=>{var r={};for(var n in e)_r.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&ke)for(var n of ke(e))t.indexOf(n)<0&&jr.call(e,n)&&(r[n]=e[n]);return r};const Bn=E.forwardRef((e,t)=>{var r=e,{className:n}=r,a=Dn(r,["className"]);return j.createElement(W,In(Rn({component:"span",className:ct(G.barsLoader,n)},a),{ref:t}),j.createElement("span",{className:G.bar}),j.createElement("span",{className:G.bar}),j.createElement("span",{className:G.bar}))});var kn=Object.defineProperty,Ln=Object.defineProperties,Fn=Object.getOwnPropertyDescriptors,Le=Object.getOwnPropertySymbols,Er=Object.prototype.hasOwnProperty,Sr=Object.prototype.propertyIsEnumerable,Vt=(e,t,r)=>t in e?kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mn=(e,t)=>{for(var r in t||(t={}))Er.call(t,r)&&Vt(e,r,t[r]);if(Le)for(var r of Le(t))Sr.call(t,r)&&Vt(e,r,t[r]);return e},Tn=(e,t)=>Ln(e,Fn(t)),Hn=(e,t)=>{var r={};for(var n in e)Er.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Le)for(var n of Le(e))t.indexOf(n)<0&&Sr.call(e,n)&&(r[n]=e[n]);return r};const Vn=E.forwardRef((e,t)=>{var r=e,{className:n}=r,a=Hn(r,["className"]);return j.createElement(W,Tn(Mn({component:"span",className:ct(G.ovalLoader,n)},a),{ref:t}))});var Wn=Object.defineProperty,Gn=Object.defineProperties,Un=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,$r=Object.prototype.hasOwnProperty,Nr=Object.prototype.propertyIsEnumerable,Wt=(e,t,r)=>t in e?Wn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zn=(e,t)=>{for(var r in t||(t={}))$r.call(t,r)&&Wt(e,r,t[r]);if(Fe)for(var r of Fe(t))Nr.call(t,r)&&Wt(e,r,t[r]);return e},qn=(e,t)=>Gn(e,Un(t)),Yn=(e,t)=>{var r={};for(var n in e)$r.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Fe)for(var n of Fe(e))t.indexOf(n)<0&&Nr.call(e,n)&&(r[n]=e[n]);return r};const Xn=E.forwardRef((e,t)=>{var r=e,{className:n}=r,a=Yn(r,["className"]);return j.createElement(W,qn(zn({component:"span",className:ct(G.dotsLoader,n)},a),{ref:t}),j.createElement("span",{className:G.dot}),j.createElement("span",{className:G.dot}),j.createElement("span",{className:G.dot}))});var Zn=Object.defineProperty,Jn=Object.defineProperties,Kn=Object.getOwnPropertyDescriptors,Me=Object.getOwnPropertySymbols,Ar=Object.prototype.hasOwnProperty,Cr=Object.prototype.propertyIsEnumerable,Gt=(e,t,r)=>t in e?Zn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Se=(e,t)=>{for(var r in t||(t={}))Ar.call(t,r)&&Gt(e,r,t[r]);if(Me)for(var r of Me(t))Cr.call(t,r)&&Gt(e,r,t[r]);return e},Ut=(e,t)=>Jn(e,Kn(t)),Qn=(e,t)=>{var r={};for(var n in e)Ar.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Me)for(var n of Me(e))t.indexOf(n)<0&&Cr.call(e,n)&&(r[n]=e[n]);return r};const ea={bars:Bn,oval:Vn,dots:Xn},ta={loaders:ea,type:"oval"},ra=ye((e,{size:t,color:r})=>({root:{"--loader-size":Ie(t,"loader-size"),"--loader-color":r?rn(r,e):void 0}})),be=lt((e,t)=>{const r=ne("Loader",ta,e),n=r,{size:a,color:o,type:p,vars:l,className:c,style:d,classNames:s,styles:u,unstyled:f,loaders:v,variant:y,children:h}=n,g=Qn(n,["size","color","type","vars","className","style","classNames","styles","unstyled","loaders","variant","children"]),b=ge({name:"Loader",props:r,classes:G,className:c,style:d,classNames:s,styles:u,unstyled:f,vars:l,varsResolver:ra});return h?j.createElement(W,Se(Ut(Se({},b("root")),{ref:t}),g),h):j.createElement(W,Se(Ut(Se({},b("root")),{ref:t,component:v[p],variant:y,size:a}),g))});be.classes=G;be.displayName="@mantine/core/Loader";var na=Object.defineProperty,aa=Object.defineProperties,oa=Object.getOwnPropertyDescriptors,Te=Object.getOwnPropertySymbols,Rr=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable,zt=(e,t,r)=>t in e?na(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$e=(e,t)=>{for(var r in t||(t={}))Rr.call(t,r)&&zt(e,r,t[r]);if(Te)for(var r of Te(t))Ir.call(t,r)&&zt(e,r,t[r]);return e},qt=(e,t)=>aa(e,oa(t)),sa=(e,t)=>{var r={};for(var n in e)Rr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Te)for(var n of Te(e))t.indexOf(n)<0&&Ir.call(e,n)&&(r[n]=e[n]);return r};const ia={},la=ye((e,{size:t,radius:r,variant:n,gradient:a,color:o})=>{const p=e.variantColorResolver({color:o||e.primaryColor,theme:e,gradient:a,variant:n||"filled"});return{root:{"--ai-size":Ie(t,"ai-size"),"--ai-radius":r===void 0?void 0:hr(r),"--ai-bg":o||n?p.background:void 0,"--ai-hover":o||n?p.hover:void 0,"--ai-hover-color":o||n?p.hoverColor:void 0,"--ai-color":o||n?p.color:void 0,"--ai-bd":o||n?p.border:void 0}}}),Ue=mr((e,t)=>{const r=ne("ActionIcon",ia,e),n=r,{className:a,unstyled:o,variant:p,classNames:l,styles:c,style:d,loading:s,loaderProps:u,size:f,color:v,radius:y,__staticSelector:h,gradient:g,vars:b,children:_,disabled:w,"data-disabled":m}=n,O=sa(n,["className","unstyled","variant","classNames","styles","style","loading","loaderProps","size","color","radius","__staticSelector","gradient","vars","children","disabled","data-disabled"]),x=ge({name:["ActionIcon",h],props:r,className:a,style:d,classes:Ge,classNames:l,styles:c,unstyled:o,vars:b,varsResolver:la});return j.createElement(yr,qt($e($e({},x("root",{active:!w&&!s&&!m})),O),{unstyled:o,variant:p,size:f,disabled:w||s,ref:t,mod:{loading:s,disabled:w||m}}),s?j.createElement(be,$e(qt($e({},x("loader")),{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)"}),u)):_)});Ue.classes=Ge;Ue.displayName="@mantine/core/ActionIcon";Ue.Group=ut;var ca={root:"m-77c9d27d",inner:"m-80f1301b",label:"m-811560b9",section:"m-a74036a",loader:"m-a25b86ee",group:"m-80d6d844"};const ze=ca;var da=Object.defineProperty,pa=Object.defineProperties,fa=Object.getOwnPropertyDescriptors,He=Object.getOwnPropertySymbols,Dr=Object.prototype.hasOwnProperty,Br=Object.prototype.propertyIsEnumerable,Yt=(e,t,r)=>t in e?da(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Xt=(e,t)=>{for(var r in t||(t={}))Dr.call(t,r)&&Yt(e,r,t[r]);if(He)for(var r of He(t))Br.call(t,r)&&Yt(e,r,t[r]);return e},ua=(e,t)=>pa(e,fa(t)),va=(e,t)=>{var r={};for(var n in e)Dr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&He)for(var n of He(e))t.indexOf(n)<0&&Br.call(e,n)&&(r[n]=e[n]);return r};const Zt={orientation:"horizontal"},ma=ye((e,{borderWidth:t})=>({group:{"--button-border-width":vr(t)}})),vt=lt((e,t)=>{const r=ne("ButtonGroup",Zt,e),n=ne("ButtonGroup",Zt,e),{className:a,style:o,classNames:p,styles:l,unstyled:c,orientation:d,vars:s,borderWidth:u,variant:f}=n,v=va(n,["className","style","classNames","styles","unstyled","orientation","vars","borderWidth","variant"]),y=ge({name:"ButtonGroup",props:r,classes:ze,className:a,style:o,classNames:p,styles:l,unstyled:c,vars:s,varsResolver:ma,rootSelector:"group"});return j.createElement(W,Xt(ua(Xt({},y("group")),{ref:t,variant:f,mod:{"data-orientation":d},role:"group"}),v))});vt.classes=ze;vt.displayName="@mantine/core/ButtonGroup";var ha=Object.defineProperty,ga=Object.defineProperties,ya=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,Lr=Object.prototype.propertyIsEnumerable,Jt=(e,t,r)=>t in e?ha(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t)=>{for(var r in t||(t={}))kr.call(t,r)&&Jt(e,r,t[r]);if(Ve)for(var r of Ve(t))Lr.call(t,r)&&Jt(e,r,t[r]);return e},et=(e,t)=>ga(e,ya(t)),ba=(e,t)=>{var r={};for(var n in e)kr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Ve)for(var n of Ve(e))t.indexOf(n)<0&&Lr.call(e,n)&&(r[n]=e[n]);return r};const Oa={},xa=ye((e,{radius:t,color:r,gradient:n,variant:a,size:o,justify:p})=>{const l=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:n,variant:a||"filled"});return{root:{"--button-justify":p,"--button-height":Ie(o,"button-height"),"--button-padding-x":Ie(o,"button-padding-x"),"--button-fz":o!=null&&o.includes("compact")?It(o.replace("compact-","")):It(o),"--button-radius":t===void 0?void 0:hr(t),"--button-bg":r||a?l.background:void 0,"--button-hover":r||a?l.hover:void 0,"--button-color":r||a?l.color:void 0,"--button-bd":r||a?l.border:void 0,"--button-hover-color":r||a?l.hoverColor:void 0}}}),mt=mr((e,t)=>{const r=ne("Button",Oa,e),n=r,{style:a,vars:o,className:p,color:l,disabled:c,children:d,leftSection:s,rightSection:u,fullWidth:f,variant:v,radius:y,loading:h,loaderProps:g,gradient:b,classNames:_,styles:w,unstyled:m,"data-disabled":O}=n,x=ba(n,["style","vars","className","color","disabled","children","leftSection","rightSection","fullWidth","variant","radius","loading","loaderProps","gradient","classNames","styles","unstyled","data-disabled"]),P=ge({name:"Button",props:r,classes:ze,className:p,style:a,classNames:_,styles:w,unstyled:m,vars:o,varsResolver:xa}),S=!!s,$=!!u;return j.createElement(yr,X(et(X({ref:t},P("root",{active:!c&&!h&&!O})),{unstyled:m,variant:v,disabled:c||h,mod:{disabled:c||O,loading:h,block:f,"with-left-section":S,"with-right-section":$}}),x),j.createElement("span",X({},P("inner")),s&&j.createElement(W,et(X({component:"span"},P("section")),{mod:{position:"left"}}),s),h&&j.createElement(W,X({component:"span"},P("loader")),j.createElement(be,X({color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)"},g))),j.createElement(W,X({component:"span",mod:{loading:h}},P("label")),d),u&&j.createElement(W,et(X({component:"span"},P("section")),{mod:{position:"right"}}),u)))});mt.classes=ze;mt.displayName="@mantine/core/Button";mt.Group=vt;const wa="_loader_5ihl6_1",Pa={loader:wa};function Cs(){return i.jsx("div",{className:Pa.loader,children:i.jsx(be,{color:"white",type:"dots"})})}const _a={leaderboard:{path:"/leaderboard",sharedChart:{path:"/leaderboard/chart/:sharedChartId",getPath:e=>`/leaderboard/chart/${e.sharedChartId}`,addResult:{path:"/leaderboard/chart/:sharedChartId/add-result",getPath:e=>`/leaderboard/chart/${e.sharedChartId}/add-result`}}},leaderboardOld:{path:"/leaderboard-old"},songs:{path:"/songs"},ranking:{path:"/ranking",faq:{path:"/ranking/faq"}},tournaments:{path:"/tournaments"},profile:{path:"/profiles/:id",getPath:e=>`/profiles/${e.id}`,resultsByLevel:{path:"/profiles/:id/levels",getPath:e=>`/profiles/${e.id}/levels`,level:{path:"/profiles/:id/levels/:level",getPath:e=>`/profiles/${e.id}/levels/${e.level}`}},compare:{path:"/profiles/:id/vs/:compareToId",getPath:e=>`/profiles/${e.id}/vs/${e.compareToId}`}}},ja=()=>{const e=pt(ft);return[...e.playersAll??[],...e.playersNone??[],...e.playersSome??[],...e.sortChartsByPlayers??[]]},Ea="_songHeader_y80dr_1",Sa="_youtubeLink_y80dr_14",$a="_songName_y80dr_32",tt={songHeader:Ea,youtubeLink:Sa,songName:$a},Fr={24:"#48283a99",25:"#432a4e99",26:"#2d2a4e99",27:"#2a434e99"},ht={24:"Prime",25:"Prime2",26:"XX",27:"Phoenix"},Na=e=>e in ht,C={SSSP:"SSS+",SSS:"SSS",SSP:"SS+",SS:"SS",SP:"S+",S:"S",AAAP:"AAA+",AAA:"AAA",AAP:"AA+",AA:"AA",AP:"A+",A:"A",B:"B",C:"C",D:"D",F:"F"},Aa=e=>{if(e==null)return null;switch(!0){case e>=995e3:return C.SSSP;case e>=99e4:return C.SSS;case e>=985e3:return C.SSP;case e>=98e4:return C.SS;case e>=975e3:return C.SP;case e>=97e4:return C.S;case e>=96e4:return C.AAAP;case e>=95e4:return C.AAA;case e>=925e3:return C.AAP;case e>=9e5:return C.AA;case e>=825e3:return C.AP;case e>=75e4:return C.A;case e>=65e4:return C.B;case e>=55e4:return C.C;case e>=45e4:return C.D;default:return C.F}},Ca=({type:e,level:t})=>i.jsxs("div",{className:k("chart-name",{single:e==="S",singlep:e==="SP",doublep:e==="DP",double:e==="D",coop:e==="COOP"}),children:[i.jsx("span",{className:"chart-letter",children:e}),i.jsx("span",{className:"chart-number",children:t})]}),Ra=({chart:e,children:t=null})=>{const r=e.otherChartInstances.slice().sort((o,p)=>p.mix-o.mix),[n,a]=nn(e.label);return i.jsxs("div",{className:tt.songHeader,children:[i.jsx(Ca,{type:n,level:a??"?"}),i.jsxs("div",{className:tt.songName,children:[i.jsx(an,{to:_a.leaderboard.sharedChart.getPath({sharedChartId:e.id}),children:e.songName})," ",i.jsx(Or,{component:"span",c:"dimmed",children:e.difficulty?`(${e.difficulty.toFixed(1)}) `:""})]}),i.jsx("div",{className:tt.youtubeLink,children:i.jsx("a",{href:`https://youtube.com/results?${on.stringify({search_query:`${e.songName} ${e.label}`.replace(/( -)|(- )/g," ")})}`,target:"_blank",rel:"noopener noreferrer",children:i.jsx(sn,{})})}),i.jsxs(xr,{gap:"xs",ml:"auto",fz:"sm",children:[r.map(o=>o.level===e.level?null:i.jsxs(De,{color:Fr[o.mix],children:[ht[o.mix],": ",o.label]},o.mix)),t]})]})},Ia=({resultId:e})=>i.jsxs("a",{href:`https://api.pumpking.top:3001/results/${e}/screenshot`,target:"_blank",rel:"noopener noreferrer",children:["screenshot ",i.jsx(ln,{style:{fontSize:"80%"}})]});var Da=E.createContext();E.createContext();var Ba=function(t){return Array.isArray(t)?t[0]:t},ka=function(t){if(typeof t=="function"){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return t.apply(void 0,n)}},La=function(t,r){if(typeof t=="function")return ka(t,r);t!=null&&(t.current=r)},Kt=function(t){return t.reduce(function(r,n){var a=n[0],o=n[1];return r[a]=o,r},{})},Qt=typeof window<"u"&&window.document&&window.document.createElement?E.useLayoutEffect:E.useEffect,I="top",M="bottom",T="right",D="left",gt="auto",Oe=[I,M,T,D],se="start",me="end",Fa="clippingParents",Mr="viewport",fe="popper",Ma="reference",er=Oe.reduce(function(e,t){return e.concat([t+"-"+se,t+"-"+me])},[]),Tr=[].concat(Oe,[gt]).reduce(function(e,t){return e.concat([t,t+"-"+se,t+"-"+me])},[]),Ta="beforeRead",Ha="read",Va="afterRead",Wa="beforeMain",Ga="main",Ua="afterMain",za="beforeWrite",qa="write",Ya="afterWrite",Xa=[Ta,Ha,Va,Wa,Ga,Ua,za,qa,Ya];function z(e){return e?(e.nodeName||"").toLowerCase():null}function L(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ae(e){var t=L(e).Element;return e instanceof t||e instanceof Element}function F(e){var t=L(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function yt(e){if(typeof ShadowRoot>"u")return!1;var t=L(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Za(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},a=t.attributes[r]||{},o=t.elements[r];!F(o)||!z(o)||(Object.assign(o.style,n),Object.keys(a).forEach(function(p){var l=a[p];l===!1?o.removeAttribute(p):o.setAttribute(p,l===!0?"":l)}))})}function Ja(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var a=t.elements[n],o=t.attributes[n]||{},p=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),l=p.reduce(function(c,d){return c[d]="",c},{});!F(a)||!z(a)||(Object.assign(a.style,l),Object.keys(o).forEach(function(c){a.removeAttribute(c)}))})}}const Ka={name:"applyStyles",enabled:!0,phase:"write",fn:Za,effect:Ja,requires:["computeStyles"]};function U(e){return e.split("-")[0]}var re=Math.max,We=Math.min,ie=Math.round;function nt(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Hr(){return!/^((?!chrome|android).)*safari/i.test(nt())}function le(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),a=1,o=1;t&&F(e)&&(a=e.offsetWidth>0&&ie(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&ie(n.height)/e.offsetHeight||1);var p=ae(e)?L(e):window,l=p.visualViewport,c=!Hr()&&r,d=(n.left+(c&&l?l.offsetLeft:0))/a,s=(n.top+(c&&l?l.offsetTop:0))/o,u=n.width/a,f=n.height/o;return{width:u,height:f,top:s,right:d+u,bottom:s+f,left:d,x:d,y:s}}function bt(e){var t=le(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Vr(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&yt(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function q(e){return L(e).getComputedStyle(e)}function Qa(e){return["table","td","th"].indexOf(z(e))>=0}function Z(e){return((ae(e)?e.ownerDocument:e.document)||window.document).documentElement}function qe(e){return z(e)==="html"?e:e.assignedSlot||e.parentNode||(yt(e)?e.host:null)||Z(e)}function tr(e){return!F(e)||q(e).position==="fixed"?null:e.offsetParent}function eo(e){var t=/firefox/i.test(nt()),r=/Trident/i.test(nt());if(r&&F(e)){var n=q(e);if(n.position==="fixed")return null}var a=qe(e);for(yt(a)&&(a=a.host);F(a)&&["html","body"].indexOf(z(a))<0;){var o=q(a);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return a;a=a.parentNode}return null}function xe(e){for(var t=L(e),r=tr(e);r&&Qa(r)&&q(r).position==="static";)r=tr(r);return r&&(z(r)==="html"||z(r)==="body"&&q(r).position==="static")?t:r||eo(e)||t}function Ot(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ue(e,t,r){return re(e,We(t,r))}function to(e,t,r){var n=ue(e,t,r);return n>r?r:n}function Wr(){return{top:0,right:0,bottom:0,left:0}}function Gr(e){return Object.assign({},Wr(),e)}function Ur(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var ro=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Gr(typeof t!="number"?t:Ur(t,Oe))};function no(e){var t,r=e.state,n=e.name,a=e.options,o=r.elements.arrow,p=r.modifiersData.popperOffsets,l=U(r.placement),c=Ot(l),d=[D,T].indexOf(l)>=0,s=d?"height":"width";if(!(!o||!p)){var u=ro(a.padding,r),f=bt(o),v=c==="y"?I:D,y=c==="y"?M:T,h=r.rects.reference[s]+r.rects.reference[c]-p[c]-r.rects.popper[s],g=p[c]-r.rects.reference[c],b=xe(o),_=b?c==="y"?b.clientHeight||0:b.clientWidth||0:0,w=h/2-g/2,m=u[v],O=_-f[s]-u[y],x=_/2-f[s]/2+w,P=ue(m,x,O),S=c;r.modifiersData[n]=(t={},t[S]=P,t.centerOffset=P-x,t)}}function ao(e){var t=e.state,r=e.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||Vr(t.elements.popper,a)&&(t.elements.arrow=a))}const oo={name:"arrow",enabled:!0,phase:"main",fn:no,effect:ao,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ce(e){return e.split("-")[1]}var so={top:"auto",right:"auto",bottom:"auto",left:"auto"};function io(e,t){var r=e.x,n=e.y,a=t.devicePixelRatio||1;return{x:ie(r*a)/a||0,y:ie(n*a)/a||0}}function rr(e){var t,r=e.popper,n=e.popperRect,a=e.placement,o=e.variation,p=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,s=e.roundOffsets,u=e.isFixed,f=p.x,v=f===void 0?0:f,y=p.y,h=y===void 0?0:y,g=typeof s=="function"?s({x:v,y:h}):{x:v,y:h};v=g.x,h=g.y;var b=p.hasOwnProperty("x"),_=p.hasOwnProperty("y"),w=D,m=I,O=window;if(d){var x=xe(r),P="clientHeight",S="clientWidth";if(x===L(r)&&(x=Z(r),q(x).position!=="static"&&l==="absolute"&&(P="scrollHeight",S="scrollWidth")),x=x,a===I||(a===D||a===T)&&o===me){m=M;var $=u&&x===O&&O.visualViewport?O.visualViewport.height:x[P];h-=$-n.height,h*=c?1:-1}if(a===D||(a===I||a===M)&&o===me){w=T;var N=u&&x===O&&O.visualViewport?O.visualViewport.width:x[S];v-=N-n.width,v*=c?1:-1}}var A=Object.assign({position:l},d&&so),H=s===!0?io({x:v,y:h},L(r)):{x:v,y:h};if(v=H.x,h=H.y,c){var R;return Object.assign({},A,(R={},R[m]=_?"0":"",R[w]=b?"0":"",R.transform=(O.devicePixelRatio||1)<=1?"translate("+v+"px, "+h+"px)":"translate3d("+v+"px, "+h+"px, 0)",R))}return Object.assign({},A,(t={},t[m]=_?h+"px":"",t[w]=b?v+"px":"",t.transform="",t))}function lo(e){var t=e.state,r=e.options,n=r.gpuAcceleration,a=n===void 0?!0:n,o=r.adaptive,p=o===void 0?!0:o,l=r.roundOffsets,c=l===void 0?!0:l,d={placement:U(t.placement),variation:ce(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,rr(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:p,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,rr(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const co={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:lo,data:{}};var Ne={passive:!0};function po(e){var t=e.state,r=e.instance,n=e.options,a=n.scroll,o=a===void 0?!0:a,p=n.resize,l=p===void 0?!0:p,c=L(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&d.forEach(function(s){s.addEventListener("scroll",r.update,Ne)}),l&&c.addEventListener("resize",r.update,Ne),function(){o&&d.forEach(function(s){s.removeEventListener("scroll",r.update,Ne)}),l&&c.removeEventListener("resize",r.update,Ne)}}const fo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:po,data:{}};var uo={left:"right",right:"left",bottom:"top",top:"bottom"};function Ce(e){return e.replace(/left|right|bottom|top/g,function(t){return uo[t]})}var vo={start:"end",end:"start"};function nr(e){return e.replace(/start|end/g,function(t){return vo[t]})}function xt(e){var t=L(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function wt(e){return le(Z(e)).left+xt(e).scrollLeft}function mo(e,t){var r=L(e),n=Z(e),a=r.visualViewport,o=n.clientWidth,p=n.clientHeight,l=0,c=0;if(a){o=a.width,p=a.height;var d=Hr();(d||!d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:o,height:p,x:l+wt(e),y:c}}function ho(e){var t,r=Z(e),n=xt(e),a=(t=e.ownerDocument)==null?void 0:t.body,o=re(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),p=re(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),l=-n.scrollLeft+wt(e),c=-n.scrollTop;return q(a||r).direction==="rtl"&&(l+=re(r.clientWidth,a?a.clientWidth:0)-o),{width:o,height:p,x:l,y:c}}function Pt(e){var t=q(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function zr(e){return["html","body","#document"].indexOf(z(e))>=0?e.ownerDocument.body:F(e)&&Pt(e)?e:zr(qe(e))}function ve(e,t){var r;t===void 0&&(t=[]);var n=zr(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),o=L(n),p=a?[o].concat(o.visualViewport||[],Pt(n)?n:[]):n,l=t.concat(p);return a?l:l.concat(ve(qe(p)))}function at(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function go(e,t){var r=le(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function ar(e,t,r){return t===Mr?at(mo(e,r)):ae(t)?go(t,r):at(ho(Z(e)))}function yo(e){var t=ve(qe(e)),r=["absolute","fixed"].indexOf(q(e).position)>=0,n=r&&F(e)?xe(e):e;return ae(n)?t.filter(function(a){return ae(a)&&Vr(a,n)&&z(a)!=="body"}):[]}function bo(e,t,r,n){var a=t==="clippingParents"?yo(e):[].concat(t),o=[].concat(a,[r]),p=o[0],l=o.reduce(function(c,d){var s=ar(e,d,n);return c.top=re(s.top,c.top),c.right=We(s.right,c.right),c.bottom=We(s.bottom,c.bottom),c.left=re(s.left,c.left),c},ar(e,p,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function qr(e){var t=e.reference,r=e.element,n=e.placement,a=n?U(n):null,o=n?ce(n):null,p=t.x+t.width/2-r.width/2,l=t.y+t.height/2-r.height/2,c;switch(a){case I:c={x:p,y:t.y-r.height};break;case M:c={x:p,y:t.y+t.height};break;case T:c={x:t.x+t.width,y:l};break;case D:c={x:t.x-r.width,y:l};break;default:c={x:t.x,y:t.y}}var d=a?Ot(a):null;if(d!=null){var s=d==="y"?"height":"width";switch(o){case se:c[d]=c[d]-(t[s]/2-r[s]/2);break;case me:c[d]=c[d]+(t[s]/2-r[s]/2);break}}return c}function he(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=n===void 0?e.placement:n,o=r.strategy,p=o===void 0?e.strategy:o,l=r.boundary,c=l===void 0?Fa:l,d=r.rootBoundary,s=d===void 0?Mr:d,u=r.elementContext,f=u===void 0?fe:u,v=r.altBoundary,y=v===void 0?!1:v,h=r.padding,g=h===void 0?0:h,b=Gr(typeof g!="number"?g:Ur(g,Oe)),_=f===fe?Ma:fe,w=e.rects.popper,m=e.elements[y?_:f],O=bo(ae(m)?m:m.contextElement||Z(e.elements.popper),c,s,p),x=le(e.elements.reference),P=qr({reference:x,element:w,strategy:"absolute",placement:a}),S=at(Object.assign({},w,P)),$=f===fe?S:x,N={top:O.top-$.top+b.top,bottom:$.bottom-O.bottom+b.bottom,left:O.left-$.left+b.left,right:$.right-O.right+b.right},A=e.modifiersData.offset;if(f===fe&&A){var H=A[a];Object.keys(N).forEach(function(R){var J=[T,M].indexOf(R)>=0?1:-1,K=[I,M].indexOf(R)>=0?"y":"x";N[R]+=H[K]*J})}return N}function Oo(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=r.boundary,o=r.rootBoundary,p=r.padding,l=r.flipVariations,c=r.allowedAutoPlacements,d=c===void 0?Tr:c,s=ce(n),u=s?l?er:er.filter(function(y){return ce(y)===s}):Oe,f=u.filter(function(y){return d.indexOf(y)>=0});f.length===0&&(f=u);var v=f.reduce(function(y,h){return y[h]=he(e,{placement:h,boundary:a,rootBoundary:o,padding:p})[U(h)],y},{});return Object.keys(v).sort(function(y,h){return v[y]-v[h]})}function xo(e){if(U(e)===gt)return[];var t=Ce(e);return[nr(e),t,nr(t)]}function wo(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var a=r.mainAxis,o=a===void 0?!0:a,p=r.altAxis,l=p===void 0?!0:p,c=r.fallbackPlacements,d=r.padding,s=r.boundary,u=r.rootBoundary,f=r.altBoundary,v=r.flipVariations,y=v===void 0?!0:v,h=r.allowedAutoPlacements,g=t.options.placement,b=U(g),_=b===g,w=c||(_||!y?[Ce(g)]:xo(g)),m=[g].concat(w).reduce(function(oe,Y){return oe.concat(U(Y)===gt?Oo(t,{placement:Y,boundary:s,rootBoundary:u,padding:d,flipVariations:y,allowedAutoPlacements:h}):Y)},[]),O=t.rects.reference,x=t.rects.popper,P=new Map,S=!0,$=m[0],N=0;N<m.length;N++){var A=m[N],H=U(A),R=ce(A)===se,J=[I,M].indexOf(H)>=0,K=J?"width":"height",B=he(t,{placement:A,boundary:s,rootBoundary:u,altBoundary:f,padding:d}),V=J?R?T:D:R?M:I;O[K]>x[K]&&(V=Ce(V));var we=Ce(V),Q=[];if(o&&Q.push(B[H]<=0),l&&Q.push(B[V]<=0,B[we]<=0),Q.every(function(oe){return oe})){$=A,S=!1;break}P.set(A,Q)}if(S)for(var Pe=y?3:1,Ye=function(Y){var pe=m.find(function(je){var ee=P.get(je);if(ee)return ee.slice(0,Y).every(function(Xe){return Xe})});if(pe)return $=pe,"break"},de=Pe;de>0;de--){var _e=Ye(de);if(_e==="break")break}t.placement!==$&&(t.modifiersData[n]._skip=!0,t.placement=$,t.reset=!0)}}const Po={name:"flip",enabled:!0,phase:"main",fn:wo,requiresIfExists:["offset"],data:{_skip:!1}};function or(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function sr(e){return[I,T,M,D].some(function(t){return e[t]>=0})}function _o(e){var t=e.state,r=e.name,n=t.rects.reference,a=t.rects.popper,o=t.modifiersData.preventOverflow,p=he(t,{elementContext:"reference"}),l=he(t,{altBoundary:!0}),c=or(p,n),d=or(l,a,o),s=sr(c),u=sr(d);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:s,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":s,"data-popper-escaped":u})}const jo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:_o};function Eo(e,t,r){var n=U(e),a=[D,I].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,p=o[0],l=o[1];return p=p||0,l=(l||0)*a,[D,T].indexOf(n)>=0?{x:l,y:p}:{x:p,y:l}}function So(e){var t=e.state,r=e.options,n=e.name,a=r.offset,o=a===void 0?[0,0]:a,p=Tr.reduce(function(s,u){return s[u]=Eo(u,t.rects,o),s},{}),l=p[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=p}const $o={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:So};function No(e){var t=e.state,r=e.name;t.modifiersData[r]=qr({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Ao={name:"popperOffsets",enabled:!0,phase:"read",fn:No,data:{}};function Co(e){return e==="x"?"y":"x"}function Ro(e){var t=e.state,r=e.options,n=e.name,a=r.mainAxis,o=a===void 0?!0:a,p=r.altAxis,l=p===void 0?!1:p,c=r.boundary,d=r.rootBoundary,s=r.altBoundary,u=r.padding,f=r.tether,v=f===void 0?!0:f,y=r.tetherOffset,h=y===void 0?0:y,g=he(t,{boundary:c,rootBoundary:d,padding:u,altBoundary:s}),b=U(t.placement),_=ce(t.placement),w=!_,m=Ot(b),O=Co(m),x=t.modifiersData.popperOffsets,P=t.rects.reference,S=t.rects.popper,$=typeof h=="function"?h(Object.assign({},t.rects,{placement:t.placement})):h,N=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,H={x:0,y:0};if(x){if(o){var R,J=m==="y"?I:D,K=m==="y"?M:T,B=m==="y"?"height":"width",V=x[m],we=V+g[J],Q=V-g[K],Pe=v?-S[B]/2:0,Ye=_===se?P[B]:S[B],de=_===se?-S[B]:-P[B],_e=t.elements.arrow,oe=v&&_e?bt(_e):{width:0,height:0},Y=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Wr(),pe=Y[J],je=Y[K],ee=ue(0,P[B],oe[B]),Xe=w?P[B]/2-Pe-ee-pe-N.mainAxis:Ye-ee-pe-N.mainAxis,Yr=w?-P[B]/2+Pe+ee+je+N.mainAxis:de+ee+je+N.mainAxis,Ze=t.elements.arrow&&xe(t.elements.arrow),Xr=Ze?m==="y"?Ze.clientTop||0:Ze.clientLeft||0:0,_t=(R=A==null?void 0:A[m])!=null?R:0,Zr=V+Xe-_t-Xr,Jr=V+Yr-_t,jt=ue(v?We(we,Zr):we,V,v?re(Q,Jr):Q);x[m]=jt,H[m]=jt-V}if(l){var Et,Kr=m==="x"?I:D,Qr=m==="x"?M:T,te=x[O],Ee=O==="y"?"height":"width",St=te+g[Kr],$t=te-g[Qr],Je=[I,D].indexOf(b)!==-1,Nt=(Et=A==null?void 0:A[O])!=null?Et:0,At=Je?St:te-P[Ee]-S[Ee]-Nt+N.altAxis,Ct=Je?te+P[Ee]+S[Ee]-Nt-N.altAxis:$t,Rt=v&&Je?to(At,te,Ct):ue(v?At:St,te,v?Ct:$t);x[O]=Rt,H[O]=Rt-te}t.modifiersData[n]=H}}const Io={name:"preventOverflow",enabled:!0,phase:"main",fn:Ro,requiresIfExists:["offset"]};function Do(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Bo(e){return e===L(e)||!F(e)?xt(e):Do(e)}function ko(e){var t=e.getBoundingClientRect(),r=ie(t.width)/e.offsetWidth||1,n=ie(t.height)/e.offsetHeight||1;return r!==1||n!==1}function Lo(e,t,r){r===void 0&&(r=!1);var n=F(t),a=F(t)&&ko(t),o=Z(t),p=le(e,a,r),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&((z(t)!=="body"||Pt(o))&&(l=Bo(t)),F(t)?(c=le(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=wt(o))),{x:p.left+l.scrollLeft-c.x,y:p.top+l.scrollTop-c.y,width:p.width,height:p.height}}function Fo(e){var t=new Map,r=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function a(o){r.add(o.name);var p=[].concat(o.requires||[],o.requiresIfExists||[]);p.forEach(function(l){if(!r.has(l)){var c=t.get(l);c&&a(c)}}),n.push(o)}return e.forEach(function(o){r.has(o.name)||a(o)}),n}function Mo(e){var t=Fo(e);return Xa.reduce(function(r,n){return r.concat(t.filter(function(a){return a.phase===n}))},[])}function To(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function Ho(e){var t=e.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var ir={placement:"bottom",modifiers:[],strategy:"absolute"};function lr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Vo(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,a=t.defaultOptions,o=a===void 0?ir:a;return function(l,c,d){d===void 0&&(d=o);var s={placement:"bottom",orderedModifiers:[],options:Object.assign({},ir,o),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},u=[],f=!1,v={state:s,setOptions:function(b){var _=typeof b=="function"?b(s.options):b;h(),s.options=Object.assign({},o,s.options,_),s.scrollParents={reference:ae(l)?ve(l):l.contextElement?ve(l.contextElement):[],popper:ve(c)};var w=Mo(Ho([].concat(n,s.options.modifiers)));return s.orderedModifiers=w.filter(function(m){return m.enabled}),y(),v.update()},forceUpdate:function(){if(!f){var b=s.elements,_=b.reference,w=b.popper;if(lr(_,w)){s.rects={reference:Lo(_,xe(w),s.options.strategy==="fixed"),popper:bt(w)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach(function(N){return s.modifiersData[N.name]=Object.assign({},N.data)});for(var m=0;m<s.orderedModifiers.length;m++){if(s.reset===!0){s.reset=!1,m=-1;continue}var O=s.orderedModifiers[m],x=O.fn,P=O.options,S=P===void 0?{}:P,$=O.name;typeof x=="function"&&(s=x({state:s,options:S,name:$,instance:v})||s)}}}},update:To(function(){return new Promise(function(g){v.forceUpdate(),g(s)})}),destroy:function(){h(),f=!0}};if(!lr(l,c))return v;v.setOptions(d).then(function(g){!f&&d.onFirstUpdate&&d.onFirstUpdate(g)});function y(){s.orderedModifiers.forEach(function(g){var b=g.name,_=g.options,w=_===void 0?{}:_,m=g.effect;if(typeof m=="function"){var O=m({state:s,name:b,instance:v,options:w}),x=function(){};u.push(O||x)}})}function h(){u.forEach(function(g){return g()}),u=[]}return v}}var Wo=[fo,Ao,co,Ka,$o,Po,Io,oo,jo],Go=Vo({defaultModifiers:Wo}),Uo=typeof Element<"u",zo=typeof Map=="function",qo=typeof Set=="function",Yo=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Re(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!Re(e[n],t[n]))return!1;return!0}var o;if(zo&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(n=o.next()).done;)if(!t.has(n.value[0]))return!1;for(o=e.entries();!(n=o.next()).done;)if(!Re(n.value[1],t.get(n.value[0])))return!1;return!0}if(qo&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(n=o.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(Yo&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;if(Uo&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&e.$$typeof)&&!Re(e[a[n]],t[a[n]]))return!1;return!0}return e!==e&&t!==t}var Xo=function(t,r){try{return Re(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Zo=cn(Xo);var Jo=[],Ko=function(t,r,n){n===void 0&&(n={});var a=E.useRef(null),o={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||Jo},p=E.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),l=p[0],c=p[1],d=E.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(v){var y=v.state,h=Object.keys(y.elements);gr.flushSync(function(){c({styles:Kt(h.map(function(g){return[g,y.styles[g]||{}]})),attributes:Kt(h.map(function(g){return[g,y.attributes[g]]}))})})},requires:["computeStyles"]}},[]),s=E.useMemo(function(){var f={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[d,{name:"applyStyles",enabled:!1}])};return Zo(a.current,f)?a.current||f:(a.current=f,f)},[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,d]),u=E.useRef();return Qt(function(){u.current&&u.current.setOptions(s)},[s]),Qt(function(){if(!(t==null||r==null)){var f=n.createPopper||Go,v=f(t,r,s);return u.current=v,function(){v.destroy(),u.current=null}}},[t,r,n.createPopper]),{state:u.current?u.current.state:null,styles:l.styles,attributes:l.attributes,update:u.current?u.current.update:null,forceUpdate:u.current?u.current.forceUpdate:null}},Qo=function(){},es=function(){return Promise.resolve(null)},ts=[];function rs(e){var t=e.placement,r=t===void 0?"bottom":t,n=e.strategy,a=n===void 0?"absolute":n,o=e.modifiers,p=o===void 0?ts:o,l=e.referenceElement,c=e.onFirstUpdate,d=e.innerRef,s=e.children,u=E.useContext(Da),f=E.useState(null),v=f[0],y=f[1],h=E.useState(null),g=h[0],b=h[1];E.useEffect(function(){La(d,v)},[d,v]);var _=E.useMemo(function(){return{placement:r,strategy:a,onFirstUpdate:c,modifiers:[].concat(p,[{name:"arrow",enabled:g!=null,options:{element:g}}])}},[r,a,c,p,g]),w=Ko(l||u,v,_),m=w.state,O=w.styles,x=w.forceUpdate,P=w.update,S=E.useMemo(function(){return{ref:y,style:O.popper,placement:m?m.placement:r,hasPopperEscaped:m&&m.modifiersData.hide?m.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:m&&m.modifiersData.hide?m.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:O.arrow,ref:b},forceUpdate:x||Qo,update:P||es}},[y,b,r,m,O,P,x]);return Ba(s)(S)}function ns(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},ot(e,t)}function as(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,o;for(o=0;o<n.length;o++)a=n[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function cr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function os(e,t,r){return e===t?!0:e.correspondingElement?e.correspondingElement.classList.contains(r):e.classList.contains(r)}function ss(e,t,r){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&os(e,t,r))return!0;e=e.parentNode||e.host}return e}function is(e){return document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY}var ls=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var t=!1,r=Object.defineProperty({},"passive",{get:function(){t=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,r),window.removeEventListener("testPassiveEventSupport",n,r),t}};function cs(e){return e===void 0&&(e=0),function(){return++e}}var ds=cs(),st,Ae={},rt={},ps=["touchstart","touchmove"],fs="ignore-react-onclickoutside";function dr(e,t){var r=null,n=ps.indexOf(t)!==-1;return n&&st&&(r={passive:!e.props.preventDefault}),r}function us(e,t){var r,n,a=e.displayName||e.name||"Component";return n=r=function(o){ns(p,o);function p(c){var d;return d=o.call(this,c)||this,d.__outsideClickHandler=function(s){if(typeof d.__clickOutsideHandlerProp=="function"){d.__clickOutsideHandlerProp(s);return}var u=d.getInstance();if(typeof u.props.handleClickOutside=="function"){u.props.handleClickOutside(s);return}if(typeof u.handleClickOutside=="function"){u.handleClickOutside(s);return}throw new Error("WrappedComponent: "+a+" lacks a handleClickOutside(event) function for processing outside click events.")},d.__getComponentNode=function(){var s=d.getInstance();return t&&typeof t.setClickOutsideRef=="function"?t.setClickOutsideRef()(s):typeof s.setClickOutsideRef=="function"?s.setClickOutsideRef():gr.findDOMNode(s)},d.enableOnClickOutside=function(){if(!(typeof document>"u"||rt[d._uid])){typeof st>"u"&&(st=ls()),rt[d._uid]=!0;var s=d.props.eventTypes;s.forEach||(s=[s]),Ae[d._uid]=function(u){if(d.componentNode!==null&&(d.props.preventDefault&&u.preventDefault(),d.props.stopPropagation&&u.stopPropagation(),!(d.props.excludeScrollbar&&is(u)))){var f=u.composed&&u.composedPath&&u.composedPath().shift()||u.target;ss(f,d.componentNode,d.props.outsideClickIgnoreClass)===document&&d.__outsideClickHandler(u)}},s.forEach(function(u){document.addEventListener(u,Ae[d._uid],dr(cr(d),u))})}},d.disableOnClickOutside=function(){delete rt[d._uid];var s=Ae[d._uid];if(s&&typeof document<"u"){var u=d.props.eventTypes;u.forEach||(u=[u]),u.forEach(function(f){return document.removeEventListener(f,s,dr(cr(d),f))}),delete Ae[d._uid]}},d.getRef=function(s){return d.instanceRef=s},d._uid=ds(),d}var l=p.prototype;return l.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var d=this.instanceRef;return d.getInstance?d.getInstance():d},l.componentDidMount=function(){if(!(typeof document>"u"||!document.createElement)){var d=this.getInstance();if(t&&typeof t.handleClickOutside=="function"&&(this.__clickOutsideHandlerProp=t.handleClickOutside(d),typeof this.__clickOutsideHandlerProp!="function"))throw new Error("WrappedComponent: "+a+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside()}},l.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},l.componentWillUnmount=function(){this.disableOnClickOutside()},l.render=function(){var d=this.props;d.excludeScrollbar;var s=as(d,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?s.ref=this.getRef:s.wrappedRef=this.getRef,s.disableOnClickOutside=this.disableOnClickOutside,s.enableOnClickOutside=this.enableOnClickOutside,E.createElement(e,s)},p}(E.Component),r.displayName="OnClickOutside("+a+")",r.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:fs,preventDefault:!1,stopPropagation:!1},r.getClass=function(){return e.getClass?e.getClass():e},n}const vs=[{name:"preventOverflow",enabled:!0}],ms={right:"left",left:"right",top:"bottom",bottom:"top"},hs=e=>e&&ms[e.split("-")[0]];class it extends j.PureComponent{constructor(){super(),this.state={isVisible:!1},this.containerItemRef=j.createRef(),this.renderPopper=this.renderPopper.bind(this),this.toggleOverlayVisibility=this.toggleOverlayVisibility.bind(this)}hideOverlay(){this.setState({isVisible:!1})}toggleOverlayVisibility(){this.setState({isVisible:!this.state.isVisible})}handleClickOutside(t){t&&t.target.closest(".inner-popper-overlay")||this.hideOverlay()}renderPopper({ref:t,style:r,placement:n,arrowProps:a,scheduleUpdate:o,outOfBoundaries:p}){const{children:l,hideWhenOutOfBounds:c}=this.props;return i.jsxs("div",{ref:t,style:r,"data-placement":n,className:k("inner-popper-overlay",`arrow-${hs(n)}`,this.props.overlayClassName,{"out-of-bounds":p&&c}),children:[i.jsx("div",{className:"arrow-hider",children:i.jsx("div",{className:"arrow",ref:a.ref,style:a.style})}),i.jsx("div",{className:"inner-popper-content",children:l})]})}render(){const{placement:t,overlayItem:r}=this.props,{isVisible:n}=this.state;return i.jsxs(j.Fragment,{children:[i.jsx("div",{className:"overlay-item",ref:this.containerItemRef,onClick:this.toggleOverlayVisibility,children:r}),n&&dn.createPortal(i.jsx(rs,{container:document.body,modifiers:vs,placement:t,referenceElement:this.containerItemRef.current,children:this.renderPopper}),document.body)]})}}Ke(it,"propTypes",{placement:Qe.string,overlayItem:Qe.any,hideWhenOutOfBounds:Qe.bool}),Ke(it,"defaultTypes",{placement:"bottom"});const gs=us(it),pr=["#4DB3FF","#80B300","#FF6655","#FF99E6","#33FFCC","#e633c8","#dbe812","#FF1A66","#991AFF","#E6B333","#1AB399","#4D8066","#CC9999","#00E680","#809980","#E6FF80","#1AFF33","#999933","#E6331A","#CCCC00","#66E64D","#4D80CC","#9900B3","#4DB380","#FF4D4D"],fr=(e,t)=>t?`/grades/phoenix/${e}.png`:`/grades/phoenix/fail/${e}.png`,ys=({score:e,grade:t,isPass:r,mix:n,scoring:a="phoenix"})=>{const o=Aa(e);if(o==null)return null;if(a==="xx")return!t||t==="?"?null:i.jsx("img",{src:`/grades/${t}.png`,alt:t??"Grade"});let p=fr(o,r??!1);return r==null&&t!=null&&n>=24&&n<=26&&(p=fr(o,t.includes("+")||t.startsWith("S"))),i.jsx("img",{src:p,alt:o})},ur={xx:26,phoenix:27},bs=({mix:e})=>{const{scoring:t}=yn();return!t||!ur[t]?null:Na(e)&&ur[t]!==e?i.jsx(De,{color:Fr[e],children:ht[e]}):null},Os=({result:e,chart:t})=>{var d,s,u;const r=dt(),n=br(),a=pt(ft),o=a.sortChartsBy==="pp",p=e.playerId===((d=n.data)==null?void 0:d.id),l=pn(e,t),c=fn.profile.getPath({id:e.playerId});return i.jsxs("tr",{className:k({latest:e.isLatestScore}),style:e.highlightIndex>=0?{background:pr[e.highlightIndex]+"3A",outline:`1px solid ${pr[e.highlightIndex]}A0`}:{},children:[i.jsx("td",{className:"place",style:p?{fontWeight:"bold",color:"#ddd"}:{},children:`#${t.results.findIndex(f=>f.id===e.id)+1}`}),i.jsx("td",{className:k("nickname"),style:e.highlightIndex>=0||p?{fontWeight:"bold"}:{},children:i.jsxs("div",{className:"nickname-container",children:[e.region?i.jsx(On,{region:e.region}):null,i.jsxs("span",{className:"nickname-text",children:[i.jsx(Dt,{to:c,children:e.playerName}),!!e.placeDifference&&i.jsxs("span",{className:"change-holder up",children:[i.jsx("span",{children:e.placeDifference}),i.jsx(un,{})]}),(Bt||o&&e.highlightIndex>=0)&&i.jsxs("span",{className:"debug-elo-info",children:[" ",e.pp&&`${e.pp}pp`]})]}),i.jsxs(xr,{gap:"0.25em",ml:"auto",children:[((s=e.mods)==null?void 0:s.includes("HJ"))&&i.jsx(De,{color:"orange",children:"HJ"}),((u=e.mods)==null?void 0:u.includes("VJ"))&&i.jsx(De,{color:"red",children:"R"}),i.jsx(bs,{mix:e.mix})]})]})}),i.jsx("td",{className:k("score"),children:i.jsx(gs,{overlayClassName:"score-overlay-outer",overlayItem:i.jsxs("span",{className:"score-span",children:[!e.scoreIncrease&&i.jsx("span",{style:{fontSize:"80%"},children:"* "}),i.jsx("span",{children:Math.floor(e.score/1e3)}),i.jsxs("span",{style:{fontSize:"70%"},children:[",",`${e.score%1e3}`.padStart(3,"0")]})]}),placement:"top",children:i.jsxs("div",{className:"score-overlay",children:[i.jsx("div",{children:i.jsx(Ia,{resultId:e.id})}),Bt&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("span",{className:"_grey",children:"result id: "}),e.id]}),i.jsxs("div",{children:[i.jsx("span",{className:"_grey",children:"player id: "}),e.playerId]})]}),i.jsxs("div",{children:[i.jsxs("span",{className:"_grey",children:[r.PLAYER,": "]}),i.jsxs(Dt,{to:c,children:[e.playerName," (",e.playerNameArcade,")"]})]}),l?i.jsxs("div",{className:"important",children:[i.jsxs("span",{className:"_grey",children:[r.EXP,": "]}),"+",Lt(l).format("0,0")]}):null,e.pp?i.jsxs("div",{className:"important",children:[i.jsxs("span",{className:"_grey",children:[r.PP,": "]}),i.jsxs("span",{children:[e.pp,"pp"]})]}):null,!e.isExactGainedDate&&i.jsxs("div",{className:"warning",children:[i.jsx(vn,{}),r.MY_BEST_SCORE_WARNING]}),e.isExactGainedDate&&i.jsxs(i.Fragment,{children:[e.mods&&i.jsxs("div",{children:[i.jsxs("span",{className:"_grey",children:[r.MODS,": "]}),e.mods]}),e.combo!=null&&i.jsxs("div",{className:"mobile-only",children:[i.jsxs("span",{className:"_grey",children:[r.COMBO,": "]}),e.combo]}),e.calories!=null&&i.jsxs("div",{children:[i.jsxs("span",{className:"_grey",children:[r.CCAL,": "]}),e.calories]}),e.scoreIncrease!=null&&i.jsxs("div",{children:[i.jsxs("span",{className:"_grey",children:[r.SCORE_INCREASE,": "]}),"+",Lt(e.scoreIncrease).format("0,0")]}),!e.scoreIncrease&&r.SIGHTREAD]})]})})}),i.jsx("td",{className:k("grade"),children:i.jsx("div",{className:"img-holder",children:i.jsx(ys,{score:e.score,isPass:e.passed,grade:e.grade,mix:e.mix,scoring:a.scoring})})}),i.jsx("td",{className:k("number","miss"),children:e.stats[4]}),i.jsx("td",{className:k("number","bad"),children:e.stats[3]}),i.jsx("td",{className:k("number","good"),children:e.stats[2]}),i.jsx("td",{className:k("number","great"),children:e.stats[1]}),i.jsx("td",{className:k("number","perfect"),children:e.stats[0]}),i.jsx("td",{className:k("combo","desktop-only"),children:e.combo&&`${e.combo}x`}),i.jsx("td",{className:k("date",{latest:e.isLatestScore}),children:i.jsxs(bn,{content:"",tooltipClassName:"pumpking-tooltip",children:[mn(r,new Date(e.gained)),e.isExactGainedDate?"":"?"]})})]},e.id)};function xs(e){return hn({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8ZM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2ZM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10Z"}}]})(e)}const ws=({children:e,count:t})=>{const[r,n]=E.useState(!0),a=dt();return r&&t>1?i.jsx("tr",{className:"results-collapser",onClick:()=>n(!1),children:i.jsx("td",{colSpan:"20",children:i.jsx("div",{children:i.jsx("button",{children:t&&a.SHOW_MORE_RESULTS?i.jsx(i.Fragment,{children:a.SHOW_MORE_RESULTS(t)}):i.jsx(xs,{})})})})}):i.jsx(i.Fragment,{children:e})},Rs=E.memo(function({chart:t}){var u;const r=(u=br().data)==null?void 0:u.id,n=pt(ft),a=ja(),[o,p]=E.useState(!1),l=dt(),c=t.results.reduce((f,v)=>v.isHidden?f+1:f,0),d=t.results.filter(f=>o||!f.isHidden).map((f,v,y)=>{var m;const h=f.added===t.updatedOn,g=n.sortChartsBy==="pp"&&!((m=n.sortChartsByPlayers)!=null&&m.length)?y[0].playerId:null,b=(g?[g,...a]:a).indexOf(f.playerId??-1),_=h||f.playerId===r||b>=0;let w=0;if(f.scoreIncrease&&h){const O=f.score-f.scoreIncrease;w=kt.findLastIndex(P=>P.score>O,y)-v}return{...f,topPlace:v+1,isImportant:_,highlightIndex:b,placeDifference:w,isLatestScore:h}}).map((f,v,y)=>{const g=y.slice(v+1,v+1+2).some(_=>_.isImportant),b=y.slice(v-2,v).some(_=>_.isImportant);return{...f,isCollapsible:!f.isImportant&&!g&&!b}}),s=d.reduce((f,v)=>(f.length?f[f.length-1].isGroupCollapsible!==v.isCollapsible?f.push({isGroupCollapsible:v.isCollapsible,results:[v]}):f[f.length-1].results.push(v):f.push({isGroupCollapsible:v.isCollapsible,results:[v]}),f),[]);return i.jsxs("div",{className:"song-block",children:[i.jsx(Ra,{chart:t,children:c>0&&i.jsxs(i.Fragment,{children:[i.jsxs(Or,{size:"xs",lh:1,children:[l.HIDDEN,": ",c]}),i.jsx(Ue,{variant:"subtle","aria-label":"Show all",onClick:()=>p(!o),children:i.jsx(gn,{})})]})}),i.jsx("div",{className:"charts",children:!kt.isEmpty(d)&&i.jsx("div",{className:"chart",children:i.jsx("div",{className:"results",children:i.jsx("table",{children:i.jsx("tbody",{children:s.map(f=>{const v=f.results.map(y=>i.jsx(E.Fragment,{children:i.jsx(Os,{chart:t,result:y})},y.id));return f.isGroupCollapsible?i.jsx(ws,{count:v.length,children:v}):i.jsx(i.Fragment,{children:v})})})})})})})]})});export{mt as B,Rs as C,Cs as L,_a as r};
//# sourceMappingURL=Chart-b1856c13.js.map
