import{r as Z,c as Ti,f as rt,u as We,a as Rt,b as vt,d as an,j as k,U as Ci,g as cn,I as un,e as Fi,C as hr,B as bt,p as gr,h as It,i as pr,k as mr,l as yi,m as _i,n as Pi,o as Ri,q as vi,s as xr,t as Ni,v as Oi,w as Sr,x as Ui,y as ln,G as Er,z as Ye,R as wi,A as br,D as St,S as Xt,T as ue,E as dt,P as Lt,F as Di,H as Mi,J as Li,K as ki,L as Gi,M as kt,N as Bi,O as Tn,Q as ji}from"./index-BPWdL0Za.js";import{G as Hi,F as zi}from"./index.esm-Dd7nfIbg.js";import{u as Cn,M as $i}from"./Modal-BRXn1cHV.js";import{u as Xi}from"./useSingleChartQuery-DXjG24Tx.js";import"./Paper-BD53STHJ.js";import"./useFilter-BkH4EsXb.js";function Yi(e,t="use-local-storage"){try{return JSON.stringify(e)}catch{throw new Error(`@mantine/hooks ${t}: Failed to serialize the value`)}}function Zi(e){try{return e&&JSON.parse(e)}catch{return e}}function Wi(e){return{getItem:n=>{try{return window[e].getItem(n)}catch{return console.warn("use-local-storage: Failed to get value from storage, localStorage is blocked"),null}},setItem:(n,i)=>{try{window[e].setItem(n,i)}catch{console.warn("use-local-storage: Failed to set value to storage, localStorage is blocked")}},removeItem:n=>{try{window[e].removeItem(n)}catch{console.warn("use-local-storage: Failed to remove value from storage, localStorage is blocked")}}}}function Ki(e,t){const r="mantine-local-storage",{getItem:o,setItem:n,removeItem:i}=Wi(e);return function({key:c,defaultValue:d,getInitialValueInEffect:S=!0,sync:s=!0,deserialize:l=Zi,serialize:u=f=>Yi(f,t)}){const f=Z.useCallback(N=>{let v;try{v=typeof window>"u"||!(e in window)||window[e]===null||!!N}catch{v=!0}if(v)return d;const O=o(c);return O!==null?l(O):d},[c,d]),[x,C]=Z.useState(f(S)),A=Z.useCallback(N=>{N instanceof Function?C(v=>{const O=N(v);return n(c,u(O)),queueMicrotask(()=>{window.dispatchEvent(new CustomEvent(r,{detail:{key:c,value:N(v)}}))}),O}):(n(c,u(N)),window.dispatchEvent(new CustomEvent(r,{detail:{key:c,value:N}})),C(N))},[c]),T=Z.useCallback(()=>{i(c),C(d),window.dispatchEvent(new CustomEvent(r,{detail:{key:c,value:d}}))},[c,d]);return Cn("storage",N=>{s&&N.storageArea===window[e]&&N.key===c&&C(l(N.newValue??void 0))}),Cn(r,N=>{s&&N.detail.key===c&&C(N.detail.value)}),Z.useEffect(()=>{d!==void 0&&x===void 0&&A(d)},[d,x,A]),Z.useEffect(()=>{const N=f();N!==void 0&&A(N)},[c]),[x===void 0?d:x,A,T]}}function Qi(e){return Ki("localStorage","use-local-storage")(e)}function Ir(e,t){return typeof e=="boolean"?e:t.autoContrast}const Ar=Z.createContext(null),qi=Ar.Provider,Tr=()=>Z.useContext(Ar),[Ji,Vi]=Ti();var Cr={card:"m_26775b0a"};const eo={withBorder:!0},to=vt((e,{radius:t})=>({card:{"--card-radius":cn(t)}})),fn=rt((e,t)=>{const r=We("CheckboxCard",eo,e),{classNames:o,className:n,style:i,styles:a,unstyled:c,vars:d,checked:S,mod:s,withBorder:l,value:u,onClick:f,defaultChecked:x,onChange:C,attributes:A,...T}=r,N=Rt({name:"CheckboxCard",classes:Cr,props:r,className:n,style:i,classNames:o,styles:a,unstyled:c,attributes:A,vars:d,varsResolver:to,rootSelector:"card"}),v=Tr(),O=typeof S=="boolean"?S:v?v.value.includes(u||""):void 0,[w,I]=an({value:O,defaultValue:x,finalValue:!1,onChange:C});return k.jsx(Ji,{value:{checked:w},children:k.jsx(Ci,{ref:t,mod:[{"with-border":l,checked:w},s],...N("card"),...T,role:"checkbox","aria-checked":w,onClick:D=>{f?.(D),v?.onChange(u||""),I(!w)}})})});fn.displayName="@mantine/core/CheckboxCard";fn.classes=Cr;const dn=rt((e,t)=>{const{value:r,defaultValue:o,onChange:n,size:i,wrapperProps:a,children:c,readOnly:d,disabled:S,...s}=We("CheckboxGroup",null,e),[l,u]=an({value:r,defaultValue:o,finalValue:[],onChange:n}),f=x=>{const C=typeof x=="string"?x:x.currentTarget.value;!d&&u(l.includes(C)?l.filter(A=>A!==C):[...l,C])};return k.jsx(qi,{value:{value:l,onChange:f,size:i,disabled:S},children:k.jsx(un.Wrapper,{size:i,ref:t,...a,...s,labelElement:"div",__staticSelector:"CheckboxGroup",children:k.jsx(Fi,{role:"group",children:c})})})});dn.classes=un.Wrapper.classes;dn.displayName="@mantine/core/CheckboxGroup";var Fr={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const no={icon:hr,variant:"filled"},ro=vt((e,{radius:t,color:r,size:o,iconColor:n,variant:i,autoContrast:a})=>{const c=gr({color:r||e.primaryColor,theme:e}),d=c.isThemeColor&&c.shade===void 0?`var(--mantine-color-${c.color}-outline)`:c.color;return{indicator:{"--checkbox-size":mr(o,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:cn(t),"--checkbox-color":i==="outline"?d:It(r,e),"--checkbox-icon-color":n?It(n,e):Ir(a,e)?pr({color:r,theme:e,autoContrast:a}):void 0}}}),hn=rt((e,t)=>{const r=We("CheckboxIndicator",no,e),{classNames:o,className:n,style:i,styles:a,unstyled:c,vars:d,icon:S,indeterminate:s,radius:l,color:u,iconColor:f,autoContrast:x,checked:C,mod:A,variant:T,disabled:N,attributes:v,...O}=r,w=Rt({name:"CheckboxIndicator",classes:Fr,props:r,className:n,style:i,classNames:o,styles:a,unstyled:c,attributes:v,vars:d,varsResolver:ro,rootSelector:"indicator"}),I=Vi(),D=typeof C=="boolean"||typeof s=="boolean"?C||s:I?.checked||!1;return k.jsx(bt,{ref:t,...w("indicator",{variant:T}),variant:T,mod:[{checked:D,disabled:N},A],...O,children:k.jsx(S,{indeterminate:s,...w("icon")})})});hn.displayName="@mantine/core/CheckboxIndicator";hn.classes=Fr;var yr={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const io={labelPosition:"right",icon:hr,variant:"filled"},oo=vt((e,{radius:t,color:r,size:o,iconColor:n,variant:i,autoContrast:a})=>{const c=gr({color:r||e.primaryColor,theme:e}),d=c.isThemeColor&&c.shade===void 0?`var(--mantine-color-${c.color}-outline)`:c.color;return{root:{"--checkbox-size":mr(o,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:cn(t),"--checkbox-color":i==="outline"?d:It(r,e),"--checkbox-icon-color":n?It(n,e):Ir(a,e)?pr({color:r,theme:e,autoContrast:a}):void 0}}}),it=rt((e,t)=>{const r=We("Checkbox",io,e),{classNames:o,className:n,style:i,styles:a,unstyled:c,vars:d,color:S,label:s,id:l,size:u,radius:f,wrapperProps:x,checked:C,labelPosition:A,description:T,error:N,disabled:v,variant:O,indeterminate:w,icon:I,rootRef:D,iconColor:p,onChange:m,autoContrast:E,mod:F,attributes:_,...y}=r,b=Tr(),P=u||b?.size,g=Rt({name:"Checkbox",props:r,classes:yr,className:n,style:i,classNames:o,styles:a,unstyled:c,attributes:_,vars:d,varsResolver:oo}),{styleProps:h,rest:M}=yi(y),R=_i(l),U={checked:b?.value.includes(M.value)??C,onChange:j=>{b?.onChange(j),m?.(j)},disabled:b?.disabled??v},H=Z.useRef(null),B=t||H;return Z.useEffect(()=>{B&&"current"in B&&B.current&&(B.current.indeterminate=w||!1,w?B.current.setAttribute("data-indeterminate","true"):B.current.removeAttribute("data-indeterminate"))},[w,B]),k.jsx(Pi,{...g("root"),__staticSelector:"Checkbox",__stylesApiProps:r,id:R,size:P,labelPosition:A,label:s,description:T,error:N,disabled:U.disabled,classNames:o,styles:a,unstyled:c,"data-checked":U.checked||C||void 0,variant:O,ref:D,mod:F,...h,...x,children:k.jsxs(bt,{...g("inner"),mod:{"data-label-position":A},children:[k.jsx(bt,{component:"input",id:R,ref:B,mod:{error:!!N},...g("input",{focusable:!0,variant:O}),...M,...U,type:"checkbox"}),k.jsx(I,{indeterminate:w,...g("icon")})]})})});it.classes={...yr,...Ri};it.displayName="@mantine/core/Checkbox";it.Group=dn;it.Indicator=hn;it.Card=fn;const so={multiple:!1},_r=Z.forwardRef((e,t)=>{const{onChange:r,children:o,multiple:n,accept:i,name:a,form:c,resetRef:d,disabled:S,capture:s,inputProps:l,...u}=We("FileButton",so,e),f=Z.useRef(null),x=()=>{!S&&f.current?.click()},C=T=>{if(T.currentTarget.files===null)return r(n?[]:null);r(n?Array.from(T.currentTarget.files):T.currentTarget.files[0]||null)};return vi(d,()=>{f.current&&(f.current.value="")}),k.jsxs(k.Fragment,{children:[k.jsx("input",{style:{display:"none"},type:"file",accept:i,multiple:n,onChange:C,ref:xr(t,f),name:a,form:c,capture:s,...l}),o({onClick:x,...u})]})});_r.displayName="@mantine/core/FileButton";const ao=({value:e})=>k.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(e)?e.map(t=>t.name).join(", "):e?.name}),co={valueComponent:ao},gn=rt((e,t)=>{const r=We("FileInput",co,e),{unstyled:o,vars:n,onChange:i,value:a,defaultValue:c,multiple:d,accept:S,name:s,form:l,valueComponent:u,clearable:f,clearButtonProps:x,readOnly:C,capture:A,fileInputProps:T,rightSection:N,size:v,placeholder:O,component:w,resetRef:I,classNames:D,styles:p,attributes:m,...E}=r,F=Z.useRef(null),{resolvedClassNames:_,resolvedStyles:y}=Ni({classNames:D,styles:p,props:r}),[b,P]=an({value:a,defaultValue:c,onChange:i,finalValue:d?[]:null}),g=Array.isArray(b)?b.length!==0:b!==null,h=N||(f&&g&&!C?k.jsx(Oi,{...x,variant:"subtle",onClick:()=>P(d?[]:null),size:v,unstyled:o}):null);return Z.useEffect(()=>{(Array.isArray(b)&&b.length===0||b===null)&&F.current?.()},[b]),k.jsx(_r,{onChange:P,multiple:d,accept:S,name:s,form:l,resetRef:xr(F,I),disabled:C,capture:A,inputProps:T,children:M=>k.jsx(Sr,{component:w||"button",ref:t,rightSection:h,...M,...E,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:r,unstyled:o,size:v,classNames:D,styles:p,attributes:m,children:g?k.jsx(u,{value:b}):k.jsx(un.Placeholder,{__staticSelector:"FileInput",classNames:_,styles:y,attributes:m,children:O})})})});gn.classes=Sr.classes;gn.displayName="@mantine/core/FileInput";const uo=gn,lo=["h1","h2","h3","h4","h5","h6"],fo=["xs","sm","md","lg","xl"];function ho(e,t){const r=t!==void 0?t:`h${e}`;return lo.includes(r)?{fontSize:`var(--mantine-${r}-font-size)`,fontWeight:`var(--mantine-${r}-font-weight)`,lineHeight:`var(--mantine-${r}-line-height)`}:fo.includes(r)?{fontSize:`var(--mantine-font-size-${r})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:Ui(r),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Pr={root:"m_8a5d1357"};const go={order:1},po=vt((e,{order:t,size:r,lineClamp:o,textWrap:n})=>{const i=ho(t||1,r);return{root:{"--title-fw":i.fontWeight,"--title-lh":i.lineHeight,"--title-fz":i.fontSize,"--title-line-clamp":typeof o=="number"?o.toString():void 0,"--title-text-wrap":n}}}),pn=rt((e,t)=>{const r=We("Title",go,e),{classNames:o,className:n,style:i,styles:a,unstyled:c,order:d,vars:S,size:s,variant:l,lineClamp:u,textWrap:f,mod:x,attributes:C,...A}=r,T=Rt({name:"Title",props:r,classes:Pr,className:n,style:i,classNames:o,styles:a,unstyled:c,attributes:C,vars:S,varsResolver:po});return[1,2,3,4,5,6].includes(d)?k.jsx(bt,{...T("root"),component:`h${d}`,variant:l,ref:t,mod:[{order:d,"data-line-clamp":typeof u=="number"},x],size:s,...A}):null});pn.classes=Pr;pn.displayName="@mantine/core/Title";function mo(e){return Hi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M228.9 79.9L51.8 403.1C40.6 423.3 55.5 448 78.9 448h354.3c23.3 0 38.2-24.7 27.1-44.9L283.1 79.9c-11.7-21.2-42.5-21.2-54.2 0zM273.6 214L270 336h-28l-3.6-122h35.2zM256 402.4c-10.7 0-19.1-8.1-19.1-18.4s8.4-18.4 19.1-18.4 19.1 8.1 19.1 18.4-8.4 18.4-19.1 18.4z"}}]})(e)}const xo="_addResultPage_1sd28_1",So="_confirmation_1sd28_8",Eo="_splitPanels_1sd28_8",bo="_screenshotPanel_1sd28_13",Io="_formPanel_1sd28_16",Ao="_chartName_1sd28_19",To="_grid_1sd28_24",Xe={addResultPage:xo,confirmation:So,splitPanels:Eo,screenshotPanel:bo,formPanel:Io,chartName:Ao,grid:To},Co=({okText:e="OK"}={})=>{const[t,r]=Z.useState(!1),o=ln(),n=Z.useRef(null),i=a=>{t&&(r(!1),n.current&&n.current(a))};return{renderPopup:({content:a})=>k.jsxs($i,{opened:t,onClose:()=>i(!1),centered:!0,size:"lg",radius:"md",withCloseButton:!1,children:[a,k.jsxs(Er,{justify:"space-between",mt:"md",children:[k.jsx(Ye,{color:"red",onClick:()=>i(!1),children:o.CANCEL}),k.jsx(Ye,{color:"green",onClick:()=>i(!0),children:e})]})]}),confirm:()=>(r(!0),new Promise((a,c)=>{n.current=d=>{d?a():c()}}))}};var Fo=Object.defineProperty,yo=Object.defineProperties,_o=Object.getOwnPropertyDescriptors,Fn=Object.getOwnPropertySymbols,Po=Object.prototype.hasOwnProperty,Ro=Object.prototype.propertyIsEnumerable,yn=(e,t,r)=>t in e?Fo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,re=(e,t)=>{for(var r in t||(t={}))Po.call(t,r)&&yn(e,r,t[r]);if(Fn)for(var r of Fn(t))Ro.call(t,r)&&yn(e,r,t[r]);return e},Se=(e,t)=>yo(e,_o(t));const Yt={x:0,y:0,width:0,height:0,unit:"px"};function _n(e,t,r){return Math.min(Math.max(e,t),r)}const Pn=(e,t,r,o)=>o==="pixel"?Zt(e,t,r):vo(e,t,r),vo=(e,t,r)=>e.unit==="%"?Se(re(re({},Yt),e),{unit:"%"}):{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/r*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/r*100:0};function Zt(e,t,r){return e.unit?e.unit==="px"?Se(re(re({},Yt),e),{unit:"px"}):{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*r/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*r/100:0}:Se(re(re({},Yt),e),{unit:"px"})}const Le={position:"absolute",outline:"1px solid rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.5)",width:10,height:10};var mn={exports:{}},ht={};(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var o=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(o.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(i){n[i]=i}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}})();var No=wi,Rr=60103;if(ht.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var Rn=Symbol.for;Rr=Rn("react.element"),ht.Fragment=Rn("react.fragment")}var Oo=No.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Uo=Object.prototype.hasOwnProperty,wo={key:!0,ref:!0,__self:!0,__source:!0};function vn(e,t,r){var o,n={},i=null,a=null;for(o in r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref),t)Uo.call(t,o)&&!wo.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)n[o]===void 0&&(n[o]=t[o]);return{$$typeof:Rr,type:e,key:i,ref:a,props:n,_owner:Oo.current}}ht.jsx=vn,ht.jsxs=vn,mn.exports=ht;const Ee=mn.exports.jsx,Oe=mn.exports.jsxs,Do=()=>Oe(Z.Fragment,{children:[Ee("div",{"data-dir":"s","data-ord":"s",style:Se(re({},Le),{bottom:0,left:"50%",marginBottom:-5,marginLeft:-5,cursor:"s-resize"})}),Ee("div",{"data-dir":"n","data-ord":"n",style:Se(re({},Le),{top:0,left:"50%",marginTop:-5,marginLeft:-5,cursor:"n-resize"})}),Ee("div",{"data-dir":"w","data-ord":"w",style:Se(re({},Le),{top:"50%",left:0,marginTop:-5,marginLeft:-5,cursor:"w-resize"})}),Ee("div",{"data-dir":"e","data-ord":"e",style:Se(re({},Le),{top:"50%",right:0,marginTop:-5,marginRight:-5,cursor:"e-resize"})}),Ee("div",{"data-dir":"se","data-ord":"se",style:Se(re({},Le),{bottom:0,right:0,marginBottom:-5,marginRight:-5,cursor:"se-resize"})}),Ee("div",{"data-dir":"sw","data-ord":"sw",style:Se(re({},Le),{bottom:0,left:0,marginBottom:-5,marginLeft:-5,cursor:"sw-resize"})}),Ee("div",{"data-dir":"nw","data-ord":"nw",style:Se(re({},Le),{top:0,left:0,marginTop:-5,marginLeft:-5,cursor:"nw-resize"})}),Ee("div",{"data-dir":"ne","data-ord":"ne",style:Se(re({},Le),{top:0,right:0,marginTop:-5,marginRight:-5,cursor:"ne-resize"})})]}),Mo=({area:e,onCropStart:t,showHandles:r,globalAreaStyle:o,customAreaRenderer:n,areaNumber:i})=>{const a={top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`};return Oe("div",{style:re(re(re({position:"absolute",border:"1px dashed rgba(0,0,0,0.5)",outline:"1px dashed rgba(255,255,255,0.5)",cursor:"move",boxSizing:"border-box",touchAction:"none"},a),o),e.areaStyle),onPointerDown:t,"data-wrapper":"wrapper",children:[n?n(Se(re({},e),{areaNumber:i})):null,r?Ee(Do,{}):null]})},Lo=({areas:e})=>Ee("table",{style:{position:"absolute",right:0,top:0},children:Ee("tbody",{children:e.map((t,r)=>Oe("tr",{children:[Oe("td",{children:["x: ",Math.round(t.x)]}),Oe("td",{children:["y: ",Math.round(t.y)]}),Oe("td",{children:["width: ",Math.round(t.width)]}),Oe("td",{children:["height: ",Math.round(t.height)]}),Oe("td",{children:["unit: ",t.unit]})]},r))})}),vr=(e,t)=>e!==null&&(!!t(e)||vr(e.parentNode,t)),Je={capture:!0,passive:!1},ko=["e","w"],Go=["n","s"],Bo=["nw","ne","se","sw"],jo=({maxAreas:e=1/0,unit:t="pixel",minWidth:r=0,minHeight:o=0,debug:n=!1,children:i,areas:a,onChange:c,maxWidth:d,maxHeight:S,wrapperStyle:s,globalAreaStyle:l,customAreaRenderer:u,mediaWrapperClassName:f})=>{const x=Z.useRef(null),C=Z.useRef(null),[A,T]=Z.useState(0),[N,v]=Z.useState({startClientX:0,startClientY:0,startAreaX:0,startAreaY:0,clientX:0,clientY:0,isResize:!1}),[O,w]=Z.useState({areaChangeIndex:0,isChanging:!1}),I=()=>{const y=C.current;if(!y)return{x:0,y:0,width:0,height:0};const{x:b,y:P,width:g,height:h}=y.getBoundingClientRect();return{x:b,y:P,width:g,height:h}},D=Z.useCallback(y=>{const b=N.clientX-y.x,P=N.clientY-y.y<N.startAreaY;return b<N.startAreaX?P?"nw":"sw":P?"ne":"se"},[N]),p=Z.useCallback(y=>{const b=I();return Zt(y,b.width,b.height)},[]),m=Z.useCallback(y=>{const b=I(),P=p(y),g=N.clientX-N.startClientX,h=N.clientY-N.startClientY;return P.x=_n(N.startAreaX+g,0,b.width-P.width),P.y=_n(N.startAreaY+h,0,b.height-P.height),P},[N,p]),E=Z.useCallback(y=>{const b=I(),P=D(b),g=p(y),h=N.ord?N.ord:P,M=N.clientX-N.startClientX,R=N.clientY-N.startClientY,U={unit:"px",x:0,y:0,width:0,height:0,isChanging:!0,isNew:!1};P==="ne"?(U.x=N.startAreaX,U.width=M,U.height=Math.abs(R),U.y=N.startAreaY-U.height):P==="se"?(U.x=N.startAreaX,U.y=N.startAreaY,U.width=M,U.height=R):P==="sw"?(U.x=N.startAreaX+M,U.y=N.startAreaY,U.width=Math.abs(M),U.height=R):P==="nw"&&(U.x=N.startAreaX+M,U.width=Math.abs(M),U.height=Math.abs(R),U.y=N.startAreaY+R);const H=(function(B,j,G,L,X=0,q=0,Q=G,K=L){const $=re({},B);$.y<0&&($.height=Math.max($.height+$.y,q),$.y=0),$.x<0&&($.width=Math.max($.width+$.x,X),$.x=0);const te=G-($.x+$.width);te<0&&($.x=Math.min($.x,G-X),$.width+=te);const ie=L-($.y+$.height);return ie<0&&($.y=Math.min($.y,L-q),$.height+=ie),$.width<X&&(j!=="sw"&&j!="nw"||($.x-=X-$.width),$.width=X),$.height<q&&(j!=="nw"&&j!="ne"||($.y-=q-$.height),$.height=q),$.width>Q&&(j!=="sw"&&j!="nw"||($.x-=Q-$.width),$.width=Q),$.height>K&&(j!=="nw"&&j!="ne"||($.y-=K-$.height),$.height=K),$})(U,P,b.width,b.height,r,o,d,S);return Bo.indexOf(h)>-1?(g.x=H.x,g.y=H.y,g.width=H.width,g.height=H.height):ko.indexOf(h)>-1?(g.x=H.x,g.width=H.width):Go.indexOf(h)>-1&&(g.y=H.y,g.height=H.height),g},[N,D,p,r,o,d,S]),F=Z.useCallback(y=>{y.preventDefault(),y.stopPropagation();const{isChanging:b,areaChangeIndex:P}=O;if(!b)return;const g=I(),h=a[P];let M;if(v(H=>Se(re({},H),{clientX:y.clientX,clientY:y.clientY})),M=N.isResize?E(h):m(h),U=M,(R=h).width!==U.width||R.height!==U.height||R.x!==U.x||R.y!==U.y||R.unit!==U.unit){const H=Pn(M,g.width,g.height,t);c([...a.slice(0,P),re({},H),...a.slice(P+1)])}var R,U},[O,a,N,m,c,t,E]),_=Z.useCallback(y=>{y.preventDefault(),y.stopPropagation();const{isChanging:b,areaChangeIndex:P}=O;if(b){w({isChanging:!1,areaChangeIndex:-1}),v({startClientX:0,startClientY:0,startAreaX:0,startAreaY:0,clientX:0,clientY:0,isResize:!1});const g=a[P];c([...a.slice(0,P),Se(re({},g),{isNew:!1,isChanging:!1}),...a.slice(P+1)])}},[O,a,c]);return Z.useEffect(()=>(document.addEventListener("pointermove",F,Je),document.addEventListener("pointerup",_,Je),document.addEventListener("pointercancel",_,Je),()=>{document.removeEventListener("pointermove",F,Je),document.removeEventListener("pointerup",_,Je),document.removeEventListener("pointercancel",_,Je)}),[F,_]),Oe("div",{ref:x,style:re({position:"relative",display:"inline-block",cursor:"crosshair",boxSizing:"border-box",maxWidth:"100%",touchAction:"none",lineHeight:0},s),children:[Ee("div",{ref:C,onPointerDown:y=>{const b=y.currentTarget;if(b.dataset.wrapper||b.dataset.direction||vr(b,H=>{var B;return(B=H.dataset)==null?void 0:B.wrapper}))return;y.preventDefault(),y.stopPropagation();const P=I(),g=y.clientX-P.x,h=y.clientY-P.y,M={unit:"px",x:g,y:h,width:0,height:0,isChanging:!0,isNew:!0};v({startClientX:y.clientX,startClientY:y.clientY,startAreaX:g,startAreaY:h,clientX:y.clientX,clientY:y.clientY,isResize:!0}),T(A+1);const R=Pn(M,P.width,P.height,t);let U;a.length<e?(c(a.concat(R)),U=a.length):(c([...a.slice(0,e-1),R]),U=e-1),w({areaChangeIndex:U,isChanging:!0})},style:{boxSizing:"border-box"},className:f,children:i}),a.map((y,b)=>Ee(Mo,{area:y,showHandles:!y.isNew,onCropStart:P=>((g,h)=>{g.preventDefault(),g.stopPropagation();const M=I(),R=Zt(a[h],M.width,M.height),U=g.target.dataset.ord,H=!!U;let B=g.clientX,j=g.clientY,G=R.x,L=R.y;U&&(U==="ne"||U=="e"?(G=R.x,L=R.y+R.height):U==="se"||U==="s"?(G=R.x,L=R.y):U==="sw"||U=="w"?(G=R.x+R.width,L=R.y):U!=="nw"&&U!="n"||(G=R.x+R.width,L=R.y+R.height),B=G+M.x,j=L+M.y),v({startClientX:B,startClientY:j,startAreaX:G,startAreaY:L,clientX:g.clientX,clientY:g.clientY,isResize:H,ord:U}),w({isChanging:!0,areaChangeIndex:h})})(P,b),globalAreaStyle:l,customAreaRenderer:u,areaNumber:b+1},b)),n?Ee(Lo,{areas:a}):null]})};function Ho(e,t){return t.forEach((function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach((function(o){if(o!=="default"&&!(o in e)){var n=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(e,o,n.get?n:{enumerable:!0,get:function(){return r[o]}})}}))})),Object.freeze(e)}function Nr(e,t){return new Promise((function(r,o){let n;return zo(e).then((function(i){try{return n=i,r(new Blob([t.slice(0,2),n,t.slice(2)],{type:"image/jpeg"}))}catch(a){return o(a)}}),o)}))}const zo=e=>new Promise(((t,r)=>{const o=new FileReader;o.addEventListener("load",(({target:{result:n}})=>{const i=new DataView(n);let a=0;if(i.getUint16(a)!==65496)return r("not a valid JPEG");for(a+=2;;){const c=i.getUint16(a);if(c===65498)break;const d=i.getUint16(a+2);if(c===65505&&i.getUint32(a+4)===1165519206){const S=a+10;let s;switch(i.getUint16(S)){case 18761:s=!0;break;case 19789:s=!1;break;default:return r("TIFF header contains invalid endian")}if(i.getUint16(S+2,s)!==42)return r("TIFF header contains invalid version");const l=i.getUint32(S+4,s),u=S+l+2+12*i.getUint16(S+l,s);for(let f=S+l+2;f<u;f+=12)if(i.getUint16(f,s)==274){if(i.getUint16(f+2,s)!==3)return r("Orientation data type is invalid");if(i.getUint32(f+4,s)!==1)return r("Orientation data count is invalid");i.setUint16(f+8,1,s);break}return t(n.slice(a,a+2+d))}a+=2+d}return t(new Blob)})),o.readAsArrayBuffer(e)}));var At={},$o={get exports(){return At},set exports(e){At=e}};(function(e){var t,r,o={};$o.exports=o,o.parse=function(n,i){for(var a=o.bin.readUshort,c=o.bin.readUint,d=0,S={},s=new Uint8Array(n),l=s.length-4;c(s,l)!=101010256;)l--;d=l,d+=4;var u=a(s,d+=4);a(s,d+=2);var f=c(s,d+=2),x=c(s,d+=4);d+=4,d=x;for(var C=0;C<u;C++){c(s,d),d+=4,d+=4,d+=4,c(s,d+=4),f=c(s,d+=4);var A=c(s,d+=4),T=a(s,d+=4),N=a(s,d+2),v=a(s,d+4);d+=6;var O=c(s,d+=8);d+=4,d+=T+N+v,o._readLocal(s,O,S,f,A,i)}return S},o._readLocal=function(n,i,a,c,d,S){var s=o.bin.readUshort,l=o.bin.readUint;l(n,i),s(n,i+=4),s(n,i+=2);var u=s(n,i+=2);l(n,i+=2),l(n,i+=4),i+=4;var f=s(n,i+=8),x=s(n,i+=2);i+=2;var C=o.bin.readUTF8(n,i,f);if(i+=f,i+=x,S)a[C]={size:d,csize:c};else{var A=new Uint8Array(n.buffer,i);if(u==0)a[C]=new Uint8Array(A.buffer.slice(i,i+c));else{if(u!=8)throw"unknown compression method: "+u;var T=new Uint8Array(d);o.inflateRaw(A,T),a[C]=T}}},o.inflateRaw=function(n,i){return o.F.inflate(n,i)},o.inflate=function(n,i){return n[0],n[1],o.inflateRaw(new Uint8Array(n.buffer,n.byteOffset+2,n.length-6),i)},o.deflate=function(n,i){i==null&&(i={level:6});var a=0,c=new Uint8Array(50+Math.floor(1.1*n.length));c[a]=120,c[a+1]=156,a+=2,a=o.F.deflateRaw(n,c,a,i.level);var d=o.adler(n,0,n.length);return c[a+0]=d>>>24&255,c[a+1]=d>>>16&255,c[a+2]=d>>>8&255,c[a+3]=d>>>0&255,new Uint8Array(c.buffer,0,a+4)},o.deflateRaw=function(n,i){i==null&&(i={level:6});var a=new Uint8Array(50+Math.floor(1.1*n.length)),c=o.F.deflateRaw(n,a,c,i.level);return new Uint8Array(a.buffer,0,c)},o.encode=function(n,i){i==null&&(i=!1);var a=0,c=o.bin.writeUint,d=o.bin.writeUshort,S={};for(var s in n){var l=!o._noNeed(s)&&!i,u=n[s],f=o.crc.crc(u,0,u.length);S[s]={cpr:l,usize:u.length,crc:f,file:l?o.deflateRaw(u):u}}for(var s in S)a+=S[s].file.length+30+46+2*o.bin.sizeUTF8(s);a+=22;var x=new Uint8Array(a),C=0,A=[];for(var s in S){var T=S[s];A.push(C),C=o._writeHeader(x,C,s,T,0)}var N=0,v=C;for(var s in S)T=S[s],A.push(C),C=o._writeHeader(x,C,s,T,1,A[N++]);var O=C-v;return c(x,C,101010256),C+=4,d(x,C+=4,N),d(x,C+=2,N),c(x,C+=2,O),c(x,C+=4,v),C+=4,C+=2,x.buffer},o._noNeed=function(n){var i=n.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},o._writeHeader=function(n,i,a,c,d,S){var s=o.bin.writeUint,l=o.bin.writeUshort,u=c.file;return s(n,i,d==0?67324752:33639248),i+=4,d==1&&(i+=2),l(n,i,20),l(n,i+=2,0),l(n,i+=2,c.cpr?8:0),s(n,i+=2,0),s(n,i+=4,c.crc),s(n,i+=4,u.length),s(n,i+=4,c.usize),l(n,i+=4,o.bin.sizeUTF8(a)),l(n,i+=2,0),i+=2,d==1&&(i+=2,i+=2,s(n,i+=6,S),i+=4),i+=o.bin.writeUTF8(n,i,a),d==0&&(n.set(u,i),i+=u.length),i},o.crc={table:(function(){for(var n=new Uint32Array(256),i=0;i<256;i++){for(var a=i,c=0;c<8;c++)1&a?a=3988292384^a>>>1:a>>>=1;n[i]=a}return n})(),update:function(n,i,a,c){for(var d=0;d<c;d++)n=o.crc.table[255&(n^i[a+d])]^n>>>8;return n},crc:function(n,i,a){return 4294967295^o.crc.update(4294967295,n,i,a)}},o.adler=function(n,i,a){for(var c=1,d=0,S=i,s=i+a;S<s;){for(var l=Math.min(S+5552,s);S<l;)d+=c+=n[S++];c%=65521,d%=65521}return d<<16|c},o.bin={readUshort:function(n,i){return n[i]|n[i+1]<<8},writeUshort:function(n,i,a){n[i]=255&a,n[i+1]=a>>8&255},readUint:function(n,i){return 16777216*n[i+3]+(n[i+2]<<16|n[i+1]<<8|n[i])},writeUint:function(n,i,a){n[i]=255&a,n[i+1]=a>>8&255,n[i+2]=a>>16&255,n[i+3]=a>>24&255},readASCII:function(n,i,a){for(var c="",d=0;d<a;d++)c+=String.fromCharCode(n[i+d]);return c},writeASCII:function(n,i,a){for(var c=0;c<a.length;c++)n[i+c]=a.charCodeAt(c)},pad:function(n){return n.length<2?"0"+n:n},readUTF8:function(n,i,a){for(var c,d="",S=0;S<a;S++)d+="%"+o.bin.pad(n[i+S].toString(16));try{c=decodeURIComponent(d)}catch{return o.bin.readASCII(n,i,a)}return c},writeUTF8:function(n,i,a){for(var c=a.length,d=0,S=0;S<c;S++){var s=a.charCodeAt(S);if((4294967168&s)==0)n[i+d]=s,d++;else if((4294965248&s)==0)n[i+d]=192|s>>6,n[i+d+1]=128|s>>0&63,d+=2;else if((4294901760&s)==0)n[i+d]=224|s>>12,n[i+d+1]=128|s>>6&63,n[i+d+2]=128|s>>0&63,d+=3;else{if((4292870144&s)!=0)throw"e";n[i+d]=240|s>>18,n[i+d+1]=128|s>>12&63,n[i+d+2]=128|s>>6&63,n[i+d+3]=128|s>>0&63,d+=4}}return d},sizeUTF8:function(n){for(var i=n.length,a=0,c=0;c<i;c++){var d=n.charCodeAt(c);if((4294967168&d)==0)a++;else if((4294965248&d)==0)a+=2;else if((4294901760&d)==0)a+=3;else{if((4292870144&d)!=0)throw"e";a+=4}}return a}},o.F={},o.F.deflateRaw=function(n,i,a,c){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][c],S=o.F.U,s=o.F._goodIndex;o.F._hash;var l=o.F._putsE,u=0,f=a<<3,x=0,C=n.length;if(c==0){for(;u<C;)l(i,f,u+(F=Math.min(65535,C-u))==C?1:0),f=o.F._copyExact(n,u,F,i,f+8),u+=F;return f>>>3}var A=S.lits,T=S.strt,N=S.prev,v=0,O=0,w=0,I=0,D=0,p=0;for(C>2&&(T[p=o.F._hash(n,0)]=0),u=0;u<C;u++){if(D=p,u+1<C-2){p=o.F._hash(n,u+1);var m=u+1&32767;N[m]=T[p],T[p]=m}if(x<=u){(v>14e3||O>26697)&&C-u>100&&(x<u&&(A[v]=u-x,v+=2,x=u),f=o.F._writeBlock(u==C-1||x==C?1:0,A,v,I,n,w,u-w,i,f),v=O=I=0,w=u);var E=0;u<C-2&&(E=o.F._bestMatch(n,u,N,D,Math.min(d[2],C-u),d[3]));var F=E>>>16,_=65535&E;if(E!=0){_=65535&E;var y=s(F=E>>>16,S.of0);S.lhst[257+y]++;var b=s(_,S.df0);S.dhst[b]++,I+=S.exb[y]+S.dxb[b],A[v]=F<<23|u-x,A[v+1]=_<<16|y<<8|b,v+=2,x=u+F}else S.lhst[n[u]]++;O++}}for(w==u&&n.length!=0||(x<u&&(A[v]=u-x,v+=2,x=u),f=o.F._writeBlock(1,A,v,I,n,w,u-w,i,f),v=0,O=0,v=O=I=0,w=u);(7&f)!=0;)f++;return f>>>3},o.F._bestMatch=function(n,i,a,c,d,S){var s=32767&i,l=a[s],u=s-l+32768&32767;if(l==s||c!=o.F._hash(n,i-u))return 0;for(var f=0,x=0,C=Math.min(32767,i);u<=C&&--S!=0&&l!=s;){if(f==0||n[i+f]==n[i+f-u]){var A=o.F._howLong(n,i,u);if(A>f){if(x=u,(f=A)>=d)break;u+2<A&&(A=u+2);for(var T=0,N=0;N<A-2;N++){var v=i-u+N+32768&32767,O=v-a[v]+32768&32767;O>T&&(T=O,l=v)}}}u+=(s=l)-(l=a[s])+32768&32767}return f<<16|x},o.F._howLong=function(n,i,a){if(n[i]!=n[i-a]||n[i+1]!=n[i+1-a]||n[i+2]!=n[i+2-a])return 0;var c=i,d=Math.min(n.length,i+258);for(i+=3;i<d&&n[i]==n[i-a];)i++;return i-c},o.F._hash=function(n,i){return(n[i]<<8|n[i+1])+(n[i+2]<<4)&65535},o.saved=0,o.F._writeBlock=function(n,i,a,c,d,S,s,l,u){var f,x,C,A,T,N,v,O,w,I=o.F.U,D=o.F._putsF,p=o.F._putsE;I.lhst[256]++,x=(f=o.F.getTrees())[0],C=f[1],A=f[2],T=f[3],N=f[4],v=f[5],O=f[6],w=f[7];var m=32+((u+3&7)==0?0:8-(u+3&7))+(s<<3),E=c+o.F.contSize(I.fltree,I.lhst)+o.F.contSize(I.fdtree,I.dhst),F=c+o.F.contSize(I.ltree,I.lhst)+o.F.contSize(I.dtree,I.dhst);F+=14+3*v+o.F.contSize(I.itree,I.ihst)+(2*I.ihst[16]+3*I.ihst[17]+7*I.ihst[18]);for(var _=0;_<286;_++)I.lhst[_]=0;for(_=0;_<30;_++)I.dhst[_]=0;for(_=0;_<19;_++)I.ihst[_]=0;var y=m<E&&m<F?0:E<F?1:2;if(D(l,u,n),D(l,u+1,y),u+=3,y==0){for(;(7&u)!=0;)u++;u=o.F._copyExact(d,S,s,l,u)}else{var b,P;if(y==1&&(b=I.fltree,P=I.fdtree),y==2){o.F.makeCodes(I.ltree,x),o.F.revCodes(I.ltree,x),o.F.makeCodes(I.dtree,C),o.F.revCodes(I.dtree,C),o.F.makeCodes(I.itree,A),o.F.revCodes(I.itree,A),b=I.ltree,P=I.dtree,p(l,u,T-257),p(l,u+=5,N-1),p(l,u+=5,v-4),u+=4;for(var g=0;g<v;g++)p(l,u+3*g,I.itree[1+(I.ordr[g]<<1)]);u+=3*v,u=o.F._codeTiny(O,I.itree,l,u),u=o.F._codeTiny(w,I.itree,l,u)}for(var h=S,M=0;M<a;M+=2){for(var R=i[M],U=R>>>23,H=h+(8388607&R);h<H;)u=o.F._writeLit(d[h++],b,l,u);if(U!=0){var B=i[M+1],j=B>>16,G=B>>8&255,L=255&B;p(l,u=o.F._writeLit(257+G,b,l,u),U-I.of0[G]),u+=I.exb[G],D(l,u=o.F._writeLit(L,P,l,u),j-I.df0[L]),u+=I.dxb[L],h+=U}}u=o.F._writeLit(256,b,l,u)}return u},o.F._copyExact=function(n,i,a,c,d){var S=d>>>3;return c[S]=a,c[S+1]=a>>>8,c[S+2]=255-c[S],c[S+3]=255-c[S+1],S+=4,c.set(new Uint8Array(n.buffer,i,a),S),d+(a+4<<3)},o.F.getTrees=function(){for(var n=o.F.U,i=o.F._hufTree(n.lhst,n.ltree,15),a=o.F._hufTree(n.dhst,n.dtree,15),c=[],d=o.F._lenCodes(n.ltree,c),S=[],s=o.F._lenCodes(n.dtree,S),l=0;l<c.length;l+=2)n.ihst[c[l]]++;for(l=0;l<S.length;l+=2)n.ihst[S[l]]++;for(var u=o.F._hufTree(n.ihst,n.itree,7),f=19;f>4&&n.itree[1+(n.ordr[f-1]<<1)]==0;)f--;return[i,a,u,d,s,f,c,S]},o.F.getSecond=function(n){for(var i=[],a=0;a<n.length;a+=2)i.push(n[a+1]);return i},o.F.nonZero=function(n){for(var i="",a=0;a<n.length;a+=2)n[a+1]!=0&&(i+=(a>>1)+",");return i},o.F.contSize=function(n,i){for(var a=0,c=0;c<i.length;c++)a+=i[c]*n[1+(c<<1)];return a},o.F._codeTiny=function(n,i,a,c){for(var d=0;d<n.length;d+=2){var S=n[d],s=n[d+1];c=o.F._writeLit(S,i,a,c);var l=S==16?2:S==17?3:7;S>15&&(o.F._putsE(a,c,s,l),c+=l)}return c},o.F._lenCodes=function(n,i){for(var a=n.length;a!=2&&n[a-1]==0;)a-=2;for(var c=0;c<a;c+=2){var d=n[c+1],S=c+3<a?n[c+3]:-1,s=c+5<a?n[c+5]:-1,l=c==0?-1:n[c-1];if(d==0&&S==d&&s==d){for(var u=c+5;u+2<a&&n[u+2]==d;)u+=2;(f=Math.min(u+1-c>>>1,138))<11?i.push(17,f-3):i.push(18,f-11),c+=2*f-2}else if(d==l&&S==d&&s==d){for(u=c+5;u+2<a&&n[u+2]==d;)u+=2;var f=Math.min(u+1-c>>>1,6);i.push(16,f-3),c+=2*f-2}else i.push(d,0)}return a>>>1},o.F._hufTree=function(n,i,a){var c=[],d=n.length,S=i.length,s=0;for(s=0;s<S;s+=2)i[s]=0,i[s+1]=0;for(s=0;s<d;s++)n[s]!=0&&c.push({lit:s,f:n[s]});var l=c.length,u=c.slice(0);if(l==0)return 0;if(l==1){var f=c[0].lit;return u=f==0?1:0,i[1+(f<<1)]=1,i[1+(u<<1)]=1,1}c.sort((function(O,w){return O.f-w.f}));var x=c[0],C=c[1],A=0,T=1,N=2;for(c[0]={lit:-1,f:x.f+C.f,l:x,r:C,d:0};T!=l-1;)x=A!=T&&(N==l||c[A].f<c[N].f)?c[A++]:c[N++],C=A!=T&&(N==l||c[A].f<c[N].f)?c[A++]:c[N++],c[T++]={lit:-1,f:x.f+C.f,l:x,r:C};var v=o.F.setDepth(c[T-1],0);for(v>a&&(o.F.restrictDepth(u,a,v),v=a),s=0;s<l;s++)i[1+(u[s].lit<<1)]=u[s].d;return v},o.F.setDepth=function(n,i){return n.lit!=-1?(n.d=i,i):Math.max(o.F.setDepth(n.l,i+1),o.F.setDepth(n.r,i+1))},o.F.restrictDepth=function(n,i,a){var c=0,d=1<<a-i,S=0;for(n.sort((function(l,u){return u.d==l.d?l.f-u.f:u.d-l.d})),c=0;c<n.length&&n[c].d>i;c++){var s=n[c].d;n[c].d=i,S+=d-(1<<a-s)}for(S>>>=a-i;S>0;)(s=n[c].d)<i?(n[c].d++,S-=1<<i-s-1):c++;for(;c>=0;c--)n[c].d==i&&S<0&&(n[c].d--,S++);S!=0&&console.log("debt left")},o.F._goodIndex=function(n,i){var a=0;return i[16|a]<=n&&(a|=16),i[8|a]<=n&&(a|=8),i[4|a]<=n&&(a|=4),i[2|a]<=n&&(a|=2),i[1|a]<=n&&(a|=1),a},o.F._writeLit=function(n,i,a,c){return o.F._putsF(a,c,i[n<<1]),c+i[1+(n<<1)]},o.F.inflate=function(n,i){var a=Uint8Array;if(n[0]==3&&n[1]==0)return i||new a(0);var c=o.F,d=c._bitsF,S=c._bitsE,s=c._decodeTiny,l=c.makeCodes,u=c.codes2map,f=c._get17,x=c.U,C=i==null;C&&(i=new a(n.length>>>2<<3));for(var A,T,N=0,v=0,O=0,w=0,I=0,D=0,p=0,m=0,E=0;N==0;)if(N=d(n,E,1),v=d(n,E+1,2),E+=3,v!=0){if(C&&(i=o.F._check(i,m+(1<<17))),v==1&&(A=x.flmap,T=x.fdmap,D=511,p=31),v==2){O=S(n,E,5)+257,w=S(n,E+5,5)+1,I=S(n,E+10,4)+4,E+=14;for(var F=0;F<38;F+=2)x.itree[F]=0,x.itree[F+1]=0;var _=1;for(F=0;F<I;F++){var y=S(n,E+3*F,3);x.itree[1+(x.ordr[F]<<1)]=y,y>_&&(_=y)}E+=3*I,l(x.itree,_),u(x.itree,_,x.imap),A=x.lmap,T=x.dmap,E=s(x.imap,(1<<_)-1,O+w,n,E,x.ttree);var b=c._copyOut(x.ttree,0,O,x.ltree);D=(1<<b)-1;var P=c._copyOut(x.ttree,O,w,x.dtree);p=(1<<P)-1,l(x.ltree,b),u(x.ltree,b,A),l(x.dtree,P),u(x.dtree,P,T)}for(;;){var g=A[f(n,E)&D];E+=15&g;var h=g>>>4;if(!(h>>>8))i[m++]=h;else{if(h==256)break;var M=m+h-254;if(h>264){var R=x.ldef[h-257];M=m+(R>>>3)+S(n,E,7&R),E+=7&R}var U=T[f(n,E)&p];E+=15&U;var H=U>>>4,B=x.ddef[H],j=(B>>>4)+d(n,E,15&B);for(E+=15&B,C&&(i=o.F._check(i,m+(1<<17)));m<M;)i[m]=i[m++-j],i[m]=i[m++-j],i[m]=i[m++-j],i[m]=i[m++-j];m=M}}}else{(7&E)!=0&&(E+=8-(7&E));var G=4+(E>>>3),L=n[G-4]|n[G-3]<<8;C&&(i=o.F._check(i,m+L)),i.set(new a(n.buffer,n.byteOffset+G,L),m),E=G+L<<3,m+=L}return i.length==m?i:i.slice(0,m)},o.F._check=function(n,i){var a=n.length;if(i<=a)return n;var c=new Uint8Array(Math.max(a<<1,i));return c.set(n,0),c},o.F._decodeTiny=function(n,i,a,c,d,S){for(var s=o.F._bitsE,l=o.F._get17,u=0;u<a;){var f=n[l(c,d)&i];d+=15&f;var x=f>>>4;if(x<=15)S[u]=x,u++;else{var C=0,A=0;x==16?(A=3+s(c,d,2),d+=2,C=S[u-1]):x==17?(A=3+s(c,d,3),d+=3):x==18&&(A=11+s(c,d,7),d+=7);for(var T=u+A;u<T;)S[u]=C,u++}}return d},o.F._copyOut=function(n,i,a,c){for(var d=0,S=0,s=c.length>>>1;S<a;){var l=n[S+i];c[S<<1]=0,c[1+(S<<1)]=l,l>d&&(d=l),S++}for(;S<s;)c[S<<1]=0,c[1+(S<<1)]=0,S++;return d},o.F.makeCodes=function(n,i){for(var a,c,d,S,s=o.F.U,l=n.length,u=s.bl_count,f=0;f<=i;f++)u[f]=0;for(f=1;f<l;f+=2)u[n[f]]++;var x=s.next_code;for(a=0,u[0]=0,c=1;c<=i;c++)a=a+u[c-1]<<1,x[c]=a;for(d=0;d<l;d+=2)(S=n[d+1])!=0&&(n[d]=x[S],x[S]++)},o.F.codes2map=function(n,i,a){for(var c=n.length,d=o.F.U.rev15,S=0;S<c;S+=2)if(n[S+1]!=0)for(var s=S>>1,l=n[S+1],u=s<<4|l,f=i-l,x=n[S]<<f,C=x+(1<<f);x!=C;)a[d[x]>>>15-i]=u,x++},o.F.revCodes=function(n,i){for(var a=o.F.U.rev15,c=15-i,d=0;d<n.length;d+=2){var S=n[d]<<i-n[d+1];n[d]=a[S]>>>c}},o.F._putsE=function(n,i,a){a<<=7&i;var c=i>>>3;n[c]|=a,n[c+1]|=a>>>8},o.F._putsF=function(n,i,a){a<<=7&i;var c=i>>>3;n[c]|=a,n[c+1]|=a>>>8,n[c+2]|=a>>>16},o.F._bitsE=function(n,i,a){return(n[i>>>3]|n[1+(i>>>3)]<<8)>>>(7&i)&(1<<a)-1},o.F._bitsF=function(n,i,a){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16)>>>(7&i)&(1<<a)-1},o.F._get17=function(n,i){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16)>>>(7&i)},o.F._get25=function(n,i){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16|n[3+(i>>>3)]<<24)>>>(7&i)},o.F.U=(t=Uint16Array,r=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var n=o.F.U,i=0;i<32768;i++){var a=i;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,n.rev15[i]=(a>>>16|a<<16)>>>17}function c(d,S,s){for(;S--!=0;)d.push(0,s)}for(i=0;i<32;i++)n.ldef[i]=n.of0[i]<<3|n.exb[i],n.ddef[i]=n.df0[i]<<4|n.dxb[i];c(n.fltree,144,8),c(n.fltree,112,9),c(n.fltree,24,7),c(n.fltree,8,8),o.F.makeCodes(n.fltree,9),o.F.codes2map(n.fltree,9,n.flmap),o.F.revCodes(n.fltree,9),c(n.fdtree,32,5),o.F.makeCodes(n.fdtree,5),o.F.codes2map(n.fdtree,5,n.fdmap),o.F.revCodes(n.fdtree,5),c(n.itree,19,0),c(n.ltree,286,0),c(n.dtree,30,0),c(n.ttree,320,0)})()})();var Xo=Ho({__proto__:null,default:At},[At]);const ye=(function(){var e={nextZero(s,l){for(;s[l]!=0;)l++;return l},readUshort:(s,l)=>s[l]<<8|s[l+1],writeUshort(s,l,u){s[l]=u>>8&255,s[l+1]=255&u},readUint:(s,l)=>16777216*s[l]+(s[l+1]<<16|s[l+2]<<8|s[l+3]),writeUint(s,l,u){s[l]=u>>24&255,s[l+1]=u>>16&255,s[l+2]=u>>8&255,s[l+3]=255&u},readASCII(s,l,u){let f="";for(let x=0;x<u;x++)f+=String.fromCharCode(s[l+x]);return f},writeASCII(s,l,u){for(let f=0;f<u.length;f++)s[l+f]=u.charCodeAt(f)},readBytes(s,l,u){const f=[];for(let x=0;x<u;x++)f.push(s[l+x]);return f},pad:s=>s.length<2?`0${s}`:s,readUTF8(s,l,u){let f,x="";for(let C=0;C<u;C++)x+=`%${e.pad(s[l+C].toString(16))}`;try{f=decodeURIComponent(x)}catch{return e.readASCII(s,l,u)}return f}};function t(s,l,u,f){const x=l*u,C=i(f),A=Math.ceil(l*C/8),T=new Uint8Array(4*x),N=new Uint32Array(T.buffer),{ctype:v}=f,{depth:O}=f,w=e.readUshort;if(v==6){const R=x<<2;if(O==8)for(var I=0;I<R;I+=4)T[I]=s[I],T[I+1]=s[I+1],T[I+2]=s[I+2],T[I+3]=s[I+3];if(O==16)for(I=0;I<R;I++)T[I]=s[I<<1]}else if(v==2){const R=f.tabs.tRNS;if(R==null){if(O==8)for(I=0;I<x;I++){var D=3*I;N[I]=255<<24|s[D+2]<<16|s[D+1]<<8|s[D]}if(O==16)for(I=0;I<x;I++)D=6*I,N[I]=255<<24|s[D+4]<<16|s[D+2]<<8|s[D]}else{var p=R[0];const U=R[1],H=R[2];if(O==8)for(I=0;I<x;I++){var m=I<<2;D=3*I,N[I]=255<<24|s[D+2]<<16|s[D+1]<<8|s[D],s[D]==p&&s[D+1]==U&&s[D+2]==H&&(T[m+3]=0)}if(O==16)for(I=0;I<x;I++)m=I<<2,D=6*I,N[I]=255<<24|s[D+4]<<16|s[D+2]<<8|s[D],w(s,D)==p&&w(s,D+2)==U&&w(s,D+4)==H&&(T[m+3]=0)}}else if(v==3){const R=f.tabs.PLTE,U=f.tabs.tRNS,H=U?U.length:0;if(O==1)for(var E=0;E<u;E++){var F=E*A,_=E*l;for(I=0;I<l;I++){m=_+I<<2;var y=3*(b=s[F+(I>>3)]>>7-((7&I)<<0)&1);T[m]=R[y],T[m+1]=R[y+1],T[m+2]=R[y+2],T[m+3]=b<H?U[b]:255}}if(O==2)for(E=0;E<u;E++)for(F=E*A,_=E*l,I=0;I<l;I++)m=_+I<<2,y=3*(b=s[F+(I>>2)]>>6-((3&I)<<1)&3),T[m]=R[y],T[m+1]=R[y+1],T[m+2]=R[y+2],T[m+3]=b<H?U[b]:255;if(O==4)for(E=0;E<u;E++)for(F=E*A,_=E*l,I=0;I<l;I++)m=_+I<<2,y=3*(b=s[F+(I>>1)]>>4-((1&I)<<2)&15),T[m]=R[y],T[m+1]=R[y+1],T[m+2]=R[y+2],T[m+3]=b<H?U[b]:255;if(O==8)for(I=0;I<x;I++){var b;m=I<<2,y=3*(b=s[I]),T[m]=R[y],T[m+1]=R[y+1],T[m+2]=R[y+2],T[m+3]=b<H?U[b]:255}}else if(v==4){if(O==8)for(I=0;I<x;I++){m=I<<2;var P=s[g=I<<1];T[m]=P,T[m+1]=P,T[m+2]=P,T[m+3]=s[g+1]}if(O==16)for(I=0;I<x;I++){var g;m=I<<2,P=s[g=I<<2],T[m]=P,T[m+1]=P,T[m+2]=P,T[m+3]=s[g+2]}}else if(v==0)for(p=f.tabs.tRNS?f.tabs.tRNS:-1,E=0;E<u;E++){const R=E*A,U=E*l;if(O==1)for(var h=0;h<l;h++){var M=(P=255*(s[R+(h>>>3)]>>>7-(7&h)&1))==255*p?0:255;N[U+h]=M<<24|P<<16|P<<8|P}else if(O==2)for(h=0;h<l;h++)M=(P=85*(s[R+(h>>>2)]>>>6-((3&h)<<1)&3))==85*p?0:255,N[U+h]=M<<24|P<<16|P<<8|P;else if(O==4)for(h=0;h<l;h++)M=(P=17*(s[R+(h>>>1)]>>>4-((1&h)<<2)&15))==17*p?0:255,N[U+h]=M<<24|P<<16|P<<8|P;else if(O==8)for(h=0;h<l;h++)M=(P=s[R+h])==p?0:255,N[U+h]=M<<24|P<<16|P<<8|P;else if(O==16)for(h=0;h<l;h++)P=s[R+(h<<1)],M=w(s,R+(h<<1))==p?0:255,N[U+h]=M<<24|P<<16|P<<8|P}return T}function r(s,l,u,f){const x=i(s),C=Math.ceil(u*x/8),A=new Uint8Array((C+1+s.interlace)*f);return l=s.tabs.CgBI?n(l,A):o(l,A),s.interlace==0?l=a(l,s,0,u,f):s.interlace==1&&(l=(function(N,v){const O=v.width,w=v.height,I=i(v),D=I>>3,p=Math.ceil(O*I/8),m=new Uint8Array(w*p);let E=0;const F=[0,0,4,0,2,0,1],_=[0,4,0,2,0,1,0],y=[8,8,8,4,4,2,2],b=[8,8,4,4,2,2,1];let P=0;for(;P<7;){const h=y[P],M=b[P];let R=0,U=0,H=F[P];for(;H<w;)H+=h,U++;let B=_[P];for(;B<O;)B+=M,R++;const j=Math.ceil(R*I/8);a(N,v,E,R,U);let G=0,L=F[P];for(;L<w;){let X=_[P],q=E+G*j<<3;for(;X<O;){var g;if(I==1&&(g=(g=N[q>>3])>>7-(7&q)&1,m[L*p+(X>>3)]|=g<<7-((7&X)<<0)),I==2&&(g=(g=N[q>>3])>>6-(7&q)&3,m[L*p+(X>>2)]|=g<<6-((3&X)<<1)),I==4&&(g=(g=N[q>>3])>>4-(7&q)&15,m[L*p+(X>>1)]|=g<<4-((1&X)<<2)),I>=8){const Q=L*p+X*D;for(let K=0;K<D;K++)m[Q+K]=N[(q>>3)+K]}q+=I,X+=M}G++,L+=h}R*U!=0&&(E+=U*(1+j)),P+=1}return m})(l,s)),l}function o(s,l){return n(new Uint8Array(s.buffer,2,s.length-6),l)}var n=(function(){const s={H:{}};return s.H.N=function(l,u){const f=Uint8Array;let x,C,A=0,T=0,N=0,v=0,O=0,w=0,I=0,D=0,p=0;if(l[0]==3&&l[1]==0)return u||new f(0);const m=s.H,E=m.b,F=m.e,_=m.R,y=m.n,b=m.A,P=m.Z,g=m.m,h=u==null;for(h&&(u=new f(l.length>>>2<<5));A==0;)if(A=E(l,p,1),T=E(l,p+1,2),p+=3,T!=0){if(h&&(u=s.H.W(u,D+(1<<17))),T==1&&(x=g.J,C=g.h,w=511,I=31),T==2){N=F(l,p,5)+257,v=F(l,p+5,5)+1,O=F(l,p+10,4)+4,p+=14;let R=1;for(var M=0;M<38;M+=2)g.Q[M]=0,g.Q[M+1]=0;for(M=0;M<O;M++){const B=F(l,p+3*M,3);g.Q[1+(g.X[M]<<1)]=B,B>R&&(R=B)}p+=3*O,y(g.Q,R),b(g.Q,R,g.u),x=g.w,C=g.d,p=_(g.u,(1<<R)-1,N+v,l,p,g.v);const U=m.V(g.v,0,N,g.C);w=(1<<U)-1;const H=m.V(g.v,N,v,g.D);I=(1<<H)-1,y(g.C,U),b(g.C,U,x),y(g.D,H),b(g.D,H,C)}for(;;){const R=x[P(l,p)&w];p+=15&R;const U=R>>>4;if(!(U>>>8))u[D++]=U;else{if(U==256)break;{let H=D+U-254;if(U>264){const X=g.q[U-257];H=D+(X>>>3)+F(l,p,7&X),p+=7&X}const B=C[P(l,p)&I];p+=15&B;const j=B>>>4,G=g.c[j],L=(G>>>4)+E(l,p,15&G);for(p+=15&G;D<H;)u[D]=u[D++-L],u[D]=u[D++-L],u[D]=u[D++-L],u[D]=u[D++-L];D=H}}}}else{(7&p)!=0&&(p+=8-(7&p));const R=4+(p>>>3),U=l[R-4]|l[R-3]<<8;h&&(u=s.H.W(u,D+U)),u.set(new f(l.buffer,l.byteOffset+R,U),D),p=R+U<<3,D+=U}return u.length==D?u:u.slice(0,D)},s.H.W=function(l,u){const f=l.length;if(u<=f)return l;const x=new Uint8Array(f<<1);return x.set(l,0),x},s.H.R=function(l,u,f,x,C,A){const T=s.H.e,N=s.H.Z;let v=0;for(;v<f;){const O=l[N(x,C)&u];C+=15&O;const w=O>>>4;if(w<=15)A[v]=w,v++;else{let I=0,D=0;w==16?(D=3+T(x,C,2),C+=2,I=A[v-1]):w==17?(D=3+T(x,C,3),C+=3):w==18&&(D=11+T(x,C,7),C+=7);const p=v+D;for(;v<p;)A[v]=I,v++}}return C},s.H.V=function(l,u,f,x){let C=0,A=0;const T=x.length>>>1;for(;A<f;){const N=l[A+u];x[A<<1]=0,x[1+(A<<1)]=N,N>C&&(C=N),A++}for(;A<T;)x[A<<1]=0,x[1+(A<<1)]=0,A++;return C},s.H.n=function(l,u){const f=s.H.m,x=l.length;let C,A,T,N;const v=f.j;for(var O=0;O<=u;O++)v[O]=0;for(O=1;O<x;O+=2)v[l[O]]++;const w=f.K;for(C=0,v[0]=0,A=1;A<=u;A++)C=C+v[A-1]<<1,w[A]=C;for(T=0;T<x;T+=2)N=l[T+1],N!=0&&(l[T]=w[N],w[N]++)},s.H.A=function(l,u,f){const x=l.length,C=s.H.m.r;for(let A=0;A<x;A+=2)if(l[A+1]!=0){const T=A>>1,N=l[A+1],v=T<<4|N,O=u-N;let w=l[A]<<O;const I=w+(1<<O);for(;w!=I;)f[C[w]>>>15-u]=v,w++}},s.H.l=function(l,u){const f=s.H.m.r,x=15-u;for(let C=0;C<l.length;C+=2){const A=l[C]<<u-l[C+1];l[C]=f[A]>>>x}},s.H.M=function(l,u,f){f<<=7&u;const x=u>>>3;l[x]|=f,l[x+1]|=f>>>8},s.H.I=function(l,u,f){f<<=7&u;const x=u>>>3;l[x]|=f,l[x+1]|=f>>>8,l[x+2]|=f>>>16},s.H.e=function(l,u,f){return(l[u>>>3]|l[1+(u>>>3)]<<8)>>>(7&u)&(1<<f)-1},s.H.b=function(l,u,f){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16)>>>(7&u)&(1<<f)-1},s.H.Z=function(l,u){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16)>>>(7&u)},s.H.i=function(l,u){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16|l[3+(u>>>3)]<<24)>>>(7&u)},s.H.m=(function(){const l=Uint16Array,u=Uint32Array;return{K:new l(16),j:new l(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new l(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new u(32),J:new l(512),_:[],h:new l(32),$:[],w:new l(32768),C:[],v:[],d:new l(32768),D:[],u:new l(512),Q:[],r:new l(32768),s:new u(286),Y:new u(30),a:new u(19),t:new u(15e3),k:new l(65536),g:new l(32768)}})(),(function(){const l=s.H.m;for(var u=0;u<32768;u++){let x=u;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,l.r[u]=(x>>>16|x<<16)>>>17}function f(x,C,A){for(;C--!=0;)x.push(0,A)}for(u=0;u<32;u++)l.q[u]=l.S[u]<<3|l.T[u],l.c[u]=l.p[u]<<4|l.z[u];f(l._,144,8),f(l._,112,9),f(l._,24,7),f(l._,8,8),s.H.n(l._,9),s.H.A(l._,9,l.J),s.H.l(l._,9),f(l.$,32,5),s.H.n(l.$,5),s.H.A(l.$,5,l.h),s.H.l(l.$,5),f(l.Q,19,0),f(l.C,286,0),f(l.D,30,0),f(l.v,320,0)})(),s.H.N})();function i(s){return[1,null,3,1,2,null,4][s.ctype]*s.depth}function a(s,l,u,f,x){let C=i(l);const A=Math.ceil(f*C/8);let T,N;C=Math.ceil(C/8);let v=s[u],O=0;if(v>1&&(s[u]=[0,0,1][v-2]),v==3)for(O=C;O<A;O++)s[O+1]=s[O+1]+(s[O+1-C]>>>1)&255;for(let w=0;w<x;w++)if(T=u+w*A,N=T+w+1,v=s[N-1],O=0,v==0)for(;O<A;O++)s[T+O]=s[N+O];else if(v==1){for(;O<C;O++)s[T+O]=s[N+O];for(;O<A;O++)s[T+O]=s[N+O]+s[T+O-C]}else if(v==2)for(;O<A;O++)s[T+O]=s[N+O]+s[T+O-A];else if(v==3){for(;O<C;O++)s[T+O]=s[N+O]+(s[T+O-A]>>>1);for(;O<A;O++)s[T+O]=s[N+O]+(s[T+O-A]+s[T+O-C]>>>1)}else{for(;O<C;O++)s[T+O]=s[N+O]+c(0,s[T+O-A],0);for(;O<A;O++)s[T+O]=s[N+O]+c(s[T+O-C],s[T+O-A],s[T+O-C-A])}return s}function c(s,l,u){const f=s+l-u,x=f-s,C=f-l,A=f-u;return x*x<=C*C&&x*x<=A*A?s:C*C<=A*A?l:u}function d(s,l,u){u.width=e.readUint(s,l),l+=4,u.height=e.readUint(s,l),l+=4,u.depth=s[l],l++,u.ctype=s[l],l++,u.compress=s[l],l++,u.filter=s[l],l++,u.interlace=s[l],l++}function S(s,l,u,f,x,C,A,T,N){const v=Math.min(l,x),O=Math.min(u,C);let w=0,I=0;for(let P=0;P<O;P++)for(let g=0;g<v;g++)if(A>=0&&T>=0?(w=P*l+g<<2,I=(T+P)*x+A+g<<2):(w=(-T+P)*l-A+g<<2,I=P*x+g<<2),N==0)f[I]=s[w],f[I+1]=s[w+1],f[I+2]=s[w+2],f[I+3]=s[w+3];else if(N==1){var D=s[w+3]*.00392156862745098,p=s[w]*D,m=s[w+1]*D,E=s[w+2]*D,F=f[I+3]*(1/255),_=f[I]*F,y=f[I+1]*F,b=f[I+2]*F;const h=1-D,M=D+F*h,R=M==0?0:1/M;f[I+3]=255*M,f[I+0]=(p+_*h)*R,f[I+1]=(m+y*h)*R,f[I+2]=(E+b*h)*R}else if(N==2)D=s[w+3],p=s[w],m=s[w+1],E=s[w+2],F=f[I+3],_=f[I],y=f[I+1],b=f[I+2],D==F&&p==_&&m==y&&E==b?(f[I]=0,f[I+1]=0,f[I+2]=0,f[I+3]=0):(f[I]=p,f[I+1]=m,f[I+2]=E,f[I+3]=D);else if(N==3){if(D=s[w+3],p=s[w],m=s[w+1],E=s[w+2],F=f[I+3],_=f[I],y=f[I+1],b=f[I+2],D==F&&p==_&&m==y&&E==b)continue;if(D<220&&F>20)return!1}return!0}return{decode:function(l){const u=new Uint8Array(l);let f=8;const x=e,C=x.readUshort,A=x.readUint,T={tabs:{},frames:[]},N=new Uint8Array(u.length);let v,O=0,w=0;const I=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(u[D]!=I[D])throw"The input is not a PNG file!";for(;f<u.length;){const P=x.readUint(u,f);f+=4;const g=x.readASCII(u,f,4);if(f+=4,g=="IHDR")d(u,f,T);else if(g=="iCCP"){for(var p=f;u[p]!=0;)p++;x.readASCII(u,f,p-f),u[p+1];const h=u.slice(p+2,f+P);let M=null;try{M=o(h)}catch{M=n(h)}T.tabs[g]=M}else if(g=="CgBI")T.tabs[g]=u.slice(f,f+4);else if(g=="IDAT"){for(D=0;D<P;D++)N[O+D]=u[f+D];O+=P}else if(g=="acTL")T.tabs[g]={num_frames:A(u,f),num_plays:A(u,f+4)},v=new Uint8Array(u.length);else if(g=="fcTL"){w!=0&&((b=T.frames[T.frames.length-1]).data=r(T,v.slice(0,w),b.rect.width,b.rect.height),w=0);const h={x:A(u,f+12),y:A(u,f+16),width:A(u,f+4),height:A(u,f+8)};let M=C(u,f+22);M=C(u,f+20)/(M==0?100:M);const R={rect:h,delay:Math.round(1e3*M),dispose:u[f+24],blend:u[f+25]};T.frames.push(R)}else if(g=="fdAT"){for(D=0;D<P-4;D++)v[w+D]=u[f+D+4];w+=P-4}else if(g=="pHYs")T.tabs[g]=[x.readUint(u,f),x.readUint(u,f+4),u[f+8]];else if(g=="cHRM")for(T.tabs[g]=[],D=0;D<8;D++)T.tabs[g].push(x.readUint(u,f+4*D));else if(g=="tEXt"||g=="zTXt"){T.tabs[g]==null&&(T.tabs[g]={});var m=x.nextZero(u,f),E=x.readASCII(u,f,m-f),F=f+P-m-1;if(g=="tEXt")y=x.readASCII(u,m+1,F);else{var _=o(u.slice(m+2,m+2+F));y=x.readUTF8(_,0,_.length)}T.tabs[g][E]=y}else if(g=="iTXt"){T.tabs[g]==null&&(T.tabs[g]={}),m=0,p=f,m=x.nextZero(u,p),E=x.readASCII(u,p,m-p);const h=u[p=m+1];var y;u[p+1],p+=2,m=x.nextZero(u,p),x.readASCII(u,p,m-p),p=m+1,m=x.nextZero(u,p),x.readUTF8(u,p,m-p),F=P-((p=m+1)-f),h==0?y=x.readUTF8(u,p,F):(_=o(u.slice(p,p+F)),y=x.readUTF8(_,0,_.length)),T.tabs[g][E]=y}else if(g=="PLTE")T.tabs[g]=x.readBytes(u,f,P);else if(g=="hIST"){const h=T.tabs.PLTE.length/3;for(T.tabs[g]=[],D=0;D<h;D++)T.tabs[g].push(C(u,f+2*D))}else if(g=="tRNS")T.ctype==3?T.tabs[g]=x.readBytes(u,f,P):T.ctype==0?T.tabs[g]=C(u,f):T.ctype==2&&(T.tabs[g]=[C(u,f),C(u,f+2),C(u,f+4)]);else if(g=="gAMA")T.tabs[g]=x.readUint(u,f)/1e5;else if(g=="sRGB")T.tabs[g]=u[f];else if(g=="bKGD")T.ctype==0||T.ctype==4?T.tabs[g]=[C(u,f)]:T.ctype==2||T.ctype==6?T.tabs[g]=[C(u,f),C(u,f+2),C(u,f+4)]:T.ctype==3&&(T.tabs[g]=u[f]);else if(g=="IEND")break;f+=P,x.readUint(u,f),f+=4}var b;return w!=0&&((b=T.frames[T.frames.length-1]).data=r(T,v.slice(0,w),b.rect.width,b.rect.height)),T.data=r(T,N,T.width,T.height),delete T.compress,delete T.interlace,delete T.filter,T},toRGBA8:function(l){const u=l.width,f=l.height;if(l.tabs.acTL==null)return[t(l.data,u,f,l).buffer];const x=[];l.frames[0].data==null&&(l.frames[0].data=l.data);const C=u*f*4,A=new Uint8Array(C),T=new Uint8Array(C),N=new Uint8Array(C);for(let O=0;O<l.frames.length;O++){const w=l.frames[O],I=w.rect.x,D=w.rect.y,p=w.rect.width,m=w.rect.height,E=t(w.data,p,m,l);if(O!=0)for(var v=0;v<C;v++)N[v]=A[v];if(w.blend==0?S(E,p,m,A,u,f,I,D,0):w.blend==1&&S(E,p,m,A,u,f,I,D,1),x.push(A.buffer.slice(0)),w.dispose!=0){if(w.dispose==1)S(T,p,m,A,u,f,I,D,0);else if(w.dispose==2)for(v=0;v<C;v++)A[v]=N[v]}}return x},_paeth:c,_copyTile:S,_bin:e}})();(function(){const{_copyTile:e}=ye,{_bin:t}=ye,r=ye._paeth;var o={table:(function(){const p=new Uint32Array(256);for(let m=0;m<256;m++){let E=m;for(let F=0;F<8;F++)1&E?E=3988292384^E>>>1:E>>>=1;p[m]=E}return p})(),update(p,m,E,F){for(let _=0;_<F;_++)p=o.table[255&(p^m[E+_])]^p>>>8;return p},crc:(p,m,E)=>4294967295^o.update(4294967295,p,m,E)};function n(p,m,E,F){m[E]+=p[0]*F>>4,m[E+1]+=p[1]*F>>4,m[E+2]+=p[2]*F>>4,m[E+3]+=p[3]*F>>4}function i(p){return Math.max(0,Math.min(255,p))}function a(p,m){const E=p[0]-m[0],F=p[1]-m[1],_=p[2]-m[2],y=p[3]-m[3];return E*E+F*F+_*_+y*y}function c(p,m,E,F,_,y,b){b==null&&(b=1);const P=F.length,g=[];for(var h=0;h<P;h++){const L=F[h];g.push([L>>>0&255,L>>>8&255,L>>>16&255,L>>>24&255])}for(h=0;h<P;h++){let L=4294967295;for(var M=0,R=0;R<P;R++){var U=a(g[h],g[R]);R!=h&&U<L&&(L=U,M=R)}}const H=new Uint32Array(_.buffer),B=new Int16Array(m*E*4),j=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(h=0;h<j.length;h++)j[h]=255*((j[h]+.5)/16-.5);for(let L=0;L<E;L++)for(let X=0;X<m;X++){var G;h=4*(L*m+X),b!=2?G=[i(p[h]+B[h]),i(p[h+1]+B[h+1]),i(p[h+2]+B[h+2]),i(p[h+3]+B[h+3])]:(U=j[4*(3&L)+(3&X)],G=[i(p[h]+U),i(p[h+1]+U),i(p[h+2]+U),i(p[h+3]+U)]),M=0;let q=16777215;for(R=0;R<P;R++){const $=a(G,g[R]);$<q&&(q=$,M=R)}const Q=g[M],K=[G[0]-Q[0],G[1]-Q[1],G[2]-Q[2],G[3]-Q[3]];b==1&&(X!=m-1&&n(K,B,h+4,7),L!=E-1&&(X!=0&&n(K,B,h+4*m-4,3),n(K,B,h+4*m,5),X!=m-1&&n(K,B,h+4*m+4,1))),y[h>>2]=M,H[h>>2]=F[M]}}function d(p,m,E,F,_){_==null&&(_={});const{crc:y}=o,b=t.writeUint,P=t.writeUshort,g=t.writeASCII;let h=8;const M=p.frames.length>1;let R,U=!1,H=33+(M?20:0);if(_.sRGB!=null&&(H+=13),_.pHYs!=null&&(H+=21),_.iCCP!=null&&(R=pako.deflate(_.iCCP),H+=21+R.length+4),p.ctype==3){for(var B=p.plte.length,j=0;j<B;j++)p.plte[j]>>>24!=255&&(U=!0);H+=8+3*B+4+(U?8+1*B+4:0)}for(var G=0;G<p.frames.length;G++)M&&(H+=38),H+=(Q=p.frames[G]).cimg.length+12,G!=0&&(H+=4);H+=12;const L=new Uint8Array(H),X=[137,80,78,71,13,10,26,10];for(j=0;j<8;j++)L[j]=X[j];if(b(L,h,13),h+=4,g(L,h,"IHDR"),h+=4,b(L,h,m),h+=4,b(L,h,E),h+=4,L[h]=p.depth,h++,L[h]=p.ctype,h++,L[h]=0,h++,L[h]=0,h++,L[h]=0,h++,b(L,h,y(L,h-17,17)),h+=4,_.sRGB!=null&&(b(L,h,1),h+=4,g(L,h,"sRGB"),h+=4,L[h]=_.sRGB,h++,b(L,h,y(L,h-5,5)),h+=4),_.iCCP!=null){const K=13+R.length;b(L,h,K),h+=4,g(L,h,"iCCP"),h+=4,g(L,h,"ICC profile"),h+=11,h+=2,L.set(R,h),h+=R.length,b(L,h,y(L,h-(K+4),K+4)),h+=4}if(_.pHYs!=null&&(b(L,h,9),h+=4,g(L,h,"pHYs"),h+=4,b(L,h,_.pHYs[0]),h+=4,b(L,h,_.pHYs[1]),h+=4,L[h]=_.pHYs[2],h++,b(L,h,y(L,h-13,13)),h+=4),M&&(b(L,h,8),h+=4,g(L,h,"acTL"),h+=4,b(L,h,p.frames.length),h+=4,b(L,h,_.loop!=null?_.loop:0),h+=4,b(L,h,y(L,h-12,12)),h+=4),p.ctype==3){for(b(L,h,3*(B=p.plte.length)),h+=4,g(L,h,"PLTE"),h+=4,j=0;j<B;j++){const K=3*j,$=p.plte[j],te=255&$,ie=$>>>8&255,Be=$>>>16&255;L[h+K+0]=te,L[h+K+1]=ie,L[h+K+2]=Be}if(h+=3*B,b(L,h,y(L,h-3*B-4,3*B+4)),h+=4,U){for(b(L,h,B),h+=4,g(L,h,"tRNS"),h+=4,j=0;j<B;j++)L[h+j]=p.plte[j]>>>24&255;h+=B,b(L,h,y(L,h-B-4,B+4)),h+=4}}let q=0;for(G=0;G<p.frames.length;G++){var Q=p.frames[G];M&&(b(L,h,26),h+=4,g(L,h,"fcTL"),h+=4,b(L,h,q++),h+=4,b(L,h,Q.rect.width),h+=4,b(L,h,Q.rect.height),h+=4,b(L,h,Q.rect.x),h+=4,b(L,h,Q.rect.y),h+=4,P(L,h,F[G]),h+=2,P(L,h,1e3),h+=2,L[h]=Q.dispose,h++,L[h]=Q.blend,h++,b(L,h,y(L,h-30,30)),h+=4);const K=Q.cimg;b(L,h,(B=K.length)+(G==0?0:4)),h+=4;const $=h;g(L,h,G==0?"IDAT":"fdAT"),h+=4,G!=0&&(b(L,h,q++),h+=4),L.set(K,h),h+=B,b(L,h,y(L,$,h-$)),h+=4}return b(L,h,0),h+=4,g(L,h,"IEND"),h+=4,b(L,h,y(L,h-4,4)),h+=4,L.buffer}function S(p,m,E){for(let F=0;F<p.frames.length;F++){const _=p.frames[F];_.rect.width;const y=_.rect.height,b=new Uint8Array(y*_.bpl+y);_.cimg=f(_.img,y,_.bpp,_.bpl,b,m,E)}}function s(p,m,E,F,_){const y=_[0],b=_[1],P=_[2],g=_[3],h=_[4],M=_[5];let R=6,U=8,H=255;for(var B=0;B<p.length;B++){const de=new Uint8Array(p[B]);for(var j=de.length,G=0;G<j;G+=4)H&=de[G+3]}const L=H!=255,X=(function(ne,V,fe,pe,ae,Ie){const ce=[];for(var ee=0;ee<ne.length;ee++){const me=new Uint8Array(ne[ee]),Fe=new Uint32Array(me.buffer);var Ae;let Te=0,Ne=0,Pe=V,He=fe,Dt=pe?1:0;if(ee!=0){const Ii=Ie||pe||ee==1||ce[ee-2].dispose!=0?1:2;let Mt=0,In=1e9;for(let st=0;st<Ii;st++){var we=new Uint8Array(ne[ee-1-st]);const Ai=new Uint32Array(ne[ee-1-st]);let De=V,Me=fe,qe=-1,at=-1;for(let ze=0;ze<fe;ze++)for(let $e=0;$e<V;$e++)Fe[he=ze*V+$e]!=Ai[he]&&($e<De&&(De=$e),$e>qe&&(qe=$e),ze<Me&&(Me=ze),ze>at&&(at=ze));qe==-1&&(De=Me=qe=at=0),ae&&((1&De)==1&&De--,(1&Me)==1&&Me--);const An=(qe-De+1)*(at-Me+1);An<In&&(In=An,Mt=st,Te=De,Ne=Me,Pe=qe-De+1,He=at-Me+1)}we=new Uint8Array(ne[ee-1-Mt]),Mt==1&&(ce[ee-1].dispose=2),Ae=new Uint8Array(Pe*He*4),e(we,V,fe,Ae,Pe,He,-Te,-Ne,0),Dt=e(me,V,fe,Ae,Pe,He,-Te,-Ne,3)?1:0,Dt==1?u(me,V,fe,Ae,{x:Te,y:Ne,width:Pe,height:He}):e(me,V,fe,Ae,Pe,He,-Te,-Ne,0)}else Ae=me.slice(0);ce.push({rect:{x:Te,y:Ne,width:Pe,height:He},img:Ae,blend:Dt,dispose:0})}if(pe)for(ee=0;ee<ce.length;ee++){if((je=ce[ee]).blend==1)continue;const me=je.rect,Fe=ce[ee-1].rect,Te=Math.min(me.x,Fe.x),Ne=Math.min(me.y,Fe.y),Pe={x:Te,y:Ne,width:Math.max(me.x+me.width,Fe.x+Fe.width)-Te,height:Math.max(me.y+me.height,Fe.y+Fe.height)-Ne};ce[ee-1].dispose=1,ee-1!=0&&l(ne,V,fe,ce,ee-1,Pe,ae),l(ne,V,fe,ce,ee,Pe,ae)}let pt=0;if(ne.length!=1)for(var he=0;he<ce.length;he++){var je;pt+=(je=ce[he]).rect.width*je.rect.height}return ce})(p,m,E,y,b,P),q={},Q=[],K=[];if(F!=0){const de=[];for(G=0;G<X.length;G++)de.push(X[G].img.buffer);const ne=(function(ae){let Ie=0;for(var ce=0;ce<ae.length;ce++)Ie+=ae[ce].byteLength;const ee=new Uint8Array(Ie);let Ae=0;for(ce=0;ce<ae.length;ce++){const we=new Uint8Array(ae[ce]),pt=we.length;for(let he=0;he<pt;he+=4){let je=we[he],me=we[he+1],Fe=we[he+2];const Te=we[he+3];Te==0&&(je=me=Fe=0),ee[Ae+he]=je,ee[Ae+he+1]=me,ee[Ae+he+2]=Fe,ee[Ae+he+3]=Te}Ae+=pt}return ee.buffer})(de),V=C(ne,F);for(G=0;G<V.plte.length;G++)Q.push(V.plte[G].est.rgba);let fe=0;for(G=0;G<X.length;G++){const pe=(te=X[G]).img.length;var $=new Uint8Array(V.inds.buffer,fe>>2,pe>>2);K.push($);const ae=new Uint8Array(V.abuf,fe,pe);M&&c(te.img,te.rect.width,te.rect.height,Q,ae,$),te.img.set(ae),fe+=pe}}else for(B=0;B<X.length;B++){var te=X[B];const de=new Uint32Array(te.img.buffer);var ie=te.rect.width;for(j=de.length,$=new Uint8Array(j),K.push($),G=0;G<j;G++){const ne=de[G];if(G!=0&&ne==de[G-1])$[G]=$[G-1];else if(G>ie&&ne==de[G-ie])$[G]=$[G-ie];else{let V=q[ne];if(V==null&&(q[ne]=V=Q.length,Q.push(ne),Q.length>=300))break;$[G]=V}}}const Be=Q.length;for(Be<=256&&h==0&&(U=Be<=2?1:Be<=4?2:Be<=16?4:8,U=Math.max(U,g)),B=0;B<X.length;B++){(te=X[B]).rect.x,te.rect.y,ie=te.rect.width;const de=te.rect.height;let ne=te.img;new Uint32Array(ne.buffer);let V=4*ie,fe=4;if(Be<=256&&h==0){V=Math.ceil(U*ie/8);var _e=new Uint8Array(V*de);const pe=K[B];for(let ae=0;ae<de;ae++){G=ae*V;const Ie=ae*ie;if(U==8)for(var oe=0;oe<ie;oe++)_e[G+oe]=pe[Ie+oe];else if(U==4)for(oe=0;oe<ie;oe++)_e[G+(oe>>1)]|=pe[Ie+oe]<<4-4*(1&oe);else if(U==2)for(oe=0;oe<ie;oe++)_e[G+(oe>>2)]|=pe[Ie+oe]<<6-2*(3&oe);else if(U==1)for(oe=0;oe<ie;oe++)_e[G+(oe>>3)]|=pe[Ie+oe]<<7-1*(7&oe)}ne=_e,R=3,fe=1}else if(L==0&&X.length==1){_e=new Uint8Array(ie*de*3);const pe=ie*de;for(G=0;G<pe;G++){const ae=3*G,Ie=4*G;_e[ae]=ne[Ie],_e[ae+1]=ne[Ie+1],_e[ae+2]=ne[Ie+2]}ne=_e,R=2,fe=3,V=3*ie}te.img=ne,te.bpl=V,te.bpp=fe}return{ctype:R,depth:U,plte:Q,frames:X}}function l(p,m,E,F,_,y,b){const P=Uint8Array,g=Uint32Array,h=new P(p[_-1]),M=new g(p[_-1]),R=_+1<p.length?new P(p[_+1]):null,U=new P(p[_]),H=new g(U.buffer);let B=m,j=E,G=-1,L=-1;for(let q=0;q<y.height;q++)for(let Q=0;Q<y.width;Q++){const K=y.x+Q,$=y.y+q,te=$*m+K,ie=H[te];ie==0||F[_-1].dispose==0&&M[te]==ie&&(R==null||R[4*te+3]!=0)||(K<B&&(B=K),K>G&&(G=K),$<j&&(j=$),$>L&&(L=$))}G==-1&&(B=j=G=L=0),b&&((1&B)==1&&B--,(1&j)==1&&j--),y={x:B,y:j,width:G-B+1,height:L-j+1};const X=F[_];X.rect=y,X.blend=1,X.img=new Uint8Array(y.width*y.height*4),F[_-1].dispose==0?(e(h,m,E,X.img,y.width,y.height,-y.x,-y.y,0),u(U,m,E,X.img,y)):e(U,m,E,X.img,y.width,y.height,-y.x,-y.y,0)}function u(p,m,E,F,_){e(p,m,E,F,_.width,_.height,-_.x,-_.y,2)}function f(p,m,E,F,_,y,b){const P=[];let g,h=[0,1,2,3,4];y!=-1?h=[y]:(m*F>5e5||E==1)&&(h=[0]),b&&(g={level:0});const M=Xo;for(var R=0;R<h.length;R++){for(let B=0;B<m;B++)x(_,p,B,F,E,h[R]);P.push(M.deflate(_,g))}let U,H=1e9;for(R=0;R<P.length;R++)P[R].length<H&&(U=R,H=P[R].length);return P[U]}function x(p,m,E,F,_,y){const b=E*F;let P=b+E;if(p[P]=y,P++,y==0)if(F<500)for(var g=0;g<F;g++)p[P+g]=m[b+g];else p.set(new Uint8Array(m.buffer,b,F),P);else if(y==1){for(g=0;g<_;g++)p[P+g]=m[b+g];for(g=_;g<F;g++)p[P+g]=m[b+g]-m[b+g-_]+256&255}else if(E==0){for(g=0;g<_;g++)p[P+g]=m[b+g];if(y==2)for(g=_;g<F;g++)p[P+g]=m[b+g];if(y==3)for(g=_;g<F;g++)p[P+g]=m[b+g]-(m[b+g-_]>>1)+256&255;if(y==4)for(g=_;g<F;g++)p[P+g]=m[b+g]-r(m[b+g-_],0,0)+256&255}else{if(y==2)for(g=0;g<F;g++)p[P+g]=m[b+g]+256-m[b+g-F]&255;if(y==3){for(g=0;g<_;g++)p[P+g]=m[b+g]+256-(m[b+g-F]>>1)&255;for(g=_;g<F;g++)p[P+g]=m[b+g]+256-(m[b+g-F]+m[b+g-_]>>1)&255}if(y==4){for(g=0;g<_;g++)p[P+g]=m[b+g]+256-r(0,m[b+g-F],0)&255;for(g=_;g<F;g++)p[P+g]=m[b+g]+256-r(m[b+g-_],m[b+g-F],m[b+g-_-F])&255}}}function C(p,m){const E=new Uint8Array(p),F=E.slice(0),_=new Uint32Array(F.buffer),y=A(F,m),b=y[0],P=y[1],g=E.length,h=new Uint8Array(g>>2);let M;if(E.length<2e7)for(var R=0;R<g;R+=4)M=T(b,U=E[R]*(1/255),H=E[R+1]*(1/255),B=E[R+2]*(1/255),j=E[R+3]*(1/255)),h[R>>2]=M.ind,_[R>>2]=M.est.rgba;else for(R=0;R<g;R+=4){var U=E[R]*.00392156862745098,H=E[R+1]*(1/255),B=E[R+2]*(1/255),j=E[R+3]*(1/255);for(M=b;M.left;)M=N(M.est,U,H,B,j)<=0?M.left:M.right;h[R>>2]=M.ind,_[R>>2]=M.est.rgba}return{abuf:F.buffer,inds:h,plte:P}}function A(p,m,E){E==null&&(E=1e-4);const F=new Uint32Array(p.buffer),_={i0:0,i1:p.length,bst:null,est:null,tdst:0,left:null,right:null};_.bst=w(p,_.i0,_.i1),_.est=I(_.bst);const y=[_];for(;y.length<m;){let P=0,g=0;for(var b=0;b<y.length;b++)y[b].est.L>P&&(P=y[b].est.L,g=b);if(P<E)break;const h=y[g],M=v(p,F,h.i0,h.i1,h.est.e,h.est.eMq255);if(h.i0>=M||h.i1<=M){h.est.L=0;continue}const R={i0:h.i0,i1:M,bst:null,est:null,tdst:0,left:null,right:null};R.bst=w(p,R.i0,R.i1),R.est=I(R.bst);const U={i0:M,i1:h.i1,bst:null,est:null,tdst:0,left:null,right:null};for(U.bst={R:[],m:[],N:h.bst.N-R.bst.N},b=0;b<16;b++)U.bst.R[b]=h.bst.R[b]-R.bst.R[b];for(b=0;b<4;b++)U.bst.m[b]=h.bst.m[b]-R.bst.m[b];U.est=I(U.bst),h.left=R,h.right=U,y[g]=R,y.push(U)}for(y.sort(((P,g)=>g.bst.N-P.bst.N)),b=0;b<y.length;b++)y[b].ind=b;return[_,y]}function T(p,m,E,F,_){if(p.left==null)return p.tdst=(function(R,U,H,B,j){const G=U-R[0],L=H-R[1],X=B-R[2],q=j-R[3];return G*G+L*L+X*X+q*q})(p.est.q,m,E,F,_),p;const y=N(p.est,m,E,F,_);let b=p.left,P=p.right;y>0&&(b=p.right,P=p.left);const g=T(b,m,E,F,_);if(g.tdst<=y*y)return g;const h=T(P,m,E,F,_);return h.tdst<g.tdst?h:g}function N(p,m,E,F,_){const{e:y}=p;return y[0]*m+y[1]*E+y[2]*F+y[3]*_-p.eMq}function v(p,m,E,F,_,y){for(F-=4;E<F;){for(;O(p,E,_)<=y;)E+=4;for(;O(p,F,_)>y;)F-=4;if(E>=F)break;const b=m[E>>2];m[E>>2]=m[F>>2],m[F>>2]=b,E+=4,F-=4}for(;O(p,E,_)>y;)E-=4;return E+4}function O(p,m,E){return p[m]*E[0]+p[m+1]*E[1]+p[m+2]*E[2]+p[m+3]*E[3]}function w(p,m,E){const F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_=[0,0,0,0],y=E-m>>2;for(let b=m;b<E;b+=4){const P=p[b]*.00392156862745098,g=p[b+1]*(1/255),h=p[b+2]*(1/255),M=p[b+3]*(1/255);_[0]+=P,_[1]+=g,_[2]+=h,_[3]+=M,F[0]+=P*P,F[1]+=P*g,F[2]+=P*h,F[3]+=P*M,F[5]+=g*g,F[6]+=g*h,F[7]+=g*M,F[10]+=h*h,F[11]+=h*M,F[15]+=M*M}return F[4]=F[1],F[8]=F[2],F[9]=F[6],F[12]=F[3],F[13]=F[7],F[14]=F[11],{R:F,m:_,N:y}}function I(p){const{R:m}=p,{m:E}=p,{N:F}=p,_=E[0],y=E[1],b=E[2],P=E[3],g=F==0?0:1/F,h=[m[0]-_*_*g,m[1]-_*y*g,m[2]-_*b*g,m[3]-_*P*g,m[4]-y*_*g,m[5]-y*y*g,m[6]-y*b*g,m[7]-y*P*g,m[8]-b*_*g,m[9]-b*y*g,m[10]-b*b*g,m[11]-b*P*g,m[12]-P*_*g,m[13]-P*y*g,m[14]-P*b*g,m[15]-P*P*g],M=h,R=D;let U=[Math.random(),Math.random(),Math.random(),Math.random()],H=0,B=0;if(F!=0)for(let G=0;G<16&&(U=R.multVec(M,U),B=Math.sqrt(R.dot(U,U)),U=R.sml(1/B,U),!(G!=0&&Math.abs(B-H)<1e-9));G++)H=B;const j=[_*g,y*g,b*g,P*g];return{Cov:h,q:j,e:U,L:H,eMq255:R.dot(R.sml(255,j),U),eMq:R.dot(U,j),rgba:(Math.round(255*j[3])<<24|Math.round(255*j[2])<<16|Math.round(255*j[1])<<8|Math.round(255*j[0])<<0)>>>0}}var D={multVec:(p,m)=>[p[0]*m[0]+p[1]*m[1]+p[2]*m[2]+p[3]*m[3],p[4]*m[0]+p[5]*m[1]+p[6]*m[2]+p[7]*m[3],p[8]*m[0]+p[9]*m[1]+p[10]*m[2]+p[11]*m[3],p[12]*m[0]+p[13]*m[1]+p[14]*m[2]+p[15]*m[3]],dot:(p,m)=>p[0]*m[0]+p[1]*m[1]+p[2]*m[2]+p[3]*m[3],sml:(p,m)=>[p*m[0],p*m[1],p*m[2],p*m[3]]};ye.encode=function(m,E,F,_,y,b,P){_==null&&(_=0),P==null&&(P=!1);const g=s(m,E,F,_,[!1,!1,!1,0,P,!1]);return S(g,-1),d(g,E,F,y,b)},ye.encodeLL=function(m,E,F,_,y,b,P,g){const h={ctype:0+(_==1?0:2)+(y==0?0:4),depth:b,frames:[]},M=(_+y)*b,R=M*E;for(let U=0;U<m.length;U++)h.frames.push({rect:{x:0,y:0,width:E,height:F},img:new Uint8Array(m[U]),blend:0,dispose:1,bpp:Math.ceil(M/8),bpl:Math.ceil(R/8)});return S(h,0,!0),d(h,E,F,P,g)},ye.encode.compress=s,ye.encode.dither=c,ye.quantize=C,ye.quantize.getKDtree=A,ye.quantize.getNearest=T})();const Or={toArrayBuffer(e,t){const r=e.width,o=e.height,n=r<<2,i=e.getContext("2d").getImageData(0,0,r,o),a=new Uint32Array(i.data.buffer),c=(32*r+31)/32<<2,d=c*o,S=122+d,s=new ArrayBuffer(S),l=new DataView(s),u=1<<20;let f,x,C,A,T=u,N=0,v=0,O=0;function w(p){l.setUint16(v,p,!0),v+=2}function I(p){l.setUint32(v,p,!0),v+=4}function D(p){v+=p}w(19778),I(S),D(4),I(122),I(108),I(r),I(-o>>>0),w(1),w(32),I(3),I(d),I(2835),I(2835),D(8),I(16711680),I(65280),I(255),I(4278190080),I(1466527264),(function p(){for(;N<o&&T>0;){for(A=122+N*c,f=0;f<n;)T--,x=a[O++],C=x>>>24,l.setUint32(A+f,x<<8|C),f+=4;N++}O<a.length?(T=u,setTimeout(p,Or._dly)):t(s)})()},toBlob(e,t){this.toArrayBuffer(e,(r=>{t(new Blob([r],{type:"image/bmp"}))}))},_dly:9};var be={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Yo={[be.CHROME]:16384,[be.FIREFOX]:11180,[be.DESKTOP_SAFARI]:16384,[be.IE]:8192,[be.IOS]:4096,[be.ETC]:8192};const xn=typeof window<"u",Ur=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Tt=xn&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Zo=(xn||Ur)&&(Tt&&Tt.getOriginalSymbol(window,"File")||typeof File<"u"&&File),wr=(xn||Ur)&&(Tt&&Tt.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Sn(e,t,r=Date.now()){return new Promise((o=>{const n=e.split(","),i=n[0].match(/:(.*?);/)[1],a=globalThis.atob(n[1]);let c=a.length;const d=new Uint8Array(c);for(;c--;)d[c]=a.charCodeAt(c);const S=new Blob([d],{type:i});S.name=t,S.lastModified=r,o(S)}))}function Dr(e){return new Promise(((t,r)=>{const o=new wr;o.onload=()=>t(o.result),o.onerror=n=>r(n),o.readAsDataURL(e)}))}function Mr(e){return new Promise(((t,r)=>{const o=new Image;o.onload=()=>t(o),o.onerror=n=>r(n),o.src=e}))}function Ze(){if(Ze.cachedResult!==void 0)return Ze.cachedResult;let e=be.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=be.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=be.IOS:/Safari/i.test(t)?e=be.DESKTOP_SAFARI:/Firefox/i.test(t)?e=be.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=be.IE),Ze.cachedResult=e,Ze.cachedResult}function Lr(e,t){const r=Ze(),o=Yo[r];let n=e,i=t,a=n*i;const c=n>i?i/n:n/i;for(;a>o*o;){const d=(o+n)/2,S=(o+i)/2;d<S?(i=S,n=S*c):(i=d*c,n=d),a=n*i}return{width:n,height:i}}function Nt(e,t){let r,o;try{if(r=new OffscreenCanvas(e,t),o=r.getContext("2d"),o===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),o=r.getContext("2d")}return r.width=e,r.height=t,[r,o]}function kr(e,t){const{width:r,height:o}=Lr(e.width,e.height),[n,i]=Nt(r,o);return t&&/jpe?g/.test(t)&&(i.fillStyle="white",i.fillRect(0,0,n.width,n.height)),i.drawImage(e,0,0,n.width,n.height),n}function Et(){return Et.cachedResult!==void 0||(Et.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Et.cachedResult}function Ct(e,t={}){return new Promise((function(r,o){let n,i;var a=function(){try{return i=kr(n,t.fileType||e.type),r([n,i])}catch(d){return o(d)}},c=function(d){try{var S=function(s){try{throw s}catch(l){return o(l)}};try{let s;return Dr(e).then((function(l){try{return s=l,Mr(s).then((function(u){try{return n=u,(function(){try{return a()}catch(f){return o(f)}})()}catch(f){return S(f)}}),S)}catch(u){return S(u)}}),S)}catch(s){S(s)}}catch(s){return o(s)}};try{if(Et()||[be.DESKTOP_SAFARI,be.MOBILE_SAFARI].includes(Ze()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(d){try{return n=d,a()}catch{return c()}}),c)}catch{c()}}))}function Ft(e,t,r,o,n=1){return new Promise((function(i,a){let c;if(t==="image/png"){let S,s,l;return S=e.getContext("2d"),{data:s}=S.getImageData(0,0,e.width,e.height),l=ye.encode([s.buffer],e.width,e.height,4096*n),c=new Blob([l],{type:t}),c.name=r,c.lastModified=o,d.call(this)}{let S=function(){return d.call(this)};if(t==="image/bmp")return new Promise((s=>Or.toBlob(e,s))).then((function(s){try{return c=s,c.name=r,c.lastModified=o,S.call(this)}catch(l){return a(l)}}).bind(this),a);{let s=function(){return S.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:n}).then((function(l){try{return c=l,c.name=r,c.lastModified=o,s.call(this)}catch(u){return a(u)}}).bind(this),a);{let l;return l=e.toDataURL(t,n),Sn(l,r,o).then((function(u){try{return c=u,s.call(this)}catch(f){return a(f)}}).bind(this),a)}}}function d(){return i(c)}}))}function Re(e){e.width=0,e.height=0}function tt(){return new Promise((function(e,t){let r,o,n,i;return tt.cachedResult!==void 0?e(tt.cachedResult):Sn("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(a){try{return r=a,Ct(r).then((function(c){try{return o=c[1],Ft(o,r.type,r.name,r.lastModified).then((function(d){try{return n=d,Re(o),Ct(n).then((function(S){try{return i=S[0],tt.cachedResult=i.width===1&&i.height===2,e(tt.cachedResult)}catch(s){return t(s)}}),t)}catch(S){return t(S)}}),t)}catch(d){return t(d)}}),t)}catch(c){return t(c)}}),t)}))}function Gr(e){return new Promise(((t,r)=>{const o=new wr;o.onload=n=>{const i=new DataView(n.target.result);if(i.getUint16(0,!1)!=65496)return t(-2);const a=i.byteLength;let c=2;for(;c<a;){if(i.getUint16(c+2,!1)<=8)return t(-1);const d=i.getUint16(c,!1);if(c+=2,d==65505){if(i.getUint32(c+=2,!1)!=1165519206)return t(-1);const S=i.getUint16(c+=6,!1)==18761;c+=i.getUint32(c+4,S);const s=i.getUint16(c,S);c+=2;for(let l=0;l<s;l++)if(i.getUint16(c+12*l,S)==274)return t(i.getUint16(c+12*l+8,S))}else{if((65280&d)!=65280)break;c+=i.getUint16(c,!1)}}return t(-1)},o.onerror=n=>r(n),o.readAsArrayBuffer(e)}))}function Br(e,t){const{width:r}=e,{height:o}=e,{maxWidthOrHeight:n}=t;let i,a=e;return isFinite(n)&&(r>n||o>n)&&([a,i]=Nt(r,o),r>o?(a.width=n,a.height=o/r*n):(a.width=r/o*n,a.height=n),i.drawImage(e,0,0,a.width,a.height),Re(e)),a}function jr(e,t){const{width:r}=e,{height:o}=e,[n,i]=Nt(r,o);switch(t>4&&t<9?(n.width=o,n.height=r):(n.width=r,n.height=o),t){case 2:i.transform(-1,0,0,1,r,0);break;case 3:i.transform(-1,0,0,-1,r,o);break;case 4:i.transform(1,0,0,-1,0,o);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,o,0);break;case 7:i.transform(0,-1,-1,0,o,r);break;case 8:i.transform(0,-1,1,0,0,r)}return i.drawImage(e,0,0,r,o),Re(e),n}function Nn(e,t,r=0){return new Promise((function(o,n){let i,a,c,d,S,s,l,u,f,x,C,A,T,N,v,O,w,I,D,p;function m(F=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;i+=F,t.onProgress(Math.min(i,100))}function E(F){if(t.signal&&t.signal.aborted)throw t.signal.reason;i=Math.min(Math.max(F,i),100),t.onProgress(i)}return i=r,a=t.maxIteration||10,c=1024*t.maxSizeMB*1024,m(),Ct(e,t).then((function(F){try{return[,d]=F,m(),S=Br(d,t),m(),new Promise((function(_,y){var b;if(!(b=t.exifOrientation))return Gr(e).then((function(g){try{return b=g,P.call(this)}catch(h){return y(h)}}).bind(this),y);function P(){return _(b)}return P.call(this)})).then((function(_){try{return s=_,m(),tt().then((function(y){try{return l=y?S:jr(S,s),m(),u=t.initialQuality||1,f=t.fileType||e.type,Ft(l,f,e.name,e.lastModified,u).then((function(b){try{{let g=function(){if(a--&&(v>c||v>T)){let M,R;return M=p?.95*D.width:D.width,R=p?.95*D.height:D.height,[w,I]=Nt(M,R),I.drawImage(D,0,0,M,R),u*=f==="image/png"?.85:.95,Ft(w,f,e.name,e.lastModified,u).then((function(U){try{return O=U,Re(D),D=w,v=O.size,E(Math.min(99,Math.floor((N-v)/(N-c)*100))),g}catch(H){return n(H)}}),n)}return[1]},h=function(){return Re(D),Re(w),Re(S),Re(l),Re(d),E(100),o(O)};if(x=b,m(),C=x.size>c,A=x.size>e.size,!C&&!A)return E(100),o(x);var P;return T=e.size,N=x.size,v=N,D=l,p=!t.alwaysKeepResolution&&C,(P=(function(M){for(;M;){if(M.then)return void M.then(P,n);try{if(M.pop){if(M.length)return M.pop()?h.call(this):M;M=g}else M=M.call(this)}catch(R){return n(R)}}}).bind(this))(g)}}catch(g){return n(g)}}).bind(this),n)}catch(b){return n(b)}}).bind(this),n)}catch(y){return n(y)}}).bind(this),n)}catch(_){return n(_)}}).bind(this),n)}))}const Wo=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Gt;function Ko(e,t){return new Promise(((r,o)=>{Gt||(Gt=(function(a){const c=[];return c.push(a),URL.createObjectURL(new Blob(c))})(Wo));const n=new Worker(Gt);n.addEventListener("message",(function(a){if(t.signal&&t.signal.aborted)n.terminate();else if(a.data.progress===void 0){if(a.data.error)return o(new Error(a.data.error)),void n.terminate();r(a.data.file),n.terminate()}else t.onProgress(a.data.progress)})),n.addEventListener("error",o),t.signal&&t.signal.addEventListener("abort",(()=>{o(t.signal.reason),n.terminate()})),n.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function se(e,t){return new Promise((function(r,o){let n,i,a,c,d,S;if(n={...t},a=0,{onProgress:c}=n,n.maxSizeMB=n.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof n.useWebWorker!="boolean"||n.useWebWorker,delete n.useWebWorker,n.onProgress=f=>{a=f,typeof c=="function"&&c(a)},!(e instanceof Blob||e instanceof Zo))return o(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return o(new Error("The file given is not an image"));if(S=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||S)return Nn(e,n).then((function(f){try{return i=f,u.call(this)}catch(x){return o(x)}}).bind(this),o);var s=(function(){try{return u.call(this)}catch(f){return o(f)}}).bind(this),l=function(f){try{return Nn(e,n).then((function(x){try{return i=x,s()}catch(C){return o(C)}}),o)}catch(x){return o(x)}};try{return n.libURL=n.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Ko(e,n).then((function(f){try{return i=f,s()}catch{return l()}}),l)}catch{l()}function u(){try{i.name=e.name,i.lastModified=e.lastModified}catch{}try{n.preserveExif&&e.type==="image/jpeg"&&(!n.fileType||n.fileType&&n.fileType===e.type)&&(i=Nr(e,i))}catch{}return r(i)}}))}se.getDataUrlFromFile=Dr,se.getFilefromDataUrl=Sn,se.loadImage=Mr,se.drawImageInCanvas=kr,se.drawFileInCanvas=Ct,se.canvasToFile=Ft,se.getExifOrientation=Gr,se.handleMaxWidthOrHeight=Br,se.followExifOrientation=jr,se.cleanupCanvasMemory=Re,se.isAutoOrientationInBrowser=tt,se.approximateBelowMaximumCanvasSizeOfBrowser=Lr,se.copyExifWithoutOrientation=Nr,se.getBrowserName=Ze,se.version="2.0.2";const Qo=(e,t,r)=>new Promise((o,n)=>{const i=new Image;i.onload=()=>{const a=document.createElement("canvas"),c=a.getContext("2d");if(!c){n(new Error("Could not get canvas context"));return}const d=i.naturalWidth/r,S=t.x*d,s=t.y*d,l=t.width*d,u=t.height*d;a.width=l,a.height=u,c.drawImage(i,S,s,l,u,0,0,l,u),o(a.toDataURL("image/jpeg",.95))},i.onerror=()=>n(new Error("Failed to load image")),i.src=e}),qo=({squareDataUrl:e,date:t,mix:r,showDate:o,onScoreRecognized:n})=>{const i=ln(),[a,c]=Z.useState(null),[d,S]=Z.useState([]),[s,l]=Z.useState(null),u=Z.useRef(null),[f,x]=Z.useState(!1),C=br(St.results.recognizeScoreMutation.mutationOptions()),A=async()=>{if(!(d.length===0||!u.current))try{c(null),x(!0);const v=u.current.clientWidth,O=await Qo(e,d[0],v),w=await se.getFilefromDataUrl(O,"cropped.png"),I=await se(w,{maxWidthOrHeight:360,maxSizeMB:.03,initialQuality:.9}),D=await se.getDataUrlFromFile(I),p=await C.mutateAsync({image:D,mix:r});l(p)}catch(v){console.error("OCR error:",v),c(v instanceof Error?v.message:"Recognition failed")}finally{x(!1)}},T=()=>{if(!s)return;const[v,O,w,I,D,p,m]=s;n?.({perfect:v>=0?v:-1,great:O>=0?O:-1,good:w>=0?w:-1,bad:I>=0?I:-1,miss:D>=0?D:-1,combo:p>=0?p:-1,score:m>=0?m:-1}),l(null)},N=()=>{l(null)};return k.jsxs(Xt,{gap:"xs",children:[o&&k.jsxs(ue,{size:"xs",c:"dimmed",children:[i.DATE_TAKEN,": ",t?t.toLocaleString():i.UNKNOWN]}),k.jsx(jo,{areas:d,onChange:S,maxAreas:1,globalAreaStyle:{border:"1.5px solid rgba(0, 0, 0, 0.7)",outline:"1.5px solid rgba(255, 255, 128, 0.7)"},children:k.jsx("img",{ref:u,style:{maxWidth:"100%"},src:e,alt:"Screenshot preview"})}),!s&&k.jsxs(k.Fragment,{children:[d.length===0?k.jsxs(dt,{color:"yellow",p:"sm",children:[i.OCR_DRAW_RECTANGLE_HINT,k.jsx("div",{children:k.jsxs(Lt,{children:[k.jsx(Lt.Target,{children:k.jsx(Ye,{size:"xs",color:"blue",onClick:A,children:"Tutorial"})}),k.jsx(Lt.Dropdown,{children:k.jsx("video",{width:"244",height:"294",autoPlay:!0,loop:!0,muted:!0,children:k.jsx("source",{src:"crop_example.mp4",type:"video/mp4"})})})]})})]}):k.jsx(ue,{size:"xs",c:"dimmed",children:i.OCR_AREA_SELECTED_HINT}),k.jsx(Ye,{size:"sm",variant:"light",disabled:d.length===0,loading:C.isPending||f,onClick:A,children:i.RECOGNIZE_SCORE})]}),s&&k.jsx(dt,{color:"blue",title:i.RECOGNIZED_NUMBERS,radius:"md",children:k.jsxs(Xt,{gap:"xs",children:[k.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.2em"},children:[k.jsx(ue,{size:"sm",c:"cyan",children:"Perfect:"}),k.jsx(ue,{size:"sm",c:"cyan",children:s[0]>=0?s[0]:"?"}),k.jsx(ue,{size:"sm",c:"green",children:"Great:"}),k.jsx(ue,{size:"sm",c:"green",children:s[1]>=0?s[1]:"?"}),k.jsx(ue,{size:"sm",c:"yellow",children:"Good:"}),k.jsx(ue,{size:"sm",c:"yellow",children:s[2]>=0?s[2]:"?"}),k.jsx(ue,{size:"sm",c:"pink",children:"Bad:"}),k.jsx(ue,{size:"sm",c:"pink",children:s[3]>=0?s[3]:"?"}),k.jsx(ue,{size:"sm",c:"red",children:"Miss:"}),k.jsx(ue,{size:"sm",c:"red",children:s[4]>=0?s[4]:"?"}),k.jsx(ue,{size:"sm",children:"Combo:"}),k.jsx(ue,{size:"sm",children:s[5]>=0?s[5]:"?"}),k.jsx(ue,{size:"sm",fw:"bold",children:"Score:"}),k.jsx(ue,{size:"sm",fw:"bold",children:s[6]>=0?s[6]:"?"})]}),k.jsxs(Er,{gap:"xs",children:[k.jsx(Ye,{size:"xs",color:"blue",onClick:T,children:i.FILL_FORM}),k.jsx(Ye,{size:"xs",variant:"light",color:"gray",onClick:N,children:i.CANCEL})]})]})}),a&&k.jsxs(ue,{size:"xs",c:"red",children:[i.ERROR,": ",a]})]})},Jo=async e=>{const t=await se.getFilefromDataUrl(e,"image.jpg"),r=await se(t,{maxWidthOrHeight:1200,maxSizeMB:.1,initialQuality:.8});return se.getDataUrlFromFile(r)};var ct={},On;function Vo(){if(On)return ct;On=1,Object.defineProperty(ct,"__esModule",{value:!0});const e=new RegExp("^(\\d{4}):(\\d{2}):(\\d{2}) (\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,3}))?(?:([zZ])|([-+])(\\d{2}):(\\d{2}))?$");function t(n,i){let a=n.toString(),c=i-a.length;for(;c>0;)c-=1,a=`0${a}`;return a}function r(n){const i=e.exec(n);if(i==null)return new Date(NaN);const a=new Date,c=i[8]?0:i[9]?(Number(i[10])*60+Number(i[11]))*(i[9]==="+"?1:-1):0;return a.setUTCFullYear(Number(i[1])),a.setUTCMonth(Number(i[2])-1),a.setUTCDate(Number(i[3])),a.setUTCHours(Number(i[4])),a.setUTCMinutes(Number(i[5])+c),a.setUTCSeconds(Number(i[6])),a.setUTCMilliseconds(Number(i[7])||0),a}ct.parse=r;function o(n,i,a){if(isNaN(n.getTime()))return"";const c=t(n.getUTCFullYear(),4),d=t(n.getUTCMonth()+1,2),S=t(n.getUTCDate(),2),s=t(n.getUTCHours(),2),l=t(n.getUTCMinutes(),2),u=t(n.getUTCSeconds(),2),f=i?`.${Math.round(n.getUTCMilliseconds()/10)}`:"";return`${c}:${d}:${S} ${s}:${l}:${u}${f}${a?"Z":""}`}return ct.format=o,ct}var es=Vo();function W(e,t,r){const o=[];for(let n=0;n<r&&t+n<e.byteLength;n++)o.push(e.getUint8(t+n));return nt(o)}function ts(e,t,r){const o=[];for(let n=0;n<r&&t+n<e.byteLength;n+=2)o.push(e.getUint16(t+n));return nt(o)}function nt(e){return e.map(t=>String.fromCharCode(t)).join("")}function J(){for(let e=1;e<arguments.length;e++)for(const t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function Hr(e,t,r){let o=!1;Object.defineProperty(e,t,{get(){return o||(o=!0,Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:r.apply(e),writable:!0})),e[t]},configurable:!0,enumerable:!0})}function zr(e){if(typeof btoa<"u")return btoa(typeof e=="string"?e:Array.prototype.reduce.call(new Uint8Array(e),(t,r)=>t+String.fromCharCode(r),""));if(!(typeof Buffer>"u"))return typeof Buffer.from!==void 0?Buffer.from(e).toString("base64"):new Buffer(e).toString("base64")}function ns(e){const t=e.substring(e.indexOf(",")+1);if(e.indexOf(";base64")!==-1)return typeof atob<"u"?Uint8Array.from(atob(t),o=>o.charCodeAt(0)).buffer:typeof Buffer>"u"?void 0:typeof Buffer.from!==void 0?Buffer.from(t,"base64"):new Buffer(t,"base64");const r=decodeURIComponent(t);return typeof Buffer<"u"?typeof Buffer.from!==void 0?Buffer.from(r):new Buffer(r):Uint8Array.from(r,o=>o.charCodeAt(0)).buffer}let rs=class{constructor(t){if(is(t))throw new Error("DataView: Passed buffer type is unsupported.");this.buffer=t,this.byteLength=this.buffer.length}getUint8(t){return this.buffer.readUInt8(t)}getUint16(t,r){return r?this.buffer.readUInt16LE(t):this.buffer.readUInt16BE(t)}getUint32(t,r){return r?this.buffer.readUInt32LE(t):this.buffer.readUInt32BE(t)}getInt32(t,r){return r?this.buffer.readInt32LE(t):this.buffer.readInt32BE(t)}};function is(e){return typeof e!="object"||e.length===void 0||e.readUInt8===void 0||e.readUInt16LE===void 0||e.readUInt16BE===void 0||e.readUInt32LE===void 0||e.readUInt32BE===void 0||e.readInt32LE===void 0||e.readInt32BE===void 0}function le(e){return e.map(t=>String.fromCharCode(t)).join("")}function Wt(e){if(e.length>=8){const t=le(e.slice(0,8));if(t==="ASCII\0\0\0")return le(e.slice(8));if(t==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(t==="UNICODE\0")return"[Unicode encoded text]";if(t==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}function yt(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}const Kt=18761,Qt=19789,Ke={BIG_ENDIAN:Qt,LITTLE_ENDIAN:Kt,getByteOrder:os};function os(e,t){if(e.getUint16(t)===Kt)return Kt;if(e.getUint16(t)===Qt)return Qt;throw new Error("Illegal byte order value. Faulty image.")}const Un={isTiffFile:ss,findTiffOffsets:cs};function ss(e){return!!e&&e.byteLength>=4&&as(e)}function as(e){const o=e.getUint16(0)===Ke.LITTLE_ENDIAN;return e.getUint16(2,o)===42}function cs(){return{hasAppMarkers:!0,tiffHeaderOffset:0}}const wn={isJpegFile:Fs,findJpegOffsets:ys},us=2,ls=65496,Dn=2,Ce=4,xe=2,fs=2,ds=10,hs=18,Mn=33,Ln=79,kn=18,gs=8,qt="ICC_PROFILE\0",$r=Ce+qt.length,ps=$r+1,Gn="MPF\0",Xr=65472,Yr=65474,ms=65476,xs=65499,Ss=65501,Es=65498,Zr=65504,En=65505,Wr=65506,bs=65517,Is=65519,As=65534,Ts=65535,Cs="JFIF",Jt="Exif",Bn="http://ns.adobe.com/xap/1.0/\0",jn="http://ns.adobe.com/xmp/extension/\0",Hn="Photoshop 3.0";function Fs(e){return!!e&&e.byteLength>=us&&e.getUint16(0)===ls}function ys(e){let t=Dn,r,o,n,i,a,c,d,S,s;for(;t+Ce+5<=e.byteLength;){if(_s(e,t))o=t+xe;else if(Ps(e,t))n=t+xe;else if(Ns(e,t))r=e.getUint16(t+xe),i=t+fs;else if(Os(e,t))r=e.getUint16(t+xe),a=t+ds;else if(Us(e,t))d||(d=[]),r=e.getUint16(t+xe),d.push(Ls(t,r));else if(Ds(e,t))d||(d=[]),r=e.getUint16(t+xe),d.push(ks(t,r));else if(Gs(e,t))r=e.getUint16(t+xe),c=t+hs;else if(Rs(e,t)){r=e.getUint16(t+xe);const l=t+kn,u=r-(kn-xe),f=e.getUint8(t+$r),x=e.getUint8(t+ps);S||(S=[]),S.push({offset:l,length:u,chunkNumber:f,chunksTotal:x})}else if(vs(e,t))r=e.getUint16(t+xe),s=t+gs;else if(Bs(e,t))r=e.getUint16(t+xe);else if(js(e,t)){t++;continue}else break;t+=xe+r}return{hasAppMarkers:t>Dn,fileDataOffset:o||n,jfifDataOffset:i,tiffHeaderOffset:a,iptcDataOffset:c,xmpChunks:d,iccChunks:S,mpfDataOffset:s}}function _s(e,t){return e.getUint16(t)===Xr}function Ps(e,t){return e.getUint16(t)===Yr}function Rs(e,t){const r=qt.length;return e.getUint16(t)===Wr&&W(e,t+Ce,r)===qt}function vs(e,t){const r=Gn.length;return e.getUint16(t)===Wr&&W(e,t+Ce,r)===Gn}function Ns(e,t){const r=Jt.length;return e.getUint16(t)===Zr&&W(e,t+Ce,r)===Cs&&e.getUint8(t+Ce+r)===0}function Os(e,t){const r=Jt.length;return e.getUint16(t)===En&&W(e,t+Ce,r)===Jt&&e.getUint8(t+Ce+r)===0}function Us(e,t){return e.getUint16(t)===En&&ws(e,t)}function ws(e,t){const r=Bn.length;return W(e,t+Ce,r)===Bn}function Ds(e,t){return e.getUint16(t)===En&&Ms(e,t)}function Ms(e,t){const r=jn.length;return W(e,t+Ce,r)===jn}function Ls(e,t){return{dataOffset:e+Mn,length:t-(Mn-xe)}}function ks(e,t){return{dataOffset:e+Ln,length:t-(Ln-xe)}}function Gs(e,t){const r=Hn.length;return e.getUint16(t)===bs&&W(e,t+Ce,r)===Hn&&e.getUint8(t+Ce+r)===0}function Bs(e,t){const r=e.getUint16(t);return r>=Zr&&r<=Is||r===As||r===Xr||r===Yr||r===ms||r===xs||r===Ss||r===Es}function js(e,t){return e.getUint16(t)===Ts}const zn={isPngFile:$s,findPngOffsets:Xs},Vt=`PNG\r

`,_t=4,ve=4,ft=0,Qe=_t,ge=_t+ve,en="XML:com.adobe.xmp\0",Hs="tEXt",Kr="iTXt",Qr="pHYs",qr="tIME",zs="eXIf";function $s(e){return!!e&&W(e,0,Vt.length)===Vt}function Xs(e){const r={hasAppMarkers:!1};let o=Vt.length;for(;o+_t+ve<=e.byteLength;){if(Ys(e,o))r.hasAppMarkers=!0,r.pngHeaderOffset=o+ge;else if(Zs(e,o)){const n=qs(e,o);n!==void 0&&(r.hasAppMarkers=!0,r.xmpChunks=[{dataOffset:n,length:e.getUint32(o+ft)-(n-(o+ge))}])}else if(Ws(e,o)){r.hasAppMarkers=!0;const n=W(e,o+Qe,ve);r.pngTextChunks||(r.pngTextChunks=[]),r.pngTextChunks.push({length:e.getUint32(o+ft),type:n,offset:o+ge})}else Ks(e,o)?(r.hasAppMarkers=!0,r.tiffHeaderOffset=o+ge):Qs(e,o)&&(r.hasAppMarkers=!0,r.pngChunkOffsets||(r.pngChunkOffsets=[]),r.pngChunkOffsets.push(o+ft));o+=e.getUint32(o+ft)+_t+ve+4}return r}function Ys(e,t){return W(e,t+Qe,ve)==="IHDR"}function Zs(e,t){return W(e,t+Qe,ve)==="iTXt"&&W(e,t+ge,en.length)===en}function Ws(e,t){const r="tEXt",o="iTXt",n=W(e,t+Qe,ve);return n===r||n===o}function Ks(e,t){return W(e,t+Qe,ve)===zs}function Qs(e,t){const r=[Qr,qr],o=W(e,t+Qe,ve);return r.includes(o)}function qs(e,t){t+=ge+en.length+1+1;let n=0;for(;n<2&&t<e.byteLength;)e.getUint8(t)===0&&n++,t++;if(!(n<2))return t}const $n={isHeicFile:Js,findHeicOffsets:Vs};function Js(e){if(!e)return!1;const t="ftyp",r=4,o=["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"],i=W(e,r+t.length,4);return W(e,r,t.length)===t&&o.indexOf(i)!==-1}function Vs(e){{const{offset:t,length:r}=ea(e);if(t===void 0)return{hasAppMarkers:!1};const o=Math.min(t+r,e.byteLength),{exifItemOffset:n,ilocOffset:i,colrOffset:a}=ia(e,t,o),c=oa(e,n,i,o),d=sa(e,a,o);return{hasAppMarkers:c!==void 0||d!==void 0,tiffHeaderOffset:c,iccChunks:d}}}function ea(e){let i=0;for(;i+4+4<=e.byteLength;){const a=Jr(e,i);if(a>=8&&W(e,i+4,4)==="meta")return{offset:i,length:a};i+=a}return{offset:void 0,length:0}}function Jr(e,t){const o=e.getUint32(t);return ta(o)?e.byteLength-t:na(o)&&ra(e,t)?e.getUint32(t+12):o}function ta(e){return e===0}function na(e){return e===1}function ra(e,t){return e.getUint32(t+8)===0}function ia(e,t,r){const i={ilocOffset:void 0,exifItemOffset:void 0,colrOffset:void 0};for(;t+4<=r&&(!i.ilocOffset||!i.exifItemOffset||!i.colrOffset);){const a=W(e,t,4);a==="iloc"?i.ilocOffset=t:a==="Exif"?i.exifItemOffset=t+-4:a==="colr"&&(i.colrOffset=t+-4),t++}return i}function oa(e,t,r,o){if(!r||!t||t+2>o)return;const s=e.getUint16(t);for(r+=12;r+16<=o;){if(e.getUint16(r)===s){const u=e.getUint32(r+8);if(u+4<=e.byteLength){const x=e.getUint32(u)+4;return u+x}}r+=16}}function sa(e,t,r){if(!t||t+12>r)return;const a=W(e,t+8,4);if(!(a!=="prof"&&a!=="rICC"))return[{offset:t+12,length:Jr(e,t)-12,chunkNumber:1,chunksTotal:1}]}const Xn={isWebpFile:aa,findOffsets:ca};function aa(e){const r="RIFF",n="WEBP";return!!e&&W(e,0,r.length)===r&&W(e,8,n.length)===n}function ca(e){const o="Exif\0\0";let i=12,a=!1,c,d,S;for(;i+8<e.byteLength;){const s=W(e,i,4),l=e.getUint32(i+4,!0);s==="EXIF"?(a=!0,W(e,i+8,o.length)===o?c=i+8+o.length:c=i+8):s==="XMP "?(a=!0,d=[{dataOffset:i+8,length:l}]):s==="ICCP"&&(a=!0,S=[{offset:i+8,length:l,chunkNumber:1,chunksTotal:1}]),i+=8+(l%2===0?l:l+1)}return{hasAppMarkers:a,tiffHeaderOffset:c,xmpChunks:d,iccChunks:S}}const ua={parseAppMarkers:la};function la(e){if(Un.isTiffFile(e))return Un.findTiffOffsets();if(wn.isJpegFile(e))return wn.findJpegOffsets(e);if(zn.isPngFile(e))return zn.findPngOffsets(e);if($n.isHeicFile(e))return $n.findHeicOffsets(e);if(Xn.isWebpFile(e))return Xn.findOffsets(e);throw new Error("Invalid image format")}const Vr={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},tn={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},z={getAsciiValue:fa,getByteAt:ei,getAsciiAt:da,getShortAt:ha,getLongAt:Pt,getRationalAt:ga,getUndefinedAt:pa,getSlongAt:nn,getSrationalAt:ma,getIfdPointerAt:xa,typeSizes:Vr,tagTypes:tn,getTypeSize:Sa};function fa(e){return e.map(t=>String.fromCharCode(t))}function ei(e,t){return e.getUint8(t)}function da(e,t){return e.getUint8(t)}function ha(e,t,r){return e.getUint16(t,r===Ke.LITTLE_ENDIAN)}function Pt(e,t,r){return e.getUint32(t,r===Ke.LITTLE_ENDIAN)}function ga(e,t,r){return[Pt(e,t,r),Pt(e,t+4,r)]}function pa(e,t){return ei(e,t)}function nn(e,t,r){return e.getInt32(t,r===Ke.LITTLE_ENDIAN)}function ma(e,t,r){return[nn(e,t,r),nn(e,t+4,r)]}function xa(e,t,r){return Pt(e,t,r)}function Sa(e){if(tn[e]===void 0)throw new Error("No such type found.");return Vr[tn[e]]}const Y={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace(e){return e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(e){return e.map(t=>{if(t===49)return"Y";if(t===50)return"Cb";if(t===51)return"Cr";if(t===52)return"R";if(t===53)return"G";if(t===54)return"B"}).join("")},Contrast(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},CustomRendered(e){return e===0?"Normal process":e===1?"Custom process":"Unknown"},ExposureMode(e){return e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},ExposureProgram(e){return e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},ExposureTime(e){return e[0]>=e[1]?`${Math.round(e[0]/e[1])}`:e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${e[0]/e[1]}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700  7100K)":e===13?"Day white fluorescent (N 4600  5400K)":e===14?"Cool white fluorescent (W 3900  4500K)":e===15?"White fluorescent (WW 3200  3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown",MeteringMode(e){return e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},ResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},Saturation(e){return e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},SceneCaptureType(e){return e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},Sharpness(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},ShutterSpeedValue(e){const t=Math.pow(2,e[0]/e[1]);return t<=1?`${Math.round(1/t)}`:`1/${Math.round(t)}`},WhiteBalance(e){return e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])},Ea={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:Y.XResolution},283:{name:"YResolution",description:Y.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:Y.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{const t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(r=>t[r]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(t=>""+t[0]/t[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(t=>""+t[0]/t[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:Y.LightSource},50779:{name:"CalibrationIlluminant2",description:Y.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"},ba={33434:{name:"ExposureTime",description:Y.ExposureTime},33437:{name:"FNumber",description:Y.FNumber},34850:{name:"ExposureProgram",description:Y.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>le(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:Y.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:Y.ShutterSpeedValue},37378:{name:"ApertureValue",description:Y.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:Y.MeteringMode},37384:{name:"LightSource",description:Y.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:Y.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:Wt},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" "},40960:{name:"FlashpixVersion",description:e=>e.map(t=>String.fromCharCode(t)).join("")},40961:{name:"ColorSpace",description:Y.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:Y.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,t])=>`X: ${e}, Y: ${t}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:Y.CustomRendered},41986:{name:"ExposureMode",description:Y.ExposureMode},41987:{name:"WhiteBalance",description:Y.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:e=>e===0?"Unknown":e},41990:{name:"SceneCaptureType",description:Y.SceneCaptureType},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:Y.Contrast},41993:{name:"Saturation",description:Y.Saturation},41994:{name:"Sharpness",description:Y.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{const t=`${e[0][0]/e[0][1]}-${e[1][0]/e[1][1]} mm`;return e[3][1]===0?`${t} f/?`:`${t} f/${1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},Ia={0:{name:"GPSVersionID",description:e=>e[0]===2&&e[1]===2&&e[2]===0&&e[3]===0?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:yt},3:{name:"GPSLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:yt},5:{name:"GPSAltitudeRef",description:e=>e===0?"Sea level":e===1?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map(([t,r])=>{const o=t/r;return/^\d(\.|$)/.test(`${o}`)?`0${o}`:o}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{const t=e.join("");return t==="A"?"Measurement in progress":t==="V"?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{const t=e.join("");return t==="2"?"2-dimensional measurement":t==="3"?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers per hour":t==="M"?"Miles per hour":t==="N"?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers":t==="M"?"Miles":t==="N"?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:Wt},28:{name:"GPSAreaInformation",description:Wt},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>e===0?"Measurement without differential correction":e===1?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"},Aa={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>le(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"},Ta={45056:{name:"MPFVersion",description:e=>le(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"},Yn=J({},Ea,ba),ke={"0th":Yn,exif:Yn,gps:Ia,interoperability:Aa,mpf:Ta},Zn="Exif IFD Pointer",Wn="GPS Info IFD Pointer",Kn="Interoperability IFD Pointer",Ca={1:z.getByteAt,2:z.getAsciiAt,3:z.getShortAt,4:z.getLongAt,5:z.getRationalAt,7:z.getUndefinedAt,9:z.getSlongAt,10:z.getSrationalAt,13:z.getIfdPointerAt},Qn={read:Fa,readMpf:va};function Fa(e,t,r){const o=Ke.getByteOrder(e,t);let n=ya(e,t,o,r);return n=_a(n,e,t,o,r),n=Pa(n,e,t,o,r),n=Ra(n,e,t,o,r),n}function ya(e,t,r,o){return ot(e,"0th",t,ti(e,t,r),r,o)}function ti(e,t,r){return t+z.getLongAt(e,t+4,r)}function _a(e,t,r,o,n){return e[Zn]!==void 0?J(e,ot(t,"exif",r,r+e[Zn].value,o,n)):e}function Pa(e,t,r,o,n){return e[Wn]!==void 0?J(e,ot(t,"gps",r,r+e[Wn].value,o,n)):e}function Ra(e,t,r,o,n){return e[Kn]!==void 0?J(e,ot(t,"interoperability",r,r+e[Kn].value,o,n)):e}function va(e,t,r){const o=Ke.getByteOrder(e,t),n=ot(e,"mpf",t,ti(e,t,o),o,r);return Na(e,t,n,o)}function Na(e,t,r,o){if(!r.MPEntry)return r;const i=[];for(let a=0;a<Math.ceil(r.MPEntry.value.length/16);a++){i[a]={};const c=ut(r.MPEntry.value,a*16,z.getTypeSize("LONG"),o);i[a].ImageFlags=Oa(c),i[a].ImageFormat=Ua(c),i[a].ImageType=wa(c);const d=ut(r.MPEntry.value,a*16+4,z.getTypeSize("LONG"),o);i[a].ImageSize={value:d,description:""+d};const S=Da(a)?0:ut(r.MPEntry.value,a*16+8,z.getTypeSize("LONG"),o)+t;i[a].ImageOffset={value:S,description:""+S};const s=ut(r.MPEntry.value,a*16+12,z.getTypeSize("SHORT"),o);i[a].DependentImage1EntryNumber={value:s,description:""+s};const l=ut(r.MPEntry.value,a*16+14,z.getTypeSize("SHORT"),o);i[a].DependentImage2EntryNumber={value:l,description:""+l},i[a].image=e.buffer.slice(S,S+d),Hr(i[a],"base64",function(){return zr(this.image)})}return r.Images=i,r}function ut(e,t,r,o){if(o===Ke.LITTLE_ENDIAN){let i=0;for(let a=0;a<r;a++)i+=e[t+a]<<8*a;return i}let n=0;for(let i=0;i<r;i++)n+=e[t+i]<<8*(r-1-i);return n}function Oa(e){const t=[e>>31&1,e>>30&1,e>>29&1],r=[];return t[0]&&r.push("Dependent Parent Image"),t[1]&&r.push("Dependent Child Image"),t[2]&&r.push("Representative Image"),{value:t,description:r.join(", ")||"None"}}function Ua(e){const t=e>>24&7;return{value:t,description:t===0?"JPEG":"Unknown"}}function wa(e){const t=e&16777215;return{value:t,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[t]||"Unknown"}}function Da(e){return e===0}function ot(e,t,r,o,n,i){const a=z.getTypeSize("SHORT"),c=12,d={},S=Ma(e,o,n);o+=a;for(let s=0;s<S&&!(o+c>e.byteLength);s++){const l=La(e,t,r,o,n,i);l!==void 0&&(d[l.name]={id:l.id,value:l.value,description:l.description}),o+=c}if(o<e.byteLength-z.getTypeSize("LONG")){const s=z.getLongAt(e,o,n);s!==0&&(d.Thumbnail=ot(e,t,r,r+s,n,!0))}return d}function Ma(e,t,r){return t+z.getTypeSize("SHORT")<=e.byteLength?z.getShortAt(e,t,r):0}function La(e,t,r,o,n,i){const c=z.getTypeSize("SHORT"),d=c+z.getTypeSize("SHORT"),S=d+z.getTypeSize("LONG"),s=z.getShortAt(e,o,n),l=z.getShortAt(e,o+c,n),u=z.getLongAt(e,o+d,n);let f;if(z.typeSizes[l]===void 0||!i&&ke[t][s]===void 0)return;if(ka(l,u))f=qn(e,o+S,l,u,n);else{const A=z.getLongAt(e,o+S,n);if(Ga(e,r,A,l,u)){const T=s===33723;f=qn(e,r+A,l,u,n,T)}else f="<faulty value>"}l===z.tagTypes.ASCII&&(f=Ba(f),f=ja(f));let x=`undefined-${s}`,C=f;if(ke[t][s]!==void 0)if(ke[t][s].name!==void 0&&ke[t][s].description!==void 0){x=ke[t][s].name;try{C=ke[t][s].description(f)}catch{C=Jn(f)}}else l===z.tagTypes.RATIONAL||l===z.tagTypes.SRATIONAL?(x=ke[t][s],C=""+f[0]/f[1]):(x=ke[t][s],C=Jn(f));return{id:s,name:x,value:f,description:C}}function ka(e,t){return z.typeSizes[e]*t<=z.getTypeSize("LONG")}function qn(e,t,r,o,n,i=!1){let a=[];i&&(o=o*z.typeSizes[r],r=z.tagTypes.BYTE);for(let c=0;c<o;c++)a.push(Ca[r](e,t,n)),t+=z.typeSizes[r];return r===z.tagTypes.ASCII?a=z.getAsciiValue(a):a.length===1&&(a=a[0]),a}function Ga(e,t,r,o,n){return t+r+z.typeSizes[o]*n<=e.byteLength}function Ba(e){const t=[];let r=0;for(let o=0;o<e.length;o++){if(e[o]==="\0"){r++;continue}t[r]===void 0&&(t[r]=""),t[r]+=e[o]}return t}function ja(e){try{return e.map(t=>decodeURIComponent(escape(t)))}catch{return e}}function Jn(e){return e instanceof Array?e.join(", "):e}const Ha={read:za};function za(e,t){const r=$a(e,t),o=Wa(e,t,r);return{"Bits Per Sample":Xa(e,t,r),"Image Height":Ya(e,t,r),"Image Width":Za(e,t,r),"Color Components":o,Subsampling:o&&Ka(e,t,o.value,r)}}function $a(e,t){return z.getShortAt(e,t)}function Xa(e,t,r){if(3>r)return;const i=z.getByteAt(e,t+2);return{value:i,description:""+i}}function Ya(e,t,r){if(5>r)return;const i=z.getShortAt(e,t+3);return{value:i,description:`${i}px`}}function Za(e,t,r){if(7>r)return;const i=z.getShortAt(e,t+5);return{value:i,description:`${i}px`}}function Wa(e,t,r){if(8>r)return;const i=z.getByteAt(e,t+7);return{value:i,description:""+i}}function Ka(e,t,r,o){if(8+3*r>o)return;const a=[];for(let c=0;c<r;c++){const d=t+8+c*3;a.push([z.getByteAt(e,d),z.getByteAt(e,d+1),z.getByteAt(e,d+2)])}return{value:a,description:a.length>1?Qa(a)+qa(a):""}}function Qa(e){const t={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(r=>t[r[0]]).join("")}function qa(e){const t={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return e.length===0||e[0][1]===void 0||t[e[0][1]]===void 0?"":t[e[0][1]]}const Ja={read:Va};function Va(e,t){const r=ec(e,t),o=sc(e,t,r),n=ac(e,t,r),i={"JFIF Version":tc(e,t,r),"Resolution Unit":nc(e,t,r),XResolution:ic(e,t,r),YResolution:oc(e,t,r),"JFIF Thumbnail Width":o,"JFIF Thumbnail Height":n};if(o!==void 0&&n!==void 0){const a=cc(e,t,3*o.value*n.value,r);a&&(i["JFIF Thumbnail"]=a)}for(const a in i)i[a]===void 0&&delete i[a];return i}function ec(e,t){return z.getShortAt(e,t)}function tc(e,t,r){if(9>r)return;const i=z.getByteAt(e,t+7),a=z.getByteAt(e,t+7+1);return{value:i*256+a,description:i+"."+a}}function nc(e,t,r){if(10>r)return;const i=z.getByteAt(e,t+9);return{value:i,description:rc(i)}}function rc(e){return e===0?"None":e===1?"inches":e===2?"cm":"Unknown"}function ic(e,t,r){if(12>r)return;const i=z.getShortAt(e,t+10);return{value:i,description:""+i}}function oc(e,t,r){if(14>r)return;const i=z.getShortAt(e,t+12);return{value:i,description:""+i}}function sc(e,t,r){if(15>r)return;const i=z.getByteAt(e,t+14);return{value:i,description:`${i}px`}}function ac(e,t,r){if(16>r)return;const i=z.getByteAt(e,t+15);return{value:i,description:`${i}px`}}function cc(e,t,r,o){return r===0||16+r>o?void 0:{value:e.buffer.slice(t+16,t+16+r),description:"<24-bit RGB pixel data>"}}const Ge={iptc:{256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:Bt},336:{name:"Time Sent",description:jt},346:{name:"Coded Character Set",description:Vn,encoding_name:Vn},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>le(e)==="01"?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:e=>{const t=le(e).split(":");return t[2]+(t[3]?"/"+t[3]:"")+(t[4]?"/"+t[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{const t=le(e);return t==="01"?"Object Kill":t==="02"?"Object Replace":t==="03"?"Object Append":t==="04"?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:Bt},572:{name:"Time Created",description:jt},574:{name:"Digital Creation Date",description:Bt},575:{name:"Digital Creation Time",description:jt},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{const t=le(e);return t==="a"?"morning":t==="p"?"evening":t==="b"?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{const t=le(e);return t==="P"?"Portrait":t==="L"?"Landscape":t==="S"?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{const t=le(e),r=t.charAt(0),o=t.charAt(1);let n="";return r==="1"?n+="Mono":r==="2"&&(n+="Stereo"),o==="A"?n+=", actuality":o==="C"?n+=", question and answer session":o==="M"?n+=", music, transmitted by itself":o==="Q"?n+=", response to a question":o==="R"?n+=", raw sound":o==="S"?n+=", scener":o==="V"?n+=", voicer":o==="W"&&(n+=", wrap"),n!==""?n:t}},663:{name:"Audio Sampling Rate",description:e=>parseInt(le(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{const t=parseInt(le(e),10);return t+(t===1?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{const t=le(e);return t.length>=6?t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2):t}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>e.length===2?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(e.length===2){const t=(e[0]<<8)+e[1];return t===0?"No ObjectData":t===1?"IPTC-NAA Digital Newsphoto Parameter Record":t===2?"IPTC7901 Recommended Message Format":t===3?"Tagged Image File Format (Adobe/Aldus Image data)":t===4?"Illustrator (Adobe Graphics data)":t===5?"AppleSingle (Apple Computer Inc)":t===6?"NAA 89-3 (ANPA 1312)":t===7?"MacBinary II":t===8?"IPTC Unstructured Character Oriented File Format (UCOFF)":t===9?"United Press International ANPA 1312 variant":t===10?"United Press International Down-Load Message":t===11?"JPEG File Interchange (JFIF)":t===12?"Photo-CD Image-Pac (Eastman Kodak)":t===13?"Microsoft Bit Mapped Graphics File [*.BMP]":t===14?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":t===15?"Audio plus Moving Video [*.AVI] (Microsoft)":t===16?"PC DOS/Windows Executable Files [*.COM][*.EXE]":t===17?"Compressed Binary File [*.ZIP] (PKWare Inc)":t===18?"Audio Interchange File Format AIFF (Apple Computer Inc)":t===19?"RIFF Wave (Microsoft Corporation)":t===20?"Freehand (Macromedia/Aldus)":t===21?'Hypertext Markup Language "HTML" (The Internet Society)':t===22?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":t===23?"MPEG 2 Audio Layer 3, ISO/IEC":t===24?"Portable Document File (*.PDF) Adobe":t===25?"News Industry Text Format (NITF)":t===26?"Tape Archive (*.TAR)":t===27?"Tidningarnas Telegrambyr NITF version (TTNITF DTD)":t===28?"Ritzaus Bureau NITF version (RBNITF DTD)":t===29?"Corel Draw [*.CDR]":`Unknown format ${t}`}return le(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,t)=>{const r={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},o=le(e);if(t["ObjectData Preview File Format"]){const n=le(t["ObjectData Preview File Format"].value);if(r[n]&&r[n][o])return r[n][o]}return o}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}}}};function Bt(e){const t=le(e);return t.length>=8?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2):t}function jt(e){const t=le(e);let r=t;return t.length>=6&&(r=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2),t.length===11&&(r+=t.substr(6,1)+t.substr(7,2)+":"+t.substr(9,2))),r}function Vn(e){const t=le(e);return t==="\x1B%G"?"UTF-8":t==="\x1B%5"?"Windows-1252":t==="\x1B%/G"?"UTF-8 Level 1":t==="\x1B%/H"?"UTF-8 Level 2":t==="\x1B%/I"?"UTF-8 Level 3":t==="\x1B/A"?"ISO-8859-1":t==="\x1B/B"?"ISO-8859-2":t==="\x1B/C"?"ISO-8859-3":t==="\x1B/D"?"ISO-8859-4":t==="\x1B/@"?"ISO-8859-5":t==="\x1B/G"?"ISO-8859-6":t==="\x1B/F"?"ISO-8859-7":t==="\x1B/H"?"ISO-8859-8":"Unknown"}const uc={get:lc};function lc(){if(typeof TextDecoder<"u")return TextDecoder}const fc=5,ni={decode:dc,TAG_HEADER_SIZE:fc};function dc(e,t){const r=uc.get();if(typeof r<"u"&&e!==void 0)try{return new r(e).decode(Uint8Array.from(t))}catch{}const o=t.map(n=>String.fromCharCode(n)).join("");return hc(o)}function hc(e){try{return decodeURIComponent(escape(e))}catch{return e}}const gc=943868237,ri=4,Ht=ri+8,pc=1028,ii=5,er={read:mc};function mc(e,t,r){try{if(Array.isArray(e))return tr(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,r);const{naaBlock:o,dataOffset:n}=xc(e,t);return tr(e,o,n,r)}catch{return{}}}function xc(e,t){for(;t+Ht<=e.byteLength;){const r=Sc(e,t);if(Ec(r))return{naaBlock:r,dataOffset:t+Ht};t+=Ht+r.size+bc(r)}throw new Error("No IPTC NAA resource block.")}function Sc(e,t){if(e.getUint32(t,!1)!==gc)throw new Error("Not an IPTC resource block.");return{type:e.getUint16(t+ri),size:e.getUint16(t+10)}}function Ec(e){return e.type===pc}function bc(e){return e.size%2!==0?1:0}function tr(e,t,r,o){const n={};let i;const a=r+t.size;for(;r<a&&r<e.byteLength;){const{tag:c,tagSize:d}=Ic(e,r,n,i,o);if(c===null)break;c&&("encoding"in c&&(i=c.encoding),n[c.name]===void 0||c.repeatable===void 0?n[c.name]={id:c.id,value:c.value,description:c.description}:(n[c.name]instanceof Array||(n[c.name]=[{id:n[c.name].id,value:n[c.name].value,description:n[c.name].description}]),n[c.name].push({id:c.id,value:c.value,description:c.description}))),r+=ii+d}return n}function Ic(e,t,r,o,n){if(Ac(e,t))return{tag:null,tagSize:0};const c=e.getUint16(t+1),d=e.getUint16(t+3);if(!n&&!Ge.iptc[c])return{tag:void 0,tagSize:d};const S=Tc(e,t+ii,d),s={id:c,name:Cc(Ge.iptc[c],c,S),value:S,description:_c(Ge.iptc[c],S,r,o)};return vc(c)&&(s.repeatable=!0),Nc(c)&&(s.encoding=Ge.iptc[c].encoding_name(S)),{tag:s,tagSize:d}}function Ac(e,t){return e.getUint8(t)!==28}function Tc(e,t,r){const o=[];for(let n=0;n<r;n++)o.push(e.getUint8(t+n));return o}function Cc(e,t,r){return e?Fc(e)?e:yc(e)?e.name(r):e.name:`undefined-${t}`}function Fc(e){return typeof e=="string"}function yc(e){return typeof e.name=="function"}function _c(e,t,r,o){if(Rc(e))try{return e.description(t,r)}catch{}return Pc(e,t)?ni.decode(o,t):t}function Pc(e,t){return e&&t instanceof Array}function Rc(e){return e&&e.description!==void 0}function vc(e){return Ge.iptc[e]&&Ge.iptc[e].repeatable}function Nc(e){return Ge.iptc[e]&&Ge.iptc[e].encoding_name!==void 0}const mt={"tiff:Orientation"(e){return e==="1"?"Horizontal (normal)":e==="2"?"Mirror horizontal":e==="3"?"Rotate 180":e==="4"?"Mirror vertical":e==="5"?"Mirror horizontal and rotate 270 CW":e==="6"?"Rotate 90 CW":e==="7"?"Mirror horizontal and rotate 90 CW":e==="8"?"Rotate 270 CW":e},"tiff:ResolutionUnit":e=>Y.ResolutionUnit(parseInt(e,10)),"tiff:XResolution":e=>Ve(Y.XResolution,e),"tiff:YResolution":e=>Ve(Y.YResolution,e),"exif:ApertureValue":e=>Ve(Y.ApertureValue,e),"exif:GPSLatitude":nr,"exif:GPSLongitude":nr,"exif:FNumber":e=>Ve(Y.FNumber,e),"exif:FocalLength":e=>Ve(Y.FocalLength,e),"exif:FocalPlaneResolutionUnit":e=>Y.FocalPlaneResolutionUnit(parseInt(e,10)),"exif:ColorSpace":e=>Y.ColorSpace(Oc(e)),"exif:ComponentsConfiguration"(e,t){if(/^\d, \d, \d, \d$/.test(t)){const r=t.split(", ").map(o=>o.charCodeAt(0));return Y.ComponentsConfiguration(r)}return t},"exif:Contrast":e=>Y.Contrast(parseInt(e,10)),"exif:CustomRendered":e=>Y.CustomRendered(parseInt(e,10)),"exif:ExposureMode":e=>Y.ExposureMode(parseInt(e,10)),"exif:ExposureProgram":e=>Y.ExposureProgram(parseInt(e,10)),"exif:ExposureTime"(e){return oi(e)?Y.ExposureTime(e.split("/").map(t=>parseInt(t,10))):e},"exif:MeteringMode":e=>Y.MeteringMode(parseInt(e,10)),"exif:Saturation":e=>Y.Saturation(parseInt(e,10)),"exif:SceneCaptureType":e=>Y.SceneCaptureType(parseInt(e,10)),"exif:Sharpness":e=>Y.Sharpness(parseInt(e,10)),"exif:ShutterSpeedValue":e=>Ve(Y.ShutterSpeedValue,e),"exif:WhiteBalance":e=>Y.WhiteBalance(parseInt(e,10))};function Ve(e,t){return oi(t)?e(t.split("/")):t}function Oc(e){return e.substring(0,2)==="0x"?parseInt(e.substring(2),16):parseInt(e,10)}function oi(e){return/^-?\d+\/-?\d+$/.test(e)}function nr(e){const[t,r]=e.split(",");if(t!==void 0&&r!==void 0){const o=parseFloat(t),n=parseFloat(r),i=r.charAt(r.length-1);if(!Number.isNaN(o)&&!Number.isNaN(n))return""+(o+n/60)+i}return e}const Uc={get:wc};function wc(){if(typeof DOMParser<"u")return DOMParser;try{return __non_webpack_require__("@xmldom/xmldom").DOMParser}catch{return}}const rr={read:Dc};function Dc(e,t){return typeof e=="string"?or({},e):Mc(e,t).reduce(or,{})}function Mc(e,t){if(t.length===0)return[];const r=[ir(e,t.slice(0,1))];return t.length>1&&r.push(ir(e,t.slice(1))),r}function ir(e,t){const r=t.reduce((i,a)=>i+a.length,0),o=new Uint8Array(r);let n=0;for(let i=0;i<t.length;i++){const a=t[i],c=e.buffer.slice(a.dataOffset,a.dataOffset+a.length);o.set(new Uint8Array(c),n),n+=a.length}return new DataView(o.buffer)}function or(e,t){try{const{doc:r,raw:o}=Lc(t);e._raw=(e._raw||"")+o;const n=si(r);return J(e,ci(ai(n,!0)))}catch{return e}}function Lc(e){const t=Uc.get();if(!t)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),new Error;const r=new t,o=typeof e=="string"?e:W(e,0,e.byteLength),n=r.parseFromString(kc(o),"application/xml");if(n.documentElement.nodeName==="parsererror")throw new Error(n.documentElement.textContent);return{doc:n,raw:o}}function kc(e){return e.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")}function si(e){for(let t=0;t<e.childNodes.length;t++){if(e.childNodes[t].tagName==="x:xmpmeta")return si(e.childNodes[t]);if(e.childNodes[t].tagName==="rdf:RDF")return e.childNodes[t]}throw new Error}function ai(e,t=!1){const r=Gc(e);return Bc(r)?t?{}:jc(r[0]):Hc(r)}function Gc(e){const t=[];for(let r=0;r<e.childNodes.length;r++)t.push(e.childNodes[r]);return t}function Bc(e){return e.length===1&&e[0].nodeName==="#text"}function jc(e){return e.nodeValue}function Hc(e){const t={};return e.forEach(r=>{if(zc(r)){const o=$c(r);t[r.nodeName]!==void 0?(Array.isArray(t[r.nodeName])||(t[r.nodeName]=[t[r.nodeName]]),t[r.nodeName].push(o)):t[r.nodeName]=o}}),t}function zc(e){return e.nodeName&&e.nodeName!=="#text"}function $c(e){return{attributes:Xc(e),value:ai(e)}}function Xc(e){const t={};for(let r=0;r<e.attributes.length;r++)t[e.attributes[r].nodeName]=decodeURIComponent(escape(e.attributes[r].value));return t}function ci(e){const t={};if(typeof e=="string")return e;for(const r in e){let o=e[r];Array.isArray(o)||(o=[o]),o.forEach(n=>{J(t,bn(n.attributes)),typeof n.value=="object"&&J(t,ui(n.value))})}return t}function bn(e){const t={};for(const r in e)Yc(r)&&(t[Ut(r)]={value:e[r],attributes:{},description:Ue(e[r],r)});return t}function Yc(e){return e!=="rdf:parseType"&&!Ot(e)}function Ot(e){return e.split(":")[0]==="xmlns"}function Ut(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function Ue(e,t=void 0){if(Array.isArray(e)){const r=Zc(e);return t&&typeof mt[t]=="function"?mt[t](e,r):r}if(typeof e=="object")return Wc(e);try{return t&&typeof mt[t]=="function"?mt[t](e):decodeURIComponent(escape(e))}catch{return e}}function Zc(e){return e.map(t=>t.value!==void 0?Ue(t.value):Ue(t)).join(", ")}function Wc(e){const t=[];for(const r in e)t.push(`${Kc(r)}: ${Ue(e[r].value)}`);return t.join("; ")}function Kc(e){return e==="CiAdrCity"?"CreatorCity":e==="CiAdrCtry"?"CreatorCountry":e==="CiAdrExtadr"?"CreatorAddress":e==="CiAdrPcode"?"CreatorPostalCode":e==="CiAdrRegion"?"CreatorRegion":e==="CiEmailWork"?"CreatorWorkEmail":e==="CiTelWork"?"CreatorWorkPhone":e==="CiUrlWork"?"CreatorWorkUrl":e}function ui(e){const t={};for(const r in e)Ot(r)||(t[Ut(r)]=Qc(e[r],r));return t}function Qc(e,t){return li(e)?fi(e,t):di(e)?hi(e,t):gi(e)?pi(e,t):Vc(e)?eu(e,t):xi(e,t)}function li(e){return e.attributes["rdf:parseType"]==="Resource"&&e.value["rdf:value"]!==void 0||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]!==void 0}function fi(e,t){const r=gt(e);e.value["rdf:Description"]!==void 0&&(e=e.value["rdf:Description"]),J(r,gt(e),qc(e));const o=Jc(e);return{value:o,attributes:r,description:Ue(o,t)}}function gt(e){const t={};for(const r in e.attributes)r!=="rdf:parseType"&&r!=="rdf:resource"&&!Ot(r)&&(t[Ut(r)]=e.attributes[r]);return t}function qc(e){const t={};for(const r in e.value)r!=="rdf:value"&&!Ot(r)&&(t[Ut(r)]=e.value[r].value);return t}function Jc(e){return Si(e.value["rdf:value"])||e.value["rdf:value"].value}function di(e){return e.attributes["rdf:parseType"]==="Resource"||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]===void 0}function hi(e,t){const r={value:{},attributes:{}};return e.value["rdf:Description"]!==void 0&&(J(r.value,bn(e.value["rdf:Description"].attributes)),J(r.attributes,gt(e)),e=e.value["rdf:Description"]),J(r.value,ui(e.value)),r.description=Ue(r.value,t),r}function gi(e){return Object.keys(e.value).length===0&&e.attributes["xml:lang"]===void 0&&e.attributes["rdf:resource"]===void 0}function pi(e,t){const r=bn(e.attributes);return{value:r,attributes:{},description:Ue(r,t)}}function Vc(e){return mi(e.value)!==void 0}function mi(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function eu(e,t){let r=mi(e.value).value["rdf:li"];const o=gt(e),n=[];return r===void 0?r=[]:Array.isArray(r)||(r=[r]),r.forEach(i=>{n.push(tu(i))}),{value:n,attributes:o,description:Ue(n,t)}}function tu(e){return li(e)?fi(e):di(e)?hi(e).value:gi(e)?pi(e).value:xi(e)}function xi(e,t){const r=Si(e)||ci(e.value);return{value:r,attributes:gt(e),description:Ue(r,t)}}function Si(e){return e.attributes&&e.attributes["rdf:resource"]}const sr={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},ar={4:{name:"Preferred CMM type",value:(e,t)=>W(e,t,4),description:e=>e!==null?zt(e):""},8:{name:"Profile Version",value:(e,t)=>e.getUint8(t).toString(10)+"."+(e.getUint8(t+1)>>4).toString(10)+"."+(e.getUint8(t+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,t)=>W(e,t,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,t)=>W(e,t,4)},20:{name:"Connection Space",value:(e,t)=>W(e,t,4)},24:{name:"ICC Profile Date",value:(e,t)=>nu(e,t).toISOString()},36:{name:"ICC Signature",value:(e,t)=>ru(e.buffer.slice(t,t+4))},40:{name:"Primary Platform",value:(e,t)=>W(e,t,4),description:e=>zt(e)},48:{name:"Device Manufacturer",value:(e,t)=>W(e,t,4),description:e=>zt(e)},52:{name:"Device Model Number",value:(e,t)=>W(e,t,4)},64:{name:"Rendering Intent",value:(e,t)=>e.getUint32(t),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,t)=>W(e,t,4)}};function nu(e,t){const r=e.getUint16(t),o=e.getUint16(t+2)-1,n=e.getUint16(t+4),i=e.getUint16(t+6),a=e.getUint16(t+8),c=e.getUint16(t+10);return new Date(Date.UTC(r,o,n,i,a,c))}function ru(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function zt(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}const cr={read:du},iu=84,ou=128,su="acsp",au="desc",cu="mluc",uu="text",lu="sig ",fu=12;function du(e,t){try{const r=t.reduce((a,c)=>a+c.length,0),o=new Uint8Array(r);let n=0;const i=hu(e);for(let a=1;a<=t.length;a++){const c=t.find(s=>s.chunkNumber===a);if(!c)throw new Error(`ICC chunk ${a} not found`);const d=i.slice(c.offset,c.offset+c.length),S=new Uint8Array(d);o.set(S,n),n+=S.length}return mu(new DataView(o.buffer))}catch{return{}}}function hu(e){return Array.isArray(e)?new DataView(Uint8Array.from(e).buffer).buffer:e.buffer}function gu(e){return e.length<ou+4}function pu(e,t){return e.length<t+fu}function mu(e){const t=e.buffer,r=e.getUint32();if(e.byteLength!==r)throw new Error("ICC profile length not matching");if(e.length<iu)throw new Error("ICC profile too short");const o={},n=Object.keys(ar);for(let d=0;d<n.length;d++){const S=n[d],s=ar[S],l=s.value(e,parseInt(S,10));let u=l;s.description&&(u=s.description(l)),o[s.name]={value:l,description:u}}if(xt(t.slice(36,40))!==su)throw new Error("ICC profile: missing signature");if(gu(t))return o;const a=e.getUint32(128);let c=132;for(let d=0;d<a;d++){if(pu(t,c))return o;const S=W(e,c,4),s=e.getUint32(c+4),l=e.getUint32(c+8);if(s>t.length)return o;const u=W(e,s,4);if(u===au){const f=e.getUint32(s+8);if(f>l)return o;const x=xt(t.slice(s+12,s+f+11));lt(o,S,x)}else if(u===cu){const f=e.getUint32(s+8),x=e.getUint32(s+12);let C=s+16;const A=[];for(let T=0;T<f;T++){const N=W(e,C+0,2),v=W(e,C+2,2),O=e.getUint32(C+4),w=e.getUint32(C+8),I=ts(e,s+w,O);A.push({languageCode:N,countryCode:v,text:I}),C+=x}if(f===1)lt(o,S,A[0].text);else{const T={};for(let N=0;N<A.length;N++)T[`${A[N].languageCode}-${A[N].countryCode}`]=A[N].text;lt(o,S,T)}}else if(u===uu){const f=xt(t.slice(s+8,s+l-7));lt(o,S,f)}else if(u===lu){const f=xt(t.slice(s+8,s+12));lt(o,S,f)}c=c+12}return o}function xt(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function lt(e,t,r){sr[t]?e[sr[t].name]={value:r,description:r}:e[t]={value:r,description:r}}const xu={read:Su};function Su(e,t){return{"Image Width":Eu(e,t),"Image Height":bu(e,t),"Bit Depth":Iu(e,t),"Color Type":Au(e,t),Compression:Tu(e,t),Filter:Cu(e,t),Interlace:Fu(e,t)}}function Eu(e,t){if(t+0+4>e.byteLength)return;const n=z.getLongAt(e,t);return{value:n,description:`${n}px`}}function bu(e,t){if(t+4+4>e.byteLength)return;const n=z.getLongAt(e,t+4);return{value:n,description:`${n}px`}}function Iu(e,t){if(t+8+1>e.byteLength)return;const n=z.getByteAt(e,t+8);return{value:n,description:`${n}`}}function Au(e,t){const n={0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"};if(t+9+1>e.byteLength)return;const i=z.getByteAt(e,t+9);return{value:i,description:n[i]||"Unknown"}}function Tu(e,t){if(t+10+1>e.byteLength)return;const n=z.getByteAt(e,t+10);return{value:n,description:n===0?"Deflate/Inflate":"Unknown"}}function Cu(e,t){if(t+11+1>e.byteLength)return;const n=z.getByteAt(e,t+11);return{value:n,description:n===0?"Adaptive":"Unknown"}}function Fu(e,t){const n={0:"Noninterlaced",1:"Adam7 Interlace"};if(t+12+1>e.byteLength)return;const i=z.getByteAt(e,t+12);return{value:i,description:n[i]||"Unknown"}}const yu={read:Ru},rn="STATE_KEYWORD",on="STATE_COMPRESSION",sn="STATE_LANG",Ei="STATE_TRANSLATED_KEYWORD",_u="STATE_TEXT",Pu=2;function Ru(e,t){return t.reduce((r,{offset:o,length:n,type:i})=>{const{name:a,value:c,description:d}=vu(e,o,n,i);return a&&(r[a]={value:c,description:d}),r},{})}function vu(e,t,r,o){const n=[],i=[],a=[];let c=rn;for(let S=0;S<r&&t+S<e.byteLength;S++){if(c===on){if(e.getUint8(t+S)!==0)return{};S+=Pu,c=ur(o,c)}const s=e.getUint8(t+S);s===0?c=ur(o,c):c===rn?n.push(s):c===sn?i.push(s):c===Ei||a.push(s)}const d=nt(a);return{name:Nu(o,i,n),value:d,description:o===Kr?ni.decode("UTF-8",a):d}}function ur(e,t){return t===rn&&e===Kr?on:t===on?sn:t===sn?Ei:_u}function Nu(e,t,r){const o=nt(r);if(e===Hs||t.length===0)return o;const n=nt(t);return`${o} (${n})`}const Ou={read:Uu};function Uu(e,t){const r={};for(let o=0;o<t.length;o++){const n=z.getLongAt(e,t[o]+ft),i=W(e,t[o]+Qe,ve);i===Qr?(r["Pixels Per Unit X"]=wu(e,t[o],n),r["Pixels Per Unit Y"]=Du(e,t[o],n),r["Pixel Units"]=Mu(e,t[o],n)):i===qr&&(r["Modify Date"]=Lu(e,t[o],n))}return r}function wu(e,t,r){if(!wt(e,t,r,0,4))return;const i=z.getLongAt(e,t+ge+0);return{value:i,description:""+i}}function Du(e,t,r){if(!wt(e,t,r,4,4))return;const i=z.getLongAt(e,t+ge+4);return{value:i,description:""+i}}function Mu(e,t,r){if(!wt(e,t,r,8,1))return;const i=z.getByteAt(e,t+ge+8);return{value:i,description:i===1?"meters":"Unknown"}}function Lu(e,t,r){if(!wt(e,t,r,0,7))return;const n=z.getShortAt(e,t+ge),i=z.getByteAt(e,t+ge+2),a=z.getByteAt(e,t+ge+3),c=z.getByteAt(e,t+ge+4),d=z.getByteAt(e,t+ge+5),S=z.getByteAt(e,t+ge+6);return{value:[n,i,a,c,d,S],description:`${et(n,4)}-${et(i,2)}-${et(a,2)} ${et(c,2)}:${et(d,2)}:${et(S,2)}`}}function wt(e,t,r,o,n){return o+n<=r&&t+ge+o+n<=e.byteLength}function et(e,t){return`${"0".repeat(t-(""+e).length)}${e}`}const ku=[6,7,99],Gu={get:Bu};function Bu(e,t,r){if(ju(t)){t.type="image/jpeg";const o=r+t.JPEGInterchangeFormat.value;t.image=e.buffer.slice(o,o+t.JPEGInterchangeFormatLength.value),Hr(t,"base64",function(){return zr(this.image)})}return t}function ju(e){return e&&(e.Compression===void 0||ku.includes(e.Compression.value))&&e.JPEGInterchangeFormat&&e.JPEGInterchangeFormat.value&&e.JPEGInterchangeFormatLength&&e.JPEGInterchangeFormatLength.value}function bi(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=new Error().stack}bi.prototype=new Error;const Hu={MetadataMissingError:bi};function zu(e,t){return $u(e)?Xu(e,t).then(r=>$t(r,t)):Ju(e)?Vu(e).then(r=>$t(r,t)):$t(e,t)}function $u(e){return typeof e=="string"}function Xu(e,t){return/^https?:\/\//.test(e)?typeof fetch<"u"?Yu(e,t):Zu(e,t):Ku(e)?Promise.resolve(ns(e)):Qu(e,t)}function Yu(e,{length:t}={}){const r={method:"GET"};return Number.isInteger(t)&&t>=0&&(r.headers={range:`bytes=0-${t-1}`}),fetch(e,r).then(o=>o.arrayBuffer())}function Zu(e,{length:t}={}){return new Promise((r,o)=>{const n={};Number.isInteger(t)&&t>=0&&(n.headers={range:`bytes=0-${t-1}`}),Wu(e)(e,n,a=>{if(a.statusCode>=200&&a.statusCode<=299){const c=[];a.on("data",d=>c.push(Buffer.from(d))),a.on("error",d=>o(d)),a.on("end",()=>r(Buffer.concat(c)))}else o(`Could not fetch file: ${a.statusCode} ${a.statusMessage}`),a.resume()}).on("error",a=>o(a))})}function Wu(e){return/^https:\/\//.test(e)?__non_webpack_require__("https").get:__non_webpack_require__("http").get}function Ku(e){return/^data:[^;,]*(;base64)?,/.test(e)}function Qu(e,{length:t}={}){return new Promise((r,o)=>{const n=qu();n.open(e,(i,a)=>{i?o(i):n.stat(e,(c,d)=>{if(c)o(c);else{const S=Math.min(d.size,t!==void 0?t:d.size),s=Buffer.alloc(S),l={buffer:s,length:S};n.read(a,l,u=>{u?o(u):n.close(a,f=>{f&&console.warn(`Could not close file ${e}:`,f),r(s)})})}})})})}function qu(){try{return __non_webpack_require__("fs")}catch{return}}function Ju(e){return typeof window<"u"&&typeof File<"u"&&e instanceof File}function Vu(e){return new Promise((t,r)=>{const o=new FileReader;o.onload=n=>t(n.target.result),o.onerror=()=>r(o.error),o.readAsArrayBuffer(e)})}function $t(e,t){return el(e)&&(e=new Uint8Array(e).buffer),nl(tl(e),t)}function el(e){try{return Buffer.isBuffer(e)}catch{return!1}}function tl(e){try{return new DataView(e)}catch{return new rs(e)}}function nl(e,{expanded:t=!1,includeUnknown:r=!1}={expanded:!1,includeUnknown:!1}){let o=!1,n={};const{fileDataOffset:i,jfifDataOffset:a,tiffHeaderOffset:c,iptcDataOffset:d,xmpChunks:S,iccChunks:s,mpfDataOffset:l,pngHeaderOffset:u,pngTextChunks:f,pngChunkOffsets:x}=ua.parseAppMarkers(e);if(rl(i)){o=!0;const A=Ha.read(e,i);t?n.file=A:n=J({},n,A)}if(il(a)){o=!0;const A=Ja.read(e,a);t?n.jfif=A:n=J({},n,A)}if(ol(c)){o=!0;const A=Qn.read(e,c,r);if(A.Thumbnail&&(n.Thumbnail=A.Thumbnail,delete A.Thumbnail),t?(n.exif=A,sl(n)):n=J({},n,A),A["IPTC-NAA"]&&!lr(d)){const T=er.read(A["IPTC-NAA"].value,0,r);t?n.iptc=T:n=J({},n,T)}if(A.ApplicationNotes&&!fr(S)){const T=rr.read(nt(A.ApplicationNotes.value));t?n.xmp=T:(delete T._raw,n=J({},n,T))}if(A.ICC_Profile&&!dr(s)){const T=cr.read(A.ICC_Profile.value,[{offset:0,length:A.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);t?n.icc=T:n=J({},n,T)}}if(lr(d)){o=!0;const A=er.read(e,d,r);t?n.iptc=A:n=J({},n,A)}if(fr(S)){o=!0;const A=rr.read(e,S);t?n.xmp=A:(delete A._raw,n=J({},n,A))}if(dr(s)){o=!0;const A=cr.read(e,s);t?n.icc=A:n=J({},n,A)}if(al(l)){o=!0;const A=Qn.readMpf(e,l,r);t?n.mpf=A:n=J({},n,A)}if(cl(u)){o=!0;const A=xu.read(e,u);t?(n.png=n.png?J({},n.png,A):A,n.pngFile=A):n=J({},n,A)}if(ul(f)){o=!0;const A=yu.read(e,f);t?(n.png=n.png?J({},n.png,A):A,n.pngText=A):n=J({},n,A)}if(ll(x)){o=!0;const A=Ou.read(e,x);t?n.png=n.png?J({},n.png,A):A:n=J({},n,A)}const C=Gu.get(e,n.Thumbnail,c);if(C?(o=!0,n.Thumbnail=C):delete n.Thumbnail,!o)throw new Hu.MetadataMissingError;return n}function rl(e){return e!==void 0}function il(e){return e!==void 0}function ol(e){return e!==void 0}function sl(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=yt(e.exif.GPSLatitude.value),e.exif.GPSLatitudeRef.value.join("")==="S"&&(e.gps.Latitude=-e.gps.Latitude)}catch{}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=yt(e.exif.GPSLongitude.value),e.exif.GPSLongitudeRef.value.join("")==="W"&&(e.gps.Longitude=-e.gps.Longitude)}catch{}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],e.exif.GPSAltitudeRef.value===1&&(e.gps.Altitude=-e.gps.Altitude)}catch{}}}function lr(e){return e!==void 0}function fr(e){return Array.isArray(e)&&e.length>0}function dr(e){return Array.isArray(e)&&e.length>0}function al(e){return e!==void 0}function cl(e){return e!==void 0}function ul(e){return e!==void 0}function ll(e){return e!==void 0}const fl=async e=>{const t=await zu(e),r=t.DateTimeOriginal?.description||t.DateTimeDigitized?.description||t.DateTime?.description;return typeof r!="string"?null:es.parse(r)},dl=e=>new Promise((t,r)=>{const o=new Image;o.onload=()=>{const n=Math.min(o.naturalWidth,o.naturalHeight),i=(o.naturalWidth-n)/2,a=(o.naturalHeight-n)/2,c=document.createElement("canvas");c.width=n,c.height=n;const d=c.getContext("2d");if(!d){r(new Error("Could not get canvas context"));return}d.drawImage(o,i,a,n,n,0,0,n,n),t(c.toDataURL("image/jpeg",.95))},o.onerror=()=>r(new Error("Failed to load image")),o.src=e}),hl=e=>new Promise((t,r)=>{const o=new FileReader;o.onload=()=>{typeof o.result=="string"?t(o.result):r(new Error("Invalid file"))},o.onerror=()=>r(new Error("Failed to read file")),o.readAsDataURL(e)}),gl=e=>{const[t,r]=Z.useState(null),[o,n]=Z.useState(!1),[i,a]=Z.useState(null);return Z.useEffect(()=>{if(!e){r(null),a(null);return}(async()=>{n(!0),a(null);try{const d=await hl(e),[S,s]=await Promise.all([dl(d),fl(d)]);r({squareDataUrl:S,date:s})}catch(d){a(d instanceof Error?d.message:"Failed to process image"),r(null)}finally{n(!1)}})()},[e]),{processedImage:t,isProcessing:o,error:i}},pl=[{value:"SSS",label:"SSS"},{value:"SS",label:"SS"},{value:"S",label:"S"},{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"F",label:"F"}],ml=[{value:"SSS+",label:"SSS+"},{value:"SSS",label:"SSS"},{value:"SS+",label:"SS+"},{value:"SS",label:"SS"},{value:"S+",label:"S+"},{value:"S",label:"S"},{value:"AAA+",label:"AAA+"},{value:"AAA",label:"AAA"},{value:"AA+",label:"AA+"},{value:"AA",label:"AA"},{value:"A+",label:"A+"},{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"F",label:"F"}],xl=[{value:"Phoenix",label:"Phoenix"},{value:"XX",label:"XX"},{value:"Prime2",label:"Prime 2"},{value:"Prime",label:"Prime"}],Sl=[{value:"",label:"No mods"},{value:"VJ",label:"Rank (VJ)"},{value:"HJ",label:"HJ"}],yl=()=>{const e=ln(),t=Di(),{sharedChartId:r}=Mi(),o=Li(),n=ki(),[i,a]=Qi({key:"addResult_lastMix"}),c=br(St.results.addResultMutation.mutationOptions({onSuccess:()=>{n.invalidateQueries(St.charts.chart.queryFilter()),n.invalidateQueries(St.charts.search.infiniteQueryFilter())}})),d=Xi({sharedChartId:r?Number(r):0}),S=o.data?.id,s=!!o.data?.can_add_results_manually,l=d.data?.items[0],u=l&&`${l.songName} ${l.label}`,[f,x]=Z.useState(null),[C,A]=Z.useState(!1),{renderPopup:T,confirm:N}=Co({okText:e.SUBMIT}),v=Gi({initialValues:{screenshot:null,grade:null,perfect:"",great:"",good:"",bad:"",miss:"",combo:"",score:"",mix:null,mod:"",pass:!1},validate:{screenshot:E=>E?null:e.SCREENSHOT_REQUIRED,grade:E=>E?null:e.GRADE_REQUIRED,perfect:E=>E?null:e.PERFECT_REQUIRED,great:E=>E?null:e.GREAT_REQUIRED,good:E=>E?null:e.GOOD_REQUIRED,bad:E=>E?null:e.BAD_REQUIRED,miss:E=>E?null:e.MISS_REQUIRED,combo:E=>E?null:e.COMBO_REQUIRED,score:E=>!E||E.length<4?e.SCORE_REQUIRED_MIN_DIGITS:null},onValuesChange:(E,F)=>{E.mix&&E.mix!==F.mix&&(a(E.mix),v.setFieldValue("grade",null))}});Z.useEffect(()=>{!v.values.mix&&i&&v.setFieldValue("mix",i)},[v.values.mix,i,a,v]);const O=v.values.screenshot,{processedImage:w,isProcessing:I,error:D}=gl(O),p=v.values,m=async({screenshot:E,...F})=>{if(!(!S||!r||!E||!w||!F.mix||!F.grade)){try{await N()}catch{return}A(!0),x(null);try{const _=await Jo(w.squareDataUrl),y={pass:F.pass,grade:F.grade,perfect:Number(F.perfect),great:Number(F.great),good:Number(F.good),bad:Number(F.bad),miss:Number(F.miss),combo:Number(F.combo),score:Number(F.score),mix:F.mix,mod:F.mod,screenshot:_,fileName:E.name,date:w.date||new Date,isExactDate:!!w.date,sharedChartId:Number(r),playerId:S};await c.mutateAsync(y),v.reset(),t(ji.leaderboard.sharedChart.getPath({sharedChartId:r}))}catch(_){console.error(_),x(_)}A(!1)}};return S?s?k.jsxs("div",{className:Xe.addResultPage,children:[T({content:k.jsxs("div",{className:Xe.confirmation,children:[k.jsxs("div",{className:Xe.splitPanels,children:[k.jsx("div",{className:Xe.screenshotPanel,children:w&&k.jsx("img",{src:w.squareDataUrl,alt:"Screenshot",style:{maxWidth:"100%",maxHeight:270}})}),k.jsxs("div",{className:Xe.formPanel,children:[k.jsx("div",{className:Xe.chartName,children:u}),k.jsxs("div",{className:Xe.grid,children:[k.jsx("div",{children:e.GRADE}),k.jsx("div",{children:p.grade}),k.jsx("div",{style:{color:"#29D7FF"},children:"Perfect"}),k.jsx("div",{style:{color:"#29D7FF"},children:p.perfect}),k.jsx("div",{style:{color:"#21d021"},children:"Great"}),k.jsx("div",{style:{color:"#21d021"},children:p.great}),k.jsx("div",{style:{color:"#dede3a"},children:"Good"}),k.jsx("div",{style:{color:"#dede3a"},children:p.good}),k.jsx("div",{style:{color:"#f278fc"},children:"Bad"}),k.jsx("div",{style:{color:"#f278fc"},children:p.bad}),k.jsx("div",{style:{color:"#f48181"},children:"Miss"}),k.jsx("div",{style:{color:"#f48181"},children:p.miss}),k.jsx("div",{children:"Combo"}),k.jsx("div",{children:p.combo}),k.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:"Score"}),k.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:p.score}),k.jsx("div",{children:e.MODS}),k.jsx("div",{children:p.mod||e.NONE_NORMAL_MODE})]})]})]}),k.jsx(dt,{radius:"md",variant:"light",color:"yellow",icon:k.jsx(mo,{}),children:e.FALSE_RESULTS_WARNING})]})}),k.jsx(pn,{order:2,mb:"xs",children:e.SUBMIT_RESULT}),k.jsxs(ue,{mb:"md",children:[e.CHART,": ",u]}),k.jsx("form",{onSubmit:v.onSubmit(m),children:k.jsxs(Xt,{gap:"sm",children:[k.jsx(kt,{clearable:!1,label:e.MIX,data:xl,withAsterisk:!0,...v.getInputProps("mix")}),k.jsx(uo,{label:e.SCREENSHOT,placeholder:e.SELECT_SCREENSHOT,accept:"image/*",withAsterisk:!0,...v.getInputProps("screenshot")}),O?.name.toLowerCase().endsWith(".heic")&&k.jsx(ue,{c:"red",size:"sm",children:e.HEIC_NOT_SUPPORTED}),I&&k.jsx(Bi,{}),D&&k.jsxs(ue,{c:"red",size:"sm",children:[e.ERROR,": ",D]}),w&&v.values.mix?k.jsxs(k.Fragment,{children:[k.jsx(qo,{showDate:!0,squareDataUrl:w.squareDataUrl,date:w.date,mix:v.values.mix,onScoreRecognized:E=>{E.perfect>=0&&v.setFieldValue("perfect",String(E.perfect)),E.great>=0&&v.setFieldValue("great",String(E.great)),E.good>=0&&v.setFieldValue("good",String(E.good)),E.bad>=0&&v.setFieldValue("bad",String(E.bad)),E.miss>=0&&v.setFieldValue("miss",String(E.miss)),E.combo>=0&&v.setFieldValue("combo",String(E.combo)),E.score>=0&&v.setFieldValue("score",String(E.score))}}),k.jsx(kt,{clearable:!1,label:e.GRADE,placeholder:e.SELECT_GRADE,data:v.values.mix==="Phoenix"?ml:pl,withAsterisk:!0,...v.getInputProps("grade")}),k.jsx(it,{label:"Pass",checked:v.values.pass,...v.getInputProps("pass")}),["perfect","great","good","bad","miss","combo"].map(E=>k.jsx(Tn,{label:E[0].toUpperCase()+E.slice(1),placeholder:"000",inputMode:"numeric",withAsterisk:!0,...v.getInputProps(E)},E)),k.jsx(Tn,{label:"Score",placeholder:"000000",inputMode:"numeric",withAsterisk:!0,...v.getInputProps("score")}),k.jsx(kt,{clearable:!1,label:e.JUDGE_RANK,data:Sl,withAsterisk:!0,...v.getInputProps("mod")}),k.jsx(Ye,{type:"submit",loading:C,disabled:!v.isValid(),children:e.SUBMIT})]}):null,f instanceof Error&&k.jsx(dt,{color:"red",variant:"light",children:f.message})]})})]}):k.jsx(dt,{radius:"md",variant:"light",color:"red",title:e.ERROR,icon:k.jsx(zi,{}),children:e.NO_ACCESS_TO_PAGE}):null};export{yl as default};
//# sourceMappingURL=AddResult-CwgRyCzV.js.map
