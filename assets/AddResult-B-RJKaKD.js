import{r as q,u as Jt,a as ni,j as G,b as er,f as tr,c as ri,d as ii,C as oi,I as nr,e as si,g as ai,h as ci,B as ui,i as li,k as Vt,G as rr,l as et,R as fi,m as ir,n as gt,S as Lt,T as ue,A as pt,o as di,p as hi,q as gi,s as pi,t as mi,v as Nt,w as ln,x as xi}from"./index-B6sVSm1a.js";import{G as Ei,F as Si}from"./index.esm-CQ375GJp.js";import{M as Ti}from"./Modal-DZ6Dkk0L.js";import{u as Ai}from"./useSingleChartQuery-1QJkl5G-.js";import"./Paper-PPXeOulZ.js";import"./useFilter-DWMvfnB6.js";const Ii={multiple:!1},or=q.forwardRef((e,t)=>{const{onChange:r,children:o,multiple:n,accept:i,name:a,form:c,resetRef:g,disabled:E,capture:s,inputProps:l,...u}=Jt("FileButton",Ii,e),f=q.useRef(null),x=()=>{!E&&f.current?.click()},y=T=>{if(T.currentTarget.files===null)return r(n?[]:null);r(n?Array.from(T.currentTarget.files):T.currentTarget.files[0]||null)};return ni(g,()=>{f.current&&(f.current.value="")}),G.jsxs(G.Fragment,{children:[G.jsx("input",{style:{display:"none"},type:"file",accept:i,multiple:n,onChange:y,ref:er(t,f),name:a,form:c,capture:s,...l}),o({onClick:x,...u})]})});or.displayName="@mantine/core/FileButton";const bi=({value:e})=>G.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(e)?e.map(t=>t.name).join(", "):e?.name}),Fi={valueComponent:bi},en=tr((e,t)=>{const r=Jt("FileInput",Fi,e),{unstyled:o,vars:n,onChange:i,value:a,defaultValue:c,multiple:g,accept:E,name:s,form:l,valueComponent:u,clearable:f,clearButtonProps:x,readOnly:y,capture:I,fileInputProps:T,rightSection:D,size:v,placeholder:O,component:N,resetRef:S,classNames:M,styles:p,attributes:m,...F}=r,P=q.useRef(null),{resolvedClassNames:_,resolvedStyles:b}=ri({classNames:M,styles:p,props:r}),[A,C]=ii({value:a,defaultValue:c,onChange:i,finalValue:g?[]:null}),h=Array.isArray(A)?A.length!==0:A!==null,d=D||(f&&h&&!y?G.jsx(oi,{...x,variant:"subtle",onClick:()=>C(g?[]:null),size:v,unstyled:o}):null);return q.useEffect(()=>{(Array.isArray(A)&&A.length===0||A===null)&&P.current?.()},[A]),G.jsx(or,{onChange:C,multiple:g,accept:E,name:s,form:l,resetRef:er(P,S),disabled:y,capture:I,inputProps:T,children:L=>G.jsx(nr,{component:N||"button",ref:t,rightSection:d,...L,...F,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:r,unstyled:o,size:v,classNames:M,styles:p,attributes:m,children:h?G.jsx(u,{value:A}):G.jsx(si.Placeholder,{__staticSelector:"FileInput",classNames:_,styles:b,attributes:m,children:O})})})});en.classes=nr.classes;en.displayName="@mantine/core/FileInput";const yi=en,_i=["h1","h2","h3","h4","h5","h6"],Ci=["xs","sm","md","lg","xl"];function Pi(e,t){const r=t!==void 0?t:`h${e}`;return _i.includes(r)?{fontSize:`var(--mantine-${r}-font-size)`,fontWeight:`var(--mantine-${r}-font-weight)`,lineHeight:`var(--mantine-${r}-line-height)`}:Ci.includes(r)?{fontSize:`var(--mantine-font-size-${r})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:ai(r),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var sr={root:"m_8a5d1357"};const Ri={order:1},Ni=li((e,{order:t,size:r,lineClamp:o,textWrap:n})=>{const i=Pi(t||1,r);return{root:{"--title-fw":i.fontWeight,"--title-lh":i.lineHeight,"--title-fz":i.fontSize,"--title-line-clamp":typeof o=="number"?o.toString():void 0,"--title-text-wrap":n}}}),tn=tr((e,t)=>{const r=Jt("Title",Ri,e),{classNames:o,className:n,style:i,styles:a,unstyled:c,order:g,vars:E,size:s,variant:l,lineClamp:u,textWrap:f,mod:x,attributes:y,...I}=r,T=ci({name:"Title",props:r,classes:sr,className:n,style:i,classNames:o,styles:a,unstyled:c,attributes:y,vars:E,varsResolver:Ni});return[1,2,3,4,5,6].includes(g)?G.jsx(ui,{...T("root"),component:`h${g}`,variant:l,ref:t,mod:[{order:g,"data-line-clamp":typeof u=="number"},x],size:s,...I}):null});tn.classes=sr;tn.displayName="@mantine/core/Title";function Oi(e){return Ei({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M228.9 79.9L51.8 403.1C40.6 423.3 55.5 448 78.9 448h354.3c23.3 0 38.2-24.7 27.1-44.9L283.1 79.9c-11.7-21.2-42.5-21.2-54.2 0zM273.6 214L270 336h-28l-3.6-122h35.2zM256 402.4c-10.7 0-19.1-8.1-19.1-18.4s8.4-18.4 19.1-18.4 19.1 8.1 19.1 18.4-8.4 18.4-19.1 18.4z"}}]})(e)}const Ui="_addResultPage_1sd28_1",Di="_confirmation_1sd28_8",vi="_splitPanels_1sd28_8",Mi="_screenshotPanel_1sd28_13",wi="_formPanel_1sd28_16",Li="_chartName_1sd28_19",ki="_grid_1sd28_24",Xe={addResultPage:Ui,confirmation:Di,splitPanels:vi,screenshotPanel:Mi,formPanel:wi,chartName:Li,grid:ki},Gi=({okText:e="OK"}={})=>{const[t,r]=q.useState(!1),o=Vt(),n=q.useRef(null),i=a=>{t&&(r(!1),n.current&&n.current(a))};return{renderPopup:({content:a})=>G.jsxs(Ti,{opened:t,onClose:()=>i(!1),centered:!0,size:"lg",radius:"md",withCloseButton:!1,children:[a,G.jsxs(rr,{justify:"space-between",mt:"md",children:[G.jsx(et,{color:"red",onClick:()=>i(!1),children:o.CANCEL}),G.jsx(et,{color:"green",onClick:()=>i(!0),children:e})]})]}),confirm:()=>(r(!0),new Promise((a,c)=>{n.current=g=>{g?a():c()}}))}},Bi=e=>new Promise((t,r)=>{const o=new FileReader;o.readAsDataURL(e),o.onload=()=>t(o.result?.toString()??""),o.onerror=r});var Hi=Object.defineProperty,ji=Object.defineProperties,zi=Object.getOwnPropertyDescriptors,fn=Object.getOwnPropertySymbols,$i=Object.prototype.hasOwnProperty,Xi=Object.prototype.propertyIsEnumerable,dn=(e,t,r)=>t in e?Hi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,re=(e,t)=>{for(var r in t||(t={}))$i.call(t,r)&&dn(e,r,t[r]);if(fn)for(var r of fn(t))Xi.call(t,r)&&dn(e,r,t[r]);return e},Ee=(e,t)=>ji(e,zi(t));const kt={x:0,y:0,width:0,height:0,unit:"px"};function hn(e,t,r){return Math.min(Math.max(e,t),r)}const gn=(e,t,r,o)=>o==="pixel"?Gt(e,t,r):Yi(e,t,r),Yi=(e,t,r)=>e.unit==="%"?Ee(re(re({},kt),e),{unit:"%"}):{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/r*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/r*100:0};function Gt(e,t,r){return e.unit?e.unit==="px"?Ee(re(re({},kt),e),{unit:"px"}):{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*r/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*r/100:0}:Ee(re(re({},kt),e),{unit:"px"})}const Le={position:"absolute",outline:"1px solid rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.5)",width:10,height:10};var nn={exports:{}},ut={};(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var o=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(o.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(i){n[i]=i}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}})();var Zi=fi,ar=60103;if(ut.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var pn=Symbol.for;ar=pn("react.element"),ut.Fragment=pn("react.fragment")}var Wi=Zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ki=Object.prototype.hasOwnProperty,Qi={key:!0,ref:!0,__self:!0,__source:!0};function mn(e,t,r){var o,n={},i=null,a=null;for(o in r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref),t)Ki.call(t,o)&&!Qi.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)n[o]===void 0&&(n[o]=t[o]);return{$$typeof:ar,type:e,key:i,ref:a,props:n,_owner:Wi.current}}ut.jsx=mn,ut.jsxs=mn,nn.exports=ut;const Se=nn.exports.jsx,Ue=nn.exports.jsxs,qi=()=>Ue(q.Fragment,{children:[Se("div",{"data-dir":"s","data-ord":"s",style:Ee(re({},Le),{bottom:0,left:"50%",marginBottom:-5,marginLeft:-5,cursor:"s-resize"})}),Se("div",{"data-dir":"n","data-ord":"n",style:Ee(re({},Le),{top:0,left:"50%",marginTop:-5,marginLeft:-5,cursor:"n-resize"})}),Se("div",{"data-dir":"w","data-ord":"w",style:Ee(re({},Le),{top:"50%",left:0,marginTop:-5,marginLeft:-5,cursor:"w-resize"})}),Se("div",{"data-dir":"e","data-ord":"e",style:Ee(re({},Le),{top:"50%",right:0,marginTop:-5,marginRight:-5,cursor:"e-resize"})}),Se("div",{"data-dir":"se","data-ord":"se",style:Ee(re({},Le),{bottom:0,right:0,marginBottom:-5,marginRight:-5,cursor:"se-resize"})}),Se("div",{"data-dir":"sw","data-ord":"sw",style:Ee(re({},Le),{bottom:0,left:0,marginBottom:-5,marginLeft:-5,cursor:"sw-resize"})}),Se("div",{"data-dir":"nw","data-ord":"nw",style:Ee(re({},Le),{top:0,left:0,marginTop:-5,marginLeft:-5,cursor:"nw-resize"})}),Se("div",{"data-dir":"ne","data-ord":"ne",style:Ee(re({},Le),{top:0,right:0,marginTop:-5,marginRight:-5,cursor:"ne-resize"})})]}),Ji=({area:e,onCropStart:t,showHandles:r,globalAreaStyle:o,customAreaRenderer:n,areaNumber:i})=>{const a={top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`};return Ue("div",{style:re(re(re({position:"absolute",border:"1px dashed rgba(0,0,0,0.5)",outline:"1px dashed rgba(255,255,255,0.5)",cursor:"move",boxSizing:"border-box",touchAction:"none"},a),o),e.areaStyle),onPointerDown:t,"data-wrapper":"wrapper",children:[n?n(Ee(re({},e),{areaNumber:i})):null,r?Se(qi,{}):null]})},Vi=({areas:e})=>Se("table",{style:{position:"absolute",right:0,top:0},children:Se("tbody",{children:e.map((t,r)=>Ue("tr",{children:[Ue("td",{children:["x: ",Math.round(t.x)]}),Ue("td",{children:["y: ",Math.round(t.y)]}),Ue("td",{children:["width: ",Math.round(t.width)]}),Ue("td",{children:["height: ",Math.round(t.height)]}),Ue("td",{children:["unit: ",t.unit]})]},r))})}),cr=(e,t)=>e!==null&&(!!t(e)||cr(e.parentNode,t)),Qe={capture:!0,passive:!1},eo=["e","w"],to=["n","s"],no=["nw","ne","se","sw"],ro=({maxAreas:e=1/0,unit:t="pixel",minWidth:r=0,minHeight:o=0,debug:n=!1,children:i,areas:a,onChange:c,maxWidth:g,maxHeight:E,wrapperStyle:s,globalAreaStyle:l,customAreaRenderer:u,mediaWrapperClassName:f})=>{const x=q.useRef(null),y=q.useRef(null),[I,T]=q.useState(0),[D,v]=q.useState({startClientX:0,startClientY:0,startAreaX:0,startAreaY:0,clientX:0,clientY:0,isResize:!1}),[O,N]=q.useState({areaChangeIndex:0,isChanging:!1}),S=()=>{const b=y.current;if(!b)return{x:0,y:0,width:0,height:0};const{x:A,y:C,width:h,height:d}=b.getBoundingClientRect();return{x:A,y:C,width:h,height:d}},M=q.useCallback(b=>{const A=D.clientX-b.x,C=D.clientY-b.y<D.startAreaY;return A<D.startAreaX?C?"nw":"sw":C?"ne":"se"},[D]),p=q.useCallback(b=>{const A=S();return Gt(b,A.width,A.height)},[]),m=q.useCallback(b=>{const A=S(),C=p(b),h=D.clientX-D.startClientX,d=D.clientY-D.startClientY;return C.x=hn(D.startAreaX+h,0,A.width-C.width),C.y=hn(D.startAreaY+d,0,A.height-C.height),C},[D,p]),F=q.useCallback(b=>{const A=S(),C=M(A),h=p(b),d=D.ord?D.ord:C,L=D.clientX-D.startClientX,R=D.clientY-D.startClientY,U={unit:"px",x:0,y:0,width:0,height:0,isChanging:!0,isNew:!1};C==="ne"?(U.x=D.startAreaX,U.width=L,U.height=Math.abs(R),U.y=D.startAreaY-U.height):C==="se"?(U.x=D.startAreaX,U.y=D.startAreaY,U.width=L,U.height=R):C==="sw"?(U.x=D.startAreaX+L,U.y=D.startAreaY,U.width=Math.abs(L),U.height=R):C==="nw"&&(U.x=D.startAreaX+L,U.width=Math.abs(L),U.height=Math.abs(R),U.y=D.startAreaY+R);const z=(function(B,H,k,w,X=0,Q=0,K=k,W=w){const $=re({},B);$.y<0&&($.height=Math.max($.height+$.y,Q),$.y=0),$.x<0&&($.width=Math.max($.width+$.x,X),$.x=0);const te=k-($.x+$.width);te<0&&($.x=Math.min($.x,k-X),$.width+=te);const ie=w-($.y+$.height);return ie<0&&($.y=Math.min($.y,w-Q),$.height+=ie),$.width<X&&(H!=="sw"&&H!="nw"||($.x-=X-$.width),$.width=X),$.height<Q&&(H!=="nw"&&H!="ne"||($.y-=Q-$.height),$.height=Q),$.width>K&&(H!=="sw"&&H!="nw"||($.x-=K-$.width),$.width=K),$.height>W&&(H!=="nw"&&H!="ne"||($.y-=W-$.height),$.height=W),$})(U,C,A.width,A.height,r,o,g,E);return no.indexOf(d)>-1?(h.x=z.x,h.y=z.y,h.width=z.width,h.height=z.height):eo.indexOf(d)>-1?(h.x=z.x,h.width=z.width):to.indexOf(d)>-1&&(h.y=z.y,h.height=z.height),h},[D,M,p,r,o,g,E]),P=q.useCallback(b=>{b.preventDefault(),b.stopPropagation();const{isChanging:A,areaChangeIndex:C}=O;if(!A)return;const h=S(),d=a[C];let L;if(v(z=>Ee(re({},z),{clientX:b.clientX,clientY:b.clientY})),L=D.isResize?F(d):m(d),U=L,(R=d).width!==U.width||R.height!==U.height||R.x!==U.x||R.y!==U.y||R.unit!==U.unit){const z=gn(L,h.width,h.height,t);c([...a.slice(0,C),re({},z),...a.slice(C+1)])}var R,U},[O,a,D,m,c,t,F]),_=q.useCallback(b=>{b.preventDefault(),b.stopPropagation();const{isChanging:A,areaChangeIndex:C}=O;if(A){N({isChanging:!1,areaChangeIndex:-1}),v({startClientX:0,startClientY:0,startAreaX:0,startAreaY:0,clientX:0,clientY:0,isResize:!1});const h=a[C];c([...a.slice(0,C),Ee(re({},h),{isNew:!1,isChanging:!1}),...a.slice(C+1)])}},[O,a,c]);return q.useEffect(()=>(document.addEventListener("pointermove",P,Qe),document.addEventListener("pointerup",_,Qe),document.addEventListener("pointercancel",_,Qe),()=>{document.removeEventListener("pointermove",P,Qe),document.removeEventListener("pointerup",_,Qe),document.removeEventListener("pointercancel",_,Qe)}),[P,_]),Ue("div",{ref:x,style:re({position:"relative",display:"inline-block",cursor:"crosshair",boxSizing:"border-box",maxWidth:"100%",touchAction:"none",lineHeight:0},s),children:[Se("div",{ref:y,onPointerDown:b=>{const A=b.currentTarget;if(A.dataset.wrapper||A.dataset.direction||cr(A,z=>{var B;return(B=z.dataset)==null?void 0:B.wrapper}))return;b.preventDefault(),b.stopPropagation();const C=S(),h=b.clientX-C.x,d=b.clientY-C.y,L={unit:"px",x:h,y:d,width:0,height:0,isChanging:!0,isNew:!0};v({startClientX:b.clientX,startClientY:b.clientY,startAreaX:h,startAreaY:d,clientX:b.clientX,clientY:b.clientY,isResize:!0}),T(I+1);const R=gn(L,C.width,C.height,t);let U;a.length<e?(c(a.concat(R)),U=a.length):(c([...a.slice(0,e-1),R]),U=e-1),N({areaChangeIndex:U,isChanging:!0})},style:{boxSizing:"border-box"},className:f,children:i}),a.map((b,A)=>Se(Ji,{area:b,showHandles:!b.isNew,onCropStart:C=>((h,d)=>{h.preventDefault(),h.stopPropagation();const L=S(),R=Gt(a[d],L.width,L.height),U=h.target.dataset.ord,z=!!U;let B=h.clientX,H=h.clientY,k=R.x,w=R.y;U&&(U==="ne"||U=="e"?(k=R.x,w=R.y+R.height):U==="se"||U==="s"?(k=R.x,w=R.y):U==="sw"||U=="w"?(k=R.x+R.width,w=R.y):U!=="nw"&&U!="n"||(k=R.x+R.width,w=R.y+R.height),B=k+L.x,H=w+L.y),v({startClientX:B,startClientY:H,startAreaX:k,startAreaY:w,clientX:h.clientX,clientY:h.clientY,isResize:z,ord:U}),N({isChanging:!0,areaChangeIndex:d})})(C,A),globalAreaStyle:l,customAreaRenderer:u,areaNumber:A+1},A)),n?Se(Vi,{areas:a}):null]})};function io(e,t){return t.forEach((function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach((function(o){if(o!=="default"&&!(o in e)){var n=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(e,o,n.get?n:{enumerable:!0,get:function(){return r[o]}})}}))})),Object.freeze(e)}function ur(e,t){return new Promise((function(r,o){let n;return oo(e).then((function(i){try{return n=i,r(new Blob([t.slice(0,2),n,t.slice(2)],{type:"image/jpeg"}))}catch(a){return o(a)}}),o)}))}const oo=e=>new Promise(((t,r)=>{const o=new FileReader;o.addEventListener("load",(({target:{result:n}})=>{const i=new DataView(n);let a=0;if(i.getUint16(a)!==65496)return r("not a valid JPEG");for(a+=2;;){const c=i.getUint16(a);if(c===65498)break;const g=i.getUint16(a+2);if(c===65505&&i.getUint32(a+4)===1165519206){const E=a+10;let s;switch(i.getUint16(E)){case 18761:s=!0;break;case 19789:s=!1;break;default:return r("TIFF header contains invalid endian")}if(i.getUint16(E+2,s)!==42)return r("TIFF header contains invalid version");const l=i.getUint32(E+4,s),u=E+l+2+12*i.getUint16(E+l,s);for(let f=E+l+2;f<u;f+=12)if(i.getUint16(f,s)==274){if(i.getUint16(f+2,s)!==3)return r("Orientation data type is invalid");if(i.getUint32(f+4,s)!==1)return r("Orientation data count is invalid");i.setUint16(f+8,1,s);break}return t(n.slice(a,a+2+g))}a+=2+g}return t(new Blob)})),o.readAsArrayBuffer(e)}));var xt={},so={get exports(){return xt},set exports(e){xt=e}};(function(e){var t,r,o={};so.exports=o,o.parse=function(n,i){for(var a=o.bin.readUshort,c=o.bin.readUint,g=0,E={},s=new Uint8Array(n),l=s.length-4;c(s,l)!=101010256;)l--;g=l,g+=4;var u=a(s,g+=4);a(s,g+=2);var f=c(s,g+=2),x=c(s,g+=4);g+=4,g=x;for(var y=0;y<u;y++){c(s,g),g+=4,g+=4,g+=4,c(s,g+=4),f=c(s,g+=4);var I=c(s,g+=4),T=a(s,g+=4),D=a(s,g+2),v=a(s,g+4);g+=6;var O=c(s,g+=8);g+=4,g+=T+D+v,o._readLocal(s,O,E,f,I,i)}return E},o._readLocal=function(n,i,a,c,g,E){var s=o.bin.readUshort,l=o.bin.readUint;l(n,i),s(n,i+=4),s(n,i+=2);var u=s(n,i+=2);l(n,i+=2),l(n,i+=4),i+=4;var f=s(n,i+=8),x=s(n,i+=2);i+=2;var y=o.bin.readUTF8(n,i,f);if(i+=f,i+=x,E)a[y]={size:g,csize:c};else{var I=new Uint8Array(n.buffer,i);if(u==0)a[y]=new Uint8Array(I.buffer.slice(i,i+c));else{if(u!=8)throw"unknown compression method: "+u;var T=new Uint8Array(g);o.inflateRaw(I,T),a[y]=T}}},o.inflateRaw=function(n,i){return o.F.inflate(n,i)},o.inflate=function(n,i){return n[0],n[1],o.inflateRaw(new Uint8Array(n.buffer,n.byteOffset+2,n.length-6),i)},o.deflate=function(n,i){i==null&&(i={level:6});var a=0,c=new Uint8Array(50+Math.floor(1.1*n.length));c[a]=120,c[a+1]=156,a+=2,a=o.F.deflateRaw(n,c,a,i.level);var g=o.adler(n,0,n.length);return c[a+0]=g>>>24&255,c[a+1]=g>>>16&255,c[a+2]=g>>>8&255,c[a+3]=g>>>0&255,new Uint8Array(c.buffer,0,a+4)},o.deflateRaw=function(n,i){i==null&&(i={level:6});var a=new Uint8Array(50+Math.floor(1.1*n.length)),c=o.F.deflateRaw(n,a,c,i.level);return new Uint8Array(a.buffer,0,c)},o.encode=function(n,i){i==null&&(i=!1);var a=0,c=o.bin.writeUint,g=o.bin.writeUshort,E={};for(var s in n){var l=!o._noNeed(s)&&!i,u=n[s],f=o.crc.crc(u,0,u.length);E[s]={cpr:l,usize:u.length,crc:f,file:l?o.deflateRaw(u):u}}for(var s in E)a+=E[s].file.length+30+46+2*o.bin.sizeUTF8(s);a+=22;var x=new Uint8Array(a),y=0,I=[];for(var s in E){var T=E[s];I.push(y),y=o._writeHeader(x,y,s,T,0)}var D=0,v=y;for(var s in E)T=E[s],I.push(y),y=o._writeHeader(x,y,s,T,1,I[D++]);var O=y-v;return c(x,y,101010256),y+=4,g(x,y+=4,D),g(x,y+=2,D),c(x,y+=2,O),c(x,y+=4,v),y+=4,y+=2,x.buffer},o._noNeed=function(n){var i=n.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},o._writeHeader=function(n,i,a,c,g,E){var s=o.bin.writeUint,l=o.bin.writeUshort,u=c.file;return s(n,i,g==0?67324752:33639248),i+=4,g==1&&(i+=2),l(n,i,20),l(n,i+=2,0),l(n,i+=2,c.cpr?8:0),s(n,i+=2,0),s(n,i+=4,c.crc),s(n,i+=4,u.length),s(n,i+=4,c.usize),l(n,i+=4,o.bin.sizeUTF8(a)),l(n,i+=2,0),i+=2,g==1&&(i+=2,i+=2,s(n,i+=6,E),i+=4),i+=o.bin.writeUTF8(n,i,a),g==0&&(n.set(u,i),i+=u.length),i},o.crc={table:(function(){for(var n=new Uint32Array(256),i=0;i<256;i++){for(var a=i,c=0;c<8;c++)1&a?a=3988292384^a>>>1:a>>>=1;n[i]=a}return n})(),update:function(n,i,a,c){for(var g=0;g<c;g++)n=o.crc.table[255&(n^i[a+g])]^n>>>8;return n},crc:function(n,i,a){return 4294967295^o.crc.update(4294967295,n,i,a)}},o.adler=function(n,i,a){for(var c=1,g=0,E=i,s=i+a;E<s;){for(var l=Math.min(E+5552,s);E<l;)g+=c+=n[E++];c%=65521,g%=65521}return g<<16|c},o.bin={readUshort:function(n,i){return n[i]|n[i+1]<<8},writeUshort:function(n,i,a){n[i]=255&a,n[i+1]=a>>8&255},readUint:function(n,i){return 16777216*n[i+3]+(n[i+2]<<16|n[i+1]<<8|n[i])},writeUint:function(n,i,a){n[i]=255&a,n[i+1]=a>>8&255,n[i+2]=a>>16&255,n[i+3]=a>>24&255},readASCII:function(n,i,a){for(var c="",g=0;g<a;g++)c+=String.fromCharCode(n[i+g]);return c},writeASCII:function(n,i,a){for(var c=0;c<a.length;c++)n[i+c]=a.charCodeAt(c)},pad:function(n){return n.length<2?"0"+n:n},readUTF8:function(n,i,a){for(var c,g="",E=0;E<a;E++)g+="%"+o.bin.pad(n[i+E].toString(16));try{c=decodeURIComponent(g)}catch{return o.bin.readASCII(n,i,a)}return c},writeUTF8:function(n,i,a){for(var c=a.length,g=0,E=0;E<c;E++){var s=a.charCodeAt(E);if((4294967168&s)==0)n[i+g]=s,g++;else if((4294965248&s)==0)n[i+g]=192|s>>6,n[i+g+1]=128|s>>0&63,g+=2;else if((4294901760&s)==0)n[i+g]=224|s>>12,n[i+g+1]=128|s>>6&63,n[i+g+2]=128|s>>0&63,g+=3;else{if((4292870144&s)!=0)throw"e";n[i+g]=240|s>>18,n[i+g+1]=128|s>>12&63,n[i+g+2]=128|s>>6&63,n[i+g+3]=128|s>>0&63,g+=4}}return g},sizeUTF8:function(n){for(var i=n.length,a=0,c=0;c<i;c++){var g=n.charCodeAt(c);if((4294967168&g)==0)a++;else if((4294965248&g)==0)a+=2;else if((4294901760&g)==0)a+=3;else{if((4292870144&g)!=0)throw"e";a+=4}}return a}},o.F={},o.F.deflateRaw=function(n,i,a,c){var g=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][c],E=o.F.U,s=o.F._goodIndex;o.F._hash;var l=o.F._putsE,u=0,f=a<<3,x=0,y=n.length;if(c==0){for(;u<y;)l(i,f,u+(P=Math.min(65535,y-u))==y?1:0),f=o.F._copyExact(n,u,P,i,f+8),u+=P;return f>>>3}var I=E.lits,T=E.strt,D=E.prev,v=0,O=0,N=0,S=0,M=0,p=0;for(y>2&&(T[p=o.F._hash(n,0)]=0),u=0;u<y;u++){if(M=p,u+1<y-2){p=o.F._hash(n,u+1);var m=u+1&32767;D[m]=T[p],T[p]=m}if(x<=u){(v>14e3||O>26697)&&y-u>100&&(x<u&&(I[v]=u-x,v+=2,x=u),f=o.F._writeBlock(u==y-1||x==y?1:0,I,v,S,n,N,u-N,i,f),v=O=S=0,N=u);var F=0;u<y-2&&(F=o.F._bestMatch(n,u,D,M,Math.min(g[2],y-u),g[3]));var P=F>>>16,_=65535&F;if(F!=0){_=65535&F;var b=s(P=F>>>16,E.of0);E.lhst[257+b]++;var A=s(_,E.df0);E.dhst[A]++,S+=E.exb[b]+E.dxb[A],I[v]=P<<23|u-x,I[v+1]=_<<16|b<<8|A,v+=2,x=u+P}else E.lhst[n[u]]++;O++}}for(N==u&&n.length!=0||(x<u&&(I[v]=u-x,v+=2,x=u),f=o.F._writeBlock(1,I,v,S,n,N,u-N,i,f),v=0,O=0,v=O=S=0,N=u);(7&f)!=0;)f++;return f>>>3},o.F._bestMatch=function(n,i,a,c,g,E){var s=32767&i,l=a[s],u=s-l+32768&32767;if(l==s||c!=o.F._hash(n,i-u))return 0;for(var f=0,x=0,y=Math.min(32767,i);u<=y&&--E!=0&&l!=s;){if(f==0||n[i+f]==n[i+f-u]){var I=o.F._howLong(n,i,u);if(I>f){if(x=u,(f=I)>=g)break;u+2<I&&(I=u+2);for(var T=0,D=0;D<I-2;D++){var v=i-u+D+32768&32767,O=v-a[v]+32768&32767;O>T&&(T=O,l=v)}}}u+=(s=l)-(l=a[s])+32768&32767}return f<<16|x},o.F._howLong=function(n,i,a){if(n[i]!=n[i-a]||n[i+1]!=n[i+1-a]||n[i+2]!=n[i+2-a])return 0;var c=i,g=Math.min(n.length,i+258);for(i+=3;i<g&&n[i]==n[i-a];)i++;return i-c},o.F._hash=function(n,i){return(n[i]<<8|n[i+1])+(n[i+2]<<4)&65535},o.saved=0,o.F._writeBlock=function(n,i,a,c,g,E,s,l,u){var f,x,y,I,T,D,v,O,N,S=o.F.U,M=o.F._putsF,p=o.F._putsE;S.lhst[256]++,x=(f=o.F.getTrees())[0],y=f[1],I=f[2],T=f[3],D=f[4],v=f[5],O=f[6],N=f[7];var m=32+((u+3&7)==0?0:8-(u+3&7))+(s<<3),F=c+o.F.contSize(S.fltree,S.lhst)+o.F.contSize(S.fdtree,S.dhst),P=c+o.F.contSize(S.ltree,S.lhst)+o.F.contSize(S.dtree,S.dhst);P+=14+3*v+o.F.contSize(S.itree,S.ihst)+(2*S.ihst[16]+3*S.ihst[17]+7*S.ihst[18]);for(var _=0;_<286;_++)S.lhst[_]=0;for(_=0;_<30;_++)S.dhst[_]=0;for(_=0;_<19;_++)S.ihst[_]=0;var b=m<F&&m<P?0:F<P?1:2;if(M(l,u,n),M(l,u+1,b),u+=3,b==0){for(;(7&u)!=0;)u++;u=o.F._copyExact(g,E,s,l,u)}else{var A,C;if(b==1&&(A=S.fltree,C=S.fdtree),b==2){o.F.makeCodes(S.ltree,x),o.F.revCodes(S.ltree,x),o.F.makeCodes(S.dtree,y),o.F.revCodes(S.dtree,y),o.F.makeCodes(S.itree,I),o.F.revCodes(S.itree,I),A=S.ltree,C=S.dtree,p(l,u,T-257),p(l,u+=5,D-1),p(l,u+=5,v-4),u+=4;for(var h=0;h<v;h++)p(l,u+3*h,S.itree[1+(S.ordr[h]<<1)]);u+=3*v,u=o.F._codeTiny(O,S.itree,l,u),u=o.F._codeTiny(N,S.itree,l,u)}for(var d=E,L=0;L<a;L+=2){for(var R=i[L],U=R>>>23,z=d+(8388607&R);d<z;)u=o.F._writeLit(g[d++],A,l,u);if(U!=0){var B=i[L+1],H=B>>16,k=B>>8&255,w=255&B;p(l,u=o.F._writeLit(257+k,A,l,u),U-S.of0[k]),u+=S.exb[k],M(l,u=o.F._writeLit(w,C,l,u),H-S.df0[w]),u+=S.dxb[w],d+=U}}u=o.F._writeLit(256,A,l,u)}return u},o.F._copyExact=function(n,i,a,c,g){var E=g>>>3;return c[E]=a,c[E+1]=a>>>8,c[E+2]=255-c[E],c[E+3]=255-c[E+1],E+=4,c.set(new Uint8Array(n.buffer,i,a),E),g+(a+4<<3)},o.F.getTrees=function(){for(var n=o.F.U,i=o.F._hufTree(n.lhst,n.ltree,15),a=o.F._hufTree(n.dhst,n.dtree,15),c=[],g=o.F._lenCodes(n.ltree,c),E=[],s=o.F._lenCodes(n.dtree,E),l=0;l<c.length;l+=2)n.ihst[c[l]]++;for(l=0;l<E.length;l+=2)n.ihst[E[l]]++;for(var u=o.F._hufTree(n.ihst,n.itree,7),f=19;f>4&&n.itree[1+(n.ordr[f-1]<<1)]==0;)f--;return[i,a,u,g,s,f,c,E]},o.F.getSecond=function(n){for(var i=[],a=0;a<n.length;a+=2)i.push(n[a+1]);return i},o.F.nonZero=function(n){for(var i="",a=0;a<n.length;a+=2)n[a+1]!=0&&(i+=(a>>1)+",");return i},o.F.contSize=function(n,i){for(var a=0,c=0;c<i.length;c++)a+=i[c]*n[1+(c<<1)];return a},o.F._codeTiny=function(n,i,a,c){for(var g=0;g<n.length;g+=2){var E=n[g],s=n[g+1];c=o.F._writeLit(E,i,a,c);var l=E==16?2:E==17?3:7;E>15&&(o.F._putsE(a,c,s,l),c+=l)}return c},o.F._lenCodes=function(n,i){for(var a=n.length;a!=2&&n[a-1]==0;)a-=2;for(var c=0;c<a;c+=2){var g=n[c+1],E=c+3<a?n[c+3]:-1,s=c+5<a?n[c+5]:-1,l=c==0?-1:n[c-1];if(g==0&&E==g&&s==g){for(var u=c+5;u+2<a&&n[u+2]==g;)u+=2;(f=Math.min(u+1-c>>>1,138))<11?i.push(17,f-3):i.push(18,f-11),c+=2*f-2}else if(g==l&&E==g&&s==g){for(u=c+5;u+2<a&&n[u+2]==g;)u+=2;var f=Math.min(u+1-c>>>1,6);i.push(16,f-3),c+=2*f-2}else i.push(g,0)}return a>>>1},o.F._hufTree=function(n,i,a){var c=[],g=n.length,E=i.length,s=0;for(s=0;s<E;s+=2)i[s]=0,i[s+1]=0;for(s=0;s<g;s++)n[s]!=0&&c.push({lit:s,f:n[s]});var l=c.length,u=c.slice(0);if(l==0)return 0;if(l==1){var f=c[0].lit;return u=f==0?1:0,i[1+(f<<1)]=1,i[1+(u<<1)]=1,1}c.sort((function(O,N){return O.f-N.f}));var x=c[0],y=c[1],I=0,T=1,D=2;for(c[0]={lit:-1,f:x.f+y.f,l:x,r:y,d:0};T!=l-1;)x=I!=T&&(D==l||c[I].f<c[D].f)?c[I++]:c[D++],y=I!=T&&(D==l||c[I].f<c[D].f)?c[I++]:c[D++],c[T++]={lit:-1,f:x.f+y.f,l:x,r:y};var v=o.F.setDepth(c[T-1],0);for(v>a&&(o.F.restrictDepth(u,a,v),v=a),s=0;s<l;s++)i[1+(u[s].lit<<1)]=u[s].d;return v},o.F.setDepth=function(n,i){return n.lit!=-1?(n.d=i,i):Math.max(o.F.setDepth(n.l,i+1),o.F.setDepth(n.r,i+1))},o.F.restrictDepth=function(n,i,a){var c=0,g=1<<a-i,E=0;for(n.sort((function(l,u){return u.d==l.d?l.f-u.f:u.d-l.d})),c=0;c<n.length&&n[c].d>i;c++){var s=n[c].d;n[c].d=i,E+=g-(1<<a-s)}for(E>>>=a-i;E>0;)(s=n[c].d)<i?(n[c].d++,E-=1<<i-s-1):c++;for(;c>=0;c--)n[c].d==i&&E<0&&(n[c].d--,E++);E!=0&&console.log("debt left")},o.F._goodIndex=function(n,i){var a=0;return i[16|a]<=n&&(a|=16),i[8|a]<=n&&(a|=8),i[4|a]<=n&&(a|=4),i[2|a]<=n&&(a|=2),i[1|a]<=n&&(a|=1),a},o.F._writeLit=function(n,i,a,c){return o.F._putsF(a,c,i[n<<1]),c+i[1+(n<<1)]},o.F.inflate=function(n,i){var a=Uint8Array;if(n[0]==3&&n[1]==0)return i||new a(0);var c=o.F,g=c._bitsF,E=c._bitsE,s=c._decodeTiny,l=c.makeCodes,u=c.codes2map,f=c._get17,x=c.U,y=i==null;y&&(i=new a(n.length>>>2<<3));for(var I,T,D=0,v=0,O=0,N=0,S=0,M=0,p=0,m=0,F=0;D==0;)if(D=g(n,F,1),v=g(n,F+1,2),F+=3,v!=0){if(y&&(i=o.F._check(i,m+(1<<17))),v==1&&(I=x.flmap,T=x.fdmap,M=511,p=31),v==2){O=E(n,F,5)+257,N=E(n,F+5,5)+1,S=E(n,F+10,4)+4,F+=14;for(var P=0;P<38;P+=2)x.itree[P]=0,x.itree[P+1]=0;var _=1;for(P=0;P<S;P++){var b=E(n,F+3*P,3);x.itree[1+(x.ordr[P]<<1)]=b,b>_&&(_=b)}F+=3*S,l(x.itree,_),u(x.itree,_,x.imap),I=x.lmap,T=x.dmap,F=s(x.imap,(1<<_)-1,O+N,n,F,x.ttree);var A=c._copyOut(x.ttree,0,O,x.ltree);M=(1<<A)-1;var C=c._copyOut(x.ttree,O,N,x.dtree);p=(1<<C)-1,l(x.ltree,A),u(x.ltree,A,I),l(x.dtree,C),u(x.dtree,C,T)}for(;;){var h=I[f(n,F)&M];F+=15&h;var d=h>>>4;if(!(d>>>8))i[m++]=d;else{if(d==256)break;var L=m+d-254;if(d>264){var R=x.ldef[d-257];L=m+(R>>>3)+E(n,F,7&R),F+=7&R}var U=T[f(n,F)&p];F+=15&U;var z=U>>>4,B=x.ddef[z],H=(B>>>4)+g(n,F,15&B);for(F+=15&B,y&&(i=o.F._check(i,m+(1<<17)));m<L;)i[m]=i[m++-H],i[m]=i[m++-H],i[m]=i[m++-H],i[m]=i[m++-H];m=L}}}else{(7&F)!=0&&(F+=8-(7&F));var k=4+(F>>>3),w=n[k-4]|n[k-3]<<8;y&&(i=o.F._check(i,m+w)),i.set(new a(n.buffer,n.byteOffset+k,w),m),F=k+w<<3,m+=w}return i.length==m?i:i.slice(0,m)},o.F._check=function(n,i){var a=n.length;if(i<=a)return n;var c=new Uint8Array(Math.max(a<<1,i));return c.set(n,0),c},o.F._decodeTiny=function(n,i,a,c,g,E){for(var s=o.F._bitsE,l=o.F._get17,u=0;u<a;){var f=n[l(c,g)&i];g+=15&f;var x=f>>>4;if(x<=15)E[u]=x,u++;else{var y=0,I=0;x==16?(I=3+s(c,g,2),g+=2,y=E[u-1]):x==17?(I=3+s(c,g,3),g+=3):x==18&&(I=11+s(c,g,7),g+=7);for(var T=u+I;u<T;)E[u]=y,u++}}return g},o.F._copyOut=function(n,i,a,c){for(var g=0,E=0,s=c.length>>>1;E<a;){var l=n[E+i];c[E<<1]=0,c[1+(E<<1)]=l,l>g&&(g=l),E++}for(;E<s;)c[E<<1]=0,c[1+(E<<1)]=0,E++;return g},o.F.makeCodes=function(n,i){for(var a,c,g,E,s=o.F.U,l=n.length,u=s.bl_count,f=0;f<=i;f++)u[f]=0;for(f=1;f<l;f+=2)u[n[f]]++;var x=s.next_code;for(a=0,u[0]=0,c=1;c<=i;c++)a=a+u[c-1]<<1,x[c]=a;for(g=0;g<l;g+=2)(E=n[g+1])!=0&&(n[g]=x[E],x[E]++)},o.F.codes2map=function(n,i,a){for(var c=n.length,g=o.F.U.rev15,E=0;E<c;E+=2)if(n[E+1]!=0)for(var s=E>>1,l=n[E+1],u=s<<4|l,f=i-l,x=n[E]<<f,y=x+(1<<f);x!=y;)a[g[x]>>>15-i]=u,x++},o.F.revCodes=function(n,i){for(var a=o.F.U.rev15,c=15-i,g=0;g<n.length;g+=2){var E=n[g]<<i-n[g+1];n[g]=a[E]>>>c}},o.F._putsE=function(n,i,a){a<<=7&i;var c=i>>>3;n[c]|=a,n[c+1]|=a>>>8},o.F._putsF=function(n,i,a){a<<=7&i;var c=i>>>3;n[c]|=a,n[c+1]|=a>>>8,n[c+2]|=a>>>16},o.F._bitsE=function(n,i,a){return(n[i>>>3]|n[1+(i>>>3)]<<8)>>>(7&i)&(1<<a)-1},o.F._bitsF=function(n,i,a){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16)>>>(7&i)&(1<<a)-1},o.F._get17=function(n,i){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16)>>>(7&i)},o.F._get25=function(n,i){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16|n[3+(i>>>3)]<<24)>>>(7&i)},o.F.U=(t=Uint16Array,r=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var n=o.F.U,i=0;i<32768;i++){var a=i;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,n.rev15[i]=(a>>>16|a<<16)>>>17}function c(g,E,s){for(;E--!=0;)g.push(0,s)}for(i=0;i<32;i++)n.ldef[i]=n.of0[i]<<3|n.exb[i],n.ddef[i]=n.df0[i]<<4|n.dxb[i];c(n.fltree,144,8),c(n.fltree,112,9),c(n.fltree,24,7),c(n.fltree,8,8),o.F.makeCodes(n.fltree,9),o.F.codes2map(n.fltree,9,n.flmap),o.F.revCodes(n.fltree,9),c(n.fdtree,32,5),o.F.makeCodes(n.fdtree,5),o.F.codes2map(n.fdtree,5,n.fdmap),o.F.revCodes(n.fdtree,5),c(n.itree,19,0),c(n.ltree,286,0),c(n.dtree,30,0),c(n.ttree,320,0)})()})();var ao=io({__proto__:null,default:xt},[xt]);const _e=(function(){var e={nextZero(s,l){for(;s[l]!=0;)l++;return l},readUshort:(s,l)=>s[l]<<8|s[l+1],writeUshort(s,l,u){s[l]=u>>8&255,s[l+1]=255&u},readUint:(s,l)=>16777216*s[l]+(s[l+1]<<16|s[l+2]<<8|s[l+3]),writeUint(s,l,u){s[l]=u>>24&255,s[l+1]=u>>16&255,s[l+2]=u>>8&255,s[l+3]=255&u},readASCII(s,l,u){let f="";for(let x=0;x<u;x++)f+=String.fromCharCode(s[l+x]);return f},writeASCII(s,l,u){for(let f=0;f<u.length;f++)s[l+f]=u.charCodeAt(f)},readBytes(s,l,u){const f=[];for(let x=0;x<u;x++)f.push(s[l+x]);return f},pad:s=>s.length<2?`0${s}`:s,readUTF8(s,l,u){let f,x="";for(let y=0;y<u;y++)x+=`%${e.pad(s[l+y].toString(16))}`;try{f=decodeURIComponent(x)}catch{return e.readASCII(s,l,u)}return f}};function t(s,l,u,f){const x=l*u,y=i(f),I=Math.ceil(l*y/8),T=new Uint8Array(4*x),D=new Uint32Array(T.buffer),{ctype:v}=f,{depth:O}=f,N=e.readUshort;if(v==6){const R=x<<2;if(O==8)for(var S=0;S<R;S+=4)T[S]=s[S],T[S+1]=s[S+1],T[S+2]=s[S+2],T[S+3]=s[S+3];if(O==16)for(S=0;S<R;S++)T[S]=s[S<<1]}else if(v==2){const R=f.tabs.tRNS;if(R==null){if(O==8)for(S=0;S<x;S++){var M=3*S;D[S]=255<<24|s[M+2]<<16|s[M+1]<<8|s[M]}if(O==16)for(S=0;S<x;S++)M=6*S,D[S]=255<<24|s[M+4]<<16|s[M+2]<<8|s[M]}else{var p=R[0];const U=R[1],z=R[2];if(O==8)for(S=0;S<x;S++){var m=S<<2;M=3*S,D[S]=255<<24|s[M+2]<<16|s[M+1]<<8|s[M],s[M]==p&&s[M+1]==U&&s[M+2]==z&&(T[m+3]=0)}if(O==16)for(S=0;S<x;S++)m=S<<2,M=6*S,D[S]=255<<24|s[M+4]<<16|s[M+2]<<8|s[M],N(s,M)==p&&N(s,M+2)==U&&N(s,M+4)==z&&(T[m+3]=0)}}else if(v==3){const R=f.tabs.PLTE,U=f.tabs.tRNS,z=U?U.length:0;if(O==1)for(var F=0;F<u;F++){var P=F*I,_=F*l;for(S=0;S<l;S++){m=_+S<<2;var b=3*(A=s[P+(S>>3)]>>7-((7&S)<<0)&1);T[m]=R[b],T[m+1]=R[b+1],T[m+2]=R[b+2],T[m+3]=A<z?U[A]:255}}if(O==2)for(F=0;F<u;F++)for(P=F*I,_=F*l,S=0;S<l;S++)m=_+S<<2,b=3*(A=s[P+(S>>2)]>>6-((3&S)<<1)&3),T[m]=R[b],T[m+1]=R[b+1],T[m+2]=R[b+2],T[m+3]=A<z?U[A]:255;if(O==4)for(F=0;F<u;F++)for(P=F*I,_=F*l,S=0;S<l;S++)m=_+S<<2,b=3*(A=s[P+(S>>1)]>>4-((1&S)<<2)&15),T[m]=R[b],T[m+1]=R[b+1],T[m+2]=R[b+2],T[m+3]=A<z?U[A]:255;if(O==8)for(S=0;S<x;S++){var A;m=S<<2,b=3*(A=s[S]),T[m]=R[b],T[m+1]=R[b+1],T[m+2]=R[b+2],T[m+3]=A<z?U[A]:255}}else if(v==4){if(O==8)for(S=0;S<x;S++){m=S<<2;var C=s[h=S<<1];T[m]=C,T[m+1]=C,T[m+2]=C,T[m+3]=s[h+1]}if(O==16)for(S=0;S<x;S++){var h;m=S<<2,C=s[h=S<<2],T[m]=C,T[m+1]=C,T[m+2]=C,T[m+3]=s[h+2]}}else if(v==0)for(p=f.tabs.tRNS?f.tabs.tRNS:-1,F=0;F<u;F++){const R=F*I,U=F*l;if(O==1)for(var d=0;d<l;d++){var L=(C=255*(s[R+(d>>>3)]>>>7-(7&d)&1))==255*p?0:255;D[U+d]=L<<24|C<<16|C<<8|C}else if(O==2)for(d=0;d<l;d++)L=(C=85*(s[R+(d>>>2)]>>>6-((3&d)<<1)&3))==85*p?0:255,D[U+d]=L<<24|C<<16|C<<8|C;else if(O==4)for(d=0;d<l;d++)L=(C=17*(s[R+(d>>>1)]>>>4-((1&d)<<2)&15))==17*p?0:255,D[U+d]=L<<24|C<<16|C<<8|C;else if(O==8)for(d=0;d<l;d++)L=(C=s[R+d])==p?0:255,D[U+d]=L<<24|C<<16|C<<8|C;else if(O==16)for(d=0;d<l;d++)C=s[R+(d<<1)],L=N(s,R+(d<<1))==p?0:255,D[U+d]=L<<24|C<<16|C<<8|C}return T}function r(s,l,u,f){const x=i(s),y=Math.ceil(u*x/8),I=new Uint8Array((y+1+s.interlace)*f);return l=s.tabs.CgBI?n(l,I):o(l,I),s.interlace==0?l=a(l,s,0,u,f):s.interlace==1&&(l=(function(D,v){const O=v.width,N=v.height,S=i(v),M=S>>3,p=Math.ceil(O*S/8),m=new Uint8Array(N*p);let F=0;const P=[0,0,4,0,2,0,1],_=[0,4,0,2,0,1,0],b=[8,8,8,4,4,2,2],A=[8,8,4,4,2,2,1];let C=0;for(;C<7;){const d=b[C],L=A[C];let R=0,U=0,z=P[C];for(;z<N;)z+=d,U++;let B=_[C];for(;B<O;)B+=L,R++;const H=Math.ceil(R*S/8);a(D,v,F,R,U);let k=0,w=P[C];for(;w<N;){let X=_[C],Q=F+k*H<<3;for(;X<O;){var h;if(S==1&&(h=(h=D[Q>>3])>>7-(7&Q)&1,m[w*p+(X>>3)]|=h<<7-((7&X)<<0)),S==2&&(h=(h=D[Q>>3])>>6-(7&Q)&3,m[w*p+(X>>2)]|=h<<6-((3&X)<<1)),S==4&&(h=(h=D[Q>>3])>>4-(7&Q)&15,m[w*p+(X>>1)]|=h<<4-((1&X)<<2)),S>=8){const K=w*p+X*M;for(let W=0;W<M;W++)m[K+W]=D[(Q>>3)+W]}Q+=S,X+=L}k++,w+=d}R*U!=0&&(F+=U*(1+H)),C+=1}return m})(l,s)),l}function o(s,l){return n(new Uint8Array(s.buffer,2,s.length-6),l)}var n=(function(){const s={H:{}};return s.H.N=function(l,u){const f=Uint8Array;let x,y,I=0,T=0,D=0,v=0,O=0,N=0,S=0,M=0,p=0;if(l[0]==3&&l[1]==0)return u||new f(0);const m=s.H,F=m.b,P=m.e,_=m.R,b=m.n,A=m.A,C=m.Z,h=m.m,d=u==null;for(d&&(u=new f(l.length>>>2<<5));I==0;)if(I=F(l,p,1),T=F(l,p+1,2),p+=3,T!=0){if(d&&(u=s.H.W(u,M+(1<<17))),T==1&&(x=h.J,y=h.h,N=511,S=31),T==2){D=P(l,p,5)+257,v=P(l,p+5,5)+1,O=P(l,p+10,4)+4,p+=14;let R=1;for(var L=0;L<38;L+=2)h.Q[L]=0,h.Q[L+1]=0;for(L=0;L<O;L++){const B=P(l,p+3*L,3);h.Q[1+(h.X[L]<<1)]=B,B>R&&(R=B)}p+=3*O,b(h.Q,R),A(h.Q,R,h.u),x=h.w,y=h.d,p=_(h.u,(1<<R)-1,D+v,l,p,h.v);const U=m.V(h.v,0,D,h.C);N=(1<<U)-1;const z=m.V(h.v,D,v,h.D);S=(1<<z)-1,b(h.C,U),A(h.C,U,x),b(h.D,z),A(h.D,z,y)}for(;;){const R=x[C(l,p)&N];p+=15&R;const U=R>>>4;if(!(U>>>8))u[M++]=U;else{if(U==256)break;{let z=M+U-254;if(U>264){const X=h.q[U-257];z=M+(X>>>3)+P(l,p,7&X),p+=7&X}const B=y[C(l,p)&S];p+=15&B;const H=B>>>4,k=h.c[H],w=(k>>>4)+F(l,p,15&k);for(p+=15&k;M<z;)u[M]=u[M++-w],u[M]=u[M++-w],u[M]=u[M++-w],u[M]=u[M++-w];M=z}}}}else{(7&p)!=0&&(p+=8-(7&p));const R=4+(p>>>3),U=l[R-4]|l[R-3]<<8;d&&(u=s.H.W(u,M+U)),u.set(new f(l.buffer,l.byteOffset+R,U),M),p=R+U<<3,M+=U}return u.length==M?u:u.slice(0,M)},s.H.W=function(l,u){const f=l.length;if(u<=f)return l;const x=new Uint8Array(f<<1);return x.set(l,0),x},s.H.R=function(l,u,f,x,y,I){const T=s.H.e,D=s.H.Z;let v=0;for(;v<f;){const O=l[D(x,y)&u];y+=15&O;const N=O>>>4;if(N<=15)I[v]=N,v++;else{let S=0,M=0;N==16?(M=3+T(x,y,2),y+=2,S=I[v-1]):N==17?(M=3+T(x,y,3),y+=3):N==18&&(M=11+T(x,y,7),y+=7);const p=v+M;for(;v<p;)I[v]=S,v++}}return y},s.H.V=function(l,u,f,x){let y=0,I=0;const T=x.length>>>1;for(;I<f;){const D=l[I+u];x[I<<1]=0,x[1+(I<<1)]=D,D>y&&(y=D),I++}for(;I<T;)x[I<<1]=0,x[1+(I<<1)]=0,I++;return y},s.H.n=function(l,u){const f=s.H.m,x=l.length;let y,I,T,D;const v=f.j;for(var O=0;O<=u;O++)v[O]=0;for(O=1;O<x;O+=2)v[l[O]]++;const N=f.K;for(y=0,v[0]=0,I=1;I<=u;I++)y=y+v[I-1]<<1,N[I]=y;for(T=0;T<x;T+=2)D=l[T+1],D!=0&&(l[T]=N[D],N[D]++)},s.H.A=function(l,u,f){const x=l.length,y=s.H.m.r;for(let I=0;I<x;I+=2)if(l[I+1]!=0){const T=I>>1,D=l[I+1],v=T<<4|D,O=u-D;let N=l[I]<<O;const S=N+(1<<O);for(;N!=S;)f[y[N]>>>15-u]=v,N++}},s.H.l=function(l,u){const f=s.H.m.r,x=15-u;for(let y=0;y<l.length;y+=2){const I=l[y]<<u-l[y+1];l[y]=f[I]>>>x}},s.H.M=function(l,u,f){f<<=7&u;const x=u>>>3;l[x]|=f,l[x+1]|=f>>>8},s.H.I=function(l,u,f){f<<=7&u;const x=u>>>3;l[x]|=f,l[x+1]|=f>>>8,l[x+2]|=f>>>16},s.H.e=function(l,u,f){return(l[u>>>3]|l[1+(u>>>3)]<<8)>>>(7&u)&(1<<f)-1},s.H.b=function(l,u,f){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16)>>>(7&u)&(1<<f)-1},s.H.Z=function(l,u){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16)>>>(7&u)},s.H.i=function(l,u){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16|l[3+(u>>>3)]<<24)>>>(7&u)},s.H.m=(function(){const l=Uint16Array,u=Uint32Array;return{K:new l(16),j:new l(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new l(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new u(32),J:new l(512),_:[],h:new l(32),$:[],w:new l(32768),C:[],v:[],d:new l(32768),D:[],u:new l(512),Q:[],r:new l(32768),s:new u(286),Y:new u(30),a:new u(19),t:new u(15e3),k:new l(65536),g:new l(32768)}})(),(function(){const l=s.H.m;for(var u=0;u<32768;u++){let x=u;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,l.r[u]=(x>>>16|x<<16)>>>17}function f(x,y,I){for(;y--!=0;)x.push(0,I)}for(u=0;u<32;u++)l.q[u]=l.S[u]<<3|l.T[u],l.c[u]=l.p[u]<<4|l.z[u];f(l._,144,8),f(l._,112,9),f(l._,24,7),f(l._,8,8),s.H.n(l._,9),s.H.A(l._,9,l.J),s.H.l(l._,9),f(l.$,32,5),s.H.n(l.$,5),s.H.A(l.$,5,l.h),s.H.l(l.$,5),f(l.Q,19,0),f(l.C,286,0),f(l.D,30,0),f(l.v,320,0)})(),s.H.N})();function i(s){return[1,null,3,1,2,null,4][s.ctype]*s.depth}function a(s,l,u,f,x){let y=i(l);const I=Math.ceil(f*y/8);let T,D;y=Math.ceil(y/8);let v=s[u],O=0;if(v>1&&(s[u]=[0,0,1][v-2]),v==3)for(O=y;O<I;O++)s[O+1]=s[O+1]+(s[O+1-y]>>>1)&255;for(let N=0;N<x;N++)if(T=u+N*I,D=T+N+1,v=s[D-1],O=0,v==0)for(;O<I;O++)s[T+O]=s[D+O];else if(v==1){for(;O<y;O++)s[T+O]=s[D+O];for(;O<I;O++)s[T+O]=s[D+O]+s[T+O-y]}else if(v==2)for(;O<I;O++)s[T+O]=s[D+O]+s[T+O-I];else if(v==3){for(;O<y;O++)s[T+O]=s[D+O]+(s[T+O-I]>>>1);for(;O<I;O++)s[T+O]=s[D+O]+(s[T+O-I]+s[T+O-y]>>>1)}else{for(;O<y;O++)s[T+O]=s[D+O]+c(0,s[T+O-I],0);for(;O<I;O++)s[T+O]=s[D+O]+c(s[T+O-y],s[T+O-I],s[T+O-y-I])}return s}function c(s,l,u){const f=s+l-u,x=f-s,y=f-l,I=f-u;return x*x<=y*y&&x*x<=I*I?s:y*y<=I*I?l:u}function g(s,l,u){u.width=e.readUint(s,l),l+=4,u.height=e.readUint(s,l),l+=4,u.depth=s[l],l++,u.ctype=s[l],l++,u.compress=s[l],l++,u.filter=s[l],l++,u.interlace=s[l],l++}function E(s,l,u,f,x,y,I,T,D){const v=Math.min(l,x),O=Math.min(u,y);let N=0,S=0;for(let C=0;C<O;C++)for(let h=0;h<v;h++)if(I>=0&&T>=0?(N=C*l+h<<2,S=(T+C)*x+I+h<<2):(N=(-T+C)*l-I+h<<2,S=C*x+h<<2),D==0)f[S]=s[N],f[S+1]=s[N+1],f[S+2]=s[N+2],f[S+3]=s[N+3];else if(D==1){var M=s[N+3]*.00392156862745098,p=s[N]*M,m=s[N+1]*M,F=s[N+2]*M,P=f[S+3]*(1/255),_=f[S]*P,b=f[S+1]*P,A=f[S+2]*P;const d=1-M,L=M+P*d,R=L==0?0:1/L;f[S+3]=255*L,f[S+0]=(p+_*d)*R,f[S+1]=(m+b*d)*R,f[S+2]=(F+A*d)*R}else if(D==2)M=s[N+3],p=s[N],m=s[N+1],F=s[N+2],P=f[S+3],_=f[S],b=f[S+1],A=f[S+2],M==P&&p==_&&m==b&&F==A?(f[S]=0,f[S+1]=0,f[S+2]=0,f[S+3]=0):(f[S]=p,f[S+1]=m,f[S+2]=F,f[S+3]=M);else if(D==3){if(M=s[N+3],p=s[N],m=s[N+1],F=s[N+2],P=f[S+3],_=f[S],b=f[S+1],A=f[S+2],M==P&&p==_&&m==b&&F==A)continue;if(M<220&&P>20)return!1}return!0}return{decode:function(l){const u=new Uint8Array(l);let f=8;const x=e,y=x.readUshort,I=x.readUint,T={tabs:{},frames:[]},D=new Uint8Array(u.length);let v,O=0,N=0;const S=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(u[M]!=S[M])throw"The input is not a PNG file!";for(;f<u.length;){const C=x.readUint(u,f);f+=4;const h=x.readASCII(u,f,4);if(f+=4,h=="IHDR")g(u,f,T);else if(h=="iCCP"){for(var p=f;u[p]!=0;)p++;x.readASCII(u,f,p-f),u[p+1];const d=u.slice(p+2,f+C);let L=null;try{L=o(d)}catch{L=n(d)}T.tabs[h]=L}else if(h=="CgBI")T.tabs[h]=u.slice(f,f+4);else if(h=="IDAT"){for(M=0;M<C;M++)D[O+M]=u[f+M];O+=C}else if(h=="acTL")T.tabs[h]={num_frames:I(u,f),num_plays:I(u,f+4)},v=new Uint8Array(u.length);else if(h=="fcTL"){N!=0&&((A=T.frames[T.frames.length-1]).data=r(T,v.slice(0,N),A.rect.width,A.rect.height),N=0);const d={x:I(u,f+12),y:I(u,f+16),width:I(u,f+4),height:I(u,f+8)};let L=y(u,f+22);L=y(u,f+20)/(L==0?100:L);const R={rect:d,delay:Math.round(1e3*L),dispose:u[f+24],blend:u[f+25]};T.frames.push(R)}else if(h=="fdAT"){for(M=0;M<C-4;M++)v[N+M]=u[f+M+4];N+=C-4}else if(h=="pHYs")T.tabs[h]=[x.readUint(u,f),x.readUint(u,f+4),u[f+8]];else if(h=="cHRM")for(T.tabs[h]=[],M=0;M<8;M++)T.tabs[h].push(x.readUint(u,f+4*M));else if(h=="tEXt"||h=="zTXt"){T.tabs[h]==null&&(T.tabs[h]={});var m=x.nextZero(u,f),F=x.readASCII(u,f,m-f),P=f+C-m-1;if(h=="tEXt")b=x.readASCII(u,m+1,P);else{var _=o(u.slice(m+2,m+2+P));b=x.readUTF8(_,0,_.length)}T.tabs[h][F]=b}else if(h=="iTXt"){T.tabs[h]==null&&(T.tabs[h]={}),m=0,p=f,m=x.nextZero(u,p),F=x.readASCII(u,p,m-p);const d=u[p=m+1];var b;u[p+1],p+=2,m=x.nextZero(u,p),x.readASCII(u,p,m-p),p=m+1,m=x.nextZero(u,p),x.readUTF8(u,p,m-p),P=C-((p=m+1)-f),d==0?b=x.readUTF8(u,p,P):(_=o(u.slice(p,p+P)),b=x.readUTF8(_,0,_.length)),T.tabs[h][F]=b}else if(h=="PLTE")T.tabs[h]=x.readBytes(u,f,C);else if(h=="hIST"){const d=T.tabs.PLTE.length/3;for(T.tabs[h]=[],M=0;M<d;M++)T.tabs[h].push(y(u,f+2*M))}else if(h=="tRNS")T.ctype==3?T.tabs[h]=x.readBytes(u,f,C):T.ctype==0?T.tabs[h]=y(u,f):T.ctype==2&&(T.tabs[h]=[y(u,f),y(u,f+2),y(u,f+4)]);else if(h=="gAMA")T.tabs[h]=x.readUint(u,f)/1e5;else if(h=="sRGB")T.tabs[h]=u[f];else if(h=="bKGD")T.ctype==0||T.ctype==4?T.tabs[h]=[y(u,f)]:T.ctype==2||T.ctype==6?T.tabs[h]=[y(u,f),y(u,f+2),y(u,f+4)]:T.ctype==3&&(T.tabs[h]=u[f]);else if(h=="IEND")break;f+=C,x.readUint(u,f),f+=4}var A;return N!=0&&((A=T.frames[T.frames.length-1]).data=r(T,v.slice(0,N),A.rect.width,A.rect.height)),T.data=r(T,D,T.width,T.height),delete T.compress,delete T.interlace,delete T.filter,T},toRGBA8:function(l){const u=l.width,f=l.height;if(l.tabs.acTL==null)return[t(l.data,u,f,l).buffer];const x=[];l.frames[0].data==null&&(l.frames[0].data=l.data);const y=u*f*4,I=new Uint8Array(y),T=new Uint8Array(y),D=new Uint8Array(y);for(let O=0;O<l.frames.length;O++){const N=l.frames[O],S=N.rect.x,M=N.rect.y,p=N.rect.width,m=N.rect.height,F=t(N.data,p,m,l);if(O!=0)for(var v=0;v<y;v++)D[v]=I[v];if(N.blend==0?E(F,p,m,I,u,f,S,M,0):N.blend==1&&E(F,p,m,I,u,f,S,M,1),x.push(I.buffer.slice(0)),N.dispose!=0){if(N.dispose==1)E(T,p,m,I,u,f,S,M,0);else if(N.dispose==2)for(v=0;v<y;v++)I[v]=D[v]}}return x},_paeth:c,_copyTile:E,_bin:e}})();(function(){const{_copyTile:e}=_e,{_bin:t}=_e,r=_e._paeth;var o={table:(function(){const p=new Uint32Array(256);for(let m=0;m<256;m++){let F=m;for(let P=0;P<8;P++)1&F?F=3988292384^F>>>1:F>>>=1;p[m]=F}return p})(),update(p,m,F,P){for(let _=0;_<P;_++)p=o.table[255&(p^m[F+_])]^p>>>8;return p},crc:(p,m,F)=>4294967295^o.update(4294967295,p,m,F)};function n(p,m,F,P){m[F]+=p[0]*P>>4,m[F+1]+=p[1]*P>>4,m[F+2]+=p[2]*P>>4,m[F+3]+=p[3]*P>>4}function i(p){return Math.max(0,Math.min(255,p))}function a(p,m){const F=p[0]-m[0],P=p[1]-m[1],_=p[2]-m[2],b=p[3]-m[3];return F*F+P*P+_*_+b*b}function c(p,m,F,P,_,b,A){A==null&&(A=1);const C=P.length,h=[];for(var d=0;d<C;d++){const w=P[d];h.push([w>>>0&255,w>>>8&255,w>>>16&255,w>>>24&255])}for(d=0;d<C;d++){let w=4294967295;for(var L=0,R=0;R<C;R++){var U=a(h[d],h[R]);R!=d&&U<w&&(w=U,L=R)}}const z=new Uint32Array(_.buffer),B=new Int16Array(m*F*4),H=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(d=0;d<H.length;d++)H[d]=255*((H[d]+.5)/16-.5);for(let w=0;w<F;w++)for(let X=0;X<m;X++){var k;d=4*(w*m+X),A!=2?k=[i(p[d]+B[d]),i(p[d+1]+B[d+1]),i(p[d+2]+B[d+2]),i(p[d+3]+B[d+3])]:(U=H[4*(3&w)+(3&X)],k=[i(p[d]+U),i(p[d+1]+U),i(p[d+2]+U),i(p[d+3]+U)]),L=0;let Q=16777215;for(R=0;R<C;R++){const $=a(k,h[R]);$<Q&&(Q=$,L=R)}const K=h[L],W=[k[0]-K[0],k[1]-K[1],k[2]-K[2],k[3]-K[3]];A==1&&(X!=m-1&&n(W,B,d+4,7),w!=F-1&&(X!=0&&n(W,B,d+4*m-4,3),n(W,B,d+4*m,5),X!=m-1&&n(W,B,d+4*m+4,1))),b[d>>2]=L,z[d>>2]=P[L]}}function g(p,m,F,P,_){_==null&&(_={});const{crc:b}=o,A=t.writeUint,C=t.writeUshort,h=t.writeASCII;let d=8;const L=p.frames.length>1;let R,U=!1,z=33+(L?20:0);if(_.sRGB!=null&&(z+=13),_.pHYs!=null&&(z+=21),_.iCCP!=null&&(R=pako.deflate(_.iCCP),z+=21+R.length+4),p.ctype==3){for(var B=p.plte.length,H=0;H<B;H++)p.plte[H]>>>24!=255&&(U=!0);z+=8+3*B+4+(U?8+1*B+4:0)}for(var k=0;k<p.frames.length;k++)L&&(z+=38),z+=(K=p.frames[k]).cimg.length+12,k!=0&&(z+=4);z+=12;const w=new Uint8Array(z),X=[137,80,78,71,13,10,26,10];for(H=0;H<8;H++)w[H]=X[H];if(A(w,d,13),d+=4,h(w,d,"IHDR"),d+=4,A(w,d,m),d+=4,A(w,d,F),d+=4,w[d]=p.depth,d++,w[d]=p.ctype,d++,w[d]=0,d++,w[d]=0,d++,w[d]=0,d++,A(w,d,b(w,d-17,17)),d+=4,_.sRGB!=null&&(A(w,d,1),d+=4,h(w,d,"sRGB"),d+=4,w[d]=_.sRGB,d++,A(w,d,b(w,d-5,5)),d+=4),_.iCCP!=null){const W=13+R.length;A(w,d,W),d+=4,h(w,d,"iCCP"),d+=4,h(w,d,"ICC profile"),d+=11,d+=2,w.set(R,d),d+=R.length,A(w,d,b(w,d-(W+4),W+4)),d+=4}if(_.pHYs!=null&&(A(w,d,9),d+=4,h(w,d,"pHYs"),d+=4,A(w,d,_.pHYs[0]),d+=4,A(w,d,_.pHYs[1]),d+=4,w[d]=_.pHYs[2],d++,A(w,d,b(w,d-13,13)),d+=4),L&&(A(w,d,8),d+=4,h(w,d,"acTL"),d+=4,A(w,d,p.frames.length),d+=4,A(w,d,_.loop!=null?_.loop:0),d+=4,A(w,d,b(w,d-12,12)),d+=4),p.ctype==3){for(A(w,d,3*(B=p.plte.length)),d+=4,h(w,d,"PLTE"),d+=4,H=0;H<B;H++){const W=3*H,$=p.plte[H],te=255&$,ie=$>>>8&255,Be=$>>>16&255;w[d+W+0]=te,w[d+W+1]=ie,w[d+W+2]=Be}if(d+=3*B,A(w,d,b(w,d-3*B-4,3*B+4)),d+=4,U){for(A(w,d,B),d+=4,h(w,d,"tRNS"),d+=4,H=0;H<B;H++)w[d+H]=p.plte[H]>>>24&255;d+=B,A(w,d,b(w,d-B-4,B+4)),d+=4}}let Q=0;for(k=0;k<p.frames.length;k++){var K=p.frames[k];L&&(A(w,d,26),d+=4,h(w,d,"fcTL"),d+=4,A(w,d,Q++),d+=4,A(w,d,K.rect.width),d+=4,A(w,d,K.rect.height),d+=4,A(w,d,K.rect.x),d+=4,A(w,d,K.rect.y),d+=4,C(w,d,P[k]),d+=2,C(w,d,1e3),d+=2,w[d]=K.dispose,d++,w[d]=K.blend,d++,A(w,d,b(w,d-30,30)),d+=4);const W=K.cimg;A(w,d,(B=W.length)+(k==0?0:4)),d+=4;const $=d;h(w,d,k==0?"IDAT":"fdAT"),d+=4,k!=0&&(A(w,d,Q++),d+=4),w.set(W,d),d+=B,A(w,d,b(w,$,d-$)),d+=4}return A(w,d,0),d+=4,h(w,d,"IEND"),d+=4,A(w,d,b(w,d-4,4)),d+=4,w.buffer}function E(p,m,F){for(let P=0;P<p.frames.length;P++){const _=p.frames[P];_.rect.width;const b=_.rect.height,A=new Uint8Array(b*_.bpl+b);_.cimg=f(_.img,b,_.bpp,_.bpl,A,m,F)}}function s(p,m,F,P,_){const b=_[0],A=_[1],C=_[2],h=_[3],d=_[4],L=_[5];let R=6,U=8,z=255;for(var B=0;B<p.length;B++){const de=new Uint8Array(p[B]);for(var H=de.length,k=0;k<H;k+=4)z&=de[k+3]}const w=z!=255,X=(function(ne,V,fe,pe,se,Ae){const ae=[];for(var ee=0;ee<ne.length;ee++){const me=new Uint8Array(ne[ee]),ye=new Uint32Array(me.buffer);var Ie;let be=0,Oe=0,Pe=V,je=fe,Pt=pe?1:0;if(ee!=0){const ei=Ae||pe||ee==1||ae[ee-2].dispose!=0?1:2;let Rt=0,cn=1e9;for(let rt=0;rt<ei;rt++){var ve=new Uint8Array(ne[ee-1-rt]);const ti=new Uint32Array(ne[ee-1-rt]);let Me=V,we=fe,Ke=-1,it=-1;for(let ze=0;ze<fe;ze++)for(let $e=0;$e<V;$e++)ye[he=ze*V+$e]!=ti[he]&&($e<Me&&(Me=$e),$e>Ke&&(Ke=$e),ze<we&&(we=ze),ze>it&&(it=ze));Ke==-1&&(Me=we=Ke=it=0),se&&((1&Me)==1&&Me--,(1&we)==1&&we--);const un=(Ke-Me+1)*(it-we+1);un<cn&&(cn=un,Rt=rt,be=Me,Oe=we,Pe=Ke-Me+1,je=it-we+1)}ve=new Uint8Array(ne[ee-1-Rt]),Rt==1&&(ae[ee-1].dispose=2),Ie=new Uint8Array(Pe*je*4),e(ve,V,fe,Ie,Pe,je,-be,-Oe,0),Pt=e(me,V,fe,Ie,Pe,je,-be,-Oe,3)?1:0,Pt==1?u(me,V,fe,Ie,{x:be,y:Oe,width:Pe,height:je}):e(me,V,fe,Ie,Pe,je,-be,-Oe,0)}else Ie=me.slice(0);ae.push({rect:{x:be,y:Oe,width:Pe,height:je},img:Ie,blend:Pt,dispose:0})}if(pe)for(ee=0;ee<ae.length;ee++){if((He=ae[ee]).blend==1)continue;const me=He.rect,ye=ae[ee-1].rect,be=Math.min(me.x,ye.x),Oe=Math.min(me.y,ye.y),Pe={x:be,y:Oe,width:Math.max(me.x+me.width,ye.x+ye.width)-be,height:Math.max(me.y+me.height,ye.y+ye.height)-Oe};ae[ee-1].dispose=1,ee-1!=0&&l(ne,V,fe,ae,ee-1,Pe,se),l(ne,V,fe,ae,ee,Pe,se)}let ft=0;if(ne.length!=1)for(var he=0;he<ae.length;he++){var He;ft+=(He=ae[he]).rect.width*He.rect.height}return ae})(p,m,F,b,A,C),Q={},K=[],W=[];if(P!=0){const de=[];for(k=0;k<X.length;k++)de.push(X[k].img.buffer);const ne=(function(se){let Ae=0;for(var ae=0;ae<se.length;ae++)Ae+=se[ae].byteLength;const ee=new Uint8Array(Ae);let Ie=0;for(ae=0;ae<se.length;ae++){const ve=new Uint8Array(se[ae]),ft=ve.length;for(let he=0;he<ft;he+=4){let He=ve[he],me=ve[he+1],ye=ve[he+2];const be=ve[he+3];be==0&&(He=me=ye=0),ee[Ie+he]=He,ee[Ie+he+1]=me,ee[Ie+he+2]=ye,ee[Ie+he+3]=be}Ie+=ft}return ee.buffer})(de),V=y(ne,P);for(k=0;k<V.plte.length;k++)K.push(V.plte[k].est.rgba);let fe=0;for(k=0;k<X.length;k++){const pe=(te=X[k]).img.length;var $=new Uint8Array(V.inds.buffer,fe>>2,pe>>2);W.push($);const se=new Uint8Array(V.abuf,fe,pe);L&&c(te.img,te.rect.width,te.rect.height,K,se,$),te.img.set(se),fe+=pe}}else for(B=0;B<X.length;B++){var te=X[B];const de=new Uint32Array(te.img.buffer);var ie=te.rect.width;for(H=de.length,$=new Uint8Array(H),W.push($),k=0;k<H;k++){const ne=de[k];if(k!=0&&ne==de[k-1])$[k]=$[k-1];else if(k>ie&&ne==de[k-ie])$[k]=$[k-ie];else{let V=Q[ne];if(V==null&&(Q[ne]=V=K.length,K.push(ne),K.length>=300))break;$[k]=V}}}const Be=K.length;for(Be<=256&&d==0&&(U=Be<=2?1:Be<=4?2:Be<=16?4:8,U=Math.max(U,h)),B=0;B<X.length;B++){(te=X[B]).rect.x,te.rect.y,ie=te.rect.width;const de=te.rect.height;let ne=te.img;new Uint32Array(ne.buffer);let V=4*ie,fe=4;if(Be<=256&&d==0){V=Math.ceil(U*ie/8);var Ce=new Uint8Array(V*de);const pe=W[B];for(let se=0;se<de;se++){k=se*V;const Ae=se*ie;if(U==8)for(var oe=0;oe<ie;oe++)Ce[k+oe]=pe[Ae+oe];else if(U==4)for(oe=0;oe<ie;oe++)Ce[k+(oe>>1)]|=pe[Ae+oe]<<4-4*(1&oe);else if(U==2)for(oe=0;oe<ie;oe++)Ce[k+(oe>>2)]|=pe[Ae+oe]<<6-2*(3&oe);else if(U==1)for(oe=0;oe<ie;oe++)Ce[k+(oe>>3)]|=pe[Ae+oe]<<7-1*(7&oe)}ne=Ce,R=3,fe=1}else if(w==0&&X.length==1){Ce=new Uint8Array(ie*de*3);const pe=ie*de;for(k=0;k<pe;k++){const se=3*k,Ae=4*k;Ce[se]=ne[Ae],Ce[se+1]=ne[Ae+1],Ce[se+2]=ne[Ae+2]}ne=Ce,R=2,fe=3,V=3*ie}te.img=ne,te.bpl=V,te.bpp=fe}return{ctype:R,depth:U,plte:K,frames:X}}function l(p,m,F,P,_,b,A){const C=Uint8Array,h=Uint32Array,d=new C(p[_-1]),L=new h(p[_-1]),R=_+1<p.length?new C(p[_+1]):null,U=new C(p[_]),z=new h(U.buffer);let B=m,H=F,k=-1,w=-1;for(let Q=0;Q<b.height;Q++)for(let K=0;K<b.width;K++){const W=b.x+K,$=b.y+Q,te=$*m+W,ie=z[te];ie==0||P[_-1].dispose==0&&L[te]==ie&&(R==null||R[4*te+3]!=0)||(W<B&&(B=W),W>k&&(k=W),$<H&&(H=$),$>w&&(w=$))}k==-1&&(B=H=k=w=0),A&&((1&B)==1&&B--,(1&H)==1&&H--),b={x:B,y:H,width:k-B+1,height:w-H+1};const X=P[_];X.rect=b,X.blend=1,X.img=new Uint8Array(b.width*b.height*4),P[_-1].dispose==0?(e(d,m,F,X.img,b.width,b.height,-b.x,-b.y,0),u(U,m,F,X.img,b)):e(U,m,F,X.img,b.width,b.height,-b.x,-b.y,0)}function u(p,m,F,P,_){e(p,m,F,P,_.width,_.height,-_.x,-_.y,2)}function f(p,m,F,P,_,b,A){const C=[];let h,d=[0,1,2,3,4];b!=-1?d=[b]:(m*P>5e5||F==1)&&(d=[0]),A&&(h={level:0});const L=ao;for(var R=0;R<d.length;R++){for(let B=0;B<m;B++)x(_,p,B,P,F,d[R]);C.push(L.deflate(_,h))}let U,z=1e9;for(R=0;R<C.length;R++)C[R].length<z&&(U=R,z=C[R].length);return C[U]}function x(p,m,F,P,_,b){const A=F*P;let C=A+F;if(p[C]=b,C++,b==0)if(P<500)for(var h=0;h<P;h++)p[C+h]=m[A+h];else p.set(new Uint8Array(m.buffer,A,P),C);else if(b==1){for(h=0;h<_;h++)p[C+h]=m[A+h];for(h=_;h<P;h++)p[C+h]=m[A+h]-m[A+h-_]+256&255}else if(F==0){for(h=0;h<_;h++)p[C+h]=m[A+h];if(b==2)for(h=_;h<P;h++)p[C+h]=m[A+h];if(b==3)for(h=_;h<P;h++)p[C+h]=m[A+h]-(m[A+h-_]>>1)+256&255;if(b==4)for(h=_;h<P;h++)p[C+h]=m[A+h]-r(m[A+h-_],0,0)+256&255}else{if(b==2)for(h=0;h<P;h++)p[C+h]=m[A+h]+256-m[A+h-P]&255;if(b==3){for(h=0;h<_;h++)p[C+h]=m[A+h]+256-(m[A+h-P]>>1)&255;for(h=_;h<P;h++)p[C+h]=m[A+h]+256-(m[A+h-P]+m[A+h-_]>>1)&255}if(b==4){for(h=0;h<_;h++)p[C+h]=m[A+h]+256-r(0,m[A+h-P],0)&255;for(h=_;h<P;h++)p[C+h]=m[A+h]+256-r(m[A+h-_],m[A+h-P],m[A+h-_-P])&255}}}function y(p,m){const F=new Uint8Array(p),P=F.slice(0),_=new Uint32Array(P.buffer),b=I(P,m),A=b[0],C=b[1],h=F.length,d=new Uint8Array(h>>2);let L;if(F.length<2e7)for(var R=0;R<h;R+=4)L=T(A,U=F[R]*(1/255),z=F[R+1]*(1/255),B=F[R+2]*(1/255),H=F[R+3]*(1/255)),d[R>>2]=L.ind,_[R>>2]=L.est.rgba;else for(R=0;R<h;R+=4){var U=F[R]*.00392156862745098,z=F[R+1]*(1/255),B=F[R+2]*(1/255),H=F[R+3]*(1/255);for(L=A;L.left;)L=D(L.est,U,z,B,H)<=0?L.left:L.right;d[R>>2]=L.ind,_[R>>2]=L.est.rgba}return{abuf:P.buffer,inds:d,plte:C}}function I(p,m,F){F==null&&(F=1e-4);const P=new Uint32Array(p.buffer),_={i0:0,i1:p.length,bst:null,est:null,tdst:0,left:null,right:null};_.bst=N(p,_.i0,_.i1),_.est=S(_.bst);const b=[_];for(;b.length<m;){let C=0,h=0;for(var A=0;A<b.length;A++)b[A].est.L>C&&(C=b[A].est.L,h=A);if(C<F)break;const d=b[h],L=v(p,P,d.i0,d.i1,d.est.e,d.est.eMq255);if(d.i0>=L||d.i1<=L){d.est.L=0;continue}const R={i0:d.i0,i1:L,bst:null,est:null,tdst:0,left:null,right:null};R.bst=N(p,R.i0,R.i1),R.est=S(R.bst);const U={i0:L,i1:d.i1,bst:null,est:null,tdst:0,left:null,right:null};for(U.bst={R:[],m:[],N:d.bst.N-R.bst.N},A=0;A<16;A++)U.bst.R[A]=d.bst.R[A]-R.bst.R[A];for(A=0;A<4;A++)U.bst.m[A]=d.bst.m[A]-R.bst.m[A];U.est=S(U.bst),d.left=R,d.right=U,b[h]=R,b.push(U)}for(b.sort(((C,h)=>h.bst.N-C.bst.N)),A=0;A<b.length;A++)b[A].ind=A;return[_,b]}function T(p,m,F,P,_){if(p.left==null)return p.tdst=(function(R,U,z,B,H){const k=U-R[0],w=z-R[1],X=B-R[2],Q=H-R[3];return k*k+w*w+X*X+Q*Q})(p.est.q,m,F,P,_),p;const b=D(p.est,m,F,P,_);let A=p.left,C=p.right;b>0&&(A=p.right,C=p.left);const h=T(A,m,F,P,_);if(h.tdst<=b*b)return h;const d=T(C,m,F,P,_);return d.tdst<h.tdst?d:h}function D(p,m,F,P,_){const{e:b}=p;return b[0]*m+b[1]*F+b[2]*P+b[3]*_-p.eMq}function v(p,m,F,P,_,b){for(P-=4;F<P;){for(;O(p,F,_)<=b;)F+=4;for(;O(p,P,_)>b;)P-=4;if(F>=P)break;const A=m[F>>2];m[F>>2]=m[P>>2],m[P>>2]=A,F+=4,P-=4}for(;O(p,F,_)>b;)F-=4;return F+4}function O(p,m,F){return p[m]*F[0]+p[m+1]*F[1]+p[m+2]*F[2]+p[m+3]*F[3]}function N(p,m,F){const P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_=[0,0,0,0],b=F-m>>2;for(let A=m;A<F;A+=4){const C=p[A]*.00392156862745098,h=p[A+1]*(1/255),d=p[A+2]*(1/255),L=p[A+3]*(1/255);_[0]+=C,_[1]+=h,_[2]+=d,_[3]+=L,P[0]+=C*C,P[1]+=C*h,P[2]+=C*d,P[3]+=C*L,P[5]+=h*h,P[6]+=h*d,P[7]+=h*L,P[10]+=d*d,P[11]+=d*L,P[15]+=L*L}return P[4]=P[1],P[8]=P[2],P[9]=P[6],P[12]=P[3],P[13]=P[7],P[14]=P[11],{R:P,m:_,N:b}}function S(p){const{R:m}=p,{m:F}=p,{N:P}=p,_=F[0],b=F[1],A=F[2],C=F[3],h=P==0?0:1/P,d=[m[0]-_*_*h,m[1]-_*b*h,m[2]-_*A*h,m[3]-_*C*h,m[4]-b*_*h,m[5]-b*b*h,m[6]-b*A*h,m[7]-b*C*h,m[8]-A*_*h,m[9]-A*b*h,m[10]-A*A*h,m[11]-A*C*h,m[12]-C*_*h,m[13]-C*b*h,m[14]-C*A*h,m[15]-C*C*h],L=d,R=M;let U=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,B=0;if(P!=0)for(let k=0;k<16&&(U=R.multVec(L,U),B=Math.sqrt(R.dot(U,U)),U=R.sml(1/B,U),!(k!=0&&Math.abs(B-z)<1e-9));k++)z=B;const H=[_*h,b*h,A*h,C*h];return{Cov:d,q:H,e:U,L:z,eMq255:R.dot(R.sml(255,H),U),eMq:R.dot(U,H),rgba:(Math.round(255*H[3])<<24|Math.round(255*H[2])<<16|Math.round(255*H[1])<<8|Math.round(255*H[0])<<0)>>>0}}var M={multVec:(p,m)=>[p[0]*m[0]+p[1]*m[1]+p[2]*m[2]+p[3]*m[3],p[4]*m[0]+p[5]*m[1]+p[6]*m[2]+p[7]*m[3],p[8]*m[0]+p[9]*m[1]+p[10]*m[2]+p[11]*m[3],p[12]*m[0]+p[13]*m[1]+p[14]*m[2]+p[15]*m[3]],dot:(p,m)=>p[0]*m[0]+p[1]*m[1]+p[2]*m[2]+p[3]*m[3],sml:(p,m)=>[p*m[0],p*m[1],p*m[2],p*m[3]]};_e.encode=function(m,F,P,_,b,A,C){_==null&&(_=0),C==null&&(C=!1);const h=s(m,F,P,_,[!1,!1,!1,0,C,!1]);return E(h,-1),g(h,F,P,b,A)},_e.encodeLL=function(m,F,P,_,b,A,C,h){const d={ctype:0+(_==1?0:2)+(b==0?0:4),depth:A,frames:[]},L=(_+b)*A,R=L*F;for(let U=0;U<m.length;U++)d.frames.push({rect:{x:0,y:0,width:F,height:P},img:new Uint8Array(m[U]),blend:0,dispose:1,bpp:Math.ceil(L/8),bpl:Math.ceil(R/8)});return E(d,0,!0),g(d,F,P,C,h)},_e.encode.compress=s,_e.encode.dither=c,_e.quantize=y,_e.quantize.getKDtree=I,_e.quantize.getNearest=T})();const lr={toArrayBuffer(e,t){const r=e.width,o=e.height,n=r<<2,i=e.getContext("2d").getImageData(0,0,r,o),a=new Uint32Array(i.data.buffer),c=(32*r+31)/32<<2,g=c*o,E=122+g,s=new ArrayBuffer(E),l=new DataView(s),u=1<<20;let f,x,y,I,T=u,D=0,v=0,O=0;function N(p){l.setUint16(v,p,!0),v+=2}function S(p){l.setUint32(v,p,!0),v+=4}function M(p){v+=p}N(19778),S(E),M(4),S(122),S(108),S(r),S(-o>>>0),N(1),N(32),S(3),S(g),S(2835),S(2835),M(8),S(16711680),S(65280),S(255),S(4278190080),S(1466527264),(function p(){for(;D<o&&T>0;){for(I=122+D*c,f=0;f<n;)T--,x=a[O++],y=x>>>24,l.setUint32(I+f,x<<8|y),f+=4;D++}O<a.length?(T=u,setTimeout(p,lr._dly)):t(s)})()},toBlob(e,t){this.toArrayBuffer(e,(r=>{t(new Blob([r],{type:"image/bmp"}))}))},_dly:9};var Te={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},co={[Te.CHROME]:16384,[Te.FIREFOX]:11180,[Te.DESKTOP_SAFARI]:16384,[Te.IE]:8192,[Te.IOS]:4096,[Te.ETC]:8192};const rn=typeof window<"u",fr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Et=rn&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),uo=(rn||fr)&&(Et&&Et.getOriginalSymbol(window,"File")||typeof File<"u"&&File),dr=(rn||fr)&&(Et&&Et.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function on(e,t,r=Date.now()){return new Promise((o=>{const n=e.split(","),i=n[0].match(/:(.*?);/)[1],a=globalThis.atob(n[1]);let c=a.length;const g=new Uint8Array(c);for(;c--;)g[c]=a.charCodeAt(c);const E=new Blob([g],{type:i});E.name=t,E.lastModified=r,o(E)}))}function hr(e){return new Promise(((t,r)=>{const o=new dr;o.onload=()=>t(o.result),o.onerror=n=>r(n),o.readAsDataURL(e)}))}function gr(e){return new Promise(((t,r)=>{const o=new Image;o.onload=()=>t(o),o.onerror=n=>r(n),o.src=e}))}function Ye(){if(Ye.cachedResult!==void 0)return Ye.cachedResult;let e=Te.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=Te.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=Te.IOS:/Safari/i.test(t)?e=Te.DESKTOP_SAFARI:/Firefox/i.test(t)?e=Te.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=Te.IE),Ye.cachedResult=e,Ye.cachedResult}function pr(e,t){const r=Ye(),o=co[r];let n=e,i=t,a=n*i;const c=n>i?i/n:n/i;for(;a>o*o;){const g=(o+n)/2,E=(o+i)/2;g<E?(i=E,n=E*c):(i=g*c,n=g),a=n*i}return{width:n,height:i}}function Ft(e,t){let r,o;try{if(r=new OffscreenCanvas(e,t),o=r.getContext("2d"),o===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),o=r.getContext("2d")}return r.width=e,r.height=t,[r,o]}function mr(e,t){const{width:r,height:o}=pr(e.width,e.height),[n,i]=Ft(r,o);return t&&/jpe?g/.test(t)&&(i.fillStyle="white",i.fillRect(0,0,n.width,n.height)),i.drawImage(e,0,0,n.width,n.height),n}function mt(){return mt.cachedResult!==void 0||(mt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),mt.cachedResult}function St(e,t={}){return new Promise((function(r,o){let n,i;var a=function(){try{return i=mr(n,t.fileType||e.type),r([n,i])}catch(g){return o(g)}},c=function(g){try{var E=function(s){try{throw s}catch(l){return o(l)}};try{let s;return hr(e).then((function(l){try{return s=l,gr(s).then((function(u){try{return n=u,(function(){try{return a()}catch(f){return o(f)}})()}catch(f){return E(f)}}),E)}catch(u){return E(u)}}),E)}catch(s){E(s)}}catch(s){return o(s)}};try{if(mt()||[Te.DESKTOP_SAFARI,Te.MOBILE_SAFARI].includes(Ye()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(g){try{return n=g,a()}catch{return c()}}),c)}catch{c()}}))}function Tt(e,t,r,o,n=1){return new Promise((function(i,a){let c;if(t==="image/png"){let E,s,l;return E=e.getContext("2d"),{data:s}=E.getImageData(0,0,e.width,e.height),l=_e.encode([s.buffer],e.width,e.height,4096*n),c=new Blob([l],{type:t}),c.name=r,c.lastModified=o,g.call(this)}{let E=function(){return g.call(this)};if(t==="image/bmp")return new Promise((s=>lr.toBlob(e,s))).then((function(s){try{return c=s,c.name=r,c.lastModified=o,E.call(this)}catch(l){return a(l)}}).bind(this),a);{let s=function(){return E.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:n}).then((function(l){try{return c=l,c.name=r,c.lastModified=o,s.call(this)}catch(u){return a(u)}}).bind(this),a);{let l;return l=e.toDataURL(t,n),on(l,r,o).then((function(u){try{return c=u,s.call(this)}catch(f){return a(f)}}).bind(this),a)}}}function g(){return i(c)}}))}function Re(e){e.width=0,e.height=0}function Ve(){return new Promise((function(e,t){let r,o,n,i;return Ve.cachedResult!==void 0?e(Ve.cachedResult):on("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(a){try{return r=a,St(r).then((function(c){try{return o=c[1],Tt(o,r.type,r.name,r.lastModified).then((function(g){try{return n=g,Re(o),St(n).then((function(E){try{return i=E[0],Ve.cachedResult=i.width===1&&i.height===2,e(Ve.cachedResult)}catch(s){return t(s)}}),t)}catch(E){return t(E)}}),t)}catch(g){return t(g)}}),t)}catch(c){return t(c)}}),t)}))}function xr(e){return new Promise(((t,r)=>{const o=new dr;o.onload=n=>{const i=new DataView(n.target.result);if(i.getUint16(0,!1)!=65496)return t(-2);const a=i.byteLength;let c=2;for(;c<a;){if(i.getUint16(c+2,!1)<=8)return t(-1);const g=i.getUint16(c,!1);if(c+=2,g==65505){if(i.getUint32(c+=2,!1)!=1165519206)return t(-1);const E=i.getUint16(c+=6,!1)==18761;c+=i.getUint32(c+4,E);const s=i.getUint16(c,E);c+=2;for(let l=0;l<s;l++)if(i.getUint16(c+12*l,E)==274)return t(i.getUint16(c+12*l+8,E))}else{if((65280&g)!=65280)break;c+=i.getUint16(c,!1)}}return t(-1)},o.onerror=n=>r(n),o.readAsArrayBuffer(e)}))}function Er(e,t){const{width:r}=e,{height:o}=e,{maxWidthOrHeight:n}=t;let i,a=e;return isFinite(n)&&(r>n||o>n)&&([a,i]=Ft(r,o),r>o?(a.width=n,a.height=o/r*n):(a.width=r/o*n,a.height=n),i.drawImage(e,0,0,a.width,a.height),Re(e)),a}function Sr(e,t){const{width:r}=e,{height:o}=e,[n,i]=Ft(r,o);switch(t>4&&t<9?(n.width=o,n.height=r):(n.width=r,n.height=o),t){case 2:i.transform(-1,0,0,1,r,0);break;case 3:i.transform(-1,0,0,-1,r,o);break;case 4:i.transform(1,0,0,-1,0,o);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,o,0);break;case 7:i.transform(0,-1,-1,0,o,r);break;case 8:i.transform(0,-1,1,0,0,r)}return i.drawImage(e,0,0,r,o),Re(e),n}function xn(e,t,r=0){return new Promise((function(o,n){let i,a,c,g,E,s,l,u,f,x,y,I,T,D,v,O,N,S,M,p;function m(P=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;i+=P,t.onProgress(Math.min(i,100))}function F(P){if(t.signal&&t.signal.aborted)throw t.signal.reason;i=Math.min(Math.max(P,i),100),t.onProgress(i)}return i=r,a=t.maxIteration||10,c=1024*t.maxSizeMB*1024,m(),St(e,t).then((function(P){try{return[,g]=P,m(),E=Er(g,t),m(),new Promise((function(_,b){var A;if(!(A=t.exifOrientation))return xr(e).then((function(h){try{return A=h,C.call(this)}catch(d){return b(d)}}).bind(this),b);function C(){return _(A)}return C.call(this)})).then((function(_){try{return s=_,m(),Ve().then((function(b){try{return l=b?E:Sr(E,s),m(),u=t.initialQuality||1,f=t.fileType||e.type,Tt(l,f,e.name,e.lastModified,u).then((function(A){try{{let h=function(){if(a--&&(v>c||v>T)){let L,R;return L=p?.95*M.width:M.width,R=p?.95*M.height:M.height,[N,S]=Ft(L,R),S.drawImage(M,0,0,L,R),u*=f==="image/png"?.85:.95,Tt(N,f,e.name,e.lastModified,u).then((function(U){try{return O=U,Re(M),M=N,v=O.size,F(Math.min(99,Math.floor((D-v)/(D-c)*100))),h}catch(z){return n(z)}}),n)}return[1]},d=function(){return Re(M),Re(N),Re(E),Re(l),Re(g),F(100),o(O)};if(x=A,m(),y=x.size>c,I=x.size>e.size,!y&&!I)return F(100),o(x);var C;return T=e.size,D=x.size,v=D,M=l,p=!t.alwaysKeepResolution&&y,(C=(function(L){for(;L;){if(L.then)return void L.then(C,n);try{if(L.pop){if(L.length)return L.pop()?d.call(this):L;L=h}else L=L.call(this)}catch(R){return n(R)}}}).bind(this))(h)}}catch(h){return n(h)}}).bind(this),n)}catch(A){return n(A)}}).bind(this),n)}catch(b){return n(b)}}).bind(this),n)}catch(_){return n(_)}}).bind(this),n)}))}const lo=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Ot;function fo(e,t){return new Promise(((r,o)=>{Ot||(Ot=(function(a){const c=[];return c.push(a),URL.createObjectURL(new Blob(c))})(lo));const n=new Worker(Ot);n.addEventListener("message",(function(a){if(t.signal&&t.signal.aborted)n.terminate();else if(a.data.progress===void 0){if(a.data.error)return o(new Error(a.data.error)),void n.terminate();r(a.data.file),n.terminate()}else t.onProgress(a.data.progress)})),n.addEventListener("error",o),t.signal&&t.signal.addEventListener("abort",(()=>{o(t.signal.reason),n.terminate()})),n.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function le(e,t){return new Promise((function(r,o){let n,i,a,c,g,E;if(n={...t},a=0,{onProgress:c}=n,n.maxSizeMB=n.maxSizeMB||Number.POSITIVE_INFINITY,g=typeof n.useWebWorker!="boolean"||n.useWebWorker,delete n.useWebWorker,n.onProgress=f=>{a=f,typeof c=="function"&&c(a)},!(e instanceof Blob||e instanceof uo))return o(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return o(new Error("The file given is not an image"));if(E=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!g||typeof Worker!="function"||E)return xn(e,n).then((function(f){try{return i=f,u.call(this)}catch(x){return o(x)}}).bind(this),o);var s=(function(){try{return u.call(this)}catch(f){return o(f)}}).bind(this),l=function(f){try{return xn(e,n).then((function(x){try{return i=x,s()}catch(y){return o(y)}}),o)}catch(x){return o(x)}};try{return n.libURL=n.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",fo(e,n).then((function(f){try{return i=f,s()}catch{return l()}}),l)}catch{l()}function u(){try{i.name=e.name,i.lastModified=e.lastModified}catch{}try{n.preserveExif&&e.type==="image/jpeg"&&(!n.fileType||n.fileType&&n.fileType===e.type)&&(i=ur(e,i))}catch{}return r(i)}}))}le.getDataUrlFromFile=hr,le.getFilefromDataUrl=on,le.loadImage=gr,le.drawImageInCanvas=mr,le.drawFileInCanvas=St,le.canvasToFile=Tt,le.getExifOrientation=xr,le.handleMaxWidthOrHeight=Er,le.followExifOrientation=Sr,le.cleanupCanvasMemory=Re,le.isAutoOrientationInBrowser=Ve,le.approximateBelowMaximumCanvasSizeOfBrowser=pr,le.copyExifWithoutOrientation=ur,le.getBrowserName=Ye,le.version="2.0.2";const ho=(e,t,r,o)=>new Promise((n,i)=>{const a=new Image;a.onload=()=>{const c=document.createElement("canvas"),g=c.getContext("2d");if(!g){i(new Error("Could not get canvas context"));return}const E=a.naturalWidth/r,s=a.naturalHeight/o,l=t.x*E,u=t.y*s,f=t.width*E,x=t.height*s;c.width=f,c.height=x,console.log({scaledWidth:f,scaledHeight:x}),g.drawImage(a,l,u,f,x,0,0,f,x);const y=c.toDataURL("image/jpeg",.9);n(y)},a.onerror=()=>{i(new Error("Failed to load image"))},a.src=e});var ot={},En;function go(){if(En)return ot;En=1,Object.defineProperty(ot,"__esModule",{value:!0});const e=new RegExp("^(\\d{4}):(\\d{2}):(\\d{2}) (\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,3}))?(?:([zZ])|([-+])(\\d{2}):(\\d{2}))?$");function t(n,i){let a=n.toString(),c=i-a.length;for(;c>0;)c-=1,a=`0${a}`;return a}function r(n){const i=e.exec(n);if(i==null)return new Date(NaN);const a=new Date,c=i[8]?0:i[9]?(Number(i[10])*60+Number(i[11]))*(i[9]==="+"?1:-1):0;return a.setUTCFullYear(Number(i[1])),a.setUTCMonth(Number(i[2])-1),a.setUTCDate(Number(i[3])),a.setUTCHours(Number(i[4])),a.setUTCMinutes(Number(i[5])+c),a.setUTCSeconds(Number(i[6])),a.setUTCMilliseconds(Number(i[7])||0),a}ot.parse=r;function o(n,i,a){if(isNaN(n.getTime()))return"";const c=t(n.getUTCFullYear(),4),g=t(n.getUTCMonth()+1,2),E=t(n.getUTCDate(),2),s=t(n.getUTCHours(),2),l=t(n.getUTCMinutes(),2),u=t(n.getUTCSeconds(),2),f=i?`.${Math.round(n.getUTCMilliseconds()/10)}`:"";return`${c}:${g}:${E} ${s}:${l}:${u}${f}${a?"Z":""}`}return ot.format=o,ot}var po=go();function Z(e,t,r){const o=[];for(let n=0;n<r&&t+n<e.byteLength;n++)o.push(e.getUint8(t+n));return tt(o)}function mo(e,t,r){const o=[];for(let n=0;n<r&&t+n<e.byteLength;n+=2)o.push(e.getUint16(t+n));return tt(o)}function tt(e){return e.map(t=>String.fromCharCode(t)).join("")}function J(){for(let e=1;e<arguments.length;e++)for(const t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function Tr(e,t,r){let o=!1;Object.defineProperty(e,t,{get(){return o||(o=!0,Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:r.apply(e),writable:!0})),e[t]},configurable:!0,enumerable:!0})}function Ar(e){if(typeof btoa<"u")return btoa(typeof e=="string"?e:Array.prototype.reduce.call(new Uint8Array(e),(t,r)=>t+String.fromCharCode(r),""));if(!(typeof Buffer>"u"))return typeof Buffer.from!==void 0?Buffer.from(e).toString("base64"):new Buffer(e).toString("base64")}function xo(e){const t=e.substring(e.indexOf(",")+1);if(e.indexOf(";base64")!==-1)return typeof atob<"u"?Uint8Array.from(atob(t),o=>o.charCodeAt(0)).buffer:typeof Buffer>"u"?void 0:typeof Buffer.from!==void 0?Buffer.from(t,"base64"):new Buffer(t,"base64");const r=decodeURIComponent(t);return typeof Buffer<"u"?typeof Buffer.from!==void 0?Buffer.from(r):new Buffer(r):Uint8Array.from(r,o=>o.charCodeAt(0)).buffer}let Eo=class{constructor(t){if(So(t))throw new Error("DataView: Passed buffer type is unsupported.");this.buffer=t,this.byteLength=this.buffer.length}getUint8(t){return this.buffer.readUInt8(t)}getUint16(t,r){return r?this.buffer.readUInt16LE(t):this.buffer.readUInt16BE(t)}getUint32(t,r){return r?this.buffer.readUInt32LE(t):this.buffer.readUInt32BE(t)}getInt32(t,r){return r?this.buffer.readInt32LE(t):this.buffer.readInt32BE(t)}};function So(e){return typeof e!="object"||e.length===void 0||e.readUInt8===void 0||e.readUInt16LE===void 0||e.readUInt16BE===void 0||e.readUInt32LE===void 0||e.readUInt32BE===void 0||e.readInt32LE===void 0||e.readInt32BE===void 0}function ce(e){return e.map(t=>String.fromCharCode(t)).join("")}function Bt(e){if(e.length>=8){const t=ce(e.slice(0,8));if(t==="ASCII\0\0\0")return ce(e.slice(8));if(t==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(t==="UNICODE\0")return"[Unicode encoded text]";if(t==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}function At(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}const Ht=18761,jt=19789,Ze={BIG_ENDIAN:jt,LITTLE_ENDIAN:Ht,getByteOrder:To};function To(e,t){if(e.getUint16(t)===Ht)return Ht;if(e.getUint16(t)===jt)return jt;throw new Error("Illegal byte order value. Faulty image.")}const Sn={isTiffFile:Ao,findTiffOffsets:bo};function Ao(e){return!!e&&e.byteLength>=4&&Io(e)}function Io(e){const o=e.getUint16(0)===Ze.LITTLE_ENDIAN;return e.getUint16(2,o)===42}function bo(){return{hasAppMarkers:!0,tiffHeaderOffset:0}}const Tn={isJpegFile:Bo,findJpegOffsets:Ho},Fo=2,yo=65496,An=2,Fe=4,xe=2,_o=2,Co=10,Po=18,In=33,bn=79,Fn=18,Ro=8,zt="ICC_PROFILE\0",Ir=Fe+zt.length,No=Ir+1,yn="MPF\0",br=65472,Fr=65474,Oo=65476,Uo=65499,Do=65501,vo=65498,yr=65504,sn=65505,_r=65506,Mo=65517,wo=65519,Lo=65534,ko=65535,Go="JFIF",$t="Exif",_n="http://ns.adobe.com/xap/1.0/\0",Cn="http://ns.adobe.com/xmp/extension/\0",Pn="Photoshop 3.0";function Bo(e){return!!e&&e.byteLength>=Fo&&e.getUint16(0)===yo}function Ho(e){let t=An,r,o,n,i,a,c,g,E,s;for(;t+Fe+5<=e.byteLength;){if(jo(e,t))o=t+xe;else if(zo(e,t))n=t+xe;else if(Yo(e,t))r=e.getUint16(t+xe),i=t+_o;else if(Zo(e,t))r=e.getUint16(t+xe),a=t+Co;else if(Wo(e,t))g||(g=[]),r=e.getUint16(t+xe),g.push(Jo(t,r));else if(Qo(e,t))g||(g=[]),r=e.getUint16(t+xe),g.push(Vo(t,r));else if(es(e,t))r=e.getUint16(t+xe),c=t+Po;else if($o(e,t)){r=e.getUint16(t+xe);const l=t+Fn,u=r-(Fn-xe),f=e.getUint8(t+Ir),x=e.getUint8(t+No);E||(E=[]),E.push({offset:l,length:u,chunkNumber:f,chunksTotal:x})}else if(Xo(e,t))r=e.getUint16(t+xe),s=t+Ro;else if(ts(e,t))r=e.getUint16(t+xe);else if(ns(e,t)){t++;continue}else break;t+=xe+r}return{hasAppMarkers:t>An,fileDataOffset:o||n,jfifDataOffset:i,tiffHeaderOffset:a,iptcDataOffset:c,xmpChunks:g,iccChunks:E,mpfDataOffset:s}}function jo(e,t){return e.getUint16(t)===br}function zo(e,t){return e.getUint16(t)===Fr}function $o(e,t){const r=zt.length;return e.getUint16(t)===_r&&Z(e,t+Fe,r)===zt}function Xo(e,t){const r=yn.length;return e.getUint16(t)===_r&&Z(e,t+Fe,r)===yn}function Yo(e,t){const r=$t.length;return e.getUint16(t)===yr&&Z(e,t+Fe,r)===Go&&e.getUint8(t+Fe+r)===0}function Zo(e,t){const r=$t.length;return e.getUint16(t)===sn&&Z(e,t+Fe,r)===$t&&e.getUint8(t+Fe+r)===0}function Wo(e,t){return e.getUint16(t)===sn&&Ko(e,t)}function Ko(e,t){const r=_n.length;return Z(e,t+Fe,r)===_n}function Qo(e,t){return e.getUint16(t)===sn&&qo(e,t)}function qo(e,t){const r=Cn.length;return Z(e,t+Fe,r)===Cn}function Jo(e,t){return{dataOffset:e+In,length:t-(In-xe)}}function Vo(e,t){return{dataOffset:e+bn,length:t-(bn-xe)}}function es(e,t){const r=Pn.length;return e.getUint16(t)===Mo&&Z(e,t+Fe,r)===Pn&&e.getUint8(t+Fe+r)===0}function ts(e,t){const r=e.getUint16(t);return r>=yr&&r<=wo||r===Lo||r===br||r===Fr||r===Oo||r===Uo||r===Do||r===vo}function ns(e,t){return e.getUint16(t)===ko}const Rn={isPngFile:os,findPngOffsets:ss},Xt=`PNG\r

`,It=4,Ne=4,ct=0,We=It,ge=It+Ne,Yt="XML:com.adobe.xmp\0",rs="tEXt",Cr="iTXt",Pr="pHYs",Rr="tIME",is="eXIf";function os(e){return!!e&&Z(e,0,Xt.length)===Xt}function ss(e){const r={hasAppMarkers:!1};let o=Xt.length;for(;o+It+Ne<=e.byteLength;){if(as(e,o))r.hasAppMarkers=!0,r.pngHeaderOffset=o+ge;else if(cs(e,o)){const n=ds(e,o);n!==void 0&&(r.hasAppMarkers=!0,r.xmpChunks=[{dataOffset:n,length:e.getUint32(o+ct)-(n-(o+ge))}])}else if(us(e,o)){r.hasAppMarkers=!0;const n=Z(e,o+We,Ne);r.pngTextChunks||(r.pngTextChunks=[]),r.pngTextChunks.push({length:e.getUint32(o+ct),type:n,offset:o+ge})}else ls(e,o)?(r.hasAppMarkers=!0,r.tiffHeaderOffset=o+ge):fs(e,o)&&(r.hasAppMarkers=!0,r.pngChunkOffsets||(r.pngChunkOffsets=[]),r.pngChunkOffsets.push(o+ct));o+=e.getUint32(o+ct)+It+Ne+4}return r}function as(e,t){return Z(e,t+We,Ne)==="IHDR"}function cs(e,t){return Z(e,t+We,Ne)==="iTXt"&&Z(e,t+ge,Yt.length)===Yt}function us(e,t){const r="tEXt",o="iTXt",n=Z(e,t+We,Ne);return n===r||n===o}function ls(e,t){return Z(e,t+We,Ne)===is}function fs(e,t){const r=[Pr,Rr],o=Z(e,t+We,Ne);return r.includes(o)}function ds(e,t){t+=ge+Yt.length+1+1;let n=0;for(;n<2&&t<e.byteLength;)e.getUint8(t)===0&&n++,t++;if(!(n<2))return t}const Nn={isHeicFile:hs,findHeicOffsets:gs};function hs(e){if(!e)return!1;const t="ftyp",r=4,o=["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"],i=Z(e,r+t.length,4);return Z(e,r,t.length)===t&&o.indexOf(i)!==-1}function gs(e){{const{offset:t,length:r}=ps(e);if(t===void 0)return{hasAppMarkers:!1};const o=Math.min(t+r,e.byteLength),{exifItemOffset:n,ilocOffset:i,colrOffset:a}=Ss(e,t,o),c=Ts(e,n,i,o),g=As(e,a,o);return{hasAppMarkers:c!==void 0||g!==void 0,tiffHeaderOffset:c,iccChunks:g}}}function ps(e){let i=0;for(;i+4+4<=e.byteLength;){const a=Nr(e,i);if(a>=8&&Z(e,i+4,4)==="meta")return{offset:i,length:a};i+=a}return{offset:void 0,length:0}}function Nr(e,t){const o=e.getUint32(t);return ms(o)?e.byteLength-t:xs(o)&&Es(e,t)?e.getUint32(t+12):o}function ms(e){return e===0}function xs(e){return e===1}function Es(e,t){return e.getUint32(t+8)===0}function Ss(e,t,r){const i={ilocOffset:void 0,exifItemOffset:void 0,colrOffset:void 0};for(;t+4<=r&&(!i.ilocOffset||!i.exifItemOffset||!i.colrOffset);){const a=Z(e,t,4);a==="iloc"?i.ilocOffset=t:a==="Exif"?i.exifItemOffset=t+-4:a==="colr"&&(i.colrOffset=t+-4),t++}return i}function Ts(e,t,r,o){if(!r||!t||t+2>o)return;const s=e.getUint16(t);for(r+=12;r+16<=o;){if(e.getUint16(r)===s){const u=e.getUint32(r+8);if(u+4<=e.byteLength){const x=e.getUint32(u)+4;return u+x}}r+=16}}function As(e,t,r){if(!t||t+12>r)return;const a=Z(e,t+8,4);if(!(a!=="prof"&&a!=="rICC"))return[{offset:t+12,length:Nr(e,t)-12,chunkNumber:1,chunksTotal:1}]}const On={isWebpFile:Is,findOffsets:bs};function Is(e){const r="RIFF",n="WEBP";return!!e&&Z(e,0,r.length)===r&&Z(e,8,n.length)===n}function bs(e){const o="Exif\0\0";let i=12,a=!1,c,g,E;for(;i+8<e.byteLength;){const s=Z(e,i,4),l=e.getUint32(i+4,!0);s==="EXIF"?(a=!0,Z(e,i+8,o.length)===o?c=i+8+o.length:c=i+8):s==="XMP "?(a=!0,g=[{dataOffset:i+8,length:l}]):s==="ICCP"&&(a=!0,E=[{offset:i+8,length:l,chunkNumber:1,chunksTotal:1}]),i+=8+(l%2===0?l:l+1)}return{hasAppMarkers:a,tiffHeaderOffset:c,xmpChunks:g,iccChunks:E}}const Fs={parseAppMarkers:ys};function ys(e){if(Sn.isTiffFile(e))return Sn.findTiffOffsets();if(Tn.isJpegFile(e))return Tn.findJpegOffsets(e);if(Rn.isPngFile(e))return Rn.findPngOffsets(e);if(Nn.isHeicFile(e))return Nn.findHeicOffsets(e);if(On.isWebpFile(e))return On.findOffsets(e);throw new Error("Invalid image format")}const Or={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},Zt={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},j={getAsciiValue:_s,getByteAt:Ur,getAsciiAt:Cs,getShortAt:Ps,getLongAt:bt,getRationalAt:Rs,getUndefinedAt:Ns,getSlongAt:Wt,getSrationalAt:Os,getIfdPointerAt:Us,typeSizes:Or,tagTypes:Zt,getTypeSize:Ds};function _s(e){return e.map(t=>String.fromCharCode(t))}function Ur(e,t){return e.getUint8(t)}function Cs(e,t){return e.getUint8(t)}function Ps(e,t,r){return e.getUint16(t,r===Ze.LITTLE_ENDIAN)}function bt(e,t,r){return e.getUint32(t,r===Ze.LITTLE_ENDIAN)}function Rs(e,t,r){return[bt(e,t,r),bt(e,t+4,r)]}function Ns(e,t){return Ur(e,t)}function Wt(e,t,r){return e.getInt32(t,r===Ze.LITTLE_ENDIAN)}function Os(e,t,r){return[Wt(e,t,r),Wt(e,t+4,r)]}function Us(e,t,r){return bt(e,t,r)}function Ds(e){if(Zt[e]===void 0)throw new Error("No such type found.");return Or[Zt[e]]}const Y={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace(e){return e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(e){return e.map(t=>{if(t===49)return"Y";if(t===50)return"Cb";if(t===51)return"Cr";if(t===52)return"R";if(t===53)return"G";if(t===54)return"B"}).join("")},Contrast(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},CustomRendered(e){return e===0?"Normal process":e===1?"Custom process":"Unknown"},ExposureMode(e){return e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},ExposureProgram(e){return e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},ExposureTime(e){return e[0]>=e[1]?`${Math.round(e[0]/e[1])}`:e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${e[0]/e[1]}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700  7100K)":e===13?"Day white fluorescent (N 4600  5400K)":e===14?"Cool white fluorescent (W 3900  4500K)":e===15?"White fluorescent (WW 3200  3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown",MeteringMode(e){return e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},ResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},Saturation(e){return e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},SceneCaptureType(e){return e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},Sharpness(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},ShutterSpeedValue(e){const t=Math.pow(2,e[0]/e[1]);return t<=1?`${Math.round(1/t)}`:`1/${Math.round(t)}`},WhiteBalance(e){return e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])},vs={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:Y.XResolution},283:{name:"YResolution",description:Y.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:Y.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{const t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(r=>t[r]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(t=>""+t[0]/t[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(t=>""+t[0]/t[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:Y.LightSource},50779:{name:"CalibrationIlluminant2",description:Y.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"},Ms={33434:{name:"ExposureTime",description:Y.ExposureTime},33437:{name:"FNumber",description:Y.FNumber},34850:{name:"ExposureProgram",description:Y.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>ce(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:Y.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:Y.ShutterSpeedValue},37378:{name:"ApertureValue",description:Y.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:Y.MeteringMode},37384:{name:"LightSource",description:Y.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:Y.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:Bt},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" "},40960:{name:"FlashpixVersion",description:e=>e.map(t=>String.fromCharCode(t)).join("")},40961:{name:"ColorSpace",description:Y.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:Y.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,t])=>`X: ${e}, Y: ${t}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:Y.CustomRendered},41986:{name:"ExposureMode",description:Y.ExposureMode},41987:{name:"WhiteBalance",description:Y.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:e=>e===0?"Unknown":e},41990:{name:"SceneCaptureType",description:Y.SceneCaptureType},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:Y.Contrast},41993:{name:"Saturation",description:Y.Saturation},41994:{name:"Sharpness",description:Y.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{const t=`${e[0][0]/e[0][1]}-${e[1][0]/e[1][1]} mm`;return e[3][1]===0?`${t} f/?`:`${t} f/${1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},ws={0:{name:"GPSVersionID",description:e=>e[0]===2&&e[1]===2&&e[2]===0&&e[3]===0?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:At},3:{name:"GPSLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:At},5:{name:"GPSAltitudeRef",description:e=>e===0?"Sea level":e===1?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map(([t,r])=>{const o=t/r;return/^\d(\.|$)/.test(`${o}`)?`0${o}`:o}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{const t=e.join("");return t==="A"?"Measurement in progress":t==="V"?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{const t=e.join("");return t==="2"?"2-dimensional measurement":t==="3"?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers per hour":t==="M"?"Miles per hour":t==="N"?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers":t==="M"?"Miles":t==="N"?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:Bt},28:{name:"GPSAreaInformation",description:Bt},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>e===0?"Measurement without differential correction":e===1?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"},Ls={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>ce(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"},ks={45056:{name:"MPFVersion",description:e=>ce(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"},Un=J({},vs,Ms),ke={"0th":Un,exif:Un,gps:ws,interoperability:Ls,mpf:ks},Dn="Exif IFD Pointer",vn="GPS Info IFD Pointer",Mn="Interoperability IFD Pointer",Gs={1:j.getByteAt,2:j.getAsciiAt,3:j.getShortAt,4:j.getLongAt,5:j.getRationalAt,7:j.getUndefinedAt,9:j.getSlongAt,10:j.getSrationalAt,13:j.getIfdPointerAt},wn={read:Bs,readMpf:Xs};function Bs(e,t,r){const o=Ze.getByteOrder(e,t);let n=Hs(e,t,o,r);return n=js(n,e,t,o,r),n=zs(n,e,t,o,r),n=$s(n,e,t,o,r),n}function Hs(e,t,r,o){return nt(e,"0th",t,Dr(e,t,r),r,o)}function Dr(e,t,r){return t+j.getLongAt(e,t+4,r)}function js(e,t,r,o,n){return e[Dn]!==void 0?J(e,nt(t,"exif",r,r+e[Dn].value,o,n)):e}function zs(e,t,r,o,n){return e[vn]!==void 0?J(e,nt(t,"gps",r,r+e[vn].value,o,n)):e}function $s(e,t,r,o,n){return e[Mn]!==void 0?J(e,nt(t,"interoperability",r,r+e[Mn].value,o,n)):e}function Xs(e,t,r){const o=Ze.getByteOrder(e,t),n=nt(e,"mpf",t,Dr(e,t,o),o,r);return Ys(e,t,n,o)}function Ys(e,t,r,o){if(!r.MPEntry)return r;const i=[];for(let a=0;a<Math.ceil(r.MPEntry.value.length/16);a++){i[a]={};const c=st(r.MPEntry.value,a*16,j.getTypeSize("LONG"),o);i[a].ImageFlags=Zs(c),i[a].ImageFormat=Ws(c),i[a].ImageType=Ks(c);const g=st(r.MPEntry.value,a*16+4,j.getTypeSize("LONG"),o);i[a].ImageSize={value:g,description:""+g};const E=Qs(a)?0:st(r.MPEntry.value,a*16+8,j.getTypeSize("LONG"),o)+t;i[a].ImageOffset={value:E,description:""+E};const s=st(r.MPEntry.value,a*16+12,j.getTypeSize("SHORT"),o);i[a].DependentImage1EntryNumber={value:s,description:""+s};const l=st(r.MPEntry.value,a*16+14,j.getTypeSize("SHORT"),o);i[a].DependentImage2EntryNumber={value:l,description:""+l},i[a].image=e.buffer.slice(E,E+g),Tr(i[a],"base64",function(){return Ar(this.image)})}return r.Images=i,r}function st(e,t,r,o){if(o===Ze.LITTLE_ENDIAN){let i=0;for(let a=0;a<r;a++)i+=e[t+a]<<8*a;return i}let n=0;for(let i=0;i<r;i++)n+=e[t+i]<<8*(r-1-i);return n}function Zs(e){const t=[e>>31&1,e>>30&1,e>>29&1],r=[];return t[0]&&r.push("Dependent Parent Image"),t[1]&&r.push("Dependent Child Image"),t[2]&&r.push("Representative Image"),{value:t,description:r.join(", ")||"None"}}function Ws(e){const t=e>>24&7;return{value:t,description:t===0?"JPEG":"Unknown"}}function Ks(e){const t=e&16777215;return{value:t,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[t]||"Unknown"}}function Qs(e){return e===0}function nt(e,t,r,o,n,i){const a=j.getTypeSize("SHORT"),c=12,g={},E=qs(e,o,n);o+=a;for(let s=0;s<E&&!(o+c>e.byteLength);s++){const l=Js(e,t,r,o,n,i);l!==void 0&&(g[l.name]={id:l.id,value:l.value,description:l.description}),o+=c}if(o<e.byteLength-j.getTypeSize("LONG")){const s=j.getLongAt(e,o,n);s!==0&&(g.Thumbnail=nt(e,t,r,r+s,n,!0))}return g}function qs(e,t,r){return t+j.getTypeSize("SHORT")<=e.byteLength?j.getShortAt(e,t,r):0}function Js(e,t,r,o,n,i){const c=j.getTypeSize("SHORT"),g=c+j.getTypeSize("SHORT"),E=g+j.getTypeSize("LONG"),s=j.getShortAt(e,o,n),l=j.getShortAt(e,o+c,n),u=j.getLongAt(e,o+g,n);let f;if(j.typeSizes[l]===void 0||!i&&ke[t][s]===void 0)return;if(Vs(l,u))f=Ln(e,o+E,l,u,n);else{const I=j.getLongAt(e,o+E,n);if(ea(e,r,I,l,u)){const T=s===33723;f=Ln(e,r+I,l,u,n,T)}else f="<faulty value>"}l===j.tagTypes.ASCII&&(f=ta(f),f=na(f));let x=`undefined-${s}`,y=f;if(ke[t][s]!==void 0)if(ke[t][s].name!==void 0&&ke[t][s].description!==void 0){x=ke[t][s].name;try{y=ke[t][s].description(f)}catch{y=kn(f)}}else l===j.tagTypes.RATIONAL||l===j.tagTypes.SRATIONAL?(x=ke[t][s],y=""+f[0]/f[1]):(x=ke[t][s],y=kn(f));return{id:s,name:x,value:f,description:y}}function Vs(e,t){return j.typeSizes[e]*t<=j.getTypeSize("LONG")}function Ln(e,t,r,o,n,i=!1){let a=[];i&&(o=o*j.typeSizes[r],r=j.tagTypes.BYTE);for(let c=0;c<o;c++)a.push(Gs[r](e,t,n)),t+=j.typeSizes[r];return r===j.tagTypes.ASCII?a=j.getAsciiValue(a):a.length===1&&(a=a[0]),a}function ea(e,t,r,o,n){return t+r+j.typeSizes[o]*n<=e.byteLength}function ta(e){const t=[];let r=0;for(let o=0;o<e.length;o++){if(e[o]==="\0"){r++;continue}t[r]===void 0&&(t[r]=""),t[r]+=e[o]}return t}function na(e){try{return e.map(t=>decodeURIComponent(escape(t)))}catch{return e}}function kn(e){return e instanceof Array?e.join(", "):e}const ra={read:ia};function ia(e,t){const r=oa(e,t),o=ua(e,t,r);return{"Bits Per Sample":sa(e,t,r),"Image Height":aa(e,t,r),"Image Width":ca(e,t,r),"Color Components":o,Subsampling:o&&la(e,t,o.value,r)}}function oa(e,t){return j.getShortAt(e,t)}function sa(e,t,r){if(3>r)return;const i=j.getByteAt(e,t+2);return{value:i,description:""+i}}function aa(e,t,r){if(5>r)return;const i=j.getShortAt(e,t+3);return{value:i,description:`${i}px`}}function ca(e,t,r){if(7>r)return;const i=j.getShortAt(e,t+5);return{value:i,description:`${i}px`}}function ua(e,t,r){if(8>r)return;const i=j.getByteAt(e,t+7);return{value:i,description:""+i}}function la(e,t,r,o){if(8+3*r>o)return;const a=[];for(let c=0;c<r;c++){const g=t+8+c*3;a.push([j.getByteAt(e,g),j.getByteAt(e,g+1),j.getByteAt(e,g+2)])}return{value:a,description:a.length>1?fa(a)+da(a):""}}function fa(e){const t={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(r=>t[r[0]]).join("")}function da(e){const t={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return e.length===0||e[0][1]===void 0||t[e[0][1]]===void 0?"":t[e[0][1]]}const ha={read:ga};function ga(e,t){const r=pa(e,t),o=Aa(e,t,r),n=Ia(e,t,r),i={"JFIF Version":ma(e,t,r),"Resolution Unit":xa(e,t,r),XResolution:Sa(e,t,r),YResolution:Ta(e,t,r),"JFIF Thumbnail Width":o,"JFIF Thumbnail Height":n};if(o!==void 0&&n!==void 0){const a=ba(e,t,3*o.value*n.value,r);a&&(i["JFIF Thumbnail"]=a)}for(const a in i)i[a]===void 0&&delete i[a];return i}function pa(e,t){return j.getShortAt(e,t)}function ma(e,t,r){if(9>r)return;const i=j.getByteAt(e,t+7),a=j.getByteAt(e,t+7+1);return{value:i*256+a,description:i+"."+a}}function xa(e,t,r){if(10>r)return;const i=j.getByteAt(e,t+9);return{value:i,description:Ea(i)}}function Ea(e){return e===0?"None":e===1?"inches":e===2?"cm":"Unknown"}function Sa(e,t,r){if(12>r)return;const i=j.getShortAt(e,t+10);return{value:i,description:""+i}}function Ta(e,t,r){if(14>r)return;const i=j.getShortAt(e,t+12);return{value:i,description:""+i}}function Aa(e,t,r){if(15>r)return;const i=j.getByteAt(e,t+14);return{value:i,description:`${i}px`}}function Ia(e,t,r){if(16>r)return;const i=j.getByteAt(e,t+15);return{value:i,description:`${i}px`}}function ba(e,t,r,o){return r===0||16+r>o?void 0:{value:e.buffer.slice(t+16,t+16+r),description:"<24-bit RGB pixel data>"}}const Ge={iptc:{256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:Ut},336:{name:"Time Sent",description:Dt},346:{name:"Coded Character Set",description:Gn,encoding_name:Gn},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>ce(e)==="01"?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:e=>{const t=ce(e).split(":");return t[2]+(t[3]?"/"+t[3]:"")+(t[4]?"/"+t[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{const t=ce(e);return t==="01"?"Object Kill":t==="02"?"Object Replace":t==="03"?"Object Append":t==="04"?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:Ut},572:{name:"Time Created",description:Dt},574:{name:"Digital Creation Date",description:Ut},575:{name:"Digital Creation Time",description:Dt},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{const t=ce(e);return t==="a"?"morning":t==="p"?"evening":t==="b"?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{const t=ce(e);return t==="P"?"Portrait":t==="L"?"Landscape":t==="S"?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{const t=ce(e),r=t.charAt(0),o=t.charAt(1);let n="";return r==="1"?n+="Mono":r==="2"&&(n+="Stereo"),o==="A"?n+=", actuality":o==="C"?n+=", question and answer session":o==="M"?n+=", music, transmitted by itself":o==="Q"?n+=", response to a question":o==="R"?n+=", raw sound":o==="S"?n+=", scener":o==="V"?n+=", voicer":o==="W"&&(n+=", wrap"),n!==""?n:t}},663:{name:"Audio Sampling Rate",description:e=>parseInt(ce(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{const t=parseInt(ce(e),10);return t+(t===1?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{const t=ce(e);return t.length>=6?t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2):t}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>e.length===2?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(e.length===2){const t=(e[0]<<8)+e[1];return t===0?"No ObjectData":t===1?"IPTC-NAA Digital Newsphoto Parameter Record":t===2?"IPTC7901 Recommended Message Format":t===3?"Tagged Image File Format (Adobe/Aldus Image data)":t===4?"Illustrator (Adobe Graphics data)":t===5?"AppleSingle (Apple Computer Inc)":t===6?"NAA 89-3 (ANPA 1312)":t===7?"MacBinary II":t===8?"IPTC Unstructured Character Oriented File Format (UCOFF)":t===9?"United Press International ANPA 1312 variant":t===10?"United Press International Down-Load Message":t===11?"JPEG File Interchange (JFIF)":t===12?"Photo-CD Image-Pac (Eastman Kodak)":t===13?"Microsoft Bit Mapped Graphics File [*.BMP]":t===14?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":t===15?"Audio plus Moving Video [*.AVI] (Microsoft)":t===16?"PC DOS/Windows Executable Files [*.COM][*.EXE]":t===17?"Compressed Binary File [*.ZIP] (PKWare Inc)":t===18?"Audio Interchange File Format AIFF (Apple Computer Inc)":t===19?"RIFF Wave (Microsoft Corporation)":t===20?"Freehand (Macromedia/Aldus)":t===21?'Hypertext Markup Language "HTML" (The Internet Society)':t===22?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":t===23?"MPEG 2 Audio Layer 3, ISO/IEC":t===24?"Portable Document File (*.PDF) Adobe":t===25?"News Industry Text Format (NITF)":t===26?"Tape Archive (*.TAR)":t===27?"Tidningarnas Telegrambyr NITF version (TTNITF DTD)":t===28?"Ritzaus Bureau NITF version (RBNITF DTD)":t===29?"Corel Draw [*.CDR]":`Unknown format ${t}`}return ce(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,t)=>{const r={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},o=ce(e);if(t["ObjectData Preview File Format"]){const n=ce(t["ObjectData Preview File Format"].value);if(r[n]&&r[n][o])return r[n][o]}return o}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}}}};function Ut(e){const t=ce(e);return t.length>=8?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2):t}function Dt(e){const t=ce(e);let r=t;return t.length>=6&&(r=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2),t.length===11&&(r+=t.substr(6,1)+t.substr(7,2)+":"+t.substr(9,2))),r}function Gn(e){const t=ce(e);return t==="\x1B%G"?"UTF-8":t==="\x1B%5"?"Windows-1252":t==="\x1B%/G"?"UTF-8 Level 1":t==="\x1B%/H"?"UTF-8 Level 2":t==="\x1B%/I"?"UTF-8 Level 3":t==="\x1B/A"?"ISO-8859-1":t==="\x1B/B"?"ISO-8859-2":t==="\x1B/C"?"ISO-8859-3":t==="\x1B/D"?"ISO-8859-4":t==="\x1B/@"?"ISO-8859-5":t==="\x1B/G"?"ISO-8859-6":t==="\x1B/F"?"ISO-8859-7":t==="\x1B/H"?"ISO-8859-8":"Unknown"}const Fa={get:ya};function ya(){if(typeof TextDecoder<"u")return TextDecoder}const _a=5,vr={decode:Ca,TAG_HEADER_SIZE:_a};function Ca(e,t){const r=Fa.get();if(typeof r<"u"&&e!==void 0)try{return new r(e).decode(Uint8Array.from(t))}catch{}const o=t.map(n=>String.fromCharCode(n)).join("");return Pa(o)}function Pa(e){try{return decodeURIComponent(escape(e))}catch{return e}}const Ra=943868237,Mr=4,vt=Mr+8,Na=1028,wr=5,Bn={read:Oa};function Oa(e,t,r){try{if(Array.isArray(e))return Hn(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,r);const{naaBlock:o,dataOffset:n}=Ua(e,t);return Hn(e,o,n,r)}catch{return{}}}function Ua(e,t){for(;t+vt<=e.byteLength;){const r=Da(e,t);if(va(r))return{naaBlock:r,dataOffset:t+vt};t+=vt+r.size+Ma(r)}throw new Error("No IPTC NAA resource block.")}function Da(e,t){if(e.getUint32(t,!1)!==Ra)throw new Error("Not an IPTC resource block.");return{type:e.getUint16(t+Mr),size:e.getUint16(t+10)}}function va(e){return e.type===Na}function Ma(e){return e.size%2!==0?1:0}function Hn(e,t,r,o){const n={};let i;const a=r+t.size;for(;r<a&&r<e.byteLength;){const{tag:c,tagSize:g}=wa(e,r,n,i,o);if(c===null)break;c&&("encoding"in c&&(i=c.encoding),n[c.name]===void 0||c.repeatable===void 0?n[c.name]={id:c.id,value:c.value,description:c.description}:(n[c.name]instanceof Array||(n[c.name]=[{id:n[c.name].id,value:n[c.name].value,description:n[c.name].description}]),n[c.name].push({id:c.id,value:c.value,description:c.description}))),r+=wr+g}return n}function wa(e,t,r,o,n){if(La(e,t))return{tag:null,tagSize:0};const c=e.getUint16(t+1),g=e.getUint16(t+3);if(!n&&!Ge.iptc[c])return{tag:void 0,tagSize:g};const E=ka(e,t+wr,g),s={id:c,name:Ga(Ge.iptc[c],c,E),value:E,description:ja(Ge.iptc[c],E,r,o)};return Xa(c)&&(s.repeatable=!0),Ya(c)&&(s.encoding=Ge.iptc[c].encoding_name(E)),{tag:s,tagSize:g}}function La(e,t){return e.getUint8(t)!==28}function ka(e,t,r){const o=[];for(let n=0;n<r;n++)o.push(e.getUint8(t+n));return o}function Ga(e,t,r){return e?Ba(e)?e:Ha(e)?e.name(r):e.name:`undefined-${t}`}function Ba(e){return typeof e=="string"}function Ha(e){return typeof e.name=="function"}function ja(e,t,r,o){if($a(e))try{return e.description(t,r)}catch{}return za(e,t)?vr.decode(o,t):t}function za(e,t){return e&&t instanceof Array}function $a(e){return e&&e.description!==void 0}function Xa(e){return Ge.iptc[e]&&Ge.iptc[e].repeatable}function Ya(e){return Ge.iptc[e]&&Ge.iptc[e].encoding_name!==void 0}const dt={"tiff:Orientation"(e){return e==="1"?"Horizontal (normal)":e==="2"?"Mirror horizontal":e==="3"?"Rotate 180":e==="4"?"Mirror vertical":e==="5"?"Mirror horizontal and rotate 270 CW":e==="6"?"Rotate 90 CW":e==="7"?"Mirror horizontal and rotate 90 CW":e==="8"?"Rotate 270 CW":e},"tiff:ResolutionUnit":e=>Y.ResolutionUnit(parseInt(e,10)),"tiff:XResolution":e=>qe(Y.XResolution,e),"tiff:YResolution":e=>qe(Y.YResolution,e),"exif:ApertureValue":e=>qe(Y.ApertureValue,e),"exif:GPSLatitude":jn,"exif:GPSLongitude":jn,"exif:FNumber":e=>qe(Y.FNumber,e),"exif:FocalLength":e=>qe(Y.FocalLength,e),"exif:FocalPlaneResolutionUnit":e=>Y.FocalPlaneResolutionUnit(parseInt(e,10)),"exif:ColorSpace":e=>Y.ColorSpace(Za(e)),"exif:ComponentsConfiguration"(e,t){if(/^\d, \d, \d, \d$/.test(t)){const r=t.split(", ").map(o=>o.charCodeAt(0));return Y.ComponentsConfiguration(r)}return t},"exif:Contrast":e=>Y.Contrast(parseInt(e,10)),"exif:CustomRendered":e=>Y.CustomRendered(parseInt(e,10)),"exif:ExposureMode":e=>Y.ExposureMode(parseInt(e,10)),"exif:ExposureProgram":e=>Y.ExposureProgram(parseInt(e,10)),"exif:ExposureTime"(e){return Lr(e)?Y.ExposureTime(e.split("/").map(t=>parseInt(t,10))):e},"exif:MeteringMode":e=>Y.MeteringMode(parseInt(e,10)),"exif:Saturation":e=>Y.Saturation(parseInt(e,10)),"exif:SceneCaptureType":e=>Y.SceneCaptureType(parseInt(e,10)),"exif:Sharpness":e=>Y.Sharpness(parseInt(e,10)),"exif:ShutterSpeedValue":e=>qe(Y.ShutterSpeedValue,e),"exif:WhiteBalance":e=>Y.WhiteBalance(parseInt(e,10))};function qe(e,t){return Lr(t)?e(t.split("/")):t}function Za(e){return e.substring(0,2)==="0x"?parseInt(e.substring(2),16):parseInt(e,10)}function Lr(e){return/^-?\d+\/-?\d+$/.test(e)}function jn(e){const[t,r]=e.split(",");if(t!==void 0&&r!==void 0){const o=parseFloat(t),n=parseFloat(r),i=r.charAt(r.length-1);if(!Number.isNaN(o)&&!Number.isNaN(n))return""+(o+n/60)+i}return e}const Wa={get:Ka};function Ka(){if(typeof DOMParser<"u")return DOMParser;try{return __non_webpack_require__("@xmldom/xmldom").DOMParser}catch{return}}const zn={read:Qa};function Qa(e,t){return typeof e=="string"?Xn({},e):qa(e,t).reduce(Xn,{})}function qa(e,t){if(t.length===0)return[];const r=[$n(e,t.slice(0,1))];return t.length>1&&r.push($n(e,t.slice(1))),r}function $n(e,t){const r=t.reduce((i,a)=>i+a.length,0),o=new Uint8Array(r);let n=0;for(let i=0;i<t.length;i++){const a=t[i],c=e.buffer.slice(a.dataOffset,a.dataOffset+a.length);o.set(new Uint8Array(c),n),n+=a.length}return new DataView(o.buffer)}function Xn(e,t){try{const{doc:r,raw:o}=Ja(t);e._raw=(e._raw||"")+o;const n=kr(r);return J(e,Br(Gr(n,!0)))}catch{return e}}function Ja(e){const t=Wa.get();if(!t)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),new Error;const r=new t,o=typeof e=="string"?e:Z(e,0,e.byteLength),n=r.parseFromString(Va(o),"application/xml");if(n.documentElement.nodeName==="parsererror")throw new Error(n.documentElement.textContent);return{doc:n,raw:o}}function Va(e){return e.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")}function kr(e){for(let t=0;t<e.childNodes.length;t++){if(e.childNodes[t].tagName==="x:xmpmeta")return kr(e.childNodes[t]);if(e.childNodes[t].tagName==="rdf:RDF")return e.childNodes[t]}throw new Error}function Gr(e,t=!1){const r=ec(e);return tc(r)?t?{}:nc(r[0]):rc(r)}function ec(e){const t=[];for(let r=0;r<e.childNodes.length;r++)t.push(e.childNodes[r]);return t}function tc(e){return e.length===1&&e[0].nodeName==="#text"}function nc(e){return e.nodeValue}function rc(e){const t={};return e.forEach(r=>{if(ic(r)){const o=oc(r);t[r.nodeName]!==void 0?(Array.isArray(t[r.nodeName])||(t[r.nodeName]=[t[r.nodeName]]),t[r.nodeName].push(o)):t[r.nodeName]=o}}),t}function ic(e){return e.nodeName&&e.nodeName!=="#text"}function oc(e){return{attributes:sc(e),value:Gr(e)}}function sc(e){const t={};for(let r=0;r<e.attributes.length;r++)t[e.attributes[r].nodeName]=decodeURIComponent(escape(e.attributes[r].value));return t}function Br(e){const t={};if(typeof e=="string")return e;for(const r in e){let o=e[r];Array.isArray(o)||(o=[o]),o.forEach(n=>{J(t,an(n.attributes)),typeof n.value=="object"&&J(t,Hr(n.value))})}return t}function an(e){const t={};for(const r in e)ac(r)&&(t[_t(r)]={value:e[r],attributes:{},description:De(e[r],r)});return t}function ac(e){return e!=="rdf:parseType"&&!yt(e)}function yt(e){return e.split(":")[0]==="xmlns"}function _t(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function De(e,t=void 0){if(Array.isArray(e)){const r=cc(e);return t&&typeof dt[t]=="function"?dt[t](e,r):r}if(typeof e=="object")return uc(e);try{return t&&typeof dt[t]=="function"?dt[t](e):decodeURIComponent(escape(e))}catch{return e}}function cc(e){return e.map(t=>t.value!==void 0?De(t.value):De(t)).join(", ")}function uc(e){const t=[];for(const r in e)t.push(`${lc(r)}: ${De(e[r].value)}`);return t.join("; ")}function lc(e){return e==="CiAdrCity"?"CreatorCity":e==="CiAdrCtry"?"CreatorCountry":e==="CiAdrExtadr"?"CreatorAddress":e==="CiAdrPcode"?"CreatorPostalCode":e==="CiAdrRegion"?"CreatorRegion":e==="CiEmailWork"?"CreatorWorkEmail":e==="CiTelWork"?"CreatorWorkPhone":e==="CiUrlWork"?"CreatorWorkUrl":e}function Hr(e){const t={};for(const r in e)yt(r)||(t[_t(r)]=fc(e[r],r));return t}function fc(e,t){return jr(e)?zr(e,t):$r(e)?Xr(e,t):Yr(e)?Zr(e,t):gc(e)?pc(e,t):Kr(e,t)}function jr(e){return e.attributes["rdf:parseType"]==="Resource"&&e.value["rdf:value"]!==void 0||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]!==void 0}function zr(e,t){const r=lt(e);e.value["rdf:Description"]!==void 0&&(e=e.value["rdf:Description"]),J(r,lt(e),dc(e));const o=hc(e);return{value:o,attributes:r,description:De(o,t)}}function lt(e){const t={};for(const r in e.attributes)r!=="rdf:parseType"&&r!=="rdf:resource"&&!yt(r)&&(t[_t(r)]=e.attributes[r]);return t}function dc(e){const t={};for(const r in e.value)r!=="rdf:value"&&!yt(r)&&(t[_t(r)]=e.value[r].value);return t}function hc(e){return Qr(e.value["rdf:value"])||e.value["rdf:value"].value}function $r(e){return e.attributes["rdf:parseType"]==="Resource"||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]===void 0}function Xr(e,t){const r={value:{},attributes:{}};return e.value["rdf:Description"]!==void 0&&(J(r.value,an(e.value["rdf:Description"].attributes)),J(r.attributes,lt(e)),e=e.value["rdf:Description"]),J(r.value,Hr(e.value)),r.description=De(r.value,t),r}function Yr(e){return Object.keys(e.value).length===0&&e.attributes["xml:lang"]===void 0&&e.attributes["rdf:resource"]===void 0}function Zr(e,t){const r=an(e.attributes);return{value:r,attributes:{},description:De(r,t)}}function gc(e){return Wr(e.value)!==void 0}function Wr(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function pc(e,t){let r=Wr(e.value).value["rdf:li"];const o=lt(e),n=[];return r===void 0?r=[]:Array.isArray(r)||(r=[r]),r.forEach(i=>{n.push(mc(i))}),{value:n,attributes:o,description:De(n,t)}}function mc(e){return jr(e)?zr(e):$r(e)?Xr(e).value:Yr(e)?Zr(e).value:Kr(e)}function Kr(e,t){const r=Qr(e)||Br(e.value);return{value:r,attributes:lt(e),description:De(r,t)}}function Qr(e){return e.attributes&&e.attributes["rdf:resource"]}const Yn={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},Zn={4:{name:"Preferred CMM type",value:(e,t)=>Z(e,t,4),description:e=>e!==null?Mt(e):""},8:{name:"Profile Version",value:(e,t)=>e.getUint8(t).toString(10)+"."+(e.getUint8(t+1)>>4).toString(10)+"."+(e.getUint8(t+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,t)=>Z(e,t,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,t)=>Z(e,t,4)},20:{name:"Connection Space",value:(e,t)=>Z(e,t,4)},24:{name:"ICC Profile Date",value:(e,t)=>xc(e,t).toISOString()},36:{name:"ICC Signature",value:(e,t)=>Ec(e.buffer.slice(t,t+4))},40:{name:"Primary Platform",value:(e,t)=>Z(e,t,4),description:e=>Mt(e)},48:{name:"Device Manufacturer",value:(e,t)=>Z(e,t,4),description:e=>Mt(e)},52:{name:"Device Model Number",value:(e,t)=>Z(e,t,4)},64:{name:"Rendering Intent",value:(e,t)=>e.getUint32(t),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,t)=>Z(e,t,4)}};function xc(e,t){const r=e.getUint16(t),o=e.getUint16(t+2)-1,n=e.getUint16(t+4),i=e.getUint16(t+6),a=e.getUint16(t+8),c=e.getUint16(t+10);return new Date(Date.UTC(r,o,n,i,a,c))}function Ec(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function Mt(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}const Wn={read:Cc},Sc=84,Tc=128,Ac="acsp",Ic="desc",bc="mluc",Fc="text",yc="sig ",_c=12;function Cc(e,t){try{const r=t.reduce((a,c)=>a+c.length,0),o=new Uint8Array(r);let n=0;const i=Pc(e);for(let a=1;a<=t.length;a++){const c=t.find(s=>s.chunkNumber===a);if(!c)throw new Error(`ICC chunk ${a} not found`);const g=i.slice(c.offset,c.offset+c.length),E=new Uint8Array(g);o.set(E,n),n+=E.length}return Oc(new DataView(o.buffer))}catch{return{}}}function Pc(e){return Array.isArray(e)?new DataView(Uint8Array.from(e).buffer).buffer:e.buffer}function Rc(e){return e.length<Tc+4}function Nc(e,t){return e.length<t+_c}function Oc(e){const t=e.buffer,r=e.getUint32();if(e.byteLength!==r)throw new Error("ICC profile length not matching");if(e.length<Sc)throw new Error("ICC profile too short");const o={},n=Object.keys(Zn);for(let g=0;g<n.length;g++){const E=n[g],s=Zn[E],l=s.value(e,parseInt(E,10));let u=l;s.description&&(u=s.description(l)),o[s.name]={value:l,description:u}}if(ht(t.slice(36,40))!==Ac)throw new Error("ICC profile: missing signature");if(Rc(t))return o;const a=e.getUint32(128);let c=132;for(let g=0;g<a;g++){if(Nc(t,c))return o;const E=Z(e,c,4),s=e.getUint32(c+4),l=e.getUint32(c+8);if(s>t.length)return o;const u=Z(e,s,4);if(u===Ic){const f=e.getUint32(s+8);if(f>l)return o;const x=ht(t.slice(s+12,s+f+11));at(o,E,x)}else if(u===bc){const f=e.getUint32(s+8),x=e.getUint32(s+12);let y=s+16;const I=[];for(let T=0;T<f;T++){const D=Z(e,y+0,2),v=Z(e,y+2,2),O=e.getUint32(y+4),N=e.getUint32(y+8),S=mo(e,s+N,O);I.push({languageCode:D,countryCode:v,text:S}),y+=x}if(f===1)at(o,E,I[0].text);else{const T={};for(let D=0;D<I.length;D++)T[`${I[D].languageCode}-${I[D].countryCode}`]=I[D].text;at(o,E,T)}}else if(u===Fc){const f=ht(t.slice(s+8,s+l-7));at(o,E,f)}else if(u===yc){const f=ht(t.slice(s+8,s+12));at(o,E,f)}c=c+12}return o}function ht(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function at(e,t,r){Yn[t]?e[Yn[t].name]={value:r,description:r}:e[t]={value:r,description:r}}const Uc={read:Dc};function Dc(e,t){return{"Image Width":vc(e,t),"Image Height":Mc(e,t),"Bit Depth":wc(e,t),"Color Type":Lc(e,t),Compression:kc(e,t),Filter:Gc(e,t),Interlace:Bc(e,t)}}function vc(e,t){if(t+0+4>e.byteLength)return;const n=j.getLongAt(e,t);return{value:n,description:`${n}px`}}function Mc(e,t){if(t+4+4>e.byteLength)return;const n=j.getLongAt(e,t+4);return{value:n,description:`${n}px`}}function wc(e,t){if(t+8+1>e.byteLength)return;const n=j.getByteAt(e,t+8);return{value:n,description:`${n}`}}function Lc(e,t){const n={0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"};if(t+9+1>e.byteLength)return;const i=j.getByteAt(e,t+9);return{value:i,description:n[i]||"Unknown"}}function kc(e,t){if(t+10+1>e.byteLength)return;const n=j.getByteAt(e,t+10);return{value:n,description:n===0?"Deflate/Inflate":"Unknown"}}function Gc(e,t){if(t+11+1>e.byteLength)return;const n=j.getByteAt(e,t+11);return{value:n,description:n===0?"Adaptive":"Unknown"}}function Bc(e,t){const n={0:"Noninterlaced",1:"Adam7 Interlace"};if(t+12+1>e.byteLength)return;const i=j.getByteAt(e,t+12);return{value:i,description:n[i]||"Unknown"}}const Hc={read:$c},Kt="STATE_KEYWORD",Qt="STATE_COMPRESSION",qt="STATE_LANG",qr="STATE_TRANSLATED_KEYWORD",jc="STATE_TEXT",zc=2;function $c(e,t){return t.reduce((r,{offset:o,length:n,type:i})=>{const{name:a,value:c,description:g}=Xc(e,o,n,i);return a&&(r[a]={value:c,description:g}),r},{})}function Xc(e,t,r,o){const n=[],i=[],a=[];let c=Kt;for(let E=0;E<r&&t+E<e.byteLength;E++){if(c===Qt){if(e.getUint8(t+E)!==0)return{};E+=zc,c=Kn(o,c)}const s=e.getUint8(t+E);s===0?c=Kn(o,c):c===Kt?n.push(s):c===qt?i.push(s):c===qr||a.push(s)}const g=tt(a);return{name:Yc(o,i,n),value:g,description:o===Cr?vr.decode("UTF-8",a):g}}function Kn(e,t){return t===Kt&&e===Cr?Qt:t===Qt?qt:t===qt?qr:jc}function Yc(e,t,r){const o=tt(r);if(e===rs||t.length===0)return o;const n=tt(t);return`${o} (${n})`}const Zc={read:Wc};function Wc(e,t){const r={};for(let o=0;o<t.length;o++){const n=j.getLongAt(e,t[o]+ct),i=Z(e,t[o]+We,Ne);i===Pr?(r["Pixels Per Unit X"]=Kc(e,t[o],n),r["Pixels Per Unit Y"]=Qc(e,t[o],n),r["Pixel Units"]=qc(e,t[o],n)):i===Rr&&(r["Modify Date"]=Jc(e,t[o],n))}return r}function Kc(e,t,r){if(!Ct(e,t,r,0,4))return;const i=j.getLongAt(e,t+ge+0);return{value:i,description:""+i}}function Qc(e,t,r){if(!Ct(e,t,r,4,4))return;const i=j.getLongAt(e,t+ge+4);return{value:i,description:""+i}}function qc(e,t,r){if(!Ct(e,t,r,8,1))return;const i=j.getByteAt(e,t+ge+8);return{value:i,description:i===1?"meters":"Unknown"}}function Jc(e,t,r){if(!Ct(e,t,r,0,7))return;const n=j.getShortAt(e,t+ge),i=j.getByteAt(e,t+ge+2),a=j.getByteAt(e,t+ge+3),c=j.getByteAt(e,t+ge+4),g=j.getByteAt(e,t+ge+5),E=j.getByteAt(e,t+ge+6);return{value:[n,i,a,c,g,E],description:`${Je(n,4)}-${Je(i,2)}-${Je(a,2)} ${Je(c,2)}:${Je(g,2)}:${Je(E,2)}`}}function Ct(e,t,r,o,n){return o+n<=r&&t+ge+o+n<=e.byteLength}function Je(e,t){return`${"0".repeat(t-(""+e).length)}${e}`}const Vc=[6,7,99],eu={get:tu};function tu(e,t,r){if(nu(t)){t.type="image/jpeg";const o=r+t.JPEGInterchangeFormat.value;t.image=e.buffer.slice(o,o+t.JPEGInterchangeFormatLength.value),Tr(t,"base64",function(){return Ar(this.image)})}return t}function nu(e){return e&&(e.Compression===void 0||Vc.includes(e.Compression.value))&&e.JPEGInterchangeFormat&&e.JPEGInterchangeFormat.value&&e.JPEGInterchangeFormatLength&&e.JPEGInterchangeFormatLength.value}function Jr(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=new Error().stack}Jr.prototype=new Error;const ru={MetadataMissingError:Jr};function iu(e,t){return ou(e)?su(e,t).then(r=>wt(r,t)):hu(e)?gu(e).then(r=>wt(r,t)):wt(e,t)}function ou(e){return typeof e=="string"}function su(e,t){return/^https?:\/\//.test(e)?typeof fetch<"u"?au(e,t):cu(e,t):lu(e)?Promise.resolve(xo(e)):fu(e,t)}function au(e,{length:t}={}){const r={method:"GET"};return Number.isInteger(t)&&t>=0&&(r.headers={range:`bytes=0-${t-1}`}),fetch(e,r).then(o=>o.arrayBuffer())}function cu(e,{length:t}={}){return new Promise((r,o)=>{const n={};Number.isInteger(t)&&t>=0&&(n.headers={range:`bytes=0-${t-1}`}),uu(e)(e,n,a=>{if(a.statusCode>=200&&a.statusCode<=299){const c=[];a.on("data",g=>c.push(Buffer.from(g))),a.on("error",g=>o(g)),a.on("end",()=>r(Buffer.concat(c)))}else o(`Could not fetch file: ${a.statusCode} ${a.statusMessage}`),a.resume()}).on("error",a=>o(a))})}function uu(e){return/^https:\/\//.test(e)?__non_webpack_require__("https").get:__non_webpack_require__("http").get}function lu(e){return/^data:[^;,]*(;base64)?,/.test(e)}function fu(e,{length:t}={}){return new Promise((r,o)=>{const n=du();n.open(e,(i,a)=>{i?o(i):n.stat(e,(c,g)=>{if(c)o(c);else{const E=Math.min(g.size,t!==void 0?t:g.size),s=Buffer.alloc(E),l={buffer:s,length:E};n.read(a,l,u=>{u?o(u):n.close(a,f=>{f&&console.warn(`Could not close file ${e}:`,f),r(s)})})}})})})}function du(){try{return __non_webpack_require__("fs")}catch{return}}function hu(e){return typeof window<"u"&&typeof File<"u"&&e instanceof File}function gu(e){return new Promise((t,r)=>{const o=new FileReader;o.onload=n=>t(n.target.result),o.onerror=()=>r(o.error),o.readAsArrayBuffer(e)})}function wt(e,t){return pu(e)&&(e=new Uint8Array(e).buffer),xu(mu(e),t)}function pu(e){try{return Buffer.isBuffer(e)}catch{return!1}}function mu(e){try{return new DataView(e)}catch{return new Eo(e)}}function xu(e,{expanded:t=!1,includeUnknown:r=!1}={expanded:!1,includeUnknown:!1}){let o=!1,n={};const{fileDataOffset:i,jfifDataOffset:a,tiffHeaderOffset:c,iptcDataOffset:g,xmpChunks:E,iccChunks:s,mpfDataOffset:l,pngHeaderOffset:u,pngTextChunks:f,pngChunkOffsets:x}=Fs.parseAppMarkers(e);if(Eu(i)){o=!0;const I=ra.read(e,i);t?n.file=I:n=J({},n,I)}if(Su(a)){o=!0;const I=ha.read(e,a);t?n.jfif=I:n=J({},n,I)}if(Tu(c)){o=!0;const I=wn.read(e,c,r);if(I.Thumbnail&&(n.Thumbnail=I.Thumbnail,delete I.Thumbnail),t?(n.exif=I,Au(n)):n=J({},n,I),I["IPTC-NAA"]&&!Qn(g)){const T=Bn.read(I["IPTC-NAA"].value,0,r);t?n.iptc=T:n=J({},n,T)}if(I.ApplicationNotes&&!qn(E)){const T=zn.read(tt(I.ApplicationNotes.value));t?n.xmp=T:(delete T._raw,n=J({},n,T))}if(I.ICC_Profile&&!Jn(s)){const T=Wn.read(I.ICC_Profile.value,[{offset:0,length:I.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);t?n.icc=T:n=J({},n,T)}}if(Qn(g)){o=!0;const I=Bn.read(e,g,r);t?n.iptc=I:n=J({},n,I)}if(qn(E)){o=!0;const I=zn.read(e,E);t?n.xmp=I:(delete I._raw,n=J({},n,I))}if(Jn(s)){o=!0;const I=Wn.read(e,s);t?n.icc=I:n=J({},n,I)}if(Iu(l)){o=!0;const I=wn.readMpf(e,l,r);t?n.mpf=I:n=J({},n,I)}if(bu(u)){o=!0;const I=Uc.read(e,u);t?(n.png=n.png?J({},n.png,I):I,n.pngFile=I):n=J({},n,I)}if(Fu(f)){o=!0;const I=Hc.read(e,f);t?(n.png=n.png?J({},n.png,I):I,n.pngText=I):n=J({},n,I)}if(yu(x)){o=!0;const I=Zc.read(e,x);t?n.png=n.png?J({},n.png,I):I:n=J({},n,I)}const y=eu.get(e,n.Thumbnail,c);if(y?(o=!0,n.Thumbnail=y):delete n.Thumbnail,!o)throw new ru.MetadataMissingError;return n}function Eu(e){return e!==void 0}function Su(e){return e!==void 0}function Tu(e){return e!==void 0}function Au(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=At(e.exif.GPSLatitude.value),e.exif.GPSLatitudeRef.value.join("")==="S"&&(e.gps.Latitude=-e.gps.Latitude)}catch{}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=At(e.exif.GPSLongitude.value),e.exif.GPSLongitudeRef.value.join("")==="W"&&(e.gps.Longitude=-e.gps.Longitude)}catch{}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],e.exif.GPSAltitudeRef.value===1&&(e.gps.Altitude=-e.gps.Altitude)}catch{}}}function Qn(e){return e!==void 0}function qn(e){return Array.isArray(e)&&e.length>0}function Jn(e){return Array.isArray(e)&&e.length>0}function Iu(e){return e!==void 0}function bu(e){return e!==void 0}function Fu(e){return e!==void 0}function yu(e){return e!==void 0}const Vr=async e=>{const t=await iu(e),r=t.DateTimeOriginal?.description||t.DateTimeDigitized?.description||t.DateTime?.description;return typeof r!="string"?null:po.parse(r)},Vn=({file:e,showDate:t,enableOcr:r,onScoreRecognized:o})=>{const n=Vt(),[i,a]=q.useState(null),[c,g]=q.useState(null),[E,s]=q.useState(null),[l,u]=q.useState([]),[f,x]=q.useState(null),y=q.useRef(null),I=ir(gt.results.recognizeScoreMutation.mutationOptions());q.useEffect(()=>{if(!FileReader){s("FileReader not supported");return}if(e)try{const O=new FileReader;O.onload=async()=>{const N=O.result;if(typeof N!="string")throw new Error("Invalid file");a(N);const S=await Vr(N);s(null),g(S)},O.readAsDataURL(e)}catch(O){O instanceof Error&&s(O.message)}else a(null),g(null),s(null),u([]),x(null)},[e]);const T=async()=>{if(!(!i||l.length===0||!y.current))try{s(null);const O=y.current.clientWidth,N=y.current.clientHeight,S=await ho(i,l[0],O,N),M=await le.getFilefromDataUrl(S,"cropped.png"),p=await le(M,{maxWidthOrHeight:360,maxSizeMB:.03,initialQuality:.9}),m=await le.getDataUrlFromFile(p),F=await I.mutateAsync({image:m});x(F)}catch(O){console.error("OCR error:",O),s(O instanceof Error?O.message:"Recognition failed")}},D=()=>{if(!f)return;const[O,N,S,M,p,m,F]=f;o?.({perfect:O>=0?O:-1,great:N>=0?N:-1,good:S>=0?S:-1,bad:M>=0?M:-1,miss:p>=0?p:-1,combo:m>=0?m:-1,score:F>=0?F:-1}),x(null)},v=()=>{x(null)};return i?G.jsxs(Lt,{gap:"xs",children:[t&&G.jsxs(ue,{size:"xs",c:"dimmed",children:[n.DATE_TAKEN,": ",c?c.toLocaleString():n.UNKNOWN]}),r?G.jsx(ro,{areas:l,onChange:u,maxAreas:1,wrapperStyle:{maxWidth:"100%"},children:G.jsx("img",{ref:y,style:{maxHeight:400,maxWidth:"100%",objectFit:"contain"},src:i,alt:"Screenshot preview"})}):G.jsx("img",{style:{maxHeight:270,maxWidth:"100%",objectFit:"contain"},src:i,alt:"Screenshot preview"}),r&&!f&&G.jsxs(G.Fragment,{children:[G.jsx(ue,{size:"xs",c:"dimmed",children:l.length===0?n.OCR_DRAW_RECTANGLE_HINT:n.OCR_AREA_SELECTED_HINT}),G.jsx(et,{size:"sm",variant:"light",disabled:l.length===0,loading:I.isPending,onClick:T,children:n.RECOGNIZE_SCORE})]}),f&&G.jsx(pt,{color:"blue",title:n.RECOGNIZED_NUMBERS,radius:"md",children:G.jsxs(Lt,{gap:"xs",children:[G.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.2em"},children:[G.jsx(ue,{size:"sm",c:"cyan",children:"Perfect:"}),G.jsx(ue,{size:"sm",c:"cyan",children:f[0]>=0?f[0]:"?"}),G.jsx(ue,{size:"sm",c:"green",children:"Great:"}),G.jsx(ue,{size:"sm",c:"green",children:f[1]>=0?f[1]:"?"}),G.jsx(ue,{size:"sm",c:"yellow",children:"Good:"}),G.jsx(ue,{size:"sm",c:"yellow",children:f[2]>=0?f[2]:"?"}),G.jsx(ue,{size:"sm",c:"pink",children:"Bad:"}),G.jsx(ue,{size:"sm",c:"pink",children:f[3]>=0?f[3]:"?"}),G.jsx(ue,{size:"sm",c:"red",children:"Miss:"}),G.jsx(ue,{size:"sm",c:"red",children:f[4]>=0?f[4]:"?"}),G.jsx(ue,{size:"sm",children:"Combo:"}),G.jsx(ue,{size:"sm",children:f[5]>=0?f[5]:"?"}),G.jsx(ue,{size:"sm",fw:"bold",children:"Score:"}),G.jsx(ue,{size:"sm",fw:"bold",children:f[6]>=0?f[6]:"?"})]}),G.jsxs(rr,{gap:"xs",children:[G.jsx(et,{size:"xs",color:"blue",onClick:D,children:n.FILL_FORM}),G.jsx(et,{size:"xs",variant:"light",color:"gray",onClick:v,children:n.CANCEL})]})]})}),E&&G.jsxs(ue,{size:"xs",c:"red",children:[n.ERROR,": ",E]})]}):null},_u=e=>le(e,{maxWidthOrHeight:1400,maxSizeMB:.1,initialQuality:.7}),Cu=[{value:"SSS",label:"SSS"},{value:"SS",label:"SS"},{value:"S",label:"S"},{value:"A+",label:"A+"},{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"F",label:"F"},{value:"B+",label:"B+"},{value:"C+",label:"C+"},{value:"D+",label:"D+"},{value:"F+",label:"F+"}],Pu=[{value:"XX",label:"XX"},{value:"Prime2",label:"Prime 2"},{value:"Prime",label:"Prime"}],Ru=[{value:"",label:"No mods"},{value:"VJ",label:"Rank (VJ)"},{value:"HJ",label:"HJ"}],Lu=()=>{const e=Vt(),t=di(),{sharedChartId:r}=hi(),o=gi(),n=pi(),i=ir(gt.results.addResultMutation.mutationOptions({onSuccess:()=>{n.invalidateQueries(gt.charts.chart.queryFilter()),n.invalidateQueries(gt.charts.search.infiniteQueryFilter())}})),a=Ai({sharedChartId:r?Number(r):0}),c=o.data?.id,g=!!o.data?.can_add_results_manually,E=a.data?.items[0],s=E&&`${E.songName} ${E.label}`,[l,u]=q.useState(null),[f,x]=q.useState(!1),{renderPopup:y,confirm:I}=Gi({okText:e.SUBMIT}),T=mi({initialValues:{screenshot:null,grade:"",perfect:"",great:"",good:"",bad:"",miss:"",combo:"",score:"",mix:"XX",mod:""},validate:{screenshot:N=>N?null:e.SCREENSHOT_REQUIRED,grade:N=>N?null:e.GRADE_REQUIRED,perfect:N=>N?null:e.PERFECT_REQUIRED,great:N=>N?null:e.GREAT_REQUIRED,good:N=>N?null:e.GOOD_REQUIRED,bad:N=>N?null:e.BAD_REQUIRED,miss:N=>N?null:e.MISS_REQUIRED,combo:N=>N?null:e.COMBO_REQUIRED,score:N=>!N||N.length<4?e.SCORE_REQUIRED_MIN_DIGITS:null}}),D=T.values.screenshot,v=T.values,O=async({screenshot:N,...S})=>{if(!(!c||!r||!N)){try{await I()}catch{return}x(!0),u(null);try{const M=await _u(N),p=await Vr(N),m={grade:S.grade,perfect:Number(S.perfect),great:Number(S.great),good:Number(S.good),bad:Number(S.bad),miss:Number(S.miss),combo:Number(S.combo),score:Number(S.score),mix:S.mix,mod:S.mod,screenshot:await Bi(M),fileName:N.name,date:p||new Date,isExactDate:!!p,sharedChartId:Number(r),playerId:c};await i.mutateAsync(m),T.reset(),t(xi.leaderboard.sharedChart.getPath({sharedChartId:r}))}catch(M){console.error(M),u(M)}x(!1)}};return c?g?G.jsxs("div",{className:Xe.addResultPage,children:[y({content:G.jsxs("div",{className:Xe.confirmation,children:[G.jsxs("div",{className:Xe.splitPanels,children:[G.jsx("div",{className:Xe.screenshotPanel,children:D&&G.jsx(Vn,{file:D})}),G.jsxs("div",{className:Xe.formPanel,children:[G.jsx("div",{className:Xe.chartName,children:s}),G.jsxs("div",{className:Xe.grid,children:[G.jsx("div",{children:e.GRADE}),G.jsx("div",{children:v.grade}),G.jsx("div",{style:{color:"#29D7FF"},children:"Perfect"}),G.jsx("div",{style:{color:"#29D7FF"},children:v.perfect}),G.jsx("div",{style:{color:"#21d021"},children:"Great"}),G.jsx("div",{style:{color:"#21d021"},children:v.great}),G.jsx("div",{style:{color:"#dede3a"},children:"Good"}),G.jsx("div",{style:{color:"#dede3a"},children:v.good}),G.jsx("div",{style:{color:"#f278fc"},children:"Bad"}),G.jsx("div",{style:{color:"#f278fc"},children:v.bad}),G.jsx("div",{style:{color:"#f48181"},children:"Miss"}),G.jsx("div",{style:{color:"#f48181"},children:v.miss}),G.jsx("div",{children:"Combo"}),G.jsx("div",{children:v.combo}),G.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:"Score"}),G.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:v.score}),G.jsx("div",{children:e.MODS}),G.jsx("div",{children:v.mod||e.NONE_NORMAL_MODE})]})]})]}),G.jsx(pt,{radius:"md",variant:"light",color:"yellow",icon:G.jsx(Oi,{}),children:e.FALSE_RESULTS_WARNING})]})}),G.jsx(tn,{order:2,mb:"xs",children:e.SUBMIT_RESULT}),G.jsxs(ue,{mb:"md",children:[e.CHART,": ",s]}),G.jsx("form",{onSubmit:T.onSubmit(O),children:G.jsxs(Lt,{gap:"sm",children:[G.jsx(yi,{label:e.SCREENSHOT,placeholder:e.SELECT_SCREENSHOT,accept:"image/*",withAsterisk:!0,...T.getInputProps("screenshot")}),D?.name.toLowerCase().endsWith(".heic")&&G.jsx(ue,{c:"red",size:"sm",children:e.HEIC_NOT_SUPPORTED}),D&&G.jsxs(G.Fragment,{children:[G.jsx(Vn,{showDate:!0,enableOcr:!0,file:D,onScoreRecognized:N=>{N.perfect>=0&&T.setFieldValue("perfect",String(N.perfect)),N.great>=0&&T.setFieldValue("great",String(N.great)),N.good>=0&&T.setFieldValue("good",String(N.good)),N.bad>=0&&T.setFieldValue("bad",String(N.bad)),N.miss>=0&&T.setFieldValue("miss",String(N.miss)),N.combo>=0&&T.setFieldValue("combo",String(N.combo)),N.score>=0&&T.setFieldValue("score",String(N.score))}}),G.jsx(Nt,{label:e.GRADE,placeholder:e.SELECT_GRADE,data:Cu,withAsterisk:!0,...T.getInputProps("grade")}),["perfect","great","good","bad","miss","combo"].map(N=>G.jsx(ln,{label:N[0].toUpperCase()+N.slice(1),placeholder:"000",inputMode:"numeric",withAsterisk:!0,...T.getInputProps(N)},N)),G.jsx(ln,{label:"Score",placeholder:"000000",inputMode:"numeric",withAsterisk:!0,...T.getInputProps("score")}),G.jsx(Nt,{label:e.MIX,data:Pu,withAsterisk:!0,...T.getInputProps("mix")}),G.jsx(Nt,{label:e.JUDGE_RANK,data:Ru,withAsterisk:!0,...T.getInputProps("mod")}),G.jsx(et,{type:"submit",loading:f,disabled:!T.isValid(),children:e.SUBMIT})]}),l instanceof Error&&G.jsx(pt,{color:"red",variant:"light",children:l.message})]})})]}):G.jsx(pt,{radius:"md",variant:"light",color:"red",title:e.ERROR,icon:G.jsx(Si,{}),children:e.NO_ACCESS_TO_PAGE}):null};export{Lu as default};
//# sourceMappingURL=AddResult-B-RJKaKD.js.map
