import{r as X,c as Fi,f as rt,u as We,a as Rt,b as vt,d as cn,j as k,U as _i,g as un,I as ln,e as Pi,C as gr,B as bt,p as pr,h as It,i as mr,k as xr,l as Ri,m as vi,n as Ni,o as Oi,q as Ui,s as Sr,t as wi,v as Mi,w as Er,x as Di,y as fn,G as Xt,z as Ye,R as Li,A as br,D as St,S as Yt,T as ue,E as dt,P as Lt,F as ki,H as Gi,J as Bi,K as ji,L as Hi,M as kt,N as zi,O as Cn,Q as $i}from"./index-BR044fRZ.js";import{G as Xi,F as Yi}from"./index.esm-BPPdmaM7.js";import{u as yn,M as Zi}from"./Modal-CKzzehKo.js";import{u as Wi}from"./useSingleChartQuery-CtaBVe3K.js";import"./Paper-DNgGSVPq.js";import"./useFilter-K56hIlJl.js";function Ki(e,t="use-local-storage"){try{return JSON.stringify(e)}catch{throw new Error(`@mantine/hooks ${t}: Failed to serialize the value`)}}function Qi(e){try{return e&&JSON.parse(e)}catch{return e}}function Ji(e){return{getItem:n=>{try{return window[e].getItem(n)}catch{return console.warn("use-local-storage: Failed to get value from storage, localStorage is blocked"),null}},setItem:(n,i)=>{try{window[e].setItem(n,i)}catch{console.warn("use-local-storage: Failed to set value to storage, localStorage is blocked")}},removeItem:n=>{try{window[e].removeItem(n)}catch{console.warn("use-local-storage: Failed to remove value from storage, localStorage is blocked")}}}}function qi(e,t){const r="mantine-local-storage",{getItem:o,setItem:n,removeItem:i}=Ji(e);return function({key:a,defaultValue:h,getInitialValueInEffect:S=!0,sync:c=!0,deserialize:l=Qi,serialize:u=f=>Ki(f,t)}){const f=X.useCallback(v=>{let N;try{N=typeof window>"u"||!(e in window)||window[e]===null||!!v}catch{N=!0}if(N)return h;const O=o(a);return O!==null?l(O):h},[a,h]),[m,y]=X.useState(f(S)),T=X.useCallback(v=>{v instanceof Function?y(N=>{const O=v(N);return n(a,u(O)),queueMicrotask(()=>{window.dispatchEvent(new CustomEvent(r,{detail:{key:a,value:v(N)}}))}),O}):(n(a,u(v)),window.dispatchEvent(new CustomEvent(r,{detail:{key:a,value:v}})),y(v))},[a]),I=X.useCallback(()=>{i(a),y(h),window.dispatchEvent(new CustomEvent(r,{detail:{key:a,value:h}}))},[a,h]);return yn("storage",v=>{c&&v.storageArea===window[e]&&v.key===a&&y(l(v.newValue??void 0))}),yn(r,v=>{c&&v.detail.key===a&&y(v.detail.value)}),X.useEffect(()=>{h!==void 0&&m===void 0&&T(h)},[h,m,T]),X.useEffect(()=>{const v=f();v!==void 0&&T(v)},[a]),[m===void 0?h:m,T,I]}}function Vi(e){return qi("localStorage","use-local-storage")(e)}function Ir(e,t){return typeof e=="boolean"?e:t.autoContrast}const Tr=X.createContext(null),eo=Tr.Provider,Ar=()=>X.useContext(Tr),[to,no]=Fi();var Cr={card:"m_26775b0a"};const ro={withBorder:!0},io=vt((e,{radius:t})=>({card:{"--card-radius":un(t)}})),dn=rt((e,t)=>{const r=We("CheckboxCard",ro,e),{classNames:o,className:n,style:i,styles:s,unstyled:a,vars:h,checked:S,mod:c,withBorder:l,value:u,onClick:f,defaultChecked:m,onChange:y,attributes:T,...I}=r,v=Rt({name:"CheckboxCard",classes:Cr,props:r,className:n,style:i,classNames:o,styles:s,unstyled:a,attributes:T,vars:h,varsResolver:io,rootSelector:"card"}),N=Ar(),O=typeof S=="boolean"?S:N?N.value.includes(u||""):void 0,[M,A]=cn({value:O,defaultValue:m,finalValue:!1,onChange:y});return k.jsx(to,{value:{checked:M},children:k.jsx(_i,{ref:t,mod:[{"with-border":l,checked:M},c],...v("card"),...I,role:"checkbox","aria-checked":M,onClick:w=>{f?.(w),N?.onChange(u||""),A(!M)}})})});dn.displayName="@mantine/core/CheckboxCard";dn.classes=Cr;const hn=rt((e,t)=>{const{value:r,defaultValue:o,onChange:n,size:i,wrapperProps:s,children:a,readOnly:h,disabled:S,...c}=We("CheckboxGroup",null,e),[l,u]=cn({value:r,defaultValue:o,finalValue:[],onChange:n}),f=m=>{const y=typeof m=="string"?m:m.currentTarget.value;!h&&u(l.includes(y)?l.filter(T=>T!==y):[...l,y])};return k.jsx(eo,{value:{value:l,onChange:f,size:i,disabled:S},children:k.jsx(ln.Wrapper,{size:i,ref:t,...s,...c,labelElement:"div",__staticSelector:"CheckboxGroup",children:k.jsx(Pi,{role:"group",children:a})})})});hn.classes=ln.Wrapper.classes;hn.displayName="@mantine/core/CheckboxGroup";var yr={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const oo={icon:gr,variant:"filled"},so=vt((e,{radius:t,color:r,size:o,iconColor:n,variant:i,autoContrast:s})=>{const a=pr({color:r||e.primaryColor,theme:e}),h=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":xr(o,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:un(t),"--checkbox-color":i==="outline"?h:It(r,e),"--checkbox-icon-color":n?It(n,e):Ir(s,e)?mr({color:r,theme:e,autoContrast:s}):void 0}}}),gn=rt((e,t)=>{const r=We("CheckboxIndicator",oo,e),{classNames:o,className:n,style:i,styles:s,unstyled:a,vars:h,icon:S,indeterminate:c,radius:l,color:u,iconColor:f,autoContrast:m,checked:y,mod:T,variant:I,disabled:v,attributes:N,...O}=r,M=Rt({name:"CheckboxIndicator",classes:yr,props:r,className:n,style:i,classNames:o,styles:s,unstyled:a,attributes:N,vars:h,varsResolver:so,rootSelector:"indicator"}),A=no(),w=typeof y=="boolean"||typeof c=="boolean"?y||c:A?.checked||!1;return k.jsx(bt,{ref:t,...M("indicator",{variant:I}),variant:I,mod:[{checked:w,disabled:v},T],...O,children:k.jsx(S,{indeterminate:c,...M("icon")})})});gn.displayName="@mantine/core/CheckboxIndicator";gn.classes=yr;var Fr={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const ao={labelPosition:"right",icon:gr,variant:"filled"},co=vt((e,{radius:t,color:r,size:o,iconColor:n,variant:i,autoContrast:s})=>{const a=pr({color:r||e.primaryColor,theme:e}),h=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":xr(o,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:un(t),"--checkbox-color":i==="outline"?h:It(r,e),"--checkbox-icon-color":n?It(n,e):Ir(s,e)?mr({color:r,theme:e,autoContrast:s}):void 0}}}),it=rt((e,t)=>{const r=We("Checkbox",ao,e),{classNames:o,className:n,style:i,styles:s,unstyled:a,vars:h,color:S,label:c,id:l,size:u,radius:f,wrapperProps:m,checked:y,labelPosition:T,description:I,error:v,disabled:N,variant:O,indeterminate:M,icon:A,rootRef:w,iconColor:p,onChange:x,autoContrast:E,mod:F,attributes:P,...C}=r,b=Ar(),_=u||b?.size,g=Rt({name:"Checkbox",props:r,classes:Fr,className:n,style:i,classNames:o,styles:s,unstyled:a,attributes:P,vars:h,varsResolver:co}),{styleProps:d,rest:D}=Ri(C),R=vi(l),U={checked:b?.value.includes(D.value)??y,onChange:j=>{b?.onChange(j),x?.(j)},disabled:b?.disabled??N},H=X.useRef(null),B=t||H;return X.useEffect(()=>{B&&"current"in B&&B.current&&(B.current.indeterminate=M||!1,M?B.current.setAttribute("data-indeterminate","true"):B.current.removeAttribute("data-indeterminate"))},[M,B]),k.jsx(Ni,{...g("root"),__staticSelector:"Checkbox",__stylesApiProps:r,id:R,size:_,labelPosition:T,label:c,description:I,error:v,disabled:U.disabled,classNames:o,styles:s,unstyled:a,"data-checked":U.checked||y||void 0,variant:O,ref:w,mod:F,...d,...m,children:k.jsxs(bt,{...g("inner"),mod:{"data-label-position":T},children:[k.jsx(bt,{component:"input",id:R,ref:B,mod:{error:!!v},...g("input",{focusable:!0,variant:O}),...D,...U,type:"checkbox"}),k.jsx(A,{indeterminate:M,...g("icon")})]})})});it.classes={...Fr,...Oi};it.displayName="@mantine/core/Checkbox";it.Group=hn;it.Indicator=gn;it.Card=dn;const uo={multiple:!1},_r=X.forwardRef((e,t)=>{const{onChange:r,children:o,multiple:n,accept:i,name:s,form:a,resetRef:h,disabled:S,capture:c,inputProps:l,...u}=We("FileButton",uo,e),f=X.useRef(null),m=()=>{!S&&f.current?.click()},y=I=>{if(I.currentTarget.files===null)return r(n?[]:null);r(n?Array.from(I.currentTarget.files):I.currentTarget.files[0]||null)};return Ui(h,()=>{f.current&&(f.current.value="")}),k.jsxs(k.Fragment,{children:[k.jsx("input",{style:{display:"none"},type:"file",accept:i,multiple:n,onChange:y,ref:Sr(t,f),name:s,form:a,capture:c,...l}),o({onClick:m,...u})]})});_r.displayName="@mantine/core/FileButton";const lo=({value:e})=>k.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(e)?e.map(t=>t.name).join(", "):e?.name}),fo={valueComponent:lo},pn=rt((e,t)=>{const r=We("FileInput",fo,e),{unstyled:o,vars:n,onChange:i,value:s,defaultValue:a,multiple:h,accept:S,name:c,form:l,valueComponent:u,clearable:f,clearButtonProps:m,readOnly:y,capture:T,fileInputProps:I,rightSection:v,size:N,placeholder:O,component:M,resetRef:A,classNames:w,styles:p,attributes:x,...E}=r,F=X.useRef(null),{resolvedClassNames:P,resolvedStyles:C}=wi({classNames:w,styles:p,props:r}),[b,_]=cn({value:s,defaultValue:a,onChange:i,finalValue:h?[]:null}),g=Array.isArray(b)?b.length!==0:b!==null,d=v||(f&&g&&!y?k.jsx(Mi,{...m,variant:"subtle",onClick:()=>_(h?[]:null),size:N,unstyled:o}):null);return X.useEffect(()=>{(Array.isArray(b)&&b.length===0||b===null)&&F.current?.()},[b]),k.jsx(_r,{onChange:_,multiple:h,accept:S,name:c,form:l,resetRef:Sr(F,A),disabled:y,capture:T,inputProps:I,children:D=>k.jsx(Er,{component:M||"button",ref:t,rightSection:d,...D,...E,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:r,unstyled:o,size:N,classNames:w,styles:p,attributes:x,children:g?k.jsx(u,{value:b}):k.jsx(ln.Placeholder,{__staticSelector:"FileInput",classNames:P,styles:C,attributes:x,children:O})})})});pn.classes=Er.classes;pn.displayName="@mantine/core/FileInput";const ho=pn,go=["h1","h2","h3","h4","h5","h6"],po=["xs","sm","md","lg","xl"];function mo(e,t){const r=t!==void 0?t:`h${e}`;return go.includes(r)?{fontSize:`var(--mantine-${r}-font-size)`,fontWeight:`var(--mantine-${r}-font-weight)`,lineHeight:`var(--mantine-${r}-line-height)`}:po.includes(r)?{fontSize:`var(--mantine-font-size-${r})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:Di(r),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Pr={root:"m_8a5d1357"};const xo={order:1},So=vt((e,{order:t,size:r,lineClamp:o,textWrap:n})=>{const i=mo(t||1,r);return{root:{"--title-fw":i.fontWeight,"--title-lh":i.lineHeight,"--title-fz":i.fontSize,"--title-line-clamp":typeof o=="number"?o.toString():void 0,"--title-text-wrap":n}}}),mn=rt((e,t)=>{const r=We("Title",xo,e),{classNames:o,className:n,style:i,styles:s,unstyled:a,order:h,vars:S,size:c,variant:l,lineClamp:u,textWrap:f,mod:m,attributes:y,...T}=r,I=Rt({name:"Title",props:r,classes:Pr,className:n,style:i,classNames:o,styles:s,unstyled:a,attributes:y,vars:S,varsResolver:So});return[1,2,3,4,5,6].includes(h)?k.jsx(bt,{...I("root"),component:`h${h}`,variant:l,ref:t,mod:[{order:h,"data-line-clamp":typeof u=="number"},m],size:c,...T}):null});mn.classes=Pr;mn.displayName="@mantine/core/Title";function Eo(e){return Xi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M228.9 79.9L51.8 403.1C40.6 423.3 55.5 448 78.9 448h354.3c23.3 0 38.2-24.7 27.1-44.9L283.1 79.9c-11.7-21.2-42.5-21.2-54.2 0zM273.6 214L270 336h-28l-3.6-122h35.2zM256 402.4c-10.7 0-19.1-8.1-19.1-18.4s8.4-18.4 19.1-18.4 19.1 8.1 19.1 18.4-8.4 18.4-19.1 18.4z"}}]})(e)}const bo="_addResultPage_1sd28_1",Io="_confirmation_1sd28_8",To="_splitPanels_1sd28_8",Ao="_screenshotPanel_1sd28_13",Co="_formPanel_1sd28_16",yo="_chartName_1sd28_19",Fo="_grid_1sd28_24",Xe={addResultPage:bo,confirmation:Io,splitPanels:To,screenshotPanel:Ao,formPanel:Co,chartName:yo,grid:Fo},_o=({okText:e="OK"}={})=>{const[t,r]=X.useState(!1),o=fn(),n=X.useRef(null),i=s=>{t&&(r(!1),n.current&&n.current(s))};return{renderPopup:({content:s})=>k.jsxs(Zi,{opened:t,onClose:()=>i(!1),centered:!0,size:"lg",radius:"md",withCloseButton:!1,children:[s,k.jsxs(Xt,{justify:"space-between",mt:"md",children:[k.jsx(Ye,{color:"red",onClick:()=>i(!1),children:o.CANCEL}),k.jsx(Ye,{color:"green",onClick:()=>i(!0),children:e})]})]}),confirm:()=>(r(!0),new Promise((s,a)=>{n.current=h=>{h?s():a()}}))}},Po=({imageData:e,style:t})=>{const r=X.useRef(null);return X.useEffect(()=>{const o=r.current;if(!o)return;o.width=e.width,o.height=e.height;const n=o.getContext("2d");n&&n.putImageData(e,0,0)},[e]),k.jsx("canvas",{ref:r,style:t})};var Ro=Object.defineProperty,vo=Object.defineProperties,No=Object.getOwnPropertyDescriptors,Fn=Object.getOwnPropertySymbols,Oo=Object.prototype.hasOwnProperty,Uo=Object.prototype.propertyIsEnumerable,_n=(e,t,r)=>t in e?Ro(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,re=(e,t)=>{for(var r in t||(t={}))Oo.call(t,r)&&_n(e,r,t[r]);if(Fn)for(var r of Fn(t))Uo.call(t,r)&&_n(e,r,t[r]);return e},Se=(e,t)=>vo(e,No(t));const Zt={x:0,y:0,width:0,height:0,unit:"px"};function Pn(e,t,r){return Math.min(Math.max(e,t),r)}const Rn=(e,t,r,o)=>o==="pixel"?Wt(e,t,r):wo(e,t,r),wo=(e,t,r)=>e.unit==="%"?Se(re(re({},Zt),e),{unit:"%"}):{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/r*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/r*100:0};function Wt(e,t,r){return e.unit?e.unit==="px"?Se(re(re({},Zt),e),{unit:"px"}):{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*r/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*r/100:0}:Se(re(re({},Zt),e),{unit:"px"})}const Le={position:"absolute",outline:"1px solid rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.5)",width:10,height:10};var xn={exports:{}},ht={};(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var o=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(o.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(i){n[i]=i}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}})();var Mo=Li,Rr=60103;if(ht.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var vn=Symbol.for;Rr=vn("react.element"),ht.Fragment=vn("react.fragment")}var Do=Mo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lo=Object.prototype.hasOwnProperty,ko={key:!0,ref:!0,__self:!0,__source:!0};function Nn(e,t,r){var o,n={},i=null,s=null;for(o in r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref),t)Lo.call(t,o)&&!ko.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)n[o]===void 0&&(n[o]=t[o]);return{$$typeof:Rr,type:e,key:i,ref:s,props:n,_owner:Do.current}}ht.jsx=Nn,ht.jsxs=Nn,xn.exports=ht;const Ee=xn.exports.jsx,Oe=xn.exports.jsxs,Go=()=>Oe(X.Fragment,{children:[Ee("div",{"data-dir":"s","data-ord":"s",style:Se(re({},Le),{bottom:0,left:"50%",marginBottom:-5,marginLeft:-5,cursor:"s-resize"})}),Ee("div",{"data-dir":"n","data-ord":"n",style:Se(re({},Le),{top:0,left:"50%",marginTop:-5,marginLeft:-5,cursor:"n-resize"})}),Ee("div",{"data-dir":"w","data-ord":"w",style:Se(re({},Le),{top:"50%",left:0,marginTop:-5,marginLeft:-5,cursor:"w-resize"})}),Ee("div",{"data-dir":"e","data-ord":"e",style:Se(re({},Le),{top:"50%",right:0,marginTop:-5,marginRight:-5,cursor:"e-resize"})}),Ee("div",{"data-dir":"se","data-ord":"se",style:Se(re({},Le),{bottom:0,right:0,marginBottom:-5,marginRight:-5,cursor:"se-resize"})}),Ee("div",{"data-dir":"sw","data-ord":"sw",style:Se(re({},Le),{bottom:0,left:0,marginBottom:-5,marginLeft:-5,cursor:"sw-resize"})}),Ee("div",{"data-dir":"nw","data-ord":"nw",style:Se(re({},Le),{top:0,left:0,marginTop:-5,marginLeft:-5,cursor:"nw-resize"})}),Ee("div",{"data-dir":"ne","data-ord":"ne",style:Se(re({},Le),{top:0,right:0,marginTop:-5,marginRight:-5,cursor:"ne-resize"})})]}),Bo=({area:e,onCropStart:t,showHandles:r,globalAreaStyle:o,customAreaRenderer:n,areaNumber:i})=>{const s={top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`};return Oe("div",{style:re(re(re({position:"absolute",border:"1px dashed rgba(0,0,0,0.5)",outline:"1px dashed rgba(255,255,255,0.5)",cursor:"move",boxSizing:"border-box",touchAction:"none"},s),o),e.areaStyle),onPointerDown:t,"data-wrapper":"wrapper",children:[n?n(Se(re({},e),{areaNumber:i})):null,r?Ee(Go,{}):null]})},jo=({areas:e})=>Ee("table",{style:{position:"absolute",right:0,top:0},children:Ee("tbody",{children:e.map((t,r)=>Oe("tr",{children:[Oe("td",{children:["x: ",Math.round(t.x)]}),Oe("td",{children:["y: ",Math.round(t.y)]}),Oe("td",{children:["width: ",Math.round(t.width)]}),Oe("td",{children:["height: ",Math.round(t.height)]}),Oe("td",{children:["unit: ",t.unit]})]},r))})}),vr=(e,t)=>e!==null&&(!!t(e)||vr(e.parentNode,t)),qe={capture:!0,passive:!1},Ho=["e","w"],zo=["n","s"],$o=["nw","ne","se","sw"],Xo=({maxAreas:e=1/0,unit:t="pixel",minWidth:r=0,minHeight:o=0,debug:n=!1,children:i,areas:s,onChange:a,maxWidth:h,maxHeight:S,wrapperStyle:c,globalAreaStyle:l,customAreaRenderer:u,mediaWrapperClassName:f})=>{const m=X.useRef(null),y=X.useRef(null),[T,I]=X.useState(0),[v,N]=X.useState({startClientX:0,startClientY:0,startAreaX:0,startAreaY:0,clientX:0,clientY:0,isResize:!1}),[O,M]=X.useState({areaChangeIndex:0,isChanging:!1}),A=()=>{const C=y.current;if(!C)return{x:0,y:0,width:0,height:0};const{x:b,y:_,width:g,height:d}=C.getBoundingClientRect();return{x:b,y:_,width:g,height:d}},w=X.useCallback(C=>{const b=v.clientX-C.x,_=v.clientY-C.y<v.startAreaY;return b<v.startAreaX?_?"nw":"sw":_?"ne":"se"},[v]),p=X.useCallback(C=>{const b=A();return Wt(C,b.width,b.height)},[]),x=X.useCallback(C=>{const b=A(),_=p(C),g=v.clientX-v.startClientX,d=v.clientY-v.startClientY;return _.x=Pn(v.startAreaX+g,0,b.width-_.width),_.y=Pn(v.startAreaY+d,0,b.height-_.height),_},[v,p]),E=X.useCallback(C=>{const b=A(),_=w(b),g=p(C),d=v.ord?v.ord:_,D=v.clientX-v.startClientX,R=v.clientY-v.startClientY,U={unit:"px",x:0,y:0,width:0,height:0,isChanging:!0,isNew:!1};_==="ne"?(U.x=v.startAreaX,U.width=D,U.height=Math.abs(R),U.y=v.startAreaY-U.height):_==="se"?(U.x=v.startAreaX,U.y=v.startAreaY,U.width=D,U.height=R):_==="sw"?(U.x=v.startAreaX+D,U.y=v.startAreaY,U.width=Math.abs(D),U.height=R):_==="nw"&&(U.x=v.startAreaX+D,U.width=Math.abs(D),U.height=Math.abs(R),U.y=v.startAreaY+R);const H=(function(B,j,G,L,Y=0,J=0,Q=G,K=L){const $=re({},B);$.y<0&&($.height=Math.max($.height+$.y,J),$.y=0),$.x<0&&($.width=Math.max($.width+$.x,Y),$.x=0);const te=G-($.x+$.width);te<0&&($.x=Math.min($.x,G-Y),$.width+=te);const ie=L-($.y+$.height);return ie<0&&($.y=Math.min($.y,L-J),$.height+=ie),$.width<Y&&(j!=="sw"&&j!="nw"||($.x-=Y-$.width),$.width=Y),$.height<J&&(j!=="nw"&&j!="ne"||($.y-=J-$.height),$.height=J),$.width>Q&&(j!=="sw"&&j!="nw"||($.x-=Q-$.width),$.width=Q),$.height>K&&(j!=="nw"&&j!="ne"||($.y-=K-$.height),$.height=K),$})(U,_,b.width,b.height,r,o,h,S);return $o.indexOf(d)>-1?(g.x=H.x,g.y=H.y,g.width=H.width,g.height=H.height):Ho.indexOf(d)>-1?(g.x=H.x,g.width=H.width):zo.indexOf(d)>-1&&(g.y=H.y,g.height=H.height),g},[v,w,p,r,o,h,S]),F=X.useCallback(C=>{C.preventDefault(),C.stopPropagation();const{isChanging:b,areaChangeIndex:_}=O;if(!b)return;const g=A(),d=s[_];let D;if(N(H=>Se(re({},H),{clientX:C.clientX,clientY:C.clientY})),D=v.isResize?E(d):x(d),U=D,(R=d).width!==U.width||R.height!==U.height||R.x!==U.x||R.y!==U.y||R.unit!==U.unit){const H=Rn(D,g.width,g.height,t);a([...s.slice(0,_),re({},H),...s.slice(_+1)])}var R,U},[O,s,v,x,a,t,E]),P=X.useCallback(C=>{C.preventDefault(),C.stopPropagation();const{isChanging:b,areaChangeIndex:_}=O;if(b){M({isChanging:!1,areaChangeIndex:-1}),N({startClientX:0,startClientY:0,startAreaX:0,startAreaY:0,clientX:0,clientY:0,isResize:!1});const g=s[_];a([...s.slice(0,_),Se(re({},g),{isNew:!1,isChanging:!1}),...s.slice(_+1)])}},[O,s,a]);return X.useEffect(()=>(document.addEventListener("pointermove",F,qe),document.addEventListener("pointerup",P,qe),document.addEventListener("pointercancel",P,qe),()=>{document.removeEventListener("pointermove",F,qe),document.removeEventListener("pointerup",P,qe),document.removeEventListener("pointercancel",P,qe)}),[F,P]),Oe("div",{ref:m,style:re({position:"relative",display:"inline-block",cursor:"crosshair",boxSizing:"border-box",maxWidth:"100%",touchAction:"none",lineHeight:0},c),children:[Ee("div",{ref:y,onPointerDown:C=>{const b=C.currentTarget;if(b.dataset.wrapper||b.dataset.direction||vr(b,H=>{var B;return(B=H.dataset)==null?void 0:B.wrapper}))return;C.preventDefault(),C.stopPropagation();const _=A(),g=C.clientX-_.x,d=C.clientY-_.y,D={unit:"px",x:g,y:d,width:0,height:0,isChanging:!0,isNew:!0};N({startClientX:C.clientX,startClientY:C.clientY,startAreaX:g,startAreaY:d,clientX:C.clientX,clientY:C.clientY,isResize:!0}),I(T+1);const R=Rn(D,_.width,_.height,t);let U;s.length<e?(a(s.concat(R)),U=s.length):(a([...s.slice(0,e-1),R]),U=e-1),M({areaChangeIndex:U,isChanging:!0})},style:{boxSizing:"border-box"},className:f,children:i}),s.map((C,b)=>Ee(Bo,{area:C,showHandles:!C.isNew,onCropStart:_=>((g,d)=>{g.preventDefault(),g.stopPropagation();const D=A(),R=Wt(s[d],D.width,D.height),U=g.target.dataset.ord,H=!!U;let B=g.clientX,j=g.clientY,G=R.x,L=R.y;U&&(U==="ne"||U=="e"?(G=R.x,L=R.y+R.height):U==="se"||U==="s"?(G=R.x,L=R.y):U==="sw"||U=="w"?(G=R.x+R.width,L=R.y):U!=="nw"&&U!="n"||(G=R.x+R.width,L=R.y+R.height),B=G+D.x,j=L+D.y),N({startClientX:B,startClientY:j,startAreaX:G,startAreaY:L,clientX:g.clientX,clientY:g.clientY,isResize:H,ord:U}),M({isChanging:!0,areaChangeIndex:d})})(_,b),globalAreaStyle:l,customAreaRenderer:u,areaNumber:b+1},b)),n?Ee(jo,{areas:s}):null]})};function Yo(e,t){return t.forEach((function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach((function(o){if(o!=="default"&&!(o in e)){var n=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(e,o,n.get?n:{enumerable:!0,get:function(){return r[o]}})}}))})),Object.freeze(e)}function Nr(e,t){return new Promise((function(r,o){let n;return Zo(e).then((function(i){try{return n=i,r(new Blob([t.slice(0,2),n,t.slice(2)],{type:"image/jpeg"}))}catch(s){return o(s)}}),o)}))}const Zo=e=>new Promise(((t,r)=>{const o=new FileReader;o.addEventListener("load",(({target:{result:n}})=>{const i=new DataView(n);let s=0;if(i.getUint16(s)!==65496)return r("not a valid JPEG");for(s+=2;;){const a=i.getUint16(s);if(a===65498)break;const h=i.getUint16(s+2);if(a===65505&&i.getUint32(s+4)===1165519206){const S=s+10;let c;switch(i.getUint16(S)){case 18761:c=!0;break;case 19789:c=!1;break;default:return r("TIFF header contains invalid endian")}if(i.getUint16(S+2,c)!==42)return r("TIFF header contains invalid version");const l=i.getUint32(S+4,c),u=S+l+2+12*i.getUint16(S+l,c);for(let f=S+l+2;f<u;f+=12)if(i.getUint16(f,c)==274){if(i.getUint16(f+2,c)!==3)return r("Orientation data type is invalid");if(i.getUint32(f+4,c)!==1)return r("Orientation data count is invalid");i.setUint16(f+8,1,c);break}return t(n.slice(s,s+2+h))}s+=2+h}return t(new Blob)})),o.readAsArrayBuffer(e)}));var Tt={},Wo={get exports(){return Tt},set exports(e){Tt=e}};(function(e){var t,r,o={};Wo.exports=o,o.parse=function(n,i){for(var s=o.bin.readUshort,a=o.bin.readUint,h=0,S={},c=new Uint8Array(n),l=c.length-4;a(c,l)!=101010256;)l--;h=l,h+=4;var u=s(c,h+=4);s(c,h+=2);var f=a(c,h+=2),m=a(c,h+=4);h+=4,h=m;for(var y=0;y<u;y++){a(c,h),h+=4,h+=4,h+=4,a(c,h+=4),f=a(c,h+=4);var T=a(c,h+=4),I=s(c,h+=4),v=s(c,h+2),N=s(c,h+4);h+=6;var O=a(c,h+=8);h+=4,h+=I+v+N,o._readLocal(c,O,S,f,T,i)}return S},o._readLocal=function(n,i,s,a,h,S){var c=o.bin.readUshort,l=o.bin.readUint;l(n,i),c(n,i+=4),c(n,i+=2);var u=c(n,i+=2);l(n,i+=2),l(n,i+=4),i+=4;var f=c(n,i+=8),m=c(n,i+=2);i+=2;var y=o.bin.readUTF8(n,i,f);if(i+=f,i+=m,S)s[y]={size:h,csize:a};else{var T=new Uint8Array(n.buffer,i);if(u==0)s[y]=new Uint8Array(T.buffer.slice(i,i+a));else{if(u!=8)throw"unknown compression method: "+u;var I=new Uint8Array(h);o.inflateRaw(T,I),s[y]=I}}},o.inflateRaw=function(n,i){return o.F.inflate(n,i)},o.inflate=function(n,i){return n[0],n[1],o.inflateRaw(new Uint8Array(n.buffer,n.byteOffset+2,n.length-6),i)},o.deflate=function(n,i){i==null&&(i={level:6});var s=0,a=new Uint8Array(50+Math.floor(1.1*n.length));a[s]=120,a[s+1]=156,s+=2,s=o.F.deflateRaw(n,a,s,i.level);var h=o.adler(n,0,n.length);return a[s+0]=h>>>24&255,a[s+1]=h>>>16&255,a[s+2]=h>>>8&255,a[s+3]=h>>>0&255,new Uint8Array(a.buffer,0,s+4)},o.deflateRaw=function(n,i){i==null&&(i={level:6});var s=new Uint8Array(50+Math.floor(1.1*n.length)),a=o.F.deflateRaw(n,s,a,i.level);return new Uint8Array(s.buffer,0,a)},o.encode=function(n,i){i==null&&(i=!1);var s=0,a=o.bin.writeUint,h=o.bin.writeUshort,S={};for(var c in n){var l=!o._noNeed(c)&&!i,u=n[c],f=o.crc.crc(u,0,u.length);S[c]={cpr:l,usize:u.length,crc:f,file:l?o.deflateRaw(u):u}}for(var c in S)s+=S[c].file.length+30+46+2*o.bin.sizeUTF8(c);s+=22;var m=new Uint8Array(s),y=0,T=[];for(var c in S){var I=S[c];T.push(y),y=o._writeHeader(m,y,c,I,0)}var v=0,N=y;for(var c in S)I=S[c],T.push(y),y=o._writeHeader(m,y,c,I,1,T[v++]);var O=y-N;return a(m,y,101010256),y+=4,h(m,y+=4,v),h(m,y+=2,v),a(m,y+=2,O),a(m,y+=4,N),y+=4,y+=2,m.buffer},o._noNeed=function(n){var i=n.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},o._writeHeader=function(n,i,s,a,h,S){var c=o.bin.writeUint,l=o.bin.writeUshort,u=a.file;return c(n,i,h==0?67324752:33639248),i+=4,h==1&&(i+=2),l(n,i,20),l(n,i+=2,0),l(n,i+=2,a.cpr?8:0),c(n,i+=2,0),c(n,i+=4,a.crc),c(n,i+=4,u.length),c(n,i+=4,a.usize),l(n,i+=4,o.bin.sizeUTF8(s)),l(n,i+=2,0),i+=2,h==1&&(i+=2,i+=2,c(n,i+=6,S),i+=4),i+=o.bin.writeUTF8(n,i,s),h==0&&(n.set(u,i),i+=u.length),i},o.crc={table:(function(){for(var n=new Uint32Array(256),i=0;i<256;i++){for(var s=i,a=0;a<8;a++)1&s?s=3988292384^s>>>1:s>>>=1;n[i]=s}return n})(),update:function(n,i,s,a){for(var h=0;h<a;h++)n=o.crc.table[255&(n^i[s+h])]^n>>>8;return n},crc:function(n,i,s){return 4294967295^o.crc.update(4294967295,n,i,s)}},o.adler=function(n,i,s){for(var a=1,h=0,S=i,c=i+s;S<c;){for(var l=Math.min(S+5552,c);S<l;)h+=a+=n[S++];a%=65521,h%=65521}return h<<16|a},o.bin={readUshort:function(n,i){return n[i]|n[i+1]<<8},writeUshort:function(n,i,s){n[i]=255&s,n[i+1]=s>>8&255},readUint:function(n,i){return 16777216*n[i+3]+(n[i+2]<<16|n[i+1]<<8|n[i])},writeUint:function(n,i,s){n[i]=255&s,n[i+1]=s>>8&255,n[i+2]=s>>16&255,n[i+3]=s>>24&255},readASCII:function(n,i,s){for(var a="",h=0;h<s;h++)a+=String.fromCharCode(n[i+h]);return a},writeASCII:function(n,i,s){for(var a=0;a<s.length;a++)n[i+a]=s.charCodeAt(a)},pad:function(n){return n.length<2?"0"+n:n},readUTF8:function(n,i,s){for(var a,h="",S=0;S<s;S++)h+="%"+o.bin.pad(n[i+S].toString(16));try{a=decodeURIComponent(h)}catch{return o.bin.readASCII(n,i,s)}return a},writeUTF8:function(n,i,s){for(var a=s.length,h=0,S=0;S<a;S++){var c=s.charCodeAt(S);if((4294967168&c)==0)n[i+h]=c,h++;else if((4294965248&c)==0)n[i+h]=192|c>>6,n[i+h+1]=128|c>>0&63,h+=2;else if((4294901760&c)==0)n[i+h]=224|c>>12,n[i+h+1]=128|c>>6&63,n[i+h+2]=128|c>>0&63,h+=3;else{if((4292870144&c)!=0)throw"e";n[i+h]=240|c>>18,n[i+h+1]=128|c>>12&63,n[i+h+2]=128|c>>6&63,n[i+h+3]=128|c>>0&63,h+=4}}return h},sizeUTF8:function(n){for(var i=n.length,s=0,a=0;a<i;a++){var h=n.charCodeAt(a);if((4294967168&h)==0)s++;else if((4294965248&h)==0)s+=2;else if((4294901760&h)==0)s+=3;else{if((4292870144&h)!=0)throw"e";s+=4}}return s}},o.F={},o.F.deflateRaw=function(n,i,s,a){var h=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],S=o.F.U,c=o.F._goodIndex;o.F._hash;var l=o.F._putsE,u=0,f=s<<3,m=0,y=n.length;if(a==0){for(;u<y;)l(i,f,u+(F=Math.min(65535,y-u))==y?1:0),f=o.F._copyExact(n,u,F,i,f+8),u+=F;return f>>>3}var T=S.lits,I=S.strt,v=S.prev,N=0,O=0,M=0,A=0,w=0,p=0;for(y>2&&(I[p=o.F._hash(n,0)]=0),u=0;u<y;u++){if(w=p,u+1<y-2){p=o.F._hash(n,u+1);var x=u+1&32767;v[x]=I[p],I[p]=x}if(m<=u){(N>14e3||O>26697)&&y-u>100&&(m<u&&(T[N]=u-m,N+=2,m=u),f=o.F._writeBlock(u==y-1||m==y?1:0,T,N,A,n,M,u-M,i,f),N=O=A=0,M=u);var E=0;u<y-2&&(E=o.F._bestMatch(n,u,v,w,Math.min(h[2],y-u),h[3]));var F=E>>>16,P=65535&E;if(E!=0){P=65535&E;var C=c(F=E>>>16,S.of0);S.lhst[257+C]++;var b=c(P,S.df0);S.dhst[b]++,A+=S.exb[C]+S.dxb[b],T[N]=F<<23|u-m,T[N+1]=P<<16|C<<8|b,N+=2,m=u+F}else S.lhst[n[u]]++;O++}}for(M==u&&n.length!=0||(m<u&&(T[N]=u-m,N+=2,m=u),f=o.F._writeBlock(1,T,N,A,n,M,u-M,i,f),N=0,O=0,N=O=A=0,M=u);(7&f)!=0;)f++;return f>>>3},o.F._bestMatch=function(n,i,s,a,h,S){var c=32767&i,l=s[c],u=c-l+32768&32767;if(l==c||a!=o.F._hash(n,i-u))return 0;for(var f=0,m=0,y=Math.min(32767,i);u<=y&&--S!=0&&l!=c;){if(f==0||n[i+f]==n[i+f-u]){var T=o.F._howLong(n,i,u);if(T>f){if(m=u,(f=T)>=h)break;u+2<T&&(T=u+2);for(var I=0,v=0;v<T-2;v++){var N=i-u+v+32768&32767,O=N-s[N]+32768&32767;O>I&&(I=O,l=N)}}}u+=(c=l)-(l=s[c])+32768&32767}return f<<16|m},o.F._howLong=function(n,i,s){if(n[i]!=n[i-s]||n[i+1]!=n[i+1-s]||n[i+2]!=n[i+2-s])return 0;var a=i,h=Math.min(n.length,i+258);for(i+=3;i<h&&n[i]==n[i-s];)i++;return i-a},o.F._hash=function(n,i){return(n[i]<<8|n[i+1])+(n[i+2]<<4)&65535},o.saved=0,o.F._writeBlock=function(n,i,s,a,h,S,c,l,u){var f,m,y,T,I,v,N,O,M,A=o.F.U,w=o.F._putsF,p=o.F._putsE;A.lhst[256]++,m=(f=o.F.getTrees())[0],y=f[1],T=f[2],I=f[3],v=f[4],N=f[5],O=f[6],M=f[7];var x=32+((u+3&7)==0?0:8-(u+3&7))+(c<<3),E=a+o.F.contSize(A.fltree,A.lhst)+o.F.contSize(A.fdtree,A.dhst),F=a+o.F.contSize(A.ltree,A.lhst)+o.F.contSize(A.dtree,A.dhst);F+=14+3*N+o.F.contSize(A.itree,A.ihst)+(2*A.ihst[16]+3*A.ihst[17]+7*A.ihst[18]);for(var P=0;P<286;P++)A.lhst[P]=0;for(P=0;P<30;P++)A.dhst[P]=0;for(P=0;P<19;P++)A.ihst[P]=0;var C=x<E&&x<F?0:E<F?1:2;if(w(l,u,n),w(l,u+1,C),u+=3,C==0){for(;(7&u)!=0;)u++;u=o.F._copyExact(h,S,c,l,u)}else{var b,_;if(C==1&&(b=A.fltree,_=A.fdtree),C==2){o.F.makeCodes(A.ltree,m),o.F.revCodes(A.ltree,m),o.F.makeCodes(A.dtree,y),o.F.revCodes(A.dtree,y),o.F.makeCodes(A.itree,T),o.F.revCodes(A.itree,T),b=A.ltree,_=A.dtree,p(l,u,I-257),p(l,u+=5,v-1),p(l,u+=5,N-4),u+=4;for(var g=0;g<N;g++)p(l,u+3*g,A.itree[1+(A.ordr[g]<<1)]);u+=3*N,u=o.F._codeTiny(O,A.itree,l,u),u=o.F._codeTiny(M,A.itree,l,u)}for(var d=S,D=0;D<s;D+=2){for(var R=i[D],U=R>>>23,H=d+(8388607&R);d<H;)u=o.F._writeLit(h[d++],b,l,u);if(U!=0){var B=i[D+1],j=B>>16,G=B>>8&255,L=255&B;p(l,u=o.F._writeLit(257+G,b,l,u),U-A.of0[G]),u+=A.exb[G],w(l,u=o.F._writeLit(L,_,l,u),j-A.df0[L]),u+=A.dxb[L],d+=U}}u=o.F._writeLit(256,b,l,u)}return u},o.F._copyExact=function(n,i,s,a,h){var S=h>>>3;return a[S]=s,a[S+1]=s>>>8,a[S+2]=255-a[S],a[S+3]=255-a[S+1],S+=4,a.set(new Uint8Array(n.buffer,i,s),S),h+(s+4<<3)},o.F.getTrees=function(){for(var n=o.F.U,i=o.F._hufTree(n.lhst,n.ltree,15),s=o.F._hufTree(n.dhst,n.dtree,15),a=[],h=o.F._lenCodes(n.ltree,a),S=[],c=o.F._lenCodes(n.dtree,S),l=0;l<a.length;l+=2)n.ihst[a[l]]++;for(l=0;l<S.length;l+=2)n.ihst[S[l]]++;for(var u=o.F._hufTree(n.ihst,n.itree,7),f=19;f>4&&n.itree[1+(n.ordr[f-1]<<1)]==0;)f--;return[i,s,u,h,c,f,a,S]},o.F.getSecond=function(n){for(var i=[],s=0;s<n.length;s+=2)i.push(n[s+1]);return i},o.F.nonZero=function(n){for(var i="",s=0;s<n.length;s+=2)n[s+1]!=0&&(i+=(s>>1)+",");return i},o.F.contSize=function(n,i){for(var s=0,a=0;a<i.length;a++)s+=i[a]*n[1+(a<<1)];return s},o.F._codeTiny=function(n,i,s,a){for(var h=0;h<n.length;h+=2){var S=n[h],c=n[h+1];a=o.F._writeLit(S,i,s,a);var l=S==16?2:S==17?3:7;S>15&&(o.F._putsE(s,a,c,l),a+=l)}return a},o.F._lenCodes=function(n,i){for(var s=n.length;s!=2&&n[s-1]==0;)s-=2;for(var a=0;a<s;a+=2){var h=n[a+1],S=a+3<s?n[a+3]:-1,c=a+5<s?n[a+5]:-1,l=a==0?-1:n[a-1];if(h==0&&S==h&&c==h){for(var u=a+5;u+2<s&&n[u+2]==h;)u+=2;(f=Math.min(u+1-a>>>1,138))<11?i.push(17,f-3):i.push(18,f-11),a+=2*f-2}else if(h==l&&S==h&&c==h){for(u=a+5;u+2<s&&n[u+2]==h;)u+=2;var f=Math.min(u+1-a>>>1,6);i.push(16,f-3),a+=2*f-2}else i.push(h,0)}return s>>>1},o.F._hufTree=function(n,i,s){var a=[],h=n.length,S=i.length,c=0;for(c=0;c<S;c+=2)i[c]=0,i[c+1]=0;for(c=0;c<h;c++)n[c]!=0&&a.push({lit:c,f:n[c]});var l=a.length,u=a.slice(0);if(l==0)return 0;if(l==1){var f=a[0].lit;return u=f==0?1:0,i[1+(f<<1)]=1,i[1+(u<<1)]=1,1}a.sort((function(O,M){return O.f-M.f}));var m=a[0],y=a[1],T=0,I=1,v=2;for(a[0]={lit:-1,f:m.f+y.f,l:m,r:y,d:0};I!=l-1;)m=T!=I&&(v==l||a[T].f<a[v].f)?a[T++]:a[v++],y=T!=I&&(v==l||a[T].f<a[v].f)?a[T++]:a[v++],a[I++]={lit:-1,f:m.f+y.f,l:m,r:y};var N=o.F.setDepth(a[I-1],0);for(N>s&&(o.F.restrictDepth(u,s,N),N=s),c=0;c<l;c++)i[1+(u[c].lit<<1)]=u[c].d;return N},o.F.setDepth=function(n,i){return n.lit!=-1?(n.d=i,i):Math.max(o.F.setDepth(n.l,i+1),o.F.setDepth(n.r,i+1))},o.F.restrictDepth=function(n,i,s){var a=0,h=1<<s-i,S=0;for(n.sort((function(l,u){return u.d==l.d?l.f-u.f:u.d-l.d})),a=0;a<n.length&&n[a].d>i;a++){var c=n[a].d;n[a].d=i,S+=h-(1<<s-c)}for(S>>>=s-i;S>0;)(c=n[a].d)<i?(n[a].d++,S-=1<<i-c-1):a++;for(;a>=0;a--)n[a].d==i&&S<0&&(n[a].d--,S++);S!=0&&console.log("debt left")},o.F._goodIndex=function(n,i){var s=0;return i[16|s]<=n&&(s|=16),i[8|s]<=n&&(s|=8),i[4|s]<=n&&(s|=4),i[2|s]<=n&&(s|=2),i[1|s]<=n&&(s|=1),s},o.F._writeLit=function(n,i,s,a){return o.F._putsF(s,a,i[n<<1]),a+i[1+(n<<1)]},o.F.inflate=function(n,i){var s=Uint8Array;if(n[0]==3&&n[1]==0)return i||new s(0);var a=o.F,h=a._bitsF,S=a._bitsE,c=a._decodeTiny,l=a.makeCodes,u=a.codes2map,f=a._get17,m=a.U,y=i==null;y&&(i=new s(n.length>>>2<<3));for(var T,I,v=0,N=0,O=0,M=0,A=0,w=0,p=0,x=0,E=0;v==0;)if(v=h(n,E,1),N=h(n,E+1,2),E+=3,N!=0){if(y&&(i=o.F._check(i,x+(1<<17))),N==1&&(T=m.flmap,I=m.fdmap,w=511,p=31),N==2){O=S(n,E,5)+257,M=S(n,E+5,5)+1,A=S(n,E+10,4)+4,E+=14;for(var F=0;F<38;F+=2)m.itree[F]=0,m.itree[F+1]=0;var P=1;for(F=0;F<A;F++){var C=S(n,E+3*F,3);m.itree[1+(m.ordr[F]<<1)]=C,C>P&&(P=C)}E+=3*A,l(m.itree,P),u(m.itree,P,m.imap),T=m.lmap,I=m.dmap,E=c(m.imap,(1<<P)-1,O+M,n,E,m.ttree);var b=a._copyOut(m.ttree,0,O,m.ltree);w=(1<<b)-1;var _=a._copyOut(m.ttree,O,M,m.dtree);p=(1<<_)-1,l(m.ltree,b),u(m.ltree,b,T),l(m.dtree,_),u(m.dtree,_,I)}for(;;){var g=T[f(n,E)&w];E+=15&g;var d=g>>>4;if(!(d>>>8))i[x++]=d;else{if(d==256)break;var D=x+d-254;if(d>264){var R=m.ldef[d-257];D=x+(R>>>3)+S(n,E,7&R),E+=7&R}var U=I[f(n,E)&p];E+=15&U;var H=U>>>4,B=m.ddef[H],j=(B>>>4)+h(n,E,15&B);for(E+=15&B,y&&(i=o.F._check(i,x+(1<<17)));x<D;)i[x]=i[x++-j],i[x]=i[x++-j],i[x]=i[x++-j],i[x]=i[x++-j];x=D}}}else{(7&E)!=0&&(E+=8-(7&E));var G=4+(E>>>3),L=n[G-4]|n[G-3]<<8;y&&(i=o.F._check(i,x+L)),i.set(new s(n.buffer,n.byteOffset+G,L),x),E=G+L<<3,x+=L}return i.length==x?i:i.slice(0,x)},o.F._check=function(n,i){var s=n.length;if(i<=s)return n;var a=new Uint8Array(Math.max(s<<1,i));return a.set(n,0),a},o.F._decodeTiny=function(n,i,s,a,h,S){for(var c=o.F._bitsE,l=o.F._get17,u=0;u<s;){var f=n[l(a,h)&i];h+=15&f;var m=f>>>4;if(m<=15)S[u]=m,u++;else{var y=0,T=0;m==16?(T=3+c(a,h,2),h+=2,y=S[u-1]):m==17?(T=3+c(a,h,3),h+=3):m==18&&(T=11+c(a,h,7),h+=7);for(var I=u+T;u<I;)S[u]=y,u++}}return h},o.F._copyOut=function(n,i,s,a){for(var h=0,S=0,c=a.length>>>1;S<s;){var l=n[S+i];a[S<<1]=0,a[1+(S<<1)]=l,l>h&&(h=l),S++}for(;S<c;)a[S<<1]=0,a[1+(S<<1)]=0,S++;return h},o.F.makeCodes=function(n,i){for(var s,a,h,S,c=o.F.U,l=n.length,u=c.bl_count,f=0;f<=i;f++)u[f]=0;for(f=1;f<l;f+=2)u[n[f]]++;var m=c.next_code;for(s=0,u[0]=0,a=1;a<=i;a++)s=s+u[a-1]<<1,m[a]=s;for(h=0;h<l;h+=2)(S=n[h+1])!=0&&(n[h]=m[S],m[S]++)},o.F.codes2map=function(n,i,s){for(var a=n.length,h=o.F.U.rev15,S=0;S<a;S+=2)if(n[S+1]!=0)for(var c=S>>1,l=n[S+1],u=c<<4|l,f=i-l,m=n[S]<<f,y=m+(1<<f);m!=y;)s[h[m]>>>15-i]=u,m++},o.F.revCodes=function(n,i){for(var s=o.F.U.rev15,a=15-i,h=0;h<n.length;h+=2){var S=n[h]<<i-n[h+1];n[h]=s[S]>>>a}},o.F._putsE=function(n,i,s){s<<=7&i;var a=i>>>3;n[a]|=s,n[a+1]|=s>>>8},o.F._putsF=function(n,i,s){s<<=7&i;var a=i>>>3;n[a]|=s,n[a+1]|=s>>>8,n[a+2]|=s>>>16},o.F._bitsE=function(n,i,s){return(n[i>>>3]|n[1+(i>>>3)]<<8)>>>(7&i)&(1<<s)-1},o.F._bitsF=function(n,i,s){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16)>>>(7&i)&(1<<s)-1},o.F._get17=function(n,i){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16)>>>(7&i)},o.F._get25=function(n,i){return(n[i>>>3]|n[1+(i>>>3)]<<8|n[2+(i>>>3)]<<16|n[3+(i>>>3)]<<24)>>>(7&i)},o.F.U=(t=Uint16Array,r=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var n=o.F.U,i=0;i<32768;i++){var s=i;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,n.rev15[i]=(s>>>16|s<<16)>>>17}function a(h,S,c){for(;S--!=0;)h.push(0,c)}for(i=0;i<32;i++)n.ldef[i]=n.of0[i]<<3|n.exb[i],n.ddef[i]=n.df0[i]<<4|n.dxb[i];a(n.fltree,144,8),a(n.fltree,112,9),a(n.fltree,24,7),a(n.fltree,8,8),o.F.makeCodes(n.fltree,9),o.F.codes2map(n.fltree,9,n.flmap),o.F.revCodes(n.fltree,9),a(n.fdtree,32,5),o.F.makeCodes(n.fdtree,5),o.F.codes2map(n.fdtree,5,n.fdmap),o.F.revCodes(n.fdtree,5),a(n.itree,19,0),a(n.ltree,286,0),a(n.dtree,30,0),a(n.ttree,320,0)})()})();var Ko=Yo({__proto__:null,default:Tt},[Tt]);const Fe=(function(){var e={nextZero(c,l){for(;c[l]!=0;)l++;return l},readUshort:(c,l)=>c[l]<<8|c[l+1],writeUshort(c,l,u){c[l]=u>>8&255,c[l+1]=255&u},readUint:(c,l)=>16777216*c[l]+(c[l+1]<<16|c[l+2]<<8|c[l+3]),writeUint(c,l,u){c[l]=u>>24&255,c[l+1]=u>>16&255,c[l+2]=u>>8&255,c[l+3]=255&u},readASCII(c,l,u){let f="";for(let m=0;m<u;m++)f+=String.fromCharCode(c[l+m]);return f},writeASCII(c,l,u){for(let f=0;f<u.length;f++)c[l+f]=u.charCodeAt(f)},readBytes(c,l,u){const f=[];for(let m=0;m<u;m++)f.push(c[l+m]);return f},pad:c=>c.length<2?`0${c}`:c,readUTF8(c,l,u){let f,m="";for(let y=0;y<u;y++)m+=`%${e.pad(c[l+y].toString(16))}`;try{f=decodeURIComponent(m)}catch{return e.readASCII(c,l,u)}return f}};function t(c,l,u,f){const m=l*u,y=i(f),T=Math.ceil(l*y/8),I=new Uint8Array(4*m),v=new Uint32Array(I.buffer),{ctype:N}=f,{depth:O}=f,M=e.readUshort;if(N==6){const R=m<<2;if(O==8)for(var A=0;A<R;A+=4)I[A]=c[A],I[A+1]=c[A+1],I[A+2]=c[A+2],I[A+3]=c[A+3];if(O==16)for(A=0;A<R;A++)I[A]=c[A<<1]}else if(N==2){const R=f.tabs.tRNS;if(R==null){if(O==8)for(A=0;A<m;A++){var w=3*A;v[A]=255<<24|c[w+2]<<16|c[w+1]<<8|c[w]}if(O==16)for(A=0;A<m;A++)w=6*A,v[A]=255<<24|c[w+4]<<16|c[w+2]<<8|c[w]}else{var p=R[0];const U=R[1],H=R[2];if(O==8)for(A=0;A<m;A++){var x=A<<2;w=3*A,v[A]=255<<24|c[w+2]<<16|c[w+1]<<8|c[w],c[w]==p&&c[w+1]==U&&c[w+2]==H&&(I[x+3]=0)}if(O==16)for(A=0;A<m;A++)x=A<<2,w=6*A,v[A]=255<<24|c[w+4]<<16|c[w+2]<<8|c[w],M(c,w)==p&&M(c,w+2)==U&&M(c,w+4)==H&&(I[x+3]=0)}}else if(N==3){const R=f.tabs.PLTE,U=f.tabs.tRNS,H=U?U.length:0;if(O==1)for(var E=0;E<u;E++){var F=E*T,P=E*l;for(A=0;A<l;A++){x=P+A<<2;var C=3*(b=c[F+(A>>3)]>>7-((7&A)<<0)&1);I[x]=R[C],I[x+1]=R[C+1],I[x+2]=R[C+2],I[x+3]=b<H?U[b]:255}}if(O==2)for(E=0;E<u;E++)for(F=E*T,P=E*l,A=0;A<l;A++)x=P+A<<2,C=3*(b=c[F+(A>>2)]>>6-((3&A)<<1)&3),I[x]=R[C],I[x+1]=R[C+1],I[x+2]=R[C+2],I[x+3]=b<H?U[b]:255;if(O==4)for(E=0;E<u;E++)for(F=E*T,P=E*l,A=0;A<l;A++)x=P+A<<2,C=3*(b=c[F+(A>>1)]>>4-((1&A)<<2)&15),I[x]=R[C],I[x+1]=R[C+1],I[x+2]=R[C+2],I[x+3]=b<H?U[b]:255;if(O==8)for(A=0;A<m;A++){var b;x=A<<2,C=3*(b=c[A]),I[x]=R[C],I[x+1]=R[C+1],I[x+2]=R[C+2],I[x+3]=b<H?U[b]:255}}else if(N==4){if(O==8)for(A=0;A<m;A++){x=A<<2;var _=c[g=A<<1];I[x]=_,I[x+1]=_,I[x+2]=_,I[x+3]=c[g+1]}if(O==16)for(A=0;A<m;A++){var g;x=A<<2,_=c[g=A<<2],I[x]=_,I[x+1]=_,I[x+2]=_,I[x+3]=c[g+2]}}else if(N==0)for(p=f.tabs.tRNS?f.tabs.tRNS:-1,E=0;E<u;E++){const R=E*T,U=E*l;if(O==1)for(var d=0;d<l;d++){var D=(_=255*(c[R+(d>>>3)]>>>7-(7&d)&1))==255*p?0:255;v[U+d]=D<<24|_<<16|_<<8|_}else if(O==2)for(d=0;d<l;d++)D=(_=85*(c[R+(d>>>2)]>>>6-((3&d)<<1)&3))==85*p?0:255,v[U+d]=D<<24|_<<16|_<<8|_;else if(O==4)for(d=0;d<l;d++)D=(_=17*(c[R+(d>>>1)]>>>4-((1&d)<<2)&15))==17*p?0:255,v[U+d]=D<<24|_<<16|_<<8|_;else if(O==8)for(d=0;d<l;d++)D=(_=c[R+d])==p?0:255,v[U+d]=D<<24|_<<16|_<<8|_;else if(O==16)for(d=0;d<l;d++)_=c[R+(d<<1)],D=M(c,R+(d<<1))==p?0:255,v[U+d]=D<<24|_<<16|_<<8|_}return I}function r(c,l,u,f){const m=i(c),y=Math.ceil(u*m/8),T=new Uint8Array((y+1+c.interlace)*f);return l=c.tabs.CgBI?n(l,T):o(l,T),c.interlace==0?l=s(l,c,0,u,f):c.interlace==1&&(l=(function(v,N){const O=N.width,M=N.height,A=i(N),w=A>>3,p=Math.ceil(O*A/8),x=new Uint8Array(M*p);let E=0;const F=[0,0,4,0,2,0,1],P=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],b=[8,8,4,4,2,2,1];let _=0;for(;_<7;){const d=C[_],D=b[_];let R=0,U=0,H=F[_];for(;H<M;)H+=d,U++;let B=P[_];for(;B<O;)B+=D,R++;const j=Math.ceil(R*A/8);s(v,N,E,R,U);let G=0,L=F[_];for(;L<M;){let Y=P[_],J=E+G*j<<3;for(;Y<O;){var g;if(A==1&&(g=(g=v[J>>3])>>7-(7&J)&1,x[L*p+(Y>>3)]|=g<<7-((7&Y)<<0)),A==2&&(g=(g=v[J>>3])>>6-(7&J)&3,x[L*p+(Y>>2)]|=g<<6-((3&Y)<<1)),A==4&&(g=(g=v[J>>3])>>4-(7&J)&15,x[L*p+(Y>>1)]|=g<<4-((1&Y)<<2)),A>=8){const Q=L*p+Y*w;for(let K=0;K<w;K++)x[Q+K]=v[(J>>3)+K]}J+=A,Y+=D}G++,L+=d}R*U!=0&&(E+=U*(1+j)),_+=1}return x})(l,c)),l}function o(c,l){return n(new Uint8Array(c.buffer,2,c.length-6),l)}var n=(function(){const c={H:{}};return c.H.N=function(l,u){const f=Uint8Array;let m,y,T=0,I=0,v=0,N=0,O=0,M=0,A=0,w=0,p=0;if(l[0]==3&&l[1]==0)return u||new f(0);const x=c.H,E=x.b,F=x.e,P=x.R,C=x.n,b=x.A,_=x.Z,g=x.m,d=u==null;for(d&&(u=new f(l.length>>>2<<5));T==0;)if(T=E(l,p,1),I=E(l,p+1,2),p+=3,I!=0){if(d&&(u=c.H.W(u,w+(1<<17))),I==1&&(m=g.J,y=g.h,M=511,A=31),I==2){v=F(l,p,5)+257,N=F(l,p+5,5)+1,O=F(l,p+10,4)+4,p+=14;let R=1;for(var D=0;D<38;D+=2)g.Q[D]=0,g.Q[D+1]=0;for(D=0;D<O;D++){const B=F(l,p+3*D,3);g.Q[1+(g.X[D]<<1)]=B,B>R&&(R=B)}p+=3*O,C(g.Q,R),b(g.Q,R,g.u),m=g.w,y=g.d,p=P(g.u,(1<<R)-1,v+N,l,p,g.v);const U=x.V(g.v,0,v,g.C);M=(1<<U)-1;const H=x.V(g.v,v,N,g.D);A=(1<<H)-1,C(g.C,U),b(g.C,U,m),C(g.D,H),b(g.D,H,y)}for(;;){const R=m[_(l,p)&M];p+=15&R;const U=R>>>4;if(!(U>>>8))u[w++]=U;else{if(U==256)break;{let H=w+U-254;if(U>264){const Y=g.q[U-257];H=w+(Y>>>3)+F(l,p,7&Y),p+=7&Y}const B=y[_(l,p)&A];p+=15&B;const j=B>>>4,G=g.c[j],L=(G>>>4)+E(l,p,15&G);for(p+=15&G;w<H;)u[w]=u[w++-L],u[w]=u[w++-L],u[w]=u[w++-L],u[w]=u[w++-L];w=H}}}}else{(7&p)!=0&&(p+=8-(7&p));const R=4+(p>>>3),U=l[R-4]|l[R-3]<<8;d&&(u=c.H.W(u,w+U)),u.set(new f(l.buffer,l.byteOffset+R,U),w),p=R+U<<3,w+=U}return u.length==w?u:u.slice(0,w)},c.H.W=function(l,u){const f=l.length;if(u<=f)return l;const m=new Uint8Array(f<<1);return m.set(l,0),m},c.H.R=function(l,u,f,m,y,T){const I=c.H.e,v=c.H.Z;let N=0;for(;N<f;){const O=l[v(m,y)&u];y+=15&O;const M=O>>>4;if(M<=15)T[N]=M,N++;else{let A=0,w=0;M==16?(w=3+I(m,y,2),y+=2,A=T[N-1]):M==17?(w=3+I(m,y,3),y+=3):M==18&&(w=11+I(m,y,7),y+=7);const p=N+w;for(;N<p;)T[N]=A,N++}}return y},c.H.V=function(l,u,f,m){let y=0,T=0;const I=m.length>>>1;for(;T<f;){const v=l[T+u];m[T<<1]=0,m[1+(T<<1)]=v,v>y&&(y=v),T++}for(;T<I;)m[T<<1]=0,m[1+(T<<1)]=0,T++;return y},c.H.n=function(l,u){const f=c.H.m,m=l.length;let y,T,I,v;const N=f.j;for(var O=0;O<=u;O++)N[O]=0;for(O=1;O<m;O+=2)N[l[O]]++;const M=f.K;for(y=0,N[0]=0,T=1;T<=u;T++)y=y+N[T-1]<<1,M[T]=y;for(I=0;I<m;I+=2)v=l[I+1],v!=0&&(l[I]=M[v],M[v]++)},c.H.A=function(l,u,f){const m=l.length,y=c.H.m.r;for(let T=0;T<m;T+=2)if(l[T+1]!=0){const I=T>>1,v=l[T+1],N=I<<4|v,O=u-v;let M=l[T]<<O;const A=M+(1<<O);for(;M!=A;)f[y[M]>>>15-u]=N,M++}},c.H.l=function(l,u){const f=c.H.m.r,m=15-u;for(let y=0;y<l.length;y+=2){const T=l[y]<<u-l[y+1];l[y]=f[T]>>>m}},c.H.M=function(l,u,f){f<<=7&u;const m=u>>>3;l[m]|=f,l[m+1]|=f>>>8},c.H.I=function(l,u,f){f<<=7&u;const m=u>>>3;l[m]|=f,l[m+1]|=f>>>8,l[m+2]|=f>>>16},c.H.e=function(l,u,f){return(l[u>>>3]|l[1+(u>>>3)]<<8)>>>(7&u)&(1<<f)-1},c.H.b=function(l,u,f){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16)>>>(7&u)&(1<<f)-1},c.H.Z=function(l,u){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16)>>>(7&u)},c.H.i=function(l,u){return(l[u>>>3]|l[1+(u>>>3)]<<8|l[2+(u>>>3)]<<16|l[3+(u>>>3)]<<24)>>>(7&u)},c.H.m=(function(){const l=Uint16Array,u=Uint32Array;return{K:new l(16),j:new l(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new l(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new u(32),J:new l(512),_:[],h:new l(32),$:[],w:new l(32768),C:[],v:[],d:new l(32768),D:[],u:new l(512),Q:[],r:new l(32768),s:new u(286),Y:new u(30),a:new u(19),t:new u(15e3),k:new l(65536),g:new l(32768)}})(),(function(){const l=c.H.m;for(var u=0;u<32768;u++){let m=u;m=(2863311530&m)>>>1|(1431655765&m)<<1,m=(3435973836&m)>>>2|(858993459&m)<<2,m=(4042322160&m)>>>4|(252645135&m)<<4,m=(4278255360&m)>>>8|(16711935&m)<<8,l.r[u]=(m>>>16|m<<16)>>>17}function f(m,y,T){for(;y--!=0;)m.push(0,T)}for(u=0;u<32;u++)l.q[u]=l.S[u]<<3|l.T[u],l.c[u]=l.p[u]<<4|l.z[u];f(l._,144,8),f(l._,112,9),f(l._,24,7),f(l._,8,8),c.H.n(l._,9),c.H.A(l._,9,l.J),c.H.l(l._,9),f(l.$,32,5),c.H.n(l.$,5),c.H.A(l.$,5,l.h),c.H.l(l.$,5),f(l.Q,19,0),f(l.C,286,0),f(l.D,30,0),f(l.v,320,0)})(),c.H.N})();function i(c){return[1,null,3,1,2,null,4][c.ctype]*c.depth}function s(c,l,u,f,m){let y=i(l);const T=Math.ceil(f*y/8);let I,v;y=Math.ceil(y/8);let N=c[u],O=0;if(N>1&&(c[u]=[0,0,1][N-2]),N==3)for(O=y;O<T;O++)c[O+1]=c[O+1]+(c[O+1-y]>>>1)&255;for(let M=0;M<m;M++)if(I=u+M*T,v=I+M+1,N=c[v-1],O=0,N==0)for(;O<T;O++)c[I+O]=c[v+O];else if(N==1){for(;O<y;O++)c[I+O]=c[v+O];for(;O<T;O++)c[I+O]=c[v+O]+c[I+O-y]}else if(N==2)for(;O<T;O++)c[I+O]=c[v+O]+c[I+O-T];else if(N==3){for(;O<y;O++)c[I+O]=c[v+O]+(c[I+O-T]>>>1);for(;O<T;O++)c[I+O]=c[v+O]+(c[I+O-T]+c[I+O-y]>>>1)}else{for(;O<y;O++)c[I+O]=c[v+O]+a(0,c[I+O-T],0);for(;O<T;O++)c[I+O]=c[v+O]+a(c[I+O-y],c[I+O-T],c[I+O-y-T])}return c}function a(c,l,u){const f=c+l-u,m=f-c,y=f-l,T=f-u;return m*m<=y*y&&m*m<=T*T?c:y*y<=T*T?l:u}function h(c,l,u){u.width=e.readUint(c,l),l+=4,u.height=e.readUint(c,l),l+=4,u.depth=c[l],l++,u.ctype=c[l],l++,u.compress=c[l],l++,u.filter=c[l],l++,u.interlace=c[l],l++}function S(c,l,u,f,m,y,T,I,v){const N=Math.min(l,m),O=Math.min(u,y);let M=0,A=0;for(let _=0;_<O;_++)for(let g=0;g<N;g++)if(T>=0&&I>=0?(M=_*l+g<<2,A=(I+_)*m+T+g<<2):(M=(-I+_)*l-T+g<<2,A=_*m+g<<2),v==0)f[A]=c[M],f[A+1]=c[M+1],f[A+2]=c[M+2],f[A+3]=c[M+3];else if(v==1){var w=c[M+3]*.00392156862745098,p=c[M]*w,x=c[M+1]*w,E=c[M+2]*w,F=f[A+3]*(1/255),P=f[A]*F,C=f[A+1]*F,b=f[A+2]*F;const d=1-w,D=w+F*d,R=D==0?0:1/D;f[A+3]=255*D,f[A+0]=(p+P*d)*R,f[A+1]=(x+C*d)*R,f[A+2]=(E+b*d)*R}else if(v==2)w=c[M+3],p=c[M],x=c[M+1],E=c[M+2],F=f[A+3],P=f[A],C=f[A+1],b=f[A+2],w==F&&p==P&&x==C&&E==b?(f[A]=0,f[A+1]=0,f[A+2]=0,f[A+3]=0):(f[A]=p,f[A+1]=x,f[A+2]=E,f[A+3]=w);else if(v==3){if(w=c[M+3],p=c[M],x=c[M+1],E=c[M+2],F=f[A+3],P=f[A],C=f[A+1],b=f[A+2],w==F&&p==P&&x==C&&E==b)continue;if(w<220&&F>20)return!1}return!0}return{decode:function(l){const u=new Uint8Array(l);let f=8;const m=e,y=m.readUshort,T=m.readUint,I={tabs:{},frames:[]},v=new Uint8Array(u.length);let N,O=0,M=0;const A=[137,80,78,71,13,10,26,10];for(var w=0;w<8;w++)if(u[w]!=A[w])throw"The input is not a PNG file!";for(;f<u.length;){const _=m.readUint(u,f);f+=4;const g=m.readASCII(u,f,4);if(f+=4,g=="IHDR")h(u,f,I);else if(g=="iCCP"){for(var p=f;u[p]!=0;)p++;m.readASCII(u,f,p-f),u[p+1];const d=u.slice(p+2,f+_);let D=null;try{D=o(d)}catch{D=n(d)}I.tabs[g]=D}else if(g=="CgBI")I.tabs[g]=u.slice(f,f+4);else if(g=="IDAT"){for(w=0;w<_;w++)v[O+w]=u[f+w];O+=_}else if(g=="acTL")I.tabs[g]={num_frames:T(u,f),num_plays:T(u,f+4)},N=new Uint8Array(u.length);else if(g=="fcTL"){M!=0&&((b=I.frames[I.frames.length-1]).data=r(I,N.slice(0,M),b.rect.width,b.rect.height),M=0);const d={x:T(u,f+12),y:T(u,f+16),width:T(u,f+4),height:T(u,f+8)};let D=y(u,f+22);D=y(u,f+20)/(D==0?100:D);const R={rect:d,delay:Math.round(1e3*D),dispose:u[f+24],blend:u[f+25]};I.frames.push(R)}else if(g=="fdAT"){for(w=0;w<_-4;w++)N[M+w]=u[f+w+4];M+=_-4}else if(g=="pHYs")I.tabs[g]=[m.readUint(u,f),m.readUint(u,f+4),u[f+8]];else if(g=="cHRM")for(I.tabs[g]=[],w=0;w<8;w++)I.tabs[g].push(m.readUint(u,f+4*w));else if(g=="tEXt"||g=="zTXt"){I.tabs[g]==null&&(I.tabs[g]={});var x=m.nextZero(u,f),E=m.readASCII(u,f,x-f),F=f+_-x-1;if(g=="tEXt")C=m.readASCII(u,x+1,F);else{var P=o(u.slice(x+2,x+2+F));C=m.readUTF8(P,0,P.length)}I.tabs[g][E]=C}else if(g=="iTXt"){I.tabs[g]==null&&(I.tabs[g]={}),x=0,p=f,x=m.nextZero(u,p),E=m.readASCII(u,p,x-p);const d=u[p=x+1];var C;u[p+1],p+=2,x=m.nextZero(u,p),m.readASCII(u,p,x-p),p=x+1,x=m.nextZero(u,p),m.readUTF8(u,p,x-p),F=_-((p=x+1)-f),d==0?C=m.readUTF8(u,p,F):(P=o(u.slice(p,p+F)),C=m.readUTF8(P,0,P.length)),I.tabs[g][E]=C}else if(g=="PLTE")I.tabs[g]=m.readBytes(u,f,_);else if(g=="hIST"){const d=I.tabs.PLTE.length/3;for(I.tabs[g]=[],w=0;w<d;w++)I.tabs[g].push(y(u,f+2*w))}else if(g=="tRNS")I.ctype==3?I.tabs[g]=m.readBytes(u,f,_):I.ctype==0?I.tabs[g]=y(u,f):I.ctype==2&&(I.tabs[g]=[y(u,f),y(u,f+2),y(u,f+4)]);else if(g=="gAMA")I.tabs[g]=m.readUint(u,f)/1e5;else if(g=="sRGB")I.tabs[g]=u[f];else if(g=="bKGD")I.ctype==0||I.ctype==4?I.tabs[g]=[y(u,f)]:I.ctype==2||I.ctype==6?I.tabs[g]=[y(u,f),y(u,f+2),y(u,f+4)]:I.ctype==3&&(I.tabs[g]=u[f]);else if(g=="IEND")break;f+=_,m.readUint(u,f),f+=4}var b;return M!=0&&((b=I.frames[I.frames.length-1]).data=r(I,N.slice(0,M),b.rect.width,b.rect.height)),I.data=r(I,v,I.width,I.height),delete I.compress,delete I.interlace,delete I.filter,I},toRGBA8:function(l){const u=l.width,f=l.height;if(l.tabs.acTL==null)return[t(l.data,u,f,l).buffer];const m=[];l.frames[0].data==null&&(l.frames[0].data=l.data);const y=u*f*4,T=new Uint8Array(y),I=new Uint8Array(y),v=new Uint8Array(y);for(let O=0;O<l.frames.length;O++){const M=l.frames[O],A=M.rect.x,w=M.rect.y,p=M.rect.width,x=M.rect.height,E=t(M.data,p,x,l);if(O!=0)for(var N=0;N<y;N++)v[N]=T[N];if(M.blend==0?S(E,p,x,T,u,f,A,w,0):M.blend==1&&S(E,p,x,T,u,f,A,w,1),m.push(T.buffer.slice(0)),M.dispose!=0){if(M.dispose==1)S(I,p,x,T,u,f,A,w,0);else if(M.dispose==2)for(N=0;N<y;N++)T[N]=v[N]}}return m},_paeth:a,_copyTile:S,_bin:e}})();(function(){const{_copyTile:e}=Fe,{_bin:t}=Fe,r=Fe._paeth;var o={table:(function(){const p=new Uint32Array(256);for(let x=0;x<256;x++){let E=x;for(let F=0;F<8;F++)1&E?E=3988292384^E>>>1:E>>>=1;p[x]=E}return p})(),update(p,x,E,F){for(let P=0;P<F;P++)p=o.table[255&(p^x[E+P])]^p>>>8;return p},crc:(p,x,E)=>4294967295^o.update(4294967295,p,x,E)};function n(p,x,E,F){x[E]+=p[0]*F>>4,x[E+1]+=p[1]*F>>4,x[E+2]+=p[2]*F>>4,x[E+3]+=p[3]*F>>4}function i(p){return Math.max(0,Math.min(255,p))}function s(p,x){const E=p[0]-x[0],F=p[1]-x[1],P=p[2]-x[2],C=p[3]-x[3];return E*E+F*F+P*P+C*C}function a(p,x,E,F,P,C,b){b==null&&(b=1);const _=F.length,g=[];for(var d=0;d<_;d++){const L=F[d];g.push([L>>>0&255,L>>>8&255,L>>>16&255,L>>>24&255])}for(d=0;d<_;d++){let L=4294967295;for(var D=0,R=0;R<_;R++){var U=s(g[d],g[R]);R!=d&&U<L&&(L=U,D=R)}}const H=new Uint32Array(P.buffer),B=new Int16Array(x*E*4),j=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(d=0;d<j.length;d++)j[d]=255*((j[d]+.5)/16-.5);for(let L=0;L<E;L++)for(let Y=0;Y<x;Y++){var G;d=4*(L*x+Y),b!=2?G=[i(p[d]+B[d]),i(p[d+1]+B[d+1]),i(p[d+2]+B[d+2]),i(p[d+3]+B[d+3])]:(U=j[4*(3&L)+(3&Y)],G=[i(p[d]+U),i(p[d+1]+U),i(p[d+2]+U),i(p[d+3]+U)]),D=0;let J=16777215;for(R=0;R<_;R++){const $=s(G,g[R]);$<J&&(J=$,D=R)}const Q=g[D],K=[G[0]-Q[0],G[1]-Q[1],G[2]-Q[2],G[3]-Q[3]];b==1&&(Y!=x-1&&n(K,B,d+4,7),L!=E-1&&(Y!=0&&n(K,B,d+4*x-4,3),n(K,B,d+4*x,5),Y!=x-1&&n(K,B,d+4*x+4,1))),C[d>>2]=D,H[d>>2]=F[D]}}function h(p,x,E,F,P){P==null&&(P={});const{crc:C}=o,b=t.writeUint,_=t.writeUshort,g=t.writeASCII;let d=8;const D=p.frames.length>1;let R,U=!1,H=33+(D?20:0);if(P.sRGB!=null&&(H+=13),P.pHYs!=null&&(H+=21),P.iCCP!=null&&(R=pako.deflate(P.iCCP),H+=21+R.length+4),p.ctype==3){for(var B=p.plte.length,j=0;j<B;j++)p.plte[j]>>>24!=255&&(U=!0);H+=8+3*B+4+(U?8+1*B+4:0)}for(var G=0;G<p.frames.length;G++)D&&(H+=38),H+=(Q=p.frames[G]).cimg.length+12,G!=0&&(H+=4);H+=12;const L=new Uint8Array(H),Y=[137,80,78,71,13,10,26,10];for(j=0;j<8;j++)L[j]=Y[j];if(b(L,d,13),d+=4,g(L,d,"IHDR"),d+=4,b(L,d,x),d+=4,b(L,d,E),d+=4,L[d]=p.depth,d++,L[d]=p.ctype,d++,L[d]=0,d++,L[d]=0,d++,L[d]=0,d++,b(L,d,C(L,d-17,17)),d+=4,P.sRGB!=null&&(b(L,d,1),d+=4,g(L,d,"sRGB"),d+=4,L[d]=P.sRGB,d++,b(L,d,C(L,d-5,5)),d+=4),P.iCCP!=null){const K=13+R.length;b(L,d,K),d+=4,g(L,d,"iCCP"),d+=4,g(L,d,"ICC profile"),d+=11,d+=2,L.set(R,d),d+=R.length,b(L,d,C(L,d-(K+4),K+4)),d+=4}if(P.pHYs!=null&&(b(L,d,9),d+=4,g(L,d,"pHYs"),d+=4,b(L,d,P.pHYs[0]),d+=4,b(L,d,P.pHYs[1]),d+=4,L[d]=P.pHYs[2],d++,b(L,d,C(L,d-13,13)),d+=4),D&&(b(L,d,8),d+=4,g(L,d,"acTL"),d+=4,b(L,d,p.frames.length),d+=4,b(L,d,P.loop!=null?P.loop:0),d+=4,b(L,d,C(L,d-12,12)),d+=4),p.ctype==3){for(b(L,d,3*(B=p.plte.length)),d+=4,g(L,d,"PLTE"),d+=4,j=0;j<B;j++){const K=3*j,$=p.plte[j],te=255&$,ie=$>>>8&255,Be=$>>>16&255;L[d+K+0]=te,L[d+K+1]=ie,L[d+K+2]=Be}if(d+=3*B,b(L,d,C(L,d-3*B-4,3*B+4)),d+=4,U){for(b(L,d,B),d+=4,g(L,d,"tRNS"),d+=4,j=0;j<B;j++)L[d+j]=p.plte[j]>>>24&255;d+=B,b(L,d,C(L,d-B-4,B+4)),d+=4}}let J=0;for(G=0;G<p.frames.length;G++){var Q=p.frames[G];D&&(b(L,d,26),d+=4,g(L,d,"fcTL"),d+=4,b(L,d,J++),d+=4,b(L,d,Q.rect.width),d+=4,b(L,d,Q.rect.height),d+=4,b(L,d,Q.rect.x),d+=4,b(L,d,Q.rect.y),d+=4,_(L,d,F[G]),d+=2,_(L,d,1e3),d+=2,L[d]=Q.dispose,d++,L[d]=Q.blend,d++,b(L,d,C(L,d-30,30)),d+=4);const K=Q.cimg;b(L,d,(B=K.length)+(G==0?0:4)),d+=4;const $=d;g(L,d,G==0?"IDAT":"fdAT"),d+=4,G!=0&&(b(L,d,J++),d+=4),L.set(K,d),d+=B,b(L,d,C(L,$,d-$)),d+=4}return b(L,d,0),d+=4,g(L,d,"IEND"),d+=4,b(L,d,C(L,d-4,4)),d+=4,L.buffer}function S(p,x,E){for(let F=0;F<p.frames.length;F++){const P=p.frames[F];P.rect.width;const C=P.rect.height,b=new Uint8Array(C*P.bpl+C);P.cimg=f(P.img,C,P.bpp,P.bpl,b,x,E)}}function c(p,x,E,F,P){const C=P[0],b=P[1],_=P[2],g=P[3],d=P[4],D=P[5];let R=6,U=8,H=255;for(var B=0;B<p.length;B++){const de=new Uint8Array(p[B]);for(var j=de.length,G=0;G<j;G+=4)H&=de[G+3]}const L=H!=255,Y=(function(ne,V,fe,pe,ae,Ie){const ce=[];for(var ee=0;ee<ne.length;ee++){const me=new Uint8Array(ne[ee]),ye=new Uint32Array(me.buffer);var Te;let Ae=0,Ne=0,Pe=V,He=fe,Mt=pe?1:0;if(ee!=0){const Ci=Ie||pe||ee==1||ce[ee-2].dispose!=0?1:2;let Dt=0,Tn=1e9;for(let st=0;st<Ci;st++){var we=new Uint8Array(ne[ee-1-st]);const yi=new Uint32Array(ne[ee-1-st]);let Me=V,De=fe,Je=-1,at=-1;for(let ze=0;ze<fe;ze++)for(let $e=0;$e<V;$e++)ye[he=ze*V+$e]!=yi[he]&&($e<Me&&(Me=$e),$e>Je&&(Je=$e),ze<De&&(De=ze),ze>at&&(at=ze));Je==-1&&(Me=De=Je=at=0),ae&&((1&Me)==1&&Me--,(1&De)==1&&De--);const An=(Je-Me+1)*(at-De+1);An<Tn&&(Tn=An,Dt=st,Ae=Me,Ne=De,Pe=Je-Me+1,He=at-De+1)}we=new Uint8Array(ne[ee-1-Dt]),Dt==1&&(ce[ee-1].dispose=2),Te=new Uint8Array(Pe*He*4),e(we,V,fe,Te,Pe,He,-Ae,-Ne,0),Mt=e(me,V,fe,Te,Pe,He,-Ae,-Ne,3)?1:0,Mt==1?u(me,V,fe,Te,{x:Ae,y:Ne,width:Pe,height:He}):e(me,V,fe,Te,Pe,He,-Ae,-Ne,0)}else Te=me.slice(0);ce.push({rect:{x:Ae,y:Ne,width:Pe,height:He},img:Te,blend:Mt,dispose:0})}if(pe)for(ee=0;ee<ce.length;ee++){if((je=ce[ee]).blend==1)continue;const me=je.rect,ye=ce[ee-1].rect,Ae=Math.min(me.x,ye.x),Ne=Math.min(me.y,ye.y),Pe={x:Ae,y:Ne,width:Math.max(me.x+me.width,ye.x+ye.width)-Ae,height:Math.max(me.y+me.height,ye.y+ye.height)-Ne};ce[ee-1].dispose=1,ee-1!=0&&l(ne,V,fe,ce,ee-1,Pe,ae),l(ne,V,fe,ce,ee,Pe,ae)}let pt=0;if(ne.length!=1)for(var he=0;he<ce.length;he++){var je;pt+=(je=ce[he]).rect.width*je.rect.height}return ce})(p,x,E,C,b,_),J={},Q=[],K=[];if(F!=0){const de=[];for(G=0;G<Y.length;G++)de.push(Y[G].img.buffer);const ne=(function(ae){let Ie=0;for(var ce=0;ce<ae.length;ce++)Ie+=ae[ce].byteLength;const ee=new Uint8Array(Ie);let Te=0;for(ce=0;ce<ae.length;ce++){const we=new Uint8Array(ae[ce]),pt=we.length;for(let he=0;he<pt;he+=4){let je=we[he],me=we[he+1],ye=we[he+2];const Ae=we[he+3];Ae==0&&(je=me=ye=0),ee[Te+he]=je,ee[Te+he+1]=me,ee[Te+he+2]=ye,ee[Te+he+3]=Ae}Te+=pt}return ee.buffer})(de),V=y(ne,F);for(G=0;G<V.plte.length;G++)Q.push(V.plte[G].est.rgba);let fe=0;for(G=0;G<Y.length;G++){const pe=(te=Y[G]).img.length;var $=new Uint8Array(V.inds.buffer,fe>>2,pe>>2);K.push($);const ae=new Uint8Array(V.abuf,fe,pe);D&&a(te.img,te.rect.width,te.rect.height,Q,ae,$),te.img.set(ae),fe+=pe}}else for(B=0;B<Y.length;B++){var te=Y[B];const de=new Uint32Array(te.img.buffer);var ie=te.rect.width;for(j=de.length,$=new Uint8Array(j),K.push($),G=0;G<j;G++){const ne=de[G];if(G!=0&&ne==de[G-1])$[G]=$[G-1];else if(G>ie&&ne==de[G-ie])$[G]=$[G-ie];else{let V=J[ne];if(V==null&&(J[ne]=V=Q.length,Q.push(ne),Q.length>=300))break;$[G]=V}}}const Be=Q.length;for(Be<=256&&d==0&&(U=Be<=2?1:Be<=4?2:Be<=16?4:8,U=Math.max(U,g)),B=0;B<Y.length;B++){(te=Y[B]).rect.x,te.rect.y,ie=te.rect.width;const de=te.rect.height;let ne=te.img;new Uint32Array(ne.buffer);let V=4*ie,fe=4;if(Be<=256&&d==0){V=Math.ceil(U*ie/8);var _e=new Uint8Array(V*de);const pe=K[B];for(let ae=0;ae<de;ae++){G=ae*V;const Ie=ae*ie;if(U==8)for(var oe=0;oe<ie;oe++)_e[G+oe]=pe[Ie+oe];else if(U==4)for(oe=0;oe<ie;oe++)_e[G+(oe>>1)]|=pe[Ie+oe]<<4-4*(1&oe);else if(U==2)for(oe=0;oe<ie;oe++)_e[G+(oe>>2)]|=pe[Ie+oe]<<6-2*(3&oe);else if(U==1)for(oe=0;oe<ie;oe++)_e[G+(oe>>3)]|=pe[Ie+oe]<<7-1*(7&oe)}ne=_e,R=3,fe=1}else if(L==0&&Y.length==1){_e=new Uint8Array(ie*de*3);const pe=ie*de;for(G=0;G<pe;G++){const ae=3*G,Ie=4*G;_e[ae]=ne[Ie],_e[ae+1]=ne[Ie+1],_e[ae+2]=ne[Ie+2]}ne=_e,R=2,fe=3,V=3*ie}te.img=ne,te.bpl=V,te.bpp=fe}return{ctype:R,depth:U,plte:Q,frames:Y}}function l(p,x,E,F,P,C,b){const _=Uint8Array,g=Uint32Array,d=new _(p[P-1]),D=new g(p[P-1]),R=P+1<p.length?new _(p[P+1]):null,U=new _(p[P]),H=new g(U.buffer);let B=x,j=E,G=-1,L=-1;for(let J=0;J<C.height;J++)for(let Q=0;Q<C.width;Q++){const K=C.x+Q,$=C.y+J,te=$*x+K,ie=H[te];ie==0||F[P-1].dispose==0&&D[te]==ie&&(R==null||R[4*te+3]!=0)||(K<B&&(B=K),K>G&&(G=K),$<j&&(j=$),$>L&&(L=$))}G==-1&&(B=j=G=L=0),b&&((1&B)==1&&B--,(1&j)==1&&j--),C={x:B,y:j,width:G-B+1,height:L-j+1};const Y=F[P];Y.rect=C,Y.blend=1,Y.img=new Uint8Array(C.width*C.height*4),F[P-1].dispose==0?(e(d,x,E,Y.img,C.width,C.height,-C.x,-C.y,0),u(U,x,E,Y.img,C)):e(U,x,E,Y.img,C.width,C.height,-C.x,-C.y,0)}function u(p,x,E,F,P){e(p,x,E,F,P.width,P.height,-P.x,-P.y,2)}function f(p,x,E,F,P,C,b){const _=[];let g,d=[0,1,2,3,4];C!=-1?d=[C]:(x*F>5e5||E==1)&&(d=[0]),b&&(g={level:0});const D=Ko;for(var R=0;R<d.length;R++){for(let B=0;B<x;B++)m(P,p,B,F,E,d[R]);_.push(D.deflate(P,g))}let U,H=1e9;for(R=0;R<_.length;R++)_[R].length<H&&(U=R,H=_[R].length);return _[U]}function m(p,x,E,F,P,C){const b=E*F;let _=b+E;if(p[_]=C,_++,C==0)if(F<500)for(var g=0;g<F;g++)p[_+g]=x[b+g];else p.set(new Uint8Array(x.buffer,b,F),_);else if(C==1){for(g=0;g<P;g++)p[_+g]=x[b+g];for(g=P;g<F;g++)p[_+g]=x[b+g]-x[b+g-P]+256&255}else if(E==0){for(g=0;g<P;g++)p[_+g]=x[b+g];if(C==2)for(g=P;g<F;g++)p[_+g]=x[b+g];if(C==3)for(g=P;g<F;g++)p[_+g]=x[b+g]-(x[b+g-P]>>1)+256&255;if(C==4)for(g=P;g<F;g++)p[_+g]=x[b+g]-r(x[b+g-P],0,0)+256&255}else{if(C==2)for(g=0;g<F;g++)p[_+g]=x[b+g]+256-x[b+g-F]&255;if(C==3){for(g=0;g<P;g++)p[_+g]=x[b+g]+256-(x[b+g-F]>>1)&255;for(g=P;g<F;g++)p[_+g]=x[b+g]+256-(x[b+g-F]+x[b+g-P]>>1)&255}if(C==4){for(g=0;g<P;g++)p[_+g]=x[b+g]+256-r(0,x[b+g-F],0)&255;for(g=P;g<F;g++)p[_+g]=x[b+g]+256-r(x[b+g-P],x[b+g-F],x[b+g-P-F])&255}}}function y(p,x){const E=new Uint8Array(p),F=E.slice(0),P=new Uint32Array(F.buffer),C=T(F,x),b=C[0],_=C[1],g=E.length,d=new Uint8Array(g>>2);let D;if(E.length<2e7)for(var R=0;R<g;R+=4)D=I(b,U=E[R]*(1/255),H=E[R+1]*(1/255),B=E[R+2]*(1/255),j=E[R+3]*(1/255)),d[R>>2]=D.ind,P[R>>2]=D.est.rgba;else for(R=0;R<g;R+=4){var U=E[R]*.00392156862745098,H=E[R+1]*(1/255),B=E[R+2]*(1/255),j=E[R+3]*(1/255);for(D=b;D.left;)D=v(D.est,U,H,B,j)<=0?D.left:D.right;d[R>>2]=D.ind,P[R>>2]=D.est.rgba}return{abuf:F.buffer,inds:d,plte:_}}function T(p,x,E){E==null&&(E=1e-4);const F=new Uint32Array(p.buffer),P={i0:0,i1:p.length,bst:null,est:null,tdst:0,left:null,right:null};P.bst=M(p,P.i0,P.i1),P.est=A(P.bst);const C=[P];for(;C.length<x;){let _=0,g=0;for(var b=0;b<C.length;b++)C[b].est.L>_&&(_=C[b].est.L,g=b);if(_<E)break;const d=C[g],D=N(p,F,d.i0,d.i1,d.est.e,d.est.eMq255);if(d.i0>=D||d.i1<=D){d.est.L=0;continue}const R={i0:d.i0,i1:D,bst:null,est:null,tdst:0,left:null,right:null};R.bst=M(p,R.i0,R.i1),R.est=A(R.bst);const U={i0:D,i1:d.i1,bst:null,est:null,tdst:0,left:null,right:null};for(U.bst={R:[],m:[],N:d.bst.N-R.bst.N},b=0;b<16;b++)U.bst.R[b]=d.bst.R[b]-R.bst.R[b];for(b=0;b<4;b++)U.bst.m[b]=d.bst.m[b]-R.bst.m[b];U.est=A(U.bst),d.left=R,d.right=U,C[g]=R,C.push(U)}for(C.sort(((_,g)=>g.bst.N-_.bst.N)),b=0;b<C.length;b++)C[b].ind=b;return[P,C]}function I(p,x,E,F,P){if(p.left==null)return p.tdst=(function(R,U,H,B,j){const G=U-R[0],L=H-R[1],Y=B-R[2],J=j-R[3];return G*G+L*L+Y*Y+J*J})(p.est.q,x,E,F,P),p;const C=v(p.est,x,E,F,P);let b=p.left,_=p.right;C>0&&(b=p.right,_=p.left);const g=I(b,x,E,F,P);if(g.tdst<=C*C)return g;const d=I(_,x,E,F,P);return d.tdst<g.tdst?d:g}function v(p,x,E,F,P){const{e:C}=p;return C[0]*x+C[1]*E+C[2]*F+C[3]*P-p.eMq}function N(p,x,E,F,P,C){for(F-=4;E<F;){for(;O(p,E,P)<=C;)E+=4;for(;O(p,F,P)>C;)F-=4;if(E>=F)break;const b=x[E>>2];x[E>>2]=x[F>>2],x[F>>2]=b,E+=4,F-=4}for(;O(p,E,P)>C;)E-=4;return E+4}function O(p,x,E){return p[x]*E[0]+p[x+1]*E[1]+p[x+2]*E[2]+p[x+3]*E[3]}function M(p,x,E){const F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P=[0,0,0,0],C=E-x>>2;for(let b=x;b<E;b+=4){const _=p[b]*.00392156862745098,g=p[b+1]*(1/255),d=p[b+2]*(1/255),D=p[b+3]*(1/255);P[0]+=_,P[1]+=g,P[2]+=d,P[3]+=D,F[0]+=_*_,F[1]+=_*g,F[2]+=_*d,F[3]+=_*D,F[5]+=g*g,F[6]+=g*d,F[7]+=g*D,F[10]+=d*d,F[11]+=d*D,F[15]+=D*D}return F[4]=F[1],F[8]=F[2],F[9]=F[6],F[12]=F[3],F[13]=F[7],F[14]=F[11],{R:F,m:P,N:C}}function A(p){const{R:x}=p,{m:E}=p,{N:F}=p,P=E[0],C=E[1],b=E[2],_=E[3],g=F==0?0:1/F,d=[x[0]-P*P*g,x[1]-P*C*g,x[2]-P*b*g,x[3]-P*_*g,x[4]-C*P*g,x[5]-C*C*g,x[6]-C*b*g,x[7]-C*_*g,x[8]-b*P*g,x[9]-b*C*g,x[10]-b*b*g,x[11]-b*_*g,x[12]-_*P*g,x[13]-_*C*g,x[14]-_*b*g,x[15]-_*_*g],D=d,R=w;let U=[Math.random(),Math.random(),Math.random(),Math.random()],H=0,B=0;if(F!=0)for(let G=0;G<16&&(U=R.multVec(D,U),B=Math.sqrt(R.dot(U,U)),U=R.sml(1/B,U),!(G!=0&&Math.abs(B-H)<1e-9));G++)H=B;const j=[P*g,C*g,b*g,_*g];return{Cov:d,q:j,e:U,L:H,eMq255:R.dot(R.sml(255,j),U),eMq:R.dot(U,j),rgba:(Math.round(255*j[3])<<24|Math.round(255*j[2])<<16|Math.round(255*j[1])<<8|Math.round(255*j[0])<<0)>>>0}}var w={multVec:(p,x)=>[p[0]*x[0]+p[1]*x[1]+p[2]*x[2]+p[3]*x[3],p[4]*x[0]+p[5]*x[1]+p[6]*x[2]+p[7]*x[3],p[8]*x[0]+p[9]*x[1]+p[10]*x[2]+p[11]*x[3],p[12]*x[0]+p[13]*x[1]+p[14]*x[2]+p[15]*x[3]],dot:(p,x)=>p[0]*x[0]+p[1]*x[1]+p[2]*x[2]+p[3]*x[3],sml:(p,x)=>[p*x[0],p*x[1],p*x[2],p*x[3]]};Fe.encode=function(x,E,F,P,C,b,_){P==null&&(P=0),_==null&&(_=!1);const g=c(x,E,F,P,[!1,!1,!1,0,_,!1]);return S(g,-1),h(g,E,F,C,b)},Fe.encodeLL=function(x,E,F,P,C,b,_,g){const d={ctype:0+(P==1?0:2)+(C==0?0:4),depth:b,frames:[]},D=(P+C)*b,R=D*E;for(let U=0;U<x.length;U++)d.frames.push({rect:{x:0,y:0,width:E,height:F},img:new Uint8Array(x[U]),blend:0,dispose:1,bpp:Math.ceil(D/8),bpl:Math.ceil(R/8)});return S(d,0,!0),h(d,E,F,_,g)},Fe.encode.compress=c,Fe.encode.dither=a,Fe.quantize=y,Fe.quantize.getKDtree=T,Fe.quantize.getNearest=I})();const Or={toArrayBuffer(e,t){const r=e.width,o=e.height,n=r<<2,i=e.getContext("2d").getImageData(0,0,r,o),s=new Uint32Array(i.data.buffer),a=(32*r+31)/32<<2,h=a*o,S=122+h,c=new ArrayBuffer(S),l=new DataView(c),u=1<<20;let f,m,y,T,I=u,v=0,N=0,O=0;function M(p){l.setUint16(N,p,!0),N+=2}function A(p){l.setUint32(N,p,!0),N+=4}function w(p){N+=p}M(19778),A(S),w(4),A(122),A(108),A(r),A(-o>>>0),M(1),M(32),A(3),A(h),A(2835),A(2835),w(8),A(16711680),A(65280),A(255),A(4278190080),A(1466527264),(function p(){for(;v<o&&I>0;){for(T=122+v*a,f=0;f<n;)I--,m=s[O++],y=m>>>24,l.setUint32(T+f,m<<8|y),f+=4;v++}O<s.length?(I=u,setTimeout(p,Or._dly)):t(c)})()},toBlob(e,t){this.toArrayBuffer(e,(r=>{t(new Blob([r],{type:"image/bmp"}))}))},_dly:9};var be={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Qo={[be.CHROME]:16384,[be.FIREFOX]:11180,[be.DESKTOP_SAFARI]:16384,[be.IE]:8192,[be.IOS]:4096,[be.ETC]:8192};const Sn=typeof window<"u",Ur=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,At=Sn&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Jo=(Sn||Ur)&&(At&&At.getOriginalSymbol(window,"File")||typeof File<"u"&&File),wr=(Sn||Ur)&&(At&&At.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function En(e,t,r=Date.now()){return new Promise((o=>{const n=e.split(","),i=n[0].match(/:(.*?);/)[1],s=globalThis.atob(n[1]);let a=s.length;const h=new Uint8Array(a);for(;a--;)h[a]=s.charCodeAt(a);const S=new Blob([h],{type:i});S.name=t,S.lastModified=r,o(S)}))}function Mr(e){return new Promise(((t,r)=>{const o=new wr;o.onload=()=>t(o.result),o.onerror=n=>r(n),o.readAsDataURL(e)}))}function Dr(e){return new Promise(((t,r)=>{const o=new Image;o.onload=()=>t(o),o.onerror=n=>r(n),o.src=e}))}function Ze(){if(Ze.cachedResult!==void 0)return Ze.cachedResult;let e=be.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=be.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=be.IOS:/Safari/i.test(t)?e=be.DESKTOP_SAFARI:/Firefox/i.test(t)?e=be.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=be.IE),Ze.cachedResult=e,Ze.cachedResult}function Lr(e,t){const r=Ze(),o=Qo[r];let n=e,i=t,s=n*i;const a=n>i?i/n:n/i;for(;s>o*o;){const h=(o+n)/2,S=(o+i)/2;h<S?(i=S,n=S*a):(i=h*a,n=h),s=n*i}return{width:n,height:i}}function Nt(e,t){let r,o;try{if(r=new OffscreenCanvas(e,t),o=r.getContext("2d"),o===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),o=r.getContext("2d")}return r.width=e,r.height=t,[r,o]}function kr(e,t){const{width:r,height:o}=Lr(e.width,e.height),[n,i]=Nt(r,o);return t&&/jpe?g/.test(t)&&(i.fillStyle="white",i.fillRect(0,0,n.width,n.height)),i.drawImage(e,0,0,n.width,n.height),n}function Et(){return Et.cachedResult!==void 0||(Et.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Et.cachedResult}function Ct(e,t={}){return new Promise((function(r,o){let n,i;var s=function(){try{return i=kr(n,t.fileType||e.type),r([n,i])}catch(h){return o(h)}},a=function(h){try{var S=function(c){try{throw c}catch(l){return o(l)}};try{let c;return Mr(e).then((function(l){try{return c=l,Dr(c).then((function(u){try{return n=u,(function(){try{return s()}catch(f){return o(f)}})()}catch(f){return S(f)}}),S)}catch(u){return S(u)}}),S)}catch(c){S(c)}}catch(c){return o(c)}};try{if(Et()||[be.DESKTOP_SAFARI,be.MOBILE_SAFARI].includes(Ze()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(h){try{return n=h,s()}catch{return a()}}),a)}catch{a()}}))}function yt(e,t,r,o,n=1){return new Promise((function(i,s){let a;if(t==="image/png"){let S,c,l;return S=e.getContext("2d"),{data:c}=S.getImageData(0,0,e.width,e.height),l=Fe.encode([c.buffer],e.width,e.height,4096*n),a=new Blob([l],{type:t}),a.name=r,a.lastModified=o,h.call(this)}{let S=function(){return h.call(this)};if(t==="image/bmp")return new Promise((c=>Or.toBlob(e,c))).then((function(c){try{return a=c,a.name=r,a.lastModified=o,S.call(this)}catch(l){return s(l)}}).bind(this),s);{let c=function(){return S.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:n}).then((function(l){try{return a=l,a.name=r,a.lastModified=o,c.call(this)}catch(u){return s(u)}}).bind(this),s);{let l;return l=e.toDataURL(t,n),En(l,r,o).then((function(u){try{return a=u,c.call(this)}catch(f){return s(f)}}).bind(this),s)}}}function h(){return i(a)}}))}function Re(e){e.width=0,e.height=0}function tt(){return new Promise((function(e,t){let r,o,n,i;return tt.cachedResult!==void 0?e(tt.cachedResult):En("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(s){try{return r=s,Ct(r).then((function(a){try{return o=a[1],yt(o,r.type,r.name,r.lastModified).then((function(h){try{return n=h,Re(o),Ct(n).then((function(S){try{return i=S[0],tt.cachedResult=i.width===1&&i.height===2,e(tt.cachedResult)}catch(c){return t(c)}}),t)}catch(S){return t(S)}}),t)}catch(h){return t(h)}}),t)}catch(a){return t(a)}}),t)}))}function Gr(e){return new Promise(((t,r)=>{const o=new wr;o.onload=n=>{const i=new DataView(n.target.result);if(i.getUint16(0,!1)!=65496)return t(-2);const s=i.byteLength;let a=2;for(;a<s;){if(i.getUint16(a+2,!1)<=8)return t(-1);const h=i.getUint16(a,!1);if(a+=2,h==65505){if(i.getUint32(a+=2,!1)!=1165519206)return t(-1);const S=i.getUint16(a+=6,!1)==18761;a+=i.getUint32(a+4,S);const c=i.getUint16(a,S);a+=2;for(let l=0;l<c;l++)if(i.getUint16(a+12*l,S)==274)return t(i.getUint16(a+12*l+8,S))}else{if((65280&h)!=65280)break;a+=i.getUint16(a,!1)}}return t(-1)},o.onerror=n=>r(n),o.readAsArrayBuffer(e)}))}function Br(e,t){const{width:r}=e,{height:o}=e,{maxWidthOrHeight:n}=t;let i,s=e;return isFinite(n)&&(r>n||o>n)&&([s,i]=Nt(r,o),r>o?(s.width=n,s.height=o/r*n):(s.width=r/o*n,s.height=n),i.drawImage(e,0,0,s.width,s.height),Re(e)),s}function jr(e,t){const{width:r}=e,{height:o}=e,[n,i]=Nt(r,o);switch(t>4&&t<9?(n.width=o,n.height=r):(n.width=r,n.height=o),t){case 2:i.transform(-1,0,0,1,r,0);break;case 3:i.transform(-1,0,0,-1,r,o);break;case 4:i.transform(1,0,0,-1,0,o);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,o,0);break;case 7:i.transform(0,-1,-1,0,o,r);break;case 8:i.transform(0,-1,1,0,0,r)}return i.drawImage(e,0,0,r,o),Re(e),n}function On(e,t,r=0){return new Promise((function(o,n){let i,s,a,h,S,c,l,u,f,m,y,T,I,v,N,O,M,A,w,p;function x(F=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;i+=F,t.onProgress(Math.min(i,100))}function E(F){if(t.signal&&t.signal.aborted)throw t.signal.reason;i=Math.min(Math.max(F,i),100),t.onProgress(i)}return i=r,s=t.maxIteration||10,a=1024*t.maxSizeMB*1024,x(),Ct(e,t).then((function(F){try{return[,h]=F,x(),S=Br(h,t),x(),new Promise((function(P,C){var b;if(!(b=t.exifOrientation))return Gr(e).then((function(g){try{return b=g,_.call(this)}catch(d){return C(d)}}).bind(this),C);function _(){return P(b)}return _.call(this)})).then((function(P){try{return c=P,x(),tt().then((function(C){try{return l=C?S:jr(S,c),x(),u=t.initialQuality||1,f=t.fileType||e.type,yt(l,f,e.name,e.lastModified,u).then((function(b){try{{let g=function(){if(s--&&(N>a||N>I)){let D,R;return D=p?.95*w.width:w.width,R=p?.95*w.height:w.height,[M,A]=Nt(D,R),A.drawImage(w,0,0,D,R),u*=f==="image/png"?.85:.95,yt(M,f,e.name,e.lastModified,u).then((function(U){try{return O=U,Re(w),w=M,N=O.size,E(Math.min(99,Math.floor((v-N)/(v-a)*100))),g}catch(H){return n(H)}}),n)}return[1]},d=function(){return Re(w),Re(M),Re(S),Re(l),Re(h),E(100),o(O)};if(m=b,x(),y=m.size>a,T=m.size>e.size,!y&&!T)return E(100),o(m);var _;return I=e.size,v=m.size,N=v,w=l,p=!t.alwaysKeepResolution&&y,(_=(function(D){for(;D;){if(D.then)return void D.then(_,n);try{if(D.pop){if(D.length)return D.pop()?d.call(this):D;D=g}else D=D.call(this)}catch(R){return n(R)}}}).bind(this))(g)}}catch(g){return n(g)}}).bind(this),n)}catch(b){return n(b)}}).bind(this),n)}catch(C){return n(C)}}).bind(this),n)}catch(P){return n(P)}}).bind(this),n)}))}const qo=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Gt;function Vo(e,t){return new Promise(((r,o)=>{Gt||(Gt=(function(s){const a=[];return a.push(s),URL.createObjectURL(new Blob(a))})(qo));const n=new Worker(Gt);n.addEventListener("message",(function(s){if(t.signal&&t.signal.aborted)n.terminate();else if(s.data.progress===void 0){if(s.data.error)return o(new Error(s.data.error)),void n.terminate();r(s.data.file),n.terminate()}else t.onProgress(s.data.progress)})),n.addEventListener("error",o),t.signal&&t.signal.addEventListener("abort",(()=>{o(t.signal.reason),n.terminate()})),n.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function se(e,t){return new Promise((function(r,o){let n,i,s,a,h,S;if(n={...t},s=0,{onProgress:a}=n,n.maxSizeMB=n.maxSizeMB||Number.POSITIVE_INFINITY,h=typeof n.useWebWorker!="boolean"||n.useWebWorker,delete n.useWebWorker,n.onProgress=f=>{s=f,typeof a=="function"&&a(s)},!(e instanceof Blob||e instanceof Jo))return o(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return o(new Error("The file given is not an image"));if(S=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!h||typeof Worker!="function"||S)return On(e,n).then((function(f){try{return i=f,u.call(this)}catch(m){return o(m)}}).bind(this),o);var c=(function(){try{return u.call(this)}catch(f){return o(f)}}).bind(this),l=function(f){try{return On(e,n).then((function(m){try{return i=m,c()}catch(y){return o(y)}}),o)}catch(m){return o(m)}};try{return n.libURL=n.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Vo(e,n).then((function(f){try{return i=f,c()}catch{return l()}}),l)}catch{l()}function u(){try{i.name=e.name,i.lastModified=e.lastModified}catch{}try{n.preserveExif&&e.type==="image/jpeg"&&(!n.fileType||n.fileType&&n.fileType===e.type)&&(i=Nr(e,i))}catch{}return r(i)}}))}se.getDataUrlFromFile=Mr,se.getFilefromDataUrl=En,se.loadImage=Dr,se.drawImageInCanvas=kr,se.drawFileInCanvas=Ct,se.canvasToFile=yt,se.getExifOrientation=Gr,se.handleMaxWidthOrHeight=Br,se.followExifOrientation=jr,se.cleanupCanvasMemory=Re,se.isAutoOrientationInBrowser=tt,se.approximateBelowMaximumCanvasSizeOfBrowser=Lr,se.copyExifWithoutOrientation=Nr,se.getBrowserName=Ze,se.version="2.0.2";var ct={},Un;function es(){if(Un)return ct;Un=1,Object.defineProperty(ct,"__esModule",{value:!0});const e=new RegExp("^(\\d{4}):(\\d{2}):(\\d{2}) (\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,3}))?(?:([zZ])|([-+])(\\d{2}):(\\d{2}))?$");function t(n,i){let s=n.toString(),a=i-s.length;for(;a>0;)a-=1,s=`0${s}`;return s}function r(n){const i=e.exec(n);if(i==null)return new Date(NaN);const s=new Date,a=i[8]?0:i[9]?(Number(i[10])*60+Number(i[11]))*(i[9]==="+"?1:-1):0;return s.setUTCFullYear(Number(i[1])),s.setUTCMonth(Number(i[2])-1),s.setUTCDate(Number(i[3])),s.setUTCHours(Number(i[4])),s.setUTCMinutes(Number(i[5])+a),s.setUTCSeconds(Number(i[6])),s.setUTCMilliseconds(Number(i[7])||0),s}ct.parse=r;function o(n,i,s){if(isNaN(n.getTime()))return"";const a=t(n.getUTCFullYear(),4),h=t(n.getUTCMonth()+1,2),S=t(n.getUTCDate(),2),c=t(n.getUTCHours(),2),l=t(n.getUTCMinutes(),2),u=t(n.getUTCSeconds(),2),f=i?`.${Math.round(n.getUTCMilliseconds()/10)}`:"";return`${a}:${h}:${S} ${c}:${l}:${u}${f}${s?"Z":""}`}return ct.format=o,ct}var ts=es();function W(e,t,r){const o=[];for(let n=0;n<r&&t+n<e.byteLength;n++)o.push(e.getUint8(t+n));return nt(o)}function ns(e,t,r){const o=[];for(let n=0;n<r&&t+n<e.byteLength;n+=2)o.push(e.getUint16(t+n));return nt(o)}function nt(e){return e.map(t=>String.fromCharCode(t)).join("")}function q(){for(let e=1;e<arguments.length;e++)for(const t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function Hr(e,t,r){let o=!1;Object.defineProperty(e,t,{get(){return o||(o=!0,Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:r.apply(e),writable:!0})),e[t]},configurable:!0,enumerable:!0})}function zr(e){if(typeof btoa<"u")return btoa(typeof e=="string"?e:Array.prototype.reduce.call(new Uint8Array(e),(t,r)=>t+String.fromCharCode(r),""));if(!(typeof Buffer>"u"))return typeof Buffer.from!==void 0?Buffer.from(e).toString("base64"):new Buffer(e).toString("base64")}function rs(e){const t=e.substring(e.indexOf(",")+1);if(e.indexOf(";base64")!==-1)return typeof atob<"u"?Uint8Array.from(atob(t),o=>o.charCodeAt(0)).buffer:typeof Buffer>"u"?void 0:typeof Buffer.from!==void 0?Buffer.from(t,"base64"):new Buffer(t,"base64");const r=decodeURIComponent(t);return typeof Buffer<"u"?typeof Buffer.from!==void 0?Buffer.from(r):new Buffer(r):Uint8Array.from(r,o=>o.charCodeAt(0)).buffer}let is=class{constructor(t){if(os(t))throw new Error("DataView: Passed buffer type is unsupported.");this.buffer=t,this.byteLength=this.buffer.length}getUint8(t){return this.buffer.readUInt8(t)}getUint16(t,r){return r?this.buffer.readUInt16LE(t):this.buffer.readUInt16BE(t)}getUint32(t,r){return r?this.buffer.readUInt32LE(t):this.buffer.readUInt32BE(t)}getInt32(t,r){return r?this.buffer.readInt32LE(t):this.buffer.readInt32BE(t)}};function os(e){return typeof e!="object"||e.length===void 0||e.readUInt8===void 0||e.readUInt16LE===void 0||e.readUInt16BE===void 0||e.readUInt32LE===void 0||e.readUInt32BE===void 0||e.readInt32LE===void 0||e.readInt32BE===void 0}function le(e){return e.map(t=>String.fromCharCode(t)).join("")}function Kt(e){if(e.length>=8){const t=le(e.slice(0,8));if(t==="ASCII\0\0\0")return le(e.slice(8));if(t==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(t==="UNICODE\0")return"[Unicode encoded text]";if(t==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}function Ft(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}const Qt=18761,Jt=19789,Ke={BIG_ENDIAN:Jt,LITTLE_ENDIAN:Qt,getByteOrder:ss};function ss(e,t){if(e.getUint16(t)===Qt)return Qt;if(e.getUint16(t)===Jt)return Jt;throw new Error("Illegal byte order value. Faulty image.")}const wn={isTiffFile:as,findTiffOffsets:us};function as(e){return!!e&&e.byteLength>=4&&cs(e)}function cs(e){const o=e.getUint16(0)===Ke.LITTLE_ENDIAN;return e.getUint16(2,o)===42}function us(){return{hasAppMarkers:!0,tiffHeaderOffset:0}}const Mn={isJpegFile:Fs,findJpegOffsets:_s},ls=2,fs=65496,Dn=2,Ce=4,xe=2,ds=2,hs=10,gs=18,Ln=33,kn=79,Gn=18,ps=8,qt="ICC_PROFILE\0",$r=Ce+qt.length,ms=$r+1,Bn="MPF\0",Xr=65472,Yr=65474,xs=65476,Ss=65499,Es=65501,bs=65498,Zr=65504,bn=65505,Wr=65506,Is=65517,Ts=65519,As=65534,Cs=65535,ys="JFIF",Vt="Exif",jn="http://ns.adobe.com/xap/1.0/\0",Hn="http://ns.adobe.com/xmp/extension/\0",zn="Photoshop 3.0";function Fs(e){return!!e&&e.byteLength>=ls&&e.getUint16(0)===fs}function _s(e){let t=Dn,r,o,n,i,s,a,h,S,c;for(;t+Ce+5<=e.byteLength;){if(Ps(e,t))o=t+xe;else if(Rs(e,t))n=t+xe;else if(Os(e,t))r=e.getUint16(t+xe),i=t+ds;else if(Us(e,t))r=e.getUint16(t+xe),s=t+hs;else if(ws(e,t))h||(h=[]),r=e.getUint16(t+xe),h.push(ks(t,r));else if(Ds(e,t))h||(h=[]),r=e.getUint16(t+xe),h.push(Gs(t,r));else if(Bs(e,t))r=e.getUint16(t+xe),a=t+gs;else if(vs(e,t)){r=e.getUint16(t+xe);const l=t+Gn,u=r-(Gn-xe),f=e.getUint8(t+$r),m=e.getUint8(t+ms);S||(S=[]),S.push({offset:l,length:u,chunkNumber:f,chunksTotal:m})}else if(Ns(e,t))r=e.getUint16(t+xe),c=t+ps;else if(js(e,t))r=e.getUint16(t+xe);else if(Hs(e,t)){t++;continue}else break;t+=xe+r}return{hasAppMarkers:t>Dn,fileDataOffset:o||n,jfifDataOffset:i,tiffHeaderOffset:s,iptcDataOffset:a,xmpChunks:h,iccChunks:S,mpfDataOffset:c}}function Ps(e,t){return e.getUint16(t)===Xr}function Rs(e,t){return e.getUint16(t)===Yr}function vs(e,t){const r=qt.length;return e.getUint16(t)===Wr&&W(e,t+Ce,r)===qt}function Ns(e,t){const r=Bn.length;return e.getUint16(t)===Wr&&W(e,t+Ce,r)===Bn}function Os(e,t){const r=Vt.length;return e.getUint16(t)===Zr&&W(e,t+Ce,r)===ys&&e.getUint8(t+Ce+r)===0}function Us(e,t){const r=Vt.length;return e.getUint16(t)===bn&&W(e,t+Ce,r)===Vt&&e.getUint8(t+Ce+r)===0}function ws(e,t){return e.getUint16(t)===bn&&Ms(e,t)}function Ms(e,t){const r=jn.length;return W(e,t+Ce,r)===jn}function Ds(e,t){return e.getUint16(t)===bn&&Ls(e,t)}function Ls(e,t){const r=Hn.length;return W(e,t+Ce,r)===Hn}function ks(e,t){return{dataOffset:e+Ln,length:t-(Ln-xe)}}function Gs(e,t){return{dataOffset:e+kn,length:t-(kn-xe)}}function Bs(e,t){const r=zn.length;return e.getUint16(t)===Is&&W(e,t+Ce,r)===zn&&e.getUint8(t+Ce+r)===0}function js(e,t){const r=e.getUint16(t);return r>=Zr&&r<=Ts||r===As||r===Xr||r===Yr||r===xs||r===Ss||r===Es||r===bs}function Hs(e,t){return e.getUint16(t)===Cs}const $n={isPngFile:Xs,findPngOffsets:Ys},en=`PNG\r

`,_t=4,ve=4,ft=0,Qe=_t,ge=_t+ve,tn="XML:com.adobe.xmp\0",zs="tEXt",Kr="iTXt",Qr="pHYs",Jr="tIME",$s="eXIf";function Xs(e){return!!e&&W(e,0,en.length)===en}function Ys(e){const r={hasAppMarkers:!1};let o=en.length;for(;o+_t+ve<=e.byteLength;){if(Zs(e,o))r.hasAppMarkers=!0,r.pngHeaderOffset=o+ge;else if(Ws(e,o)){const n=qs(e,o);n!==void 0&&(r.hasAppMarkers=!0,r.xmpChunks=[{dataOffset:n,length:e.getUint32(o+ft)-(n-(o+ge))}])}else if(Ks(e,o)){r.hasAppMarkers=!0;const n=W(e,o+Qe,ve);r.pngTextChunks||(r.pngTextChunks=[]),r.pngTextChunks.push({length:e.getUint32(o+ft),type:n,offset:o+ge})}else Qs(e,o)?(r.hasAppMarkers=!0,r.tiffHeaderOffset=o+ge):Js(e,o)&&(r.hasAppMarkers=!0,r.pngChunkOffsets||(r.pngChunkOffsets=[]),r.pngChunkOffsets.push(o+ft));o+=e.getUint32(o+ft)+_t+ve+4}return r}function Zs(e,t){return W(e,t+Qe,ve)==="IHDR"}function Ws(e,t){return W(e,t+Qe,ve)==="iTXt"&&W(e,t+ge,tn.length)===tn}function Ks(e,t){const r="tEXt",o="iTXt",n=W(e,t+Qe,ve);return n===r||n===o}function Qs(e,t){return W(e,t+Qe,ve)===$s}function Js(e,t){const r=[Qr,Jr],o=W(e,t+Qe,ve);return r.includes(o)}function qs(e,t){t+=ge+tn.length+1+1;let n=0;for(;n<2&&t<e.byteLength;)e.getUint8(t)===0&&n++,t++;if(!(n<2))return t}const Xn={isHeicFile:Vs,findHeicOffsets:ea};function Vs(e){if(!e)return!1;const t="ftyp",r=4,o=["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"],i=W(e,r+t.length,4);return W(e,r,t.length)===t&&o.indexOf(i)!==-1}function ea(e){{const{offset:t,length:r}=ta(e);if(t===void 0)return{hasAppMarkers:!1};const o=Math.min(t+r,e.byteLength),{exifItemOffset:n,ilocOffset:i,colrOffset:s}=oa(e,t,o),a=sa(e,n,i,o),h=aa(e,s,o);return{hasAppMarkers:a!==void 0||h!==void 0,tiffHeaderOffset:a,iccChunks:h}}}function ta(e){let i=0;for(;i+4+4<=e.byteLength;){const s=qr(e,i);if(s>=8&&W(e,i+4,4)==="meta")return{offset:i,length:s};i+=s}return{offset:void 0,length:0}}function qr(e,t){const o=e.getUint32(t);return na(o)?e.byteLength-t:ra(o)&&ia(e,t)?e.getUint32(t+12):o}function na(e){return e===0}function ra(e){return e===1}function ia(e,t){return e.getUint32(t+8)===0}function oa(e,t,r){const i={ilocOffset:void 0,exifItemOffset:void 0,colrOffset:void 0};for(;t+4<=r&&(!i.ilocOffset||!i.exifItemOffset||!i.colrOffset);){const s=W(e,t,4);s==="iloc"?i.ilocOffset=t:s==="Exif"?i.exifItemOffset=t+-4:s==="colr"&&(i.colrOffset=t+-4),t++}return i}function sa(e,t,r,o){if(!r||!t||t+2>o)return;const c=e.getUint16(t);for(r+=12;r+16<=o;){if(e.getUint16(r)===c){const u=e.getUint32(r+8);if(u+4<=e.byteLength){const m=e.getUint32(u)+4;return u+m}}r+=16}}function aa(e,t,r){if(!t||t+12>r)return;const s=W(e,t+8,4);if(!(s!=="prof"&&s!=="rICC"))return[{offset:t+12,length:qr(e,t)-12,chunkNumber:1,chunksTotal:1}]}const Yn={isWebpFile:ca,findOffsets:ua};function ca(e){const r="RIFF",n="WEBP";return!!e&&W(e,0,r.length)===r&&W(e,8,n.length)===n}function ua(e){const o="Exif\0\0";let i=12,s=!1,a,h,S;for(;i+8<e.byteLength;){const c=W(e,i,4),l=e.getUint32(i+4,!0);c==="EXIF"?(s=!0,W(e,i+8,o.length)===o?a=i+8+o.length:a=i+8):c==="XMP "?(s=!0,h=[{dataOffset:i+8,length:l}]):c==="ICCP"&&(s=!0,S=[{offset:i+8,length:l,chunkNumber:1,chunksTotal:1}]),i+=8+(l%2===0?l:l+1)}return{hasAppMarkers:s,tiffHeaderOffset:a,xmpChunks:h,iccChunks:S}}const la={parseAppMarkers:fa};function fa(e){if(wn.isTiffFile(e))return wn.findTiffOffsets();if(Mn.isJpegFile(e))return Mn.findJpegOffsets(e);if($n.isPngFile(e))return $n.findPngOffsets(e);if(Xn.isHeicFile(e))return Xn.findHeicOffsets(e);if(Yn.isWebpFile(e))return Yn.findOffsets(e);throw new Error("Invalid image format")}const Vr={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},nn={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},z={getAsciiValue:da,getByteAt:ei,getAsciiAt:ha,getShortAt:ga,getLongAt:Pt,getRationalAt:pa,getUndefinedAt:ma,getSlongAt:rn,getSrationalAt:xa,getIfdPointerAt:Sa,typeSizes:Vr,tagTypes:nn,getTypeSize:Ea};function da(e){return e.map(t=>String.fromCharCode(t))}function ei(e,t){return e.getUint8(t)}function ha(e,t){return e.getUint8(t)}function ga(e,t,r){return e.getUint16(t,r===Ke.LITTLE_ENDIAN)}function Pt(e,t,r){return e.getUint32(t,r===Ke.LITTLE_ENDIAN)}function pa(e,t,r){return[Pt(e,t,r),Pt(e,t+4,r)]}function ma(e,t){return ei(e,t)}function rn(e,t,r){return e.getInt32(t,r===Ke.LITTLE_ENDIAN)}function xa(e,t,r){return[rn(e,t,r),rn(e,t+4,r)]}function Sa(e,t,r){return Pt(e,t,r)}function Ea(e){if(nn[e]===void 0)throw new Error("No such type found.");return Vr[nn[e]]}const Z={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace(e){return e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(e){return e.map(t=>{if(t===49)return"Y";if(t===50)return"Cb";if(t===51)return"Cr";if(t===52)return"R";if(t===53)return"G";if(t===54)return"B"}).join("")},Contrast(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},CustomRendered(e){return e===0?"Normal process":e===1?"Custom process":"Unknown"},ExposureMode(e){return e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},ExposureProgram(e){return e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},ExposureTime(e){return e[0]>=e[1]?`${Math.round(e[0]/e[1])}`:e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${e[0]/e[1]}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700  7100K)":e===13?"Day white fluorescent (N 4600  5400K)":e===14?"Cool white fluorescent (W 3900  4500K)":e===15?"White fluorescent (WW 3200  3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown",MeteringMode(e){return e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},ResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},Saturation(e){return e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},SceneCaptureType(e){return e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},Sharpness(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},ShutterSpeedValue(e){const t=Math.pow(2,e[0]/e[1]);return t<=1?`${Math.round(1/t)}`:`1/${Math.round(t)}`},WhiteBalance(e){return e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])},ba={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:Z.XResolution},283:{name:"YResolution",description:Z.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:Z.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{const t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(r=>t[r]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(t=>""+t[0]/t[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(t=>""+t[0]/t[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:Z.LightSource},50779:{name:"CalibrationIlluminant2",description:Z.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"},Ia={33434:{name:"ExposureTime",description:Z.ExposureTime},33437:{name:"FNumber",description:Z.FNumber},34850:{name:"ExposureProgram",description:Z.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>le(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:Z.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:Z.ShutterSpeedValue},37378:{name:"ApertureValue",description:Z.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:Z.MeteringMode},37384:{name:"LightSource",description:Z.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:Z.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:Kt},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" "},40960:{name:"FlashpixVersion",description:e=>e.map(t=>String.fromCharCode(t)).join("")},40961:{name:"ColorSpace",description:Z.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:Z.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,t])=>`X: ${e}, Y: ${t}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:Z.CustomRendered},41986:{name:"ExposureMode",description:Z.ExposureMode},41987:{name:"WhiteBalance",description:Z.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:e=>e===0?"Unknown":e},41990:{name:"SceneCaptureType",description:Z.SceneCaptureType},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:Z.Contrast},41993:{name:"Saturation",description:Z.Saturation},41994:{name:"Sharpness",description:Z.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{const t=`${e[0][0]/e[0][1]}-${e[1][0]/e[1][1]} mm`;return e[3][1]===0?`${t} f/?`:`${t} f/${1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},Ta={0:{name:"GPSVersionID",description:e=>e[0]===2&&e[1]===2&&e[2]===0&&e[3]===0?"Version 2.2":"Unknown"},1:{name:"GPSLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},2:{name:"GPSLatitude",description:Ft},3:{name:"GPSLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},4:{name:"GPSLongitude",description:Ft},5:{name:"GPSAltitudeRef",description:e=>e===0?"Sea level":e===1?"Sea level reference (negative value)":"Unknown"},6:{name:"GPSAltitude",description:e=>e[0]/e[1]+" m"},7:{name:"GPSTimeStamp",description:e=>e.map(([t,r])=>{const o=t/r;return/^\d(\.|$)/.test(`${o}`)?`0${o}`:o}).join(":")},8:"GPSSatellites",9:{name:"GPSStatus",description:e=>{const t=e.join("");return t==="A"?"Measurement in progress":t==="V"?"Measurement Interoperability":"Unknown"}},10:{name:"GPSMeasureMode",description:e=>{const t=e.join("");return t==="2"?"2-dimensional measurement":t==="3"?"3-dimensional measurement":"Unknown"}},11:"GPSDOP",12:{name:"GPSSpeedRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers per hour":t==="M"?"Miles per hour":t==="N"?"Knots":"Unknown"}},13:"GPSSpeed",14:{name:"GPSTrackRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},15:"GPSTrack",16:{name:"GPSImgDirectionRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},17:"GPSImgDirection",18:"GPSMapDatum",19:{name:"GPSDestLatitudeRef",description:e=>{const t=e.join("");return t==="N"?"North latitude":t==="S"?"South latitude":"Unknown"}},20:{name:"GPSDestLatitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},21:{name:"GPSDestLongitudeRef",description:e=>{const t=e.join("");return t==="E"?"East longitude":t==="W"?"West longitude":"Unknown"}},22:{name:"GPSDestLongitude",description:e=>e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600},23:{name:"GPSDestBearingRef",description:e=>{const t=e.join("");return t==="T"?"True direction":t==="M"?"Magnetic direction":"Unknown"}},24:"GPSDestBearing",25:{name:"GPSDestDistanceRef",description:e=>{const t=e.join("");return t==="K"?"Kilometers":t==="M"?"Miles":t==="N"?"Knots":"Unknown"}},26:"GPSDestDistance",27:{name:"GPSProcessingMethod",description:Kt},28:{name:"GPSAreaInformation",description:Kt},29:"GPSDateStamp",30:{name:"GPSDifferential",description:e=>e===0?"Measurement without differential correction":e===1?"Differential correction applied":"Unknown"},31:"GPSHPositioningError"},Aa={1:"InteroperabilityIndex",2:{name:"InteroperabilityVersion",description:e=>le(e)},4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight"},Ca={45056:{name:"MPFVersion",description:e=>le(e)},45057:"NumberOfImages",45058:"MPEntry",45059:"ImageUIDList",45060:"TotalFrames"},Zn=q({},ba,Ia),ke={"0th":Zn,exif:Zn,gps:Ta,interoperability:Aa,mpf:Ca},Wn="Exif IFD Pointer",Kn="GPS Info IFD Pointer",Qn="Interoperability IFD Pointer",ya={1:z.getByteAt,2:z.getAsciiAt,3:z.getShortAt,4:z.getLongAt,5:z.getRationalAt,7:z.getUndefinedAt,9:z.getSlongAt,10:z.getSrationalAt,13:z.getIfdPointerAt},Jn={read:Fa,readMpf:Na};function Fa(e,t,r){const o=Ke.getByteOrder(e,t);let n=_a(e,t,o,r);return n=Pa(n,e,t,o,r),n=Ra(n,e,t,o,r),n=va(n,e,t,o,r),n}function _a(e,t,r,o){return ot(e,"0th",t,ti(e,t,r),r,o)}function ti(e,t,r){return t+z.getLongAt(e,t+4,r)}function Pa(e,t,r,o,n){return e[Wn]!==void 0?q(e,ot(t,"exif",r,r+e[Wn].value,o,n)):e}function Ra(e,t,r,o,n){return e[Kn]!==void 0?q(e,ot(t,"gps",r,r+e[Kn].value,o,n)):e}function va(e,t,r,o,n){return e[Qn]!==void 0?q(e,ot(t,"interoperability",r,r+e[Qn].value,o,n)):e}function Na(e,t,r){const o=Ke.getByteOrder(e,t),n=ot(e,"mpf",t,ti(e,t,o),o,r);return Oa(e,t,n,o)}function Oa(e,t,r,o){if(!r.MPEntry)return r;const i=[];for(let s=0;s<Math.ceil(r.MPEntry.value.length/16);s++){i[s]={};const a=ut(r.MPEntry.value,s*16,z.getTypeSize("LONG"),o);i[s].ImageFlags=Ua(a),i[s].ImageFormat=wa(a),i[s].ImageType=Ma(a);const h=ut(r.MPEntry.value,s*16+4,z.getTypeSize("LONG"),o);i[s].ImageSize={value:h,description:""+h};const S=Da(s)?0:ut(r.MPEntry.value,s*16+8,z.getTypeSize("LONG"),o)+t;i[s].ImageOffset={value:S,description:""+S};const c=ut(r.MPEntry.value,s*16+12,z.getTypeSize("SHORT"),o);i[s].DependentImage1EntryNumber={value:c,description:""+c};const l=ut(r.MPEntry.value,s*16+14,z.getTypeSize("SHORT"),o);i[s].DependentImage2EntryNumber={value:l,description:""+l},i[s].image=e.buffer.slice(S,S+h),Hr(i[s],"base64",function(){return zr(this.image)})}return r.Images=i,r}function ut(e,t,r,o){if(o===Ke.LITTLE_ENDIAN){let i=0;for(let s=0;s<r;s++)i+=e[t+s]<<8*s;return i}let n=0;for(let i=0;i<r;i++)n+=e[t+i]<<8*(r-1-i);return n}function Ua(e){const t=[e>>31&1,e>>30&1,e>>29&1],r=[];return t[0]&&r.push("Dependent Parent Image"),t[1]&&r.push("Dependent Child Image"),t[2]&&r.push("Representative Image"),{value:t,description:r.join(", ")||"None"}}function wa(e){const t=e>>24&7;return{value:t,description:t===0?"JPEG":"Unknown"}}function Ma(e){const t=e&16777215;return{value:t,description:{196608:"Baseline MP Primary Image",65537:"Large Thumbnail (VGA equivalent)",65538:"Large Thumbnail (Full HD equivalent)",131073:"Multi-Frame Image (Panorama)",131074:"Multi-Frame Image (Disparity)",131075:"Multi-Frame Image (Multi-Angle)",0:"Undefined"}[t]||"Unknown"}}function Da(e){return e===0}function ot(e,t,r,o,n,i){const s=z.getTypeSize("SHORT"),a=12,h={},S=La(e,o,n);o+=s;for(let c=0;c<S&&!(o+a>e.byteLength);c++){const l=ka(e,t,r,o,n,i);l!==void 0&&(h[l.name]={id:l.id,value:l.value,description:l.description}),o+=a}if(o<e.byteLength-z.getTypeSize("LONG")){const c=z.getLongAt(e,o,n);c!==0&&(h.Thumbnail=ot(e,t,r,r+c,n,!0))}return h}function La(e,t,r){return t+z.getTypeSize("SHORT")<=e.byteLength?z.getShortAt(e,t,r):0}function ka(e,t,r,o,n,i){const a=z.getTypeSize("SHORT"),h=a+z.getTypeSize("SHORT"),S=h+z.getTypeSize("LONG"),c=z.getShortAt(e,o,n),l=z.getShortAt(e,o+a,n),u=z.getLongAt(e,o+h,n);let f;if(z.typeSizes[l]===void 0||!i&&ke[t][c]===void 0)return;if(Ga(l,u))f=qn(e,o+S,l,u,n);else{const T=z.getLongAt(e,o+S,n);if(Ba(e,r,T,l,u)){const I=c===33723;f=qn(e,r+T,l,u,n,I)}else f="<faulty value>"}l===z.tagTypes.ASCII&&(f=ja(f),f=Ha(f));let m=`undefined-${c}`,y=f;if(ke[t][c]!==void 0)if(ke[t][c].name!==void 0&&ke[t][c].description!==void 0){m=ke[t][c].name;try{y=ke[t][c].description(f)}catch{y=Vn(f)}}else l===z.tagTypes.RATIONAL||l===z.tagTypes.SRATIONAL?(m=ke[t][c],y=""+f[0]/f[1]):(m=ke[t][c],y=Vn(f));return{id:c,name:m,value:f,description:y}}function Ga(e,t){return z.typeSizes[e]*t<=z.getTypeSize("LONG")}function qn(e,t,r,o,n,i=!1){let s=[];i&&(o=o*z.typeSizes[r],r=z.tagTypes.BYTE);for(let a=0;a<o;a++)s.push(ya[r](e,t,n)),t+=z.typeSizes[r];return r===z.tagTypes.ASCII?s=z.getAsciiValue(s):s.length===1&&(s=s[0]),s}function Ba(e,t,r,o,n){return t+r+z.typeSizes[o]*n<=e.byteLength}function ja(e){const t=[];let r=0;for(let o=0;o<e.length;o++){if(e[o]==="\0"){r++;continue}t[r]===void 0&&(t[r]=""),t[r]+=e[o]}return t}function Ha(e){try{return e.map(t=>decodeURIComponent(escape(t)))}catch{return e}}function Vn(e){return e instanceof Array?e.join(", "):e}const za={read:$a};function $a(e,t){const r=Xa(e,t),o=Ka(e,t,r);return{"Bits Per Sample":Ya(e,t,r),"Image Height":Za(e,t,r),"Image Width":Wa(e,t,r),"Color Components":o,Subsampling:o&&Qa(e,t,o.value,r)}}function Xa(e,t){return z.getShortAt(e,t)}function Ya(e,t,r){if(3>r)return;const i=z.getByteAt(e,t+2);return{value:i,description:""+i}}function Za(e,t,r){if(5>r)return;const i=z.getShortAt(e,t+3);return{value:i,description:`${i}px`}}function Wa(e,t,r){if(7>r)return;const i=z.getShortAt(e,t+5);return{value:i,description:`${i}px`}}function Ka(e,t,r){if(8>r)return;const i=z.getByteAt(e,t+7);return{value:i,description:""+i}}function Qa(e,t,r,o){if(8+3*r>o)return;const s=[];for(let a=0;a<r;a++){const h=t+8+a*3;s.push([z.getByteAt(e,h),z.getByteAt(e,h+1),z.getByteAt(e,h+2)])}return{value:s,description:s.length>1?Ja(s)+qa(s):""}}function Ja(e){const t={1:"Y",2:"Cb",3:"Cr",4:"I",5:"Q"};return e.map(r=>t[r[0]]).join("")}function qa(e){const t={17:"4:4:4 (1 1)",18:"4:4:0 (1 2)",20:"4:4:1 (1 4)",33:"4:2:2 (2 1)",34:"4:2:0 (2 2)",36:"4:2:1 (2 4)",65:"4:1:1 (4 1)",66:"4:1:0 (4 2)"};return e.length===0||e[0][1]===void 0||t[e[0][1]]===void 0?"":t[e[0][1]]}const Va={read:ec};function ec(e,t){const r=tc(e,t),o=ac(e,t,r),n=cc(e,t,r),i={"JFIF Version":nc(e,t,r),"Resolution Unit":rc(e,t,r),XResolution:oc(e,t,r),YResolution:sc(e,t,r),"JFIF Thumbnail Width":o,"JFIF Thumbnail Height":n};if(o!==void 0&&n!==void 0){const s=uc(e,t,3*o.value*n.value,r);s&&(i["JFIF Thumbnail"]=s)}for(const s in i)i[s]===void 0&&delete i[s];return i}function tc(e,t){return z.getShortAt(e,t)}function nc(e,t,r){if(9>r)return;const i=z.getByteAt(e,t+7),s=z.getByteAt(e,t+7+1);return{value:i*256+s,description:i+"."+s}}function rc(e,t,r){if(10>r)return;const i=z.getByteAt(e,t+9);return{value:i,description:ic(i)}}function ic(e){return e===0?"None":e===1?"inches":e===2?"cm":"Unknown"}function oc(e,t,r){if(12>r)return;const i=z.getShortAt(e,t+10);return{value:i,description:""+i}}function sc(e,t,r){if(14>r)return;const i=z.getShortAt(e,t+12);return{value:i,description:""+i}}function ac(e,t,r){if(15>r)return;const i=z.getByteAt(e,t+14);return{value:i,description:`${i}px`}}function cc(e,t,r){if(16>r)return;const i=z.getByteAt(e,t+15);return{value:i,description:`${i}px`}}function uc(e,t,r,o){return r===0||16+r>o?void 0:{value:e.buffer.slice(t+16,t+16+r),description:"<24-bit RGB pixel data>"}}const Ge={iptc:{256:{name:"Model Version",description:e=>((e[0]<<8)+e[1]).toString()},261:{name:"Destination",repeatable:!0},276:{name:"File Format",description:e=>((e[0]<<8)+e[1]).toString()},278:{name:"File Format Version",description:e=>((e[0]<<8)+e[1]).toString()},286:"Service Identifier",296:"Envelope Number",306:"Product ID",316:"Envelope Priority",326:{name:"Date Sent",description:Bt},336:{name:"Time Sent",description:jt},346:{name:"Coded Character Set",description:er,encoding_name:er},356:"UNO",376:{name:"ARM Identifier",description:e=>((e[0]<<8)+e[1]).toString()},378:{name:"ARM Version",description:e=>((e[0]<<8)+e[1]).toString()},512:{name:"Record Version",description:e=>((e[0]<<8)+e[1]).toString()},515:"Object Type Reference",516:"Object Attribute Reference",517:"Object Name",519:"Edit Status",520:{name:"Editorial Update",description:e=>le(e)==="01"?"Additional Language":"Unknown"},522:"Urgency",524:{name:"Subject Reference",repeatable:!0,description:e=>{const t=le(e).split(":");return t[2]+(t[3]?"/"+t[3]:"")+(t[4]?"/"+t[4]:"")}},527:"Category",532:{name:"Supplemental Category",repeatable:!0},534:"Fixture Identifier",537:{name:"Keywords",repeatable:!0},538:{name:"Content Location Code",repeatable:!0},539:{name:"Content Location Name",repeatable:!0},542:"Release Date",547:"Release Time",549:"Expiration Date",550:"Expiration Time",552:"Special Instructions",554:{name:"Action Advised",description:e=>{const t=le(e);return t==="01"?"Object Kill":t==="02"?"Object Replace":t==="03"?"Object Append":t==="04"?"Object Reference":"Unknown"}},557:{name:"Reference Service",repeatable:!0},559:{name:"Reference Date",repeatable:!0},562:{name:"Reference Number",repeatable:!0},567:{name:"Date Created",description:Bt},572:{name:"Time Created",description:jt},574:{name:"Digital Creation Date",description:Bt},575:{name:"Digital Creation Time",description:jt},577:"Originating Program",582:"Program Version",587:{name:"Object Cycle",description:e=>{const t=le(e);return t==="a"?"morning":t==="p"?"evening":t==="b"?"both":"Unknown"}},592:{name:"By-line",repeatable:!0},597:{name:"By-line Title",repeatable:!0},602:"City",604:"Sub-location",607:"Province/State",612:"Country/Primary Location Code",613:"Country/Primary Location Name",615:"Original Transmission Reference",617:"Headline",622:"Credit",627:"Source",628:"Copyright Notice",630:{name:"Contact",repeatable:!0},632:"Caption/Abstract",634:{name:"Writer/Editor",repeatable:!0},637:{name:"Rasterized Caption",description:e=>e},642:"Image Type",643:{name:"Image Orientation",description:e=>{const t=le(e);return t==="P"?"Portrait":t==="L"?"Landscape":t==="S"?"Square":"Unknown"}},647:"Language Identifier",662:{name:"Audio Type",description:e=>{const t=le(e),r=t.charAt(0),o=t.charAt(1);let n="";return r==="1"?n+="Mono":r==="2"&&(n+="Stereo"),o==="A"?n+=", actuality":o==="C"?n+=", question and answer session":o==="M"?n+=", music, transmitted by itself":o==="Q"?n+=", response to a question":o==="R"?n+=", raw sound":o==="S"?n+=", scener":o==="V"?n+=", voicer":o==="W"&&(n+=", wrap"),n!==""?n:t}},663:{name:"Audio Sampling Rate",description:e=>parseInt(le(e),10)+" Hz"},664:{name:"Audio Sampling Resolution",description:e=>{const t=parseInt(le(e),10);return t+(t===1?" bit":" bits")}},665:{name:"Audio Duration",description:e=>{const t=le(e);return t.length>=6?t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2):t}},666:"Audio Outcue",698:"Short Document ID",699:"Unique Document ID",700:"Owner ID",712:{name:e=>e.length===2?"ObjectData Preview File Format":"Record 2 destination",description:e=>{if(e.length===2){const t=(e[0]<<8)+e[1];return t===0?"No ObjectData":t===1?"IPTC-NAA Digital Newsphoto Parameter Record":t===2?"IPTC7901 Recommended Message Format":t===3?"Tagged Image File Format (Adobe/Aldus Image data)":t===4?"Illustrator (Adobe Graphics data)":t===5?"AppleSingle (Apple Computer Inc)":t===6?"NAA 89-3 (ANPA 1312)":t===7?"MacBinary II":t===8?"IPTC Unstructured Character Oriented File Format (UCOFF)":t===9?"United Press International ANPA 1312 variant":t===10?"United Press International Down-Load Message":t===11?"JPEG File Interchange (JFIF)":t===12?"Photo-CD Image-Pac (Eastman Kodak)":t===13?"Microsoft Bit Mapped Graphics File [*.BMP]":t===14?"Digital Audio File [*.WAV] (Microsoft & Creative Labs)":t===15?"Audio plus Moving Video [*.AVI] (Microsoft)":t===16?"PC DOS/Windows Executable Files [*.COM][*.EXE]":t===17?"Compressed Binary File [*.ZIP] (PKWare Inc)":t===18?"Audio Interchange File Format AIFF (Apple Computer Inc)":t===19?"RIFF Wave (Microsoft Corporation)":t===20?"Freehand (Macromedia/Aldus)":t===21?'Hypertext Markup Language "HTML" (The Internet Society)':t===22?"MPEG 2 Audio Layer 2 (Musicom), ISO/IEC":t===23?"MPEG 2 Audio Layer 3, ISO/IEC":t===24?"Portable Document File (*.PDF) Adobe":t===25?"News Industry Text Format (NITF)":t===26?"Tape Archive (*.TAR)":t===27?"Tidningarnas Telegrambyr NITF version (TTNITF DTD)":t===28?"Ritzaus Bureau NITF version (RBNITF DTD)":t===29?"Corel Draw [*.CDR]":`Unknown format ${t}`}return le(e)}},713:{name:"ObjectData Preview File Format Version",description:(e,t)=>{const r={"00":{"00":"1"},"01":{"01":"1","02":"2","03":"3","04":"4"},"02":{"04":"4"},"03":{"01":"5.0","02":"6.0"},"04":{"01":"1.40"},"05":{"01":"2"},"06":{"01":"1"},11:{"01":"1.02"},20:{"01":"3.1","02":"4.0","03":"5.0","04":"5.5"},21:{"02":"2.0"}},o=le(e);if(t["ObjectData Preview File Format"]){const n=le(t["ObjectData Preview File Format"].value);if(r[n]&&r[n][o])return r[n][o]}return o}},714:"ObjectData Preview Data",1802:{name:"Size Mode",description:e=>e[0].toString()},1812:{name:"Max Subfile Size",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}},1882:{name:"ObjectData Size Announced",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}},1887:{name:"Maximum ObjectData Size",description:e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<8)+e[r];return t.toString()}}}};function Bt(e){const t=le(e);return t.length>=8?t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2):t}function jt(e){const t=le(e);let r=t;return t.length>=6&&(r=t.substr(0,2)+":"+t.substr(2,2)+":"+t.substr(4,2),t.length===11&&(r+=t.substr(6,1)+t.substr(7,2)+":"+t.substr(9,2))),r}function er(e){const t=le(e);return t==="\x1B%G"?"UTF-8":t==="\x1B%5"?"Windows-1252":t==="\x1B%/G"?"UTF-8 Level 1":t==="\x1B%/H"?"UTF-8 Level 2":t==="\x1B%/I"?"UTF-8 Level 3":t==="\x1B/A"?"ISO-8859-1":t==="\x1B/B"?"ISO-8859-2":t==="\x1B/C"?"ISO-8859-3":t==="\x1B/D"?"ISO-8859-4":t==="\x1B/@"?"ISO-8859-5":t==="\x1B/G"?"ISO-8859-6":t==="\x1B/F"?"ISO-8859-7":t==="\x1B/H"?"ISO-8859-8":"Unknown"}const lc={get:fc};function fc(){if(typeof TextDecoder<"u")return TextDecoder}const dc=5,ni={decode:hc,TAG_HEADER_SIZE:dc};function hc(e,t){const r=lc.get();if(typeof r<"u"&&e!==void 0)try{return new r(e).decode(Uint8Array.from(t))}catch{}const o=t.map(n=>String.fromCharCode(n)).join("");return gc(o)}function gc(e){try{return decodeURIComponent(escape(e))}catch{return e}}const pc=943868237,ri=4,Ht=ri+8,mc=1028,ii=5,tr={read:xc};function xc(e,t,r){try{if(Array.isArray(e))return nr(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,r);const{naaBlock:o,dataOffset:n}=Sc(e,t);return nr(e,o,n,r)}catch{return{}}}function Sc(e,t){for(;t+Ht<=e.byteLength;){const r=Ec(e,t);if(bc(r))return{naaBlock:r,dataOffset:t+Ht};t+=Ht+r.size+Ic(r)}throw new Error("No IPTC NAA resource block.")}function Ec(e,t){if(e.getUint32(t,!1)!==pc)throw new Error("Not an IPTC resource block.");return{type:e.getUint16(t+ri),size:e.getUint16(t+10)}}function bc(e){return e.type===mc}function Ic(e){return e.size%2!==0?1:0}function nr(e,t,r,o){const n={};let i;const s=r+t.size;for(;r<s&&r<e.byteLength;){const{tag:a,tagSize:h}=Tc(e,r,n,i,o);if(a===null)break;a&&("encoding"in a&&(i=a.encoding),n[a.name]===void 0||a.repeatable===void 0?n[a.name]={id:a.id,value:a.value,description:a.description}:(n[a.name]instanceof Array||(n[a.name]=[{id:n[a.name].id,value:n[a.name].value,description:n[a.name].description}]),n[a.name].push({id:a.id,value:a.value,description:a.description}))),r+=ii+h}return n}function Tc(e,t,r,o,n){if(Ac(e,t))return{tag:null,tagSize:0};const a=e.getUint16(t+1),h=e.getUint16(t+3);if(!n&&!Ge.iptc[a])return{tag:void 0,tagSize:h};const S=Cc(e,t+ii,h),c={id:a,name:yc(Ge.iptc[a],a,S),value:S,description:Pc(Ge.iptc[a],S,r,o)};return Nc(a)&&(c.repeatable=!0),Oc(a)&&(c.encoding=Ge.iptc[a].encoding_name(S)),{tag:c,tagSize:h}}function Ac(e,t){return e.getUint8(t)!==28}function Cc(e,t,r){const o=[];for(let n=0;n<r;n++)o.push(e.getUint8(t+n));return o}function yc(e,t,r){return e?Fc(e)?e:_c(e)?e.name(r):e.name:`undefined-${t}`}function Fc(e){return typeof e=="string"}function _c(e){return typeof e.name=="function"}function Pc(e,t,r,o){if(vc(e))try{return e.description(t,r)}catch{}return Rc(e,t)?ni.decode(o,t):t}function Rc(e,t){return e&&t instanceof Array}function vc(e){return e&&e.description!==void 0}function Nc(e){return Ge.iptc[e]&&Ge.iptc[e].repeatable}function Oc(e){return Ge.iptc[e]&&Ge.iptc[e].encoding_name!==void 0}const mt={"tiff:Orientation"(e){return e==="1"?"Horizontal (normal)":e==="2"?"Mirror horizontal":e==="3"?"Rotate 180":e==="4"?"Mirror vertical":e==="5"?"Mirror horizontal and rotate 270 CW":e==="6"?"Rotate 90 CW":e==="7"?"Mirror horizontal and rotate 90 CW":e==="8"?"Rotate 270 CW":e},"tiff:ResolutionUnit":e=>Z.ResolutionUnit(parseInt(e,10)),"tiff:XResolution":e=>Ve(Z.XResolution,e),"tiff:YResolution":e=>Ve(Z.YResolution,e),"exif:ApertureValue":e=>Ve(Z.ApertureValue,e),"exif:GPSLatitude":rr,"exif:GPSLongitude":rr,"exif:FNumber":e=>Ve(Z.FNumber,e),"exif:FocalLength":e=>Ve(Z.FocalLength,e),"exif:FocalPlaneResolutionUnit":e=>Z.FocalPlaneResolutionUnit(parseInt(e,10)),"exif:ColorSpace":e=>Z.ColorSpace(Uc(e)),"exif:ComponentsConfiguration"(e,t){if(/^\d, \d, \d, \d$/.test(t)){const r=t.split(", ").map(o=>o.charCodeAt(0));return Z.ComponentsConfiguration(r)}return t},"exif:Contrast":e=>Z.Contrast(parseInt(e,10)),"exif:CustomRendered":e=>Z.CustomRendered(parseInt(e,10)),"exif:ExposureMode":e=>Z.ExposureMode(parseInt(e,10)),"exif:ExposureProgram":e=>Z.ExposureProgram(parseInt(e,10)),"exif:ExposureTime"(e){return oi(e)?Z.ExposureTime(e.split("/").map(t=>parseInt(t,10))):e},"exif:MeteringMode":e=>Z.MeteringMode(parseInt(e,10)),"exif:Saturation":e=>Z.Saturation(parseInt(e,10)),"exif:SceneCaptureType":e=>Z.SceneCaptureType(parseInt(e,10)),"exif:Sharpness":e=>Z.Sharpness(parseInt(e,10)),"exif:ShutterSpeedValue":e=>Ve(Z.ShutterSpeedValue,e),"exif:WhiteBalance":e=>Z.WhiteBalance(parseInt(e,10))};function Ve(e,t){return oi(t)?e(t.split("/")):t}function Uc(e){return e.substring(0,2)==="0x"?parseInt(e.substring(2),16):parseInt(e,10)}function oi(e){return/^-?\d+\/-?\d+$/.test(e)}function rr(e){const[t,r]=e.split(",");if(t!==void 0&&r!==void 0){const o=parseFloat(t),n=parseFloat(r),i=r.charAt(r.length-1);if(!Number.isNaN(o)&&!Number.isNaN(n))return""+(o+n/60)+i}return e}const wc={get:Mc};function Mc(){if(typeof DOMParser<"u")return DOMParser;try{return __non_webpack_require__("@xmldom/xmldom").DOMParser}catch{return}}const ir={read:Dc};function Dc(e,t){return typeof e=="string"?sr({},e):Lc(e,t).reduce(sr,{})}function Lc(e,t){if(t.length===0)return[];const r=[or(e,t.slice(0,1))];return t.length>1&&r.push(or(e,t.slice(1))),r}function or(e,t){const r=t.reduce((i,s)=>i+s.length,0),o=new Uint8Array(r);let n=0;for(let i=0;i<t.length;i++){const s=t[i],a=e.buffer.slice(s.dataOffset,s.dataOffset+s.length);o.set(new Uint8Array(a),n),n+=s.length}return new DataView(o.buffer)}function sr(e,t){try{const{doc:r,raw:o}=kc(t);e._raw=(e._raw||"")+o;const n=si(r);return q(e,ci(ai(n,!0)))}catch{return e}}function kc(e){const t=wc.get();if(!t)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),new Error;const r=new t,o=typeof e=="string"?e:W(e,0,e.byteLength),n=r.parseFromString(Gc(o),"application/xml");if(n.documentElement.nodeName==="parsererror")throw new Error(n.documentElement.textContent);return{doc:n,raw:o}}function Gc(e){return e.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")}function si(e){for(let t=0;t<e.childNodes.length;t++){if(e.childNodes[t].tagName==="x:xmpmeta")return si(e.childNodes[t]);if(e.childNodes[t].tagName==="rdf:RDF")return e.childNodes[t]}throw new Error}function ai(e,t=!1){const r=Bc(e);return jc(r)?t?{}:Hc(r[0]):zc(r)}function Bc(e){const t=[];for(let r=0;r<e.childNodes.length;r++)t.push(e.childNodes[r]);return t}function jc(e){return e.length===1&&e[0].nodeName==="#text"}function Hc(e){return e.nodeValue}function zc(e){const t={};return e.forEach(r=>{if($c(r)){const o=Xc(r);t[r.nodeName]!==void 0?(Array.isArray(t[r.nodeName])||(t[r.nodeName]=[t[r.nodeName]]),t[r.nodeName].push(o)):t[r.nodeName]=o}}),t}function $c(e){return e.nodeName&&e.nodeName!=="#text"}function Xc(e){return{attributes:Yc(e),value:ai(e)}}function Yc(e){const t={};for(let r=0;r<e.attributes.length;r++)t[e.attributes[r].nodeName]=decodeURIComponent(escape(e.attributes[r].value));return t}function ci(e){const t={};if(typeof e=="string")return e;for(const r in e){let o=e[r];Array.isArray(o)||(o=[o]),o.forEach(n=>{q(t,In(n.attributes)),typeof n.value=="object"&&q(t,ui(n.value))})}return t}function In(e){const t={};for(const r in e)Zc(r)&&(t[Ut(r)]={value:e[r],attributes:{},description:Ue(e[r],r)});return t}function Zc(e){return e!=="rdf:parseType"&&!Ot(e)}function Ot(e){return e.split(":")[0]==="xmlns"}function Ut(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function Ue(e,t=void 0){if(Array.isArray(e)){const r=Wc(e);return t&&typeof mt[t]=="function"?mt[t](e,r):r}if(typeof e=="object")return Kc(e);try{return t&&typeof mt[t]=="function"?mt[t](e):decodeURIComponent(escape(e))}catch{return e}}function Wc(e){return e.map(t=>t.value!==void 0?Ue(t.value):Ue(t)).join(", ")}function Kc(e){const t=[];for(const r in e)t.push(`${Qc(r)}: ${Ue(e[r].value)}`);return t.join("; ")}function Qc(e){return e==="CiAdrCity"?"CreatorCity":e==="CiAdrCtry"?"CreatorCountry":e==="CiAdrExtadr"?"CreatorAddress":e==="CiAdrPcode"?"CreatorPostalCode":e==="CiAdrRegion"?"CreatorRegion":e==="CiEmailWork"?"CreatorWorkEmail":e==="CiTelWork"?"CreatorWorkPhone":e==="CiUrlWork"?"CreatorWorkUrl":e}function ui(e){const t={};for(const r in e)Ot(r)||(t[Ut(r)]=Jc(e[r],r));return t}function Jc(e,t){return li(e)?fi(e,t):di(e)?hi(e,t):gi(e)?pi(e,t):eu(e)?tu(e,t):xi(e,t)}function li(e){return e.attributes["rdf:parseType"]==="Resource"&&e.value["rdf:value"]!==void 0||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]!==void 0}function fi(e,t){const r=gt(e);e.value["rdf:Description"]!==void 0&&(e=e.value["rdf:Description"]),q(r,gt(e),qc(e));const o=Vc(e);return{value:o,attributes:r,description:Ue(o,t)}}function gt(e){const t={};for(const r in e.attributes)r!=="rdf:parseType"&&r!=="rdf:resource"&&!Ot(r)&&(t[Ut(r)]=e.attributes[r]);return t}function qc(e){const t={};for(const r in e.value)r!=="rdf:value"&&!Ot(r)&&(t[Ut(r)]=e.value[r].value);return t}function Vc(e){return Si(e.value["rdf:value"])||e.value["rdf:value"].value}function di(e){return e.attributes["rdf:parseType"]==="Resource"||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]===void 0}function hi(e,t){const r={value:{},attributes:{}};return e.value["rdf:Description"]!==void 0&&(q(r.value,In(e.value["rdf:Description"].attributes)),q(r.attributes,gt(e)),e=e.value["rdf:Description"]),q(r.value,ui(e.value)),r.description=Ue(r.value,t),r}function gi(e){return Object.keys(e.value).length===0&&e.attributes["xml:lang"]===void 0&&e.attributes["rdf:resource"]===void 0}function pi(e,t){const r=In(e.attributes);return{value:r,attributes:{},description:Ue(r,t)}}function eu(e){return mi(e.value)!==void 0}function mi(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function tu(e,t){let r=mi(e.value).value["rdf:li"];const o=gt(e),n=[];return r===void 0?r=[]:Array.isArray(r)||(r=[r]),r.forEach(i=>{n.push(nu(i))}),{value:n,attributes:o,description:Ue(n,t)}}function nu(e){return li(e)?fi(e):di(e)?hi(e).value:gi(e)?pi(e).value:xi(e)}function xi(e,t){const r=Si(e)||ci(e.value);return{value:r,attributes:gt(e),description:Ue(r,t)}}function Si(e){return e.attributes&&e.attributes["rdf:resource"]}const ar={desc:{name:"ICC Description"},cprt:{name:"ICC Copyright"},dmdd:{name:"ICC Device Model Description"},vued:{name:"ICC Viewing Conditions Description"},dmnd:{name:"ICC Device Manufacturer for Display"},tech:{name:"Technology"}},cr={4:{name:"Preferred CMM type",value:(e,t)=>W(e,t,4),description:e=>e!==null?zt(e):""},8:{name:"Profile Version",value:(e,t)=>e.getUint8(t).toString(10)+"."+(e.getUint8(t+1)>>4).toString(10)+"."+(e.getUint8(t+1)%16).toString(10)},12:{name:"Profile/Device class",value:(e,t)=>W(e,t,4),description:e=>{switch(e.toLowerCase()){case"scnr":return"Input Device profile";case"mntr":return"Display Device profile";case"prtr":return"Output Device profile";case"link":return"DeviceLink profile";case"abst":return"Abstract profile";case"spac":return"ColorSpace profile";case"nmcl":return"NamedColor profile";case"cenc":return"ColorEncodingSpace profile";case"mid ":return"MultiplexIdentification profile";case"mlnk":return"MultiplexLink profile";case"mvis":return"MultiplexVisualization profile";default:return e}}},16:{name:"Color Space",value:(e,t)=>W(e,t,4)},20:{name:"Connection Space",value:(e,t)=>W(e,t,4)},24:{name:"ICC Profile Date",value:(e,t)=>ru(e,t).toISOString()},36:{name:"ICC Signature",value:(e,t)=>iu(e.buffer.slice(t,t+4))},40:{name:"Primary Platform",value:(e,t)=>W(e,t,4),description:e=>zt(e)},48:{name:"Device Manufacturer",value:(e,t)=>W(e,t,4),description:e=>zt(e)},52:{name:"Device Model Number",value:(e,t)=>W(e,t,4)},64:{name:"Rendering Intent",value:(e,t)=>e.getUint32(t),description:e=>{switch(e){case 0:return"Perceptual";case 1:return"Relative Colorimetric";case 2:return"Saturation";case 3:return"Absolute Colorimetric";default:return e}}},80:{name:"Profile Creator",value:(e,t)=>W(e,t,4)}};function ru(e,t){const r=e.getUint16(t),o=e.getUint16(t+2)-1,n=e.getUint16(t+4),i=e.getUint16(t+6),s=e.getUint16(t+8),a=e.getUint16(t+10);return new Date(Date.UTC(r,o,n,i,s,a))}function iu(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function zt(e){switch(e.toLowerCase()){case"appl":return"Apple";case"adbe":return"Adobe";case"msft":return"Microsoft";case"sunw":return"Sun Microsystems";case"sgi":return"Silicon Graphics";case"tgnt":return"Taligent";default:return e}}const ur={read:hu},ou=84,su=128,au="acsp",cu="desc",uu="mluc",lu="text",fu="sig ",du=12;function hu(e,t){try{const r=t.reduce((s,a)=>s+a.length,0),o=new Uint8Array(r);let n=0;const i=gu(e);for(let s=1;s<=t.length;s++){const a=t.find(c=>c.chunkNumber===s);if(!a)throw new Error(`ICC chunk ${s} not found`);const h=i.slice(a.offset,a.offset+a.length),S=new Uint8Array(h);o.set(S,n),n+=S.length}return xu(new DataView(o.buffer))}catch{return{}}}function gu(e){return Array.isArray(e)?new DataView(Uint8Array.from(e).buffer).buffer:e.buffer}function pu(e){return e.length<su+4}function mu(e,t){return e.length<t+du}function xu(e){const t=e.buffer,r=e.getUint32();if(e.byteLength!==r)throw new Error("ICC profile length not matching");if(e.length<ou)throw new Error("ICC profile too short");const o={},n=Object.keys(cr);for(let h=0;h<n.length;h++){const S=n[h],c=cr[S],l=c.value(e,parseInt(S,10));let u=l;c.description&&(u=c.description(l)),o[c.name]={value:l,description:u}}if(xt(t.slice(36,40))!==au)throw new Error("ICC profile: missing signature");if(pu(t))return o;const s=e.getUint32(128);let a=132;for(let h=0;h<s;h++){if(mu(t,a))return o;const S=W(e,a,4),c=e.getUint32(a+4),l=e.getUint32(a+8);if(c>t.length)return o;const u=W(e,c,4);if(u===cu){const f=e.getUint32(c+8);if(f>l)return o;const m=xt(t.slice(c+12,c+f+11));lt(o,S,m)}else if(u===uu){const f=e.getUint32(c+8),m=e.getUint32(c+12);let y=c+16;const T=[];for(let I=0;I<f;I++){const v=W(e,y+0,2),N=W(e,y+2,2),O=e.getUint32(y+4),M=e.getUint32(y+8),A=ns(e,c+M,O);T.push({languageCode:v,countryCode:N,text:A}),y+=m}if(f===1)lt(o,S,T[0].text);else{const I={};for(let v=0;v<T.length;v++)I[`${T[v].languageCode}-${T[v].countryCode}`]=T[v].text;lt(o,S,I)}}else if(u===lu){const f=xt(t.slice(c+8,c+l-7));lt(o,S,f)}else if(u===fu){const f=xt(t.slice(c+8,c+12));lt(o,S,f)}a=a+12}return o}function xt(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function lt(e,t,r){ar[t]?e[ar[t].name]={value:r,description:r}:e[t]={value:r,description:r}}const Su={read:Eu};function Eu(e,t){return{"Image Width":bu(e,t),"Image Height":Iu(e,t),"Bit Depth":Tu(e,t),"Color Type":Au(e,t),Compression:Cu(e,t),Filter:yu(e,t),Interlace:Fu(e,t)}}function bu(e,t){if(t+0+4>e.byteLength)return;const n=z.getLongAt(e,t);return{value:n,description:`${n}px`}}function Iu(e,t){if(t+4+4>e.byteLength)return;const n=z.getLongAt(e,t+4);return{value:n,description:`${n}px`}}function Tu(e,t){if(t+8+1>e.byteLength)return;const n=z.getByteAt(e,t+8);return{value:n,description:`${n}`}}function Au(e,t){const n={0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha"};if(t+9+1>e.byteLength)return;const i=z.getByteAt(e,t+9);return{value:i,description:n[i]||"Unknown"}}function Cu(e,t){if(t+10+1>e.byteLength)return;const n=z.getByteAt(e,t+10);return{value:n,description:n===0?"Deflate/Inflate":"Unknown"}}function yu(e,t){if(t+11+1>e.byteLength)return;const n=z.getByteAt(e,t+11);return{value:n,description:n===0?"Adaptive":"Unknown"}}function Fu(e,t){const n={0:"Noninterlaced",1:"Adam7 Interlace"};if(t+12+1>e.byteLength)return;const i=z.getByteAt(e,t+12);return{value:i,description:n[i]||"Unknown"}}const _u={read:vu},on="STATE_KEYWORD",sn="STATE_COMPRESSION",an="STATE_LANG",Ei="STATE_TRANSLATED_KEYWORD",Pu="STATE_TEXT",Ru=2;function vu(e,t){return t.reduce((r,{offset:o,length:n,type:i})=>{const{name:s,value:a,description:h}=Nu(e,o,n,i);return s&&(r[s]={value:a,description:h}),r},{})}function Nu(e,t,r,o){const n=[],i=[],s=[];let a=on;for(let S=0;S<r&&t+S<e.byteLength;S++){if(a===sn){if(e.getUint8(t+S)!==0)return{};S+=Ru,a=lr(o,a)}const c=e.getUint8(t+S);c===0?a=lr(o,a):a===on?n.push(c):a===an?i.push(c):a===Ei||s.push(c)}const h=nt(s);return{name:Ou(o,i,n),value:h,description:o===Kr?ni.decode("UTF-8",s):h}}function lr(e,t){return t===on&&e===Kr?sn:t===sn?an:t===an?Ei:Pu}function Ou(e,t,r){const o=nt(r);if(e===zs||t.length===0)return o;const n=nt(t);return`${o} (${n})`}const Uu={read:wu};function wu(e,t){const r={};for(let o=0;o<t.length;o++){const n=z.getLongAt(e,t[o]+ft),i=W(e,t[o]+Qe,ve);i===Qr?(r["Pixels Per Unit X"]=Mu(e,t[o],n),r["Pixels Per Unit Y"]=Du(e,t[o],n),r["Pixel Units"]=Lu(e,t[o],n)):i===Jr&&(r["Modify Date"]=ku(e,t[o],n))}return r}function Mu(e,t,r){if(!wt(e,t,r,0,4))return;const i=z.getLongAt(e,t+ge+0);return{value:i,description:""+i}}function Du(e,t,r){if(!wt(e,t,r,4,4))return;const i=z.getLongAt(e,t+ge+4);return{value:i,description:""+i}}function Lu(e,t,r){if(!wt(e,t,r,8,1))return;const i=z.getByteAt(e,t+ge+8);return{value:i,description:i===1?"meters":"Unknown"}}function ku(e,t,r){if(!wt(e,t,r,0,7))return;const n=z.getShortAt(e,t+ge),i=z.getByteAt(e,t+ge+2),s=z.getByteAt(e,t+ge+3),a=z.getByteAt(e,t+ge+4),h=z.getByteAt(e,t+ge+5),S=z.getByteAt(e,t+ge+6);return{value:[n,i,s,a,h,S],description:`${et(n,4)}-${et(i,2)}-${et(s,2)} ${et(a,2)}:${et(h,2)}:${et(S,2)}`}}function wt(e,t,r,o,n){return o+n<=r&&t+ge+o+n<=e.byteLength}function et(e,t){return`${"0".repeat(t-(""+e).length)}${e}`}const Gu=[6,7,99],Bu={get:ju};function ju(e,t,r){if(Hu(t)){t.type="image/jpeg";const o=r+t.JPEGInterchangeFormat.value;t.image=e.buffer.slice(o,o+t.JPEGInterchangeFormatLength.value),Hr(t,"base64",function(){return zr(this.image)})}return t}function Hu(e){return e&&(e.Compression===void 0||Gu.includes(e.Compression.value))&&e.JPEGInterchangeFormat&&e.JPEGInterchangeFormat.value&&e.JPEGInterchangeFormatLength&&e.JPEGInterchangeFormatLength.value}function bi(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=new Error().stack}bi.prototype=new Error;const zu={MetadataMissingError:bi};function $u(e,t){return Xu(e)?Yu(e,t).then(r=>$t(r,t)):Vu(e)?el(e).then(r=>$t(r,t)):$t(e,t)}function Xu(e){return typeof e=="string"}function Yu(e,t){return/^https?:\/\//.test(e)?typeof fetch<"u"?Zu(e,t):Wu(e,t):Qu(e)?Promise.resolve(rs(e)):Ju(e,t)}function Zu(e,{length:t}={}){const r={method:"GET"};return Number.isInteger(t)&&t>=0&&(r.headers={range:`bytes=0-${t-1}`}),fetch(e,r).then(o=>o.arrayBuffer())}function Wu(e,{length:t}={}){return new Promise((r,o)=>{const n={};Number.isInteger(t)&&t>=0&&(n.headers={range:`bytes=0-${t-1}`}),Ku(e)(e,n,s=>{if(s.statusCode>=200&&s.statusCode<=299){const a=[];s.on("data",h=>a.push(Buffer.from(h))),s.on("error",h=>o(h)),s.on("end",()=>r(Buffer.concat(a)))}else o(`Could not fetch file: ${s.statusCode} ${s.statusMessage}`),s.resume()}).on("error",s=>o(s))})}function Ku(e){return/^https:\/\//.test(e)?__non_webpack_require__("https").get:__non_webpack_require__("http").get}function Qu(e){return/^data:[^;,]*(;base64)?,/.test(e)}function Ju(e,{length:t}={}){return new Promise((r,o)=>{const n=qu();n.open(e,(i,s)=>{i?o(i):n.stat(e,(a,h)=>{if(a)o(a);else{const S=Math.min(h.size,t!==void 0?t:h.size),c=Buffer.alloc(S),l={buffer:c,length:S};n.read(s,l,u=>{u?o(u):n.close(s,f=>{f&&console.warn(`Could not close file ${e}:`,f),r(c)})})}})})})}function qu(){try{return __non_webpack_require__("fs")}catch{return}}function Vu(e){return typeof window<"u"&&typeof File<"u"&&e instanceof File}function el(e){return new Promise((t,r)=>{const o=new FileReader;o.onload=n=>t(n.target.result),o.onerror=()=>r(o.error),o.readAsArrayBuffer(e)})}function $t(e,t){return tl(e)&&(e=new Uint8Array(e).buffer),rl(nl(e),t)}function tl(e){try{return Buffer.isBuffer(e)}catch{return!1}}function nl(e){try{return new DataView(e)}catch{return new is(e)}}function rl(e,{expanded:t=!1,includeUnknown:r=!1}={expanded:!1,includeUnknown:!1}){let o=!1,n={};const{fileDataOffset:i,jfifDataOffset:s,tiffHeaderOffset:a,iptcDataOffset:h,xmpChunks:S,iccChunks:c,mpfDataOffset:l,pngHeaderOffset:u,pngTextChunks:f,pngChunkOffsets:m}=la.parseAppMarkers(e);if(il(i)){o=!0;const T=za.read(e,i);t?n.file=T:n=q({},n,T)}if(ol(s)){o=!0;const T=Va.read(e,s);t?n.jfif=T:n=q({},n,T)}if(sl(a)){o=!0;const T=Jn.read(e,a,r);if(T.Thumbnail&&(n.Thumbnail=T.Thumbnail,delete T.Thumbnail),t?(n.exif=T,al(n)):n=q({},n,T),T["IPTC-NAA"]&&!fr(h)){const I=tr.read(T["IPTC-NAA"].value,0,r);t?n.iptc=I:n=q({},n,I)}if(T.ApplicationNotes&&!dr(S)){const I=ir.read(nt(T.ApplicationNotes.value));t?n.xmp=I:(delete I._raw,n=q({},n,I))}if(T.ICC_Profile&&!hr(c)){const I=ur.read(T.ICC_Profile.value,[{offset:0,length:T.ICC_Profile.value.length,chunkNumber:1,chunksTotal:1}]);t?n.icc=I:n=q({},n,I)}}if(fr(h)){o=!0;const T=tr.read(e,h,r);t?n.iptc=T:n=q({},n,T)}if(dr(S)){o=!0;const T=ir.read(e,S);t?n.xmp=T:(delete T._raw,n=q({},n,T))}if(hr(c)){o=!0;const T=ur.read(e,c);t?n.icc=T:n=q({},n,T)}if(cl(l)){o=!0;const T=Jn.readMpf(e,l,r);t?n.mpf=T:n=q({},n,T)}if(ul(u)){o=!0;const T=Su.read(e,u);t?(n.png=n.png?q({},n.png,T):T,n.pngFile=T):n=q({},n,T)}if(ll(f)){o=!0;const T=_u.read(e,f);t?(n.png=n.png?q({},n.png,T):T,n.pngText=T):n=q({},n,T)}if(fl(m)){o=!0;const T=Uu.read(e,m);t?n.png=n.png?q({},n.png,T):T:n=q({},n,T)}const y=Bu.get(e,n.Thumbnail,a);if(y?(o=!0,n.Thumbnail=y):delete n.Thumbnail,!o)throw new zu.MetadataMissingError;return n}function il(e){return e!==void 0}function ol(e){return e!==void 0}function sl(e){return e!==void 0}function al(e){if(e.exif){if(e.exif.GPSLatitude&&e.exif.GPSLatitudeRef)try{e.gps=e.gps||{},e.gps.Latitude=Ft(e.exif.GPSLatitude.value),e.exif.GPSLatitudeRef.value.join("")==="S"&&(e.gps.Latitude=-e.gps.Latitude)}catch{}if(e.exif.GPSLongitude&&e.exif.GPSLongitudeRef)try{e.gps=e.gps||{},e.gps.Longitude=Ft(e.exif.GPSLongitude.value),e.exif.GPSLongitudeRef.value.join("")==="W"&&(e.gps.Longitude=-e.gps.Longitude)}catch{}if(e.exif.GPSAltitude&&e.exif.GPSAltitudeRef)try{e.gps=e.gps||{},e.gps.Altitude=e.exif.GPSAltitude.value[0]/e.exif.GPSAltitude.value[1],e.exif.GPSAltitudeRef.value===1&&(e.gps.Altitude=-e.gps.Altitude)}catch{}}}function fr(e){return e!==void 0}function dr(e){return Array.isArray(e)&&e.length>0}function hr(e){return Array.isArray(e)&&e.length>0}function cl(e){return e!==void 0}function ul(e){return e!==void 0}function ll(e){return e!==void 0}function fl(e){return e!==void 0}const Ii=e=>{const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");return r&&r.putImageData(e,0,0),t},dl=async e=>{const t=await $u(e),r=t.DateTimeOriginal?.description||t.DateTimeDigitized?.description||t.DateTime?.description;return typeof r!="string"?null:ts.parse(r)},hl=async e=>{const t=Ii(e),r=await se.canvasToFile(t,"image/jpeg","image.jpg",.95),o=await se(r,{maxWidthOrHeight:1e3,maxSizeMB:.1,initialQuality:.9,fileType:"image/webp"});return se.getDataUrlFromFile(o)},Ti=(e,t,r)=>{const o=Math.min(e,t,r),i=Math.max(e,t,r)-o;return Math.min(255,Math.max(0,Math.round(o**3/240**2)-i*1))},gl=(e,t,r,o,n=95)=>{const i=e.data,s=e.width,a=t/o,h=Math.round(r.x*a),S=Math.round(r.y*a),c=Math.round(r.width*a),l=Math.round(r.height*a),u=[];for(let w=0;w<l;w++)for(let p=0;p<c;p++){const x=h+p,F=((S+w)*s+x)*4,P=Ti(i[F],i[F+1],i[F+2]);u.push(P)}const f=[...u].sort((w,p)=>p-w),m=Math.floor(f.length*(100-n)/100),y=f[m]||200;let T=c,I=0,v=l,N=0;for(let w=0;w<l;w++)for(let p=0;p<c;p++){const x=w*c+p;u[x]>=y&&(T=Math.min(T,p),I=Math.max(I,p),v=Math.min(v,w),N=Math.max(N,w))}if(T>=I||v>=N)return r;const O=Math.max(4,(I-T)*.025),M=Math.max(3,(N-v)*.02);return T=Math.max(0,T-O),I=Math.min(c,I+O),v=Math.max(0,v-M),N=Math.min(l,N+M),{...r,x:r.x+T/a,y:r.y+v/a,width:(I-T)/a,height:(N-v)/a}},Ai=(e,t,r,o,n,i)=>{const s=t.data;for(let a=0;a<s.length;a++)e.data[a]=s[a];for(let a=0;a<i;a++)for(let h=0;h<n;h++){const S=r+h,l=((o+a)*e.width+S)*4,u=Ti(s[l],s[l+1],s[l+2]);e.data[l]=255-u,e.data[l+1]=255-u,e.data[l+2]=255-u,e.data[l+3]=255}},pl=(e,t,r,o)=>{const n=e.data,i=e.width,s=t/o,a=Math.round(r.x*s),h=Math.round(r.y*s),S=Math.round(r.width*s),c=Math.round(r.height*s),l=new ImageData(S,c),u=l.data;for(let f=0;f<c;f++)for(let m=0;m<S;m++){const y=a+m,I=((h+f)*i+y)*4,v=(f*S+m)*4;u[v]=n[I],u[v+1]=n[I+1],u[v+2]=n[I+2],u[v+3]=n[I+3]}return Ai(l,l,0,0,S,c),l},ml=({imageData:e,naturalSize:t,date:r,mix:o,showDate:n,onScoreRecognized:i})=>{const s=X.useRef(null),a=X.useRef(),h=C=>{const b=s.current;if(!b)return;b.width=C.width,b.height=C.height;const _=b.getContext("2d");_&&_.putImageData(C,0,0)};X.useEffect(()=>{a.current=structuredClone(e),h(a.current),f([])},[e]);const S=fn(),[c,l]=X.useState(null),[u,f]=X.useState([]),[m,y]=X.useState(null),T=X.useRef(null),[I,v]=X.useState(!1),[N,O]=X.useState(),M=X.useRef(!1),A=X.useRef(u);A.current=u;const w=C=>{M.current=!0,f(C)},p=X.useCallback(()=>{if(!M.current)return;M.current=!1;const C=A.current;if(C.length===0||!s.current)return;const b=C[0],_=s.current.clientWidth,g=gl(e,t,b,_);if(a.current){const d=t/_;Ai(a.current,e,Math.round(g.x*d),Math.round(g.y*d),Math.round(g.width*d),Math.round(g.height*d)),h(a.current)}f([g])},[t,e]);X.useEffect(()=>{const C=()=>{setTimeout(p,0)};return document.addEventListener("pointerup",C,{capture:!0}),()=>{document.removeEventListener("pointerup",C,{capture:!0})}},[p]);const x=br(St.results.recognizeScoreMutation.mutationOptions()),E=async()=>{if(!(u.length===0||!s.current||!a.current))try{l(null),v(!0);const C=s.current.clientWidth,b=pl(e,t,u[0],C),_=Ii(b),g=await se.canvasToFile(_,"image/webp","cropped.webp",new Date().getTime()),d=await se(g,{maxWidthOrHeight:340,maxSizeMB:.015,fileType:"image/webp"}),D=await se.getDataUrlFromFile(d);O(D);const R=await x.mutateAsync({image:D,mix:o});y(R)}catch(C){console.error("OCR error:",C),l(C instanceof Error?C.message:"Recognition failed")}finally{v(!1)}},F=()=>{if(!m)return;const[C,b,_,g,d,D,R]=m;i?.({perfect:C>=0?C:-1,great:b>=0?b:-1,good:_>=0?_:-1,bad:g>=0?g:-1,miss:d>=0?d:-1,combo:D>=0?D:-1,score:R>=0?R:-1}),y(null)},P=()=>{y(null)};return k.jsxs(Yt,{gap:"xs",ref:T,children:[n&&k.jsxs(ue,{size:"xs",c:"dimmed",children:[S.DATE_TAKEN,": ",r?r.toLocaleString():S.UNKNOWN]}),k.jsx(Xo,{areas:u,onChange:w,maxAreas:1,globalAreaStyle:{border:"1.5px solid rgba(0, 0, 0, 0.7)",outline:"1.5px solid rgba(255, 255, 128, 0.7)"},children:k.jsx("canvas",{ref:s,style:{maxWidth:"100%",height:"auto"}})}),!m&&k.jsxs(k.Fragment,{children:[u.length===0?k.jsxs(dt,{color:"yellow",p:"sm",children:[S.OCR_DRAW_RECTANGLE_HINT,k.jsx("div",{children:k.jsxs(Lt,{children:[k.jsx(Lt.Target,{children:k.jsx(Ye,{size:"xs",color:"blue",onClick:E,children:"Tutorial"})}),k.jsx(Lt.Dropdown,{children:k.jsx("video",{width:"244",height:"294",autoPlay:!0,loop:!0,muted:!0,children:k.jsx("source",{src:"crop_example.mp4",type:"video/mp4"})})})]})})]}):k.jsx(ue,{size:"xs",c:"dimmed",children:S.OCR_AREA_SELECTED_HINT}),k.jsx(Ye,{size:"sm",variant:"light",disabled:u.length===0,loading:x.isPending||I,onClick:E,children:S.RECOGNIZE_SCORE})]}),m&&k.jsx(dt,{color:"blue",title:S.RECOGNIZED_NUMBERS,radius:"md",children:k.jsxs(Yt,{gap:"xs",children:[k.jsxs(Xt,{children:[k.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr min-content",gap:"0.2em",flex:"1 1 60%"},children:[k.jsx(ue,{size:"sm",c:"cyan",children:"Perfect:"}),k.jsx(ue,{size:"sm",c:"cyan",ta:"right",children:m[0]>=0?m[0]:"?"}),k.jsx(ue,{size:"sm",c:"green",children:"Great:"}),k.jsx(ue,{size:"sm",c:"green",ta:"right",children:m[1]>=0?m[1]:"?"}),k.jsx(ue,{size:"sm",c:"yellow",children:"Good:"}),k.jsx(ue,{size:"sm",c:"yellow",ta:"right",children:m[2]>=0?m[2]:"?"}),k.jsx(ue,{size:"sm",c:"pink",children:"Bad:"}),k.jsx(ue,{size:"sm",c:"pink",ta:"right",children:m[3]>=0?m[3]:"?"}),k.jsx(ue,{size:"sm",c:"red",children:"Miss:"}),k.jsx(ue,{size:"sm",c:"red",ta:"right",children:m[4]>=0?m[4]:"?"}),k.jsx(ue,{size:"sm",children:"Combo:"}),k.jsx(ue,{size:"sm",ta:"right",children:m[5]>=0?m[5]:"?"}),k.jsx(ue,{size:"sm",fw:"bold",children:"Score:"}),k.jsx(ue,{size:"sm",fw:"bold",ta:"right",children:m[6]>=0?m[6]:"?"})]}),N&&k.jsx("img",{src:N,style:{maxHeight:"12em",objectFit:"contain",flex:"1 1 30%"}})]}),k.jsxs(Xt,{gap:"xs",children:[k.jsx(Ye,{size:"xs",color:"blue",onClick:F,children:S.FILL_FORM}),k.jsx(Ye,{size:"xs",variant:"light",color:"gray",onClick:P,children:S.CANCEL})]})]})}),c&&k.jsxs(ue,{size:"xs",c:"red",children:[S.ERROR,": ",c]})]})},xl=async e=>{const t=await createImageBitmap(e),r=Math.min(t.width,t.height),o=(t.width-r)/2,n=(t.height-r)/2,i=document.createElement("canvas");i.width=r,i.height=r;const s=i.getContext("2d");if(!s)throw t.close(),new Error("Could not get canvas context");return s.drawImage(t,o,n,r,r,0,0,r,r),t.close(),{imageData:s.getImageData(0,0,r,r),naturalSize:r}},Sl=e=>{const[t,r]=X.useState(null),[o,n]=X.useState(!1),[i,s]=X.useState(null);return X.useEffect(()=>{if(!e){r(null),s(null);return}(async()=>{n(!0),s(null);try{const[h,S]=await Promise.all([xl(e),dl(e)]);r({imageData:h.imageData,naturalSize:h.naturalSize,date:S})}catch(h){s(h instanceof Error?h.message:"Failed to process image"),r(null)}finally{n(!1)}})()},[e]),{processedImage:t,isProcessing:o,error:i}},El=[{value:"SSS",label:"SSS"},{value:"SS",label:"SS"},{value:"S",label:"S"},{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"F",label:"F"}],bl=[{value:"SSS+",label:"SSS+"},{value:"SSS",label:"SSS"},{value:"SS+",label:"SS+"},{value:"SS",label:"SS"},{value:"S+",label:"S+"},{value:"S",label:"S"},{value:"AAA+",label:"AAA+"},{value:"AAA",label:"AAA"},{value:"AA+",label:"AA+"},{value:"AA",label:"AA"},{value:"A+",label:"A+"},{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"F",label:"F"}],Il=[{value:"Phoenix",label:"Phoenix"},{value:"XX",label:"XX"},{value:"Prime2",label:"Prime 2"},{value:"Prime",label:"Prime"}],Tl=[{value:"",label:"No mods"},{value:"VJ",label:"Rank (VJ)"},{value:"HJ",label:"HJ"}],vl=()=>{const e=fn(),t=ki(),{sharedChartId:r}=Gi(),o=Bi(),n=ji(),[i,s]=Vi({key:"addResult_lastMix"}),a=br(St.results.addResultMutation.mutationOptions({onSuccess:()=>{n.invalidateQueries(St.charts.chart.queryFilter()),n.invalidateQueries(St.charts.search.infiniteQueryFilter())}})),h=Wi({sharedChartId:r?Number(r):0}),S=o.data?.id,c=!!o.data?.can_add_results_manually,l=h.data?.items[0],u=l&&`${l.songName} ${l.label}`,[f,m]=X.useState(null),[y,T]=X.useState(!1),{renderPopup:I,confirm:v}=_o({okText:e.SUBMIT}),N=Hi({initialValues:{screenshot:null,grade:null,perfect:"",great:"",good:"",bad:"",miss:"",combo:"",score:"",mix:null,mod:"",pass:!1},validate:{screenshot:E=>E?null:e.SCREENSHOT_REQUIRED,grade:E=>E?null:e.GRADE_REQUIRED,perfect:E=>E?null:e.PERFECT_REQUIRED,great:E=>E?null:e.GREAT_REQUIRED,good:E=>E?null:e.GOOD_REQUIRED,bad:E=>E?null:e.BAD_REQUIRED,miss:E=>E?null:e.MISS_REQUIRED,combo:E=>E?null:e.COMBO_REQUIRED,score:E=>!E||E.length<4?e.SCORE_REQUIRED_MIN_DIGITS:null},onValuesChange:(E,F)=>{E.mix&&E.mix!==F.mix&&(s(E.mix),N.setFieldValue("grade",null))}});X.useEffect(()=>{!N.values.mix&&i&&N.setFieldValue("mix",i)},[N.values.mix,i,s,N]);const O=N.values.screenshot,{processedImage:M,isProcessing:A,error:w}=Sl(O),p=N.values,x=async({screenshot:E,...F})=>{if(!(!S||!r||!E||!M||!F.mix||!F.grade)){try{await v()}catch{return}T(!0),m(null);try{const P=await hl(M.imageData),C={pass:F.pass,grade:F.grade,perfect:Number(F.perfect),great:Number(F.great),good:Number(F.good),bad:Number(F.bad),miss:Number(F.miss),combo:Number(F.combo),score:Number(F.score),mix:F.mix,mod:F.mod,screenshot:P,fileName:E.name,date:M.date||new Date,isExactDate:!!M.date,sharedChartId:Number(r),playerId:S};await a.mutateAsync(C),N.reset(),t($i.leaderboard.sharedChart.getPath({sharedChartId:r}))}catch(P){console.error(P),m(P)}T(!1)}};return S?c?k.jsxs("div",{className:Xe.addResultPage,children:[I({content:k.jsxs("div",{className:Xe.confirmation,children:[k.jsxs("div",{className:Xe.splitPanels,children:[k.jsx("div",{className:Xe.screenshotPanel,children:M&&k.jsx(Po,{imageData:M.imageData,style:{maxWidth:"100%",maxHeight:270}})}),k.jsxs("div",{className:Xe.formPanel,children:[k.jsx("div",{className:Xe.chartName,children:u}),k.jsxs("div",{className:Xe.grid,children:[k.jsx("div",{children:e.GRADE}),k.jsx("div",{children:p.grade}),k.jsx("div",{style:{color:"#29D7FF"},children:"Perfect"}),k.jsx("div",{style:{color:"#29D7FF"},children:p.perfect}),k.jsx("div",{style:{color:"#21d021"},children:"Great"}),k.jsx("div",{style:{color:"#21d021"},children:p.great}),k.jsx("div",{style:{color:"#dede3a"},children:"Good"}),k.jsx("div",{style:{color:"#dede3a"},children:p.good}),k.jsx("div",{style:{color:"#f278fc"},children:"Bad"}),k.jsx("div",{style:{color:"#f278fc"},children:p.bad}),k.jsx("div",{style:{color:"#f48181"},children:"Miss"}),k.jsx("div",{style:{color:"#f48181"},children:p.miss}),k.jsx("div",{children:"Combo"}),k.jsx("div",{children:p.combo}),k.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:"Score"}),k.jsx("div",{style:{fontWeight:"bold",fontSize:"110%"},children:p.score}),k.jsx("div",{children:e.MODS}),k.jsx("div",{children:p.mod||e.NONE_NORMAL_MODE})]})]})]}),k.jsx(dt,{radius:"md",variant:"light",color:"yellow",icon:k.jsx(Eo,{}),children:e.FALSE_RESULTS_WARNING})]})}),k.jsx(mn,{order:2,mb:"xs",children:e.SUBMIT_RESULT}),k.jsxs(ue,{mb:"md",children:[e.CHART,": ",u]}),k.jsx("form",{onSubmit:N.onSubmit(x),children:k.jsxs(Yt,{gap:"sm",children:[k.jsx(kt,{clearable:!1,label:e.MIX,data:Il,withAsterisk:!0,...N.getInputProps("mix")}),k.jsx(ho,{label:e.SCREENSHOT,placeholder:e.SELECT_SCREENSHOT,accept:"image/*",withAsterisk:!0,...N.getInputProps("screenshot")}),O?.name.toLowerCase().endsWith(".heic")&&k.jsx(ue,{c:"red",size:"sm",children:e.HEIC_NOT_SUPPORTED}),A&&k.jsx(zi,{}),w&&k.jsxs(ue,{c:"red",size:"sm",children:[e.ERROR,": ",w]}),M&&N.values.mix?k.jsxs(k.Fragment,{children:[k.jsx(ml,{showDate:!0,imageData:M.imageData,naturalSize:M.naturalSize,date:M.date,mix:N.values.mix,onScoreRecognized:E=>{E.perfect>=0&&N.setFieldValue("perfect",String(E.perfect)),E.great>=0&&N.setFieldValue("great",String(E.great)),E.good>=0&&N.setFieldValue("good",String(E.good)),E.bad>=0&&N.setFieldValue("bad",String(E.bad)),E.miss>=0&&N.setFieldValue("miss",String(E.miss)),E.combo>=0&&N.setFieldValue("combo",String(E.combo)),E.score>=0&&N.setFieldValue("score",String(E.score))}}),k.jsx(kt,{clearable:!1,label:e.GRADE,placeholder:e.SELECT_GRADE,data:N.values.mix==="Phoenix"?bl:El,withAsterisk:!0,...N.getInputProps("grade")}),k.jsx(it,{label:"Pass",checked:N.values.pass,...N.getInputProps("pass")}),["perfect","great","good","bad","miss","combo"].map(E=>k.jsx(Cn,{label:E[0].toUpperCase()+E.slice(1),placeholder:"000",inputMode:"numeric",withAsterisk:!0,...N.getInputProps(E)},E)),k.jsx(Cn,{label:"Score",placeholder:"000000",inputMode:"numeric",withAsterisk:!0,...N.getInputProps("score")}),k.jsx(kt,{clearable:!1,label:e.JUDGE_RANK,data:Tl,withAsterisk:!0,...N.getInputProps("mod")}),k.jsx(Ye,{type:"submit",loading:y,disabled:!N.isValid(),children:e.SUBMIT})]}):null,f instanceof Error&&k.jsx(dt,{color:"red",variant:"light",children:f.message})]})})]}):k.jsx(dt,{radius:"md",variant:"light",color:"red",title:e.ERROR,icon:k.jsx(Yi,{}),children:e.NO_ACCESS_TO_PAGE}):null};export{vl as default};
//# sourceMappingURL=AddResult-CF_ZAGa9.js.map
