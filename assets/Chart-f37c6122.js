var Xr=Object.defineProperty;var Zr=(e,t,r)=>t in e?Xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Xe=(e,t,r)=>(Zr(e,typeof t!="symbol"?t+"":t,r),r);import{r as E,i as j,p as it,w as Kr,n as Jr,j as p,x as Qr,N as en,y as tn,z as rn,A as nn,B as an,l as pr,C as Ze,q as on,u as dr,D as sn,e as ln,E as Rt,H as cn,I as Dt,J as pn,K as dn,G as fn,_ as It}from"./index-78852ccb.js";import{B as F,g as lt,f as fr,c as se,d as be,e as Oe,n as oe,p as ct,l as tt,x as un,i as ur,U as vn,y as pt,v as dt,u as mn}from"./useFilter-ca7a68fd.js";import{u as vr}from"./useUser-9188f826.js";import{c as k}from"./index-ebd44e4c.js";import{n as Bt}from"./numeral-da56aa35.js";import{_ as hn}from"./Tooltip-fdb77cd5.js";import{F as gn}from"./index-c8eebe5a.js";var yn={root:"m-5ae2e3c",barsLoader:"m-7a2bd4cd",bar:"m-870bb79","bars-loader-animation":"m-5d2b3b9d",dotsLoader:"m-4e3f22d7",dot:"m-870c4af","loader-dots-animation":"m-aac34a1",ovalLoader:"m-b34414df","oval-loader-animation":"m-f8e89c4b"};const U=yn;var bn=Object.defineProperty,On=Object.defineProperties,xn=Object.getOwnPropertyDescriptors,De=Object.getOwnPropertySymbols,mr=Object.prototype.hasOwnProperty,hr=Object.prototype.propertyIsEnumerable,kt=(e,t,r)=>t in e?bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wn=(e,t)=>{for(var r in t||(t={}))mr.call(t,r)&&kt(e,r,t[r]);if(De)for(var r of De(t))hr.call(t,r)&&kt(e,r,t[r]);return e},Pn=(e,t)=>On(e,xn(t)),_n=(e,t)=>{var r={};for(var n in e)mr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&De)for(var n of De(e))t.indexOf(n)<0&&hr.call(e,n)&&(r[n]=e[n]);return r};const jn=E.forwardRef((e,t)=>{var r=e,{className:n}=r,a=_n(r,["className"]);return j.createElement(F,Pn(wn({component:"span",className:lt(U.barsLoader,n)},a),{ref:t}),j.createElement("span",{className:U.bar}),j.createElement("span",{className:U.bar}),j.createElement("span",{className:U.bar}))});var En=Object.defineProperty,Sn=Object.defineProperties,$n=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,gr=Object.prototype.hasOwnProperty,yr=Object.prototype.propertyIsEnumerable,Lt=(e,t,r)=>t in e?En(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Nn=(e,t)=>{for(var r in t||(t={}))gr.call(t,r)&&Lt(e,r,t[r]);if(Ie)for(var r of Ie(t))yr.call(t,r)&&Lt(e,r,t[r]);return e},An=(e,t)=>Sn(e,$n(t)),Cn=(e,t)=>{var r={};for(var n in e)gr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Ie)for(var n of Ie(e))t.indexOf(n)<0&&yr.call(e,n)&&(r[n]=e[n]);return r};const Rn=E.forwardRef((e,t)=>{var r=e,{className:n}=r,a=Cn(r,["className"]);return j.createElement(F,An(Nn({component:"span",className:lt(U.ovalLoader,n)},a),{ref:t}))});var Dn=Object.defineProperty,In=Object.defineProperties,Bn=Object.getOwnPropertyDescriptors,Be=Object.getOwnPropertySymbols,br=Object.prototype.hasOwnProperty,Or=Object.prototype.propertyIsEnumerable,Ft=(e,t,r)=>t in e?Dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,kn=(e,t)=>{for(var r in t||(t={}))br.call(t,r)&&Ft(e,r,t[r]);if(Be)for(var r of Be(t))Or.call(t,r)&&Ft(e,r,t[r]);return e},Ln=(e,t)=>In(e,Bn(t)),Fn=(e,t)=>{var r={};for(var n in e)br.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Be)for(var n of Be(e))t.indexOf(n)<0&&Or.call(e,n)&&(r[n]=e[n]);return r};const Mn=E.forwardRef((e,t)=>{var r=e,{className:n}=r,a=Fn(r,["className"]);return j.createElement(F,Ln(kn({component:"span",className:lt(U.dotsLoader,n)},a),{ref:t}),j.createElement("span",{className:U.dot}),j.createElement("span",{className:U.dot}),j.createElement("span",{className:U.dot}))});var Tn=Object.defineProperty,Hn=Object.defineProperties,Vn=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,xr=Object.prototype.hasOwnProperty,wr=Object.prototype.propertyIsEnumerable,Mt=(e,t,r)=>t in e?Tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$e=(e,t)=>{for(var r in t||(t={}))xr.call(t,r)&&Mt(e,r,t[r]);if(ke)for(var r of ke(t))wr.call(t,r)&&Mt(e,r,t[r]);return e},Tt=(e,t)=>Hn(e,Vn(t)),Wn=(e,t)=>{var r={};for(var n in e)xr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&ke)for(var n of ke(e))t.indexOf(n)<0&&wr.call(e,n)&&(r[n]=e[n]);return r};const Un={bars:jn,oval:Rn,dots:Mn},Gn={loaders:Un,type:"oval"},zn=Oe((e,{size:t,color:r})=>({root:{"--loader-size":oe(t,"loader-size"),"--loader-color":r?it(r,e):void 0}})),Ve=fr((e,t)=>{const r=se("Loader",Gn,e),n=r,{size:a,color:o,type:d,vars:s,className:i,style:l,classNames:c,styles:f,unstyled:v,loaders:u,variant:y,children:h}=n,m=Wn(n,["size","color","type","vars","className","style","classNames","styles","unstyled","loaders","variant","children"]),b=be({name:"Loader",props:r,classes:U,className:i,style:l,classNames:c,styles:f,unstyled:v,vars:s,varsResolver:zn});return h?j.createElement(F,$e(Tt($e({},b("root")),{ref:t}),m),h):j.createElement(F,$e(Tt($e({},b("root")),{ref:t,component:u[d],variant:y,size:a}),m))});Ve.classes=U;Ve.displayName="@mantine/core/Loader";var qn={root:"m-b6d8b162"};const Pr=qn;var Yn=Object.defineProperty,Xn=Object.defineProperties,Zn=Object.getOwnPropertyDescriptors,Le=Object.getOwnPropertySymbols,_r=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Ht=(e,t,r)=>t in e?Yn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Vt=(e,t)=>{for(var r in t||(t={}))_r.call(t,r)&&Ht(e,r,t[r]);if(Le)for(var r of Le(t))jr.call(t,r)&&Ht(e,r,t[r]);return e},Kn=(e,t)=>Xn(e,Zn(t)),Jn=(e,t)=>{var r={};for(var n in e)_r.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Le)for(var n of Le(e))t.indexOf(n)<0&&jr.call(e,n)&&(r[n]=e[n]);return r};function Qn(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const ea={inherit:!1},ta=Oe((e,{variant:t,lineClamp:r,gradient:n,size:a,color:o})=>({root:{"--text-fz":tt(a),"--text-lh":un(a),"--text-gradient":t==="gradient"?Kr(n,e):void 0,"--text-line-clamp":typeof r=="number"?r.toString():void 0,"--text-color":o?it(o,e):void 0}})),ft=ct((e,t)=>{const r=se("Text",ea,e),n=r,{lineClamp:a,truncate:o,inline:d,inherit:s,gradient:i,span:l,__staticSelector:c,vars:f,className:v,style:u,classNames:y,styles:h,unstyled:m,variant:b,mod:_,size:x}=n,g=Jn(n,["lineClamp","truncate","inline","inherit","gradient","span","__staticSelector","vars","className","style","classNames","styles","unstyled","variant","mod","size"]),O=be({name:["Text",c],props:r,classes:Pr,className:v,style:u,classNames:y,styles:h,unstyled:m,vars:f,varsResolver:ta});return j.createElement(F,Vt(Kn(Vt({},O("root",{focusable:!0})),{ref:t,component:l?"span":"p",variant:b,mod:[{"data-truncate":Qn(o),"data-line-clamp":typeof a=="number","data-inline":d,"data-inherit":s},_],size:x}),g))});ft.classes=Pr;ft.displayName="@mantine/core/Text";var ra={root:"m-347db0ec","root--dot":"m-fbd81e3d",label:"m-5add502a",section:"m-91fdda9b"};const Er=ra;var na=Object.defineProperty,aa=Object.defineProperties,oa=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,Sr=Object.prototype.hasOwnProperty,$r=Object.prototype.propertyIsEnumerable,Wt=(e,t,r)=>t in e?na(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ue=(e,t)=>{for(var r in t||(t={}))Sr.call(t,r)&&Wt(e,r,t[r]);if(Fe)for(var r of Fe(t))$r.call(t,r)&&Wt(e,r,t[r]);return e},Ke=(e,t)=>aa(e,oa(t)),sa=(e,t)=>{var r={};for(var n in e)Sr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Fe)for(var n of Fe(e))t.indexOf(n)<0&&$r.call(e,n)&&(r[n]=e[n]);return r};const ia={},la=Oe((e,{radius:t,color:r,gradient:n,variant:a,size:o})=>{const d=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:n,variant:a||"filled"});return{root:{"--badge-height":oe(o,"badge-height"),"--badge-padding-x":oe(o,"badge-padding-x"),"--badge-fz":oe(o,"badge-fz"),"--badge-radius":t===void 0?void 0:ur(t),"--badge-bg":r||a?d.background:void 0,"--badge-color":r||a?d.color:void 0,"--badge-bd":r||a?d.border:void 0,"--badge-dot-color":a==="dot"?it(r,e):void 0}}}),ut=ct((e,t)=>{const r=se("Badge",ia,e),n=r,{classNames:a,className:o,style:d,styles:s,unstyled:i,vars:l,radius:c,color:f,gradient:v,leftSection:u,rightSection:y,children:h,variant:m,fullWidth:b}=n,_=sa(n,["classNames","className","style","styles","unstyled","vars","radius","color","gradient","leftSection","rightSection","children","variant","fullWidth"]),x=be({name:"Badge",props:r,classes:Er,className:o,style:d,classNames:a,styles:s,unstyled:i,vars:l,varsResolver:la});return j.createElement(F,ue(Ke(ue({variant:m,mod:{block:b}},x("root",{variant:m})),{ref:t}),_),u&&j.createElement("span",Ke(ue({},x("section")),{"data-position":"left"}),u),j.createElement("span",ue({},x("label")),h),y&&j.createElement("span",Ke(ue({},x("section")),{"data-position":"right"}),y))});ut.classes=Er;ut.displayName="@mantine/core/Badge";var ca={root:"m-77c9d27d",inner:"m-80f1301b",label:"m-811560b9",section:"m-a74036a",loader:"m-a25b86ee",group:"m-80d6d844"};const We=ca;var pa=Object.defineProperty,da=Object.defineProperties,fa=Object.getOwnPropertyDescriptors,Me=Object.getOwnPropertySymbols,Nr=Object.prototype.hasOwnProperty,Ar=Object.prototype.propertyIsEnumerable,Ut=(e,t,r)=>t in e?pa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Gt=(e,t)=>{for(var r in t||(t={}))Nr.call(t,r)&&Ut(e,r,t[r]);if(Me)for(var r of Me(t))Ar.call(t,r)&&Ut(e,r,t[r]);return e},ua=(e,t)=>da(e,fa(t)),va=(e,t)=>{var r={};for(var n in e)Nr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Me)for(var n of Me(e))t.indexOf(n)<0&&Ar.call(e,n)&&(r[n]=e[n]);return r};const zt={orientation:"horizontal"},ma=Oe((e,{borderWidth:t})=>({group:{"--button-border-width":Jr(t)}})),vt=fr((e,t)=>{const r=se("ButtonGroup",zt,e),n=se("ButtonGroup",zt,e),{className:a,style:o,classNames:d,styles:s,unstyled:i,orientation:l,vars:c,borderWidth:f,variant:v}=n,u=va(n,["className","style","classNames","styles","unstyled","orientation","vars","borderWidth","variant"]),y=be({name:"ButtonGroup",props:r,classes:We,className:a,style:o,classNames:d,styles:s,unstyled:i,vars:c,varsResolver:ma,rootSelector:"group"});return j.createElement(F,Gt(ua(Gt({},y("group")),{ref:t,variant:v,mod:{"data-orientation":l},role:"group"}),u))});vt.classes=We;vt.displayName="@mantine/core/ButtonGroup";var ha=Object.defineProperty,ga=Object.defineProperties,ya=Object.getOwnPropertyDescriptors,Te=Object.getOwnPropertySymbols,Cr=Object.prototype.hasOwnProperty,Rr=Object.prototype.propertyIsEnumerable,qt=(e,t,r)=>t in e?ha(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t)=>{for(var r in t||(t={}))Cr.call(t,r)&&qt(e,r,t[r]);if(Te)for(var r of Te(t))Rr.call(t,r)&&qt(e,r,t[r]);return e},Je=(e,t)=>ga(e,ya(t)),ba=(e,t)=>{var r={};for(var n in e)Cr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Te)for(var n of Te(e))t.indexOf(n)<0&&Rr.call(e,n)&&(r[n]=e[n]);return r};const Oa={},xa=Oe((e,{radius:t,color:r,gradient:n,variant:a,size:o,justify:d})=>{const s=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:n,variant:a||"filled"});return{root:{"--button-justify":d,"--button-height":oe(o,"button-height"),"--button-padding-x":oe(o,"button-padding-x"),"--button-fz":o!=null&&o.includes("compact")?tt(o.replace("compact-","")):tt(o),"--button-radius":t===void 0?void 0:ur(t),"--button-bg":r||a?s.background:void 0,"--button-hover":r||a?s.hover:void 0,"--button-color":r||a?s.color:void 0,"--button-bd":r||a?s.border:void 0,"--button-hover-color":r||a?s.hoverColor:void 0}}}),mt=ct((e,t)=>{const r=se("Button",Oa,e),n=r,{style:a,vars:o,className:d,color:s,disabled:i,children:l,leftSection:c,rightSection:f,fullWidth:v,variant:u,radius:y,loading:h,loaderProps:m,gradient:b,classNames:_,styles:x,unstyled:g,"data-disabled":O}=n,w=ba(n,["style","vars","className","color","disabled","children","leftSection","rightSection","fullWidth","variant","radius","loading","loaderProps","gradient","classNames","styles","unstyled","data-disabled"]),P=be({name:"Button",props:r,classes:We,className:d,style:a,classNames:_,styles:x,unstyled:g,vars:o,varsResolver:xa}),S=!!c,$=!!f;return j.createElement(vn,X(Je(X({ref:t},P("root",{active:!i&&!h&&!O})),{unstyled:g,variant:u,disabled:i||h,mod:{disabled:i||O,loading:h,block:v,"with-left-section":S,"with-right-section":$}}),w),j.createElement("span",X({},P("inner")),c&&j.createElement(F,Je(X({component:"span"},P("section")),{mod:{position:"left"}}),c),h&&j.createElement(F,X({component:"span"},P("loader")),j.createElement(Ve,X({color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)"},m))),j.createElement(F,X({component:"span",mod:{loading:h}},P("label")),l),f&&j.createElement(F,Je(X({component:"span"},P("section")),{mod:{position:"right"}}),f)))});mt.classes=We;mt.displayName="@mantine/core/Button";mt.Group=vt;const wa="_loader_5ihl6_1",Pa={loader:wa};function Rs(){return p.jsx("div",{className:Pa.loader,children:p.jsx(Ve,{color:"white",type:"dots"})})}const _a={leaderboard:{path:"/leaderboard",sharedChart:{path:"/leaderboard/chart/:sharedChartId",getPath:e=>`/leaderboard/chart/${e.sharedChartId}`,addResult:{path:"/leaderboard/chart/:sharedChartId/add-result",getPath:e=>`/leaderboard/chart/${e.sharedChartId}/add-result`}}},leaderboardOld:{path:"/leaderboard-old"},songs:{path:"/songs"},ranking:{path:"/ranking",faq:{path:"/ranking/faq"}},tournaments:{path:"/tournaments"},profile:{path:"/profiles/:id",getPath:e=>`/profiles/${e.id}`,resultsByLevel:{path:"/profiles/:id/levels",getPath:e=>`/profiles/${e.id}/levels`,level:{path:"/profiles/:id/levels/:level",getPath:e=>`/profiles/${e.id}/levels/${e.level}`}},compare:{path:"/profiles/:id/vs/:compareToId",getPath:e=>`/profiles/${e.id}/vs/${e.compareToId}`}}},ja=()=>{const e=pt(dt);return[...e.playersAll??[],...e.playersNone??[],...e.playersSome??[],...e.sortChartsByPlayers??[]]},Ea="_songHeader_y80dr_1",Sa="_youtubeLink_y80dr_14",$a="_songName_y80dr_32",Qe={songHeader:Ea,youtubeLink:Sa,songName:$a},Na=({type:e,level:t})=>p.jsxs("div",{className:k("chart-name",{single:e==="S",singlep:e==="SP",doublep:e==="DP",double:e==="D",coop:e==="COOP"}),children:[p.jsx("span",{className:"chart-letter",children:e}),p.jsx("span",{className:"chart-number",children:t})]}),Aa=({chart:e})=>{const[t]=Qr(e.label);return p.jsxs("div",{className:Qe.songHeader,children:[p.jsx(Na,{type:t,level:e.level??"?"}),p.jsxs("div",{className:Qe.songName,children:[p.jsx(en,{to:_a.leaderboard.sharedChart.getPath({sharedChartId:e.id}),children:e.songName})," ",p.jsx(ft,{component:"span",c:"dimmed",children:e.difficulty?`(${e.difficulty.toFixed(1)}) `:""})]}),p.jsx("div",{className:Qe.youtubeLink,children:p.jsx("a",{href:`https://youtube.com/results?${tn.stringify({search_query:`${e.songName} ${e.label}`.replace(/( -)|(- )/g," ")})}`,target:"_blank",rel:"noopener noreferrer",children:p.jsx(rn,{})})})]})},Ca=({resultId:e})=>p.jsxs("a",{href:`https://api.pumpking.top:3001/results/${e}/screenshot`,target:"_blank",rel:"noopener noreferrer",children:["screenshot ",p.jsx(nn,{style:{fontSize:"80%"}})]});var Ra=E.createContext();E.createContext();var Da=function(t){return Array.isArray(t)?t[0]:t},Ia=function(t){if(typeof t=="function"){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return t.apply(void 0,n)}},Ba=function(t,r){if(typeof t=="function")return Ia(t,r);t!=null&&(t.current=r)},Yt=function(t){return t.reduce(function(r,n){var a=n[0],o=n[1];return r[a]=o,r},{})},Xt=typeof window<"u"&&window.document&&window.document.createElement?E.useLayoutEffect:E.useEffect,D="top",T="bottom",H="right",I="left",ht="auto",xe=[D,T,H,I],ie="start",ge="end",ka="clippingParents",Dr="viewport",ve="popper",La="reference",Zt=xe.reduce(function(e,t){return e.concat([t+"-"+ie,t+"-"+ge])},[]),Ir=[].concat(xe,[ht]).reduce(function(e,t){return e.concat([t,t+"-"+ie,t+"-"+ge])},[]),Fa="beforeRead",Ma="read",Ta="afterRead",Ha="beforeMain",Va="main",Wa="afterMain",Ua="beforeWrite",Ga="write",za="afterWrite",qa=[Fa,Ma,Ta,Ha,Va,Wa,Ua,Ga,za];function z(e){return e?(e.nodeName||"").toLowerCase():null}function L(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ne(e){var t=L(e).Element;return e instanceof t||e instanceof Element}function M(e){var t=L(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function gt(e){if(typeof ShadowRoot>"u")return!1;var t=L(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Ya(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},a=t.attributes[r]||{},o=t.elements[r];!M(o)||!z(o)||(Object.assign(o.style,n),Object.keys(a).forEach(function(d){var s=a[d];s===!1?o.removeAttribute(d):o.setAttribute(d,s===!0?"":s)}))})}function Xa(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var a=t.elements[n],o=t.attributes[n]||{},d=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),s=d.reduce(function(i,l){return i[l]="",i},{});!M(a)||!z(a)||(Object.assign(a.style,s),Object.keys(o).forEach(function(i){a.removeAttribute(i)}))})}}const Za={name:"applyStyles",enabled:!0,phase:"write",fn:Ya,effect:Xa,requires:["computeStyles"]};function G(e){return e.split("-")[0]}var re=Math.max,He=Math.min,le=Math.round;function rt(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Br(){return!/^((?!chrome|android).)*safari/i.test(rt())}function ce(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),a=1,o=1;t&&M(e)&&(a=e.offsetWidth>0&&le(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&le(n.height)/e.offsetHeight||1);var d=ne(e)?L(e):window,s=d.visualViewport,i=!Br()&&r,l=(n.left+(i&&s?s.offsetLeft:0))/a,c=(n.top+(i&&s?s.offsetTop:0))/o,f=n.width/a,v=n.height/o;return{width:f,height:v,top:c,right:l+f,bottom:c+v,left:l,x:l,y:c}}function yt(e){var t=ce(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function kr(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&gt(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function q(e){return L(e).getComputedStyle(e)}function Ka(e){return["table","td","th"].indexOf(z(e))>=0}function Z(e){return((ne(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ue(e){return z(e)==="html"?e:e.assignedSlot||e.parentNode||(gt(e)?e.host:null)||Z(e)}function Kt(e){return!M(e)||q(e).position==="fixed"?null:e.offsetParent}function Ja(e){var t=/firefox/i.test(rt()),r=/Trident/i.test(rt());if(r&&M(e)){var n=q(e);if(n.position==="fixed")return null}var a=Ue(e);for(gt(a)&&(a=a.host);M(a)&&["html","body"].indexOf(z(a))<0;){var o=q(a);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return a;a=a.parentNode}return null}function we(e){for(var t=L(e),r=Kt(e);r&&Ka(r)&&q(r).position==="static";)r=Kt(r);return r&&(z(r)==="html"||z(r)==="body"&&q(r).position==="static")?t:r||Ja(e)||t}function bt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function me(e,t,r){return re(e,He(t,r))}function Qa(e,t,r){var n=me(e,t,r);return n>r?r:n}function Lr(){return{top:0,right:0,bottom:0,left:0}}function Fr(e){return Object.assign({},Lr(),e)}function Mr(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var eo=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Fr(typeof t!="number"?t:Mr(t,xe))};function to(e){var t,r=e.state,n=e.name,a=e.options,o=r.elements.arrow,d=r.modifiersData.popperOffsets,s=G(r.placement),i=bt(s),l=[I,H].indexOf(s)>=0,c=l?"height":"width";if(!(!o||!d)){var f=eo(a.padding,r),v=yt(o),u=i==="y"?D:I,y=i==="y"?T:H,h=r.rects.reference[c]+r.rects.reference[i]-d[i]-r.rects.popper[c],m=d[i]-r.rects.reference[i],b=we(o),_=b?i==="y"?b.clientHeight||0:b.clientWidth||0:0,x=h/2-m/2,g=f[u],O=_-v[c]-f[y],w=_/2-v[c]/2+x,P=me(g,w,O),S=i;r.modifiersData[n]=(t={},t[S]=P,t.centerOffset=P-w,t)}}function ro(e){var t=e.state,r=e.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||kr(t.elements.popper,a)&&(t.elements.arrow=a))}const no={name:"arrow",enabled:!0,phase:"main",fn:to,effect:ro,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function pe(e){return e.split("-")[1]}var ao={top:"auto",right:"auto",bottom:"auto",left:"auto"};function oo(e,t){var r=e.x,n=e.y,a=t.devicePixelRatio||1;return{x:le(r*a)/a||0,y:le(n*a)/a||0}}function Jt(e){var t,r=e.popper,n=e.popperRect,a=e.placement,o=e.variation,d=e.offsets,s=e.position,i=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,f=e.isFixed,v=d.x,u=v===void 0?0:v,y=d.y,h=y===void 0?0:y,m=typeof c=="function"?c({x:u,y:h}):{x:u,y:h};u=m.x,h=m.y;var b=d.hasOwnProperty("x"),_=d.hasOwnProperty("y"),x=I,g=D,O=window;if(l){var w=we(r),P="clientHeight",S="clientWidth";if(w===L(r)&&(w=Z(r),q(w).position!=="static"&&s==="absolute"&&(P="scrollHeight",S="scrollWidth")),w=w,a===D||(a===I||a===H)&&o===ge){g=T;var $=f&&w===O&&O.visualViewport?O.visualViewport.height:w[P];h-=$-n.height,h*=i?1:-1}if(a===I||(a===D||a===T)&&o===ge){x=H;var N=f&&w===O&&O.visualViewport?O.visualViewport.width:w[S];u-=N-n.width,u*=i?1:-1}}var A=Object.assign({position:s},l&&ao),V=c===!0?oo({x:u,y:h},L(r)):{x:u,y:h};if(u=V.x,h=V.y,i){var R;return Object.assign({},A,(R={},R[g]=_?"0":"",R[x]=b?"0":"",R.transform=(O.devicePixelRatio||1)<=1?"translate("+u+"px, "+h+"px)":"translate3d("+u+"px, "+h+"px, 0)",R))}return Object.assign({},A,(t={},t[g]=_?h+"px":"",t[x]=b?u+"px":"",t.transform="",t))}function so(e){var t=e.state,r=e.options,n=r.gpuAcceleration,a=n===void 0?!0:n,o=r.adaptive,d=o===void 0?!0:o,s=r.roundOffsets,i=s===void 0?!0:s,l={placement:G(t.placement),variation:pe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Jt(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:d,roundOffsets:i})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Jt(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:i})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const io={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:so,data:{}};var Ne={passive:!0};function lo(e){var t=e.state,r=e.instance,n=e.options,a=n.scroll,o=a===void 0?!0:a,d=n.resize,s=d===void 0?!0:d,i=L(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&l.forEach(function(c){c.addEventListener("scroll",r.update,Ne)}),s&&i.addEventListener("resize",r.update,Ne),function(){o&&l.forEach(function(c){c.removeEventListener("scroll",r.update,Ne)}),s&&i.removeEventListener("resize",r.update,Ne)}}const co={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:lo,data:{}};var po={left:"right",right:"left",bottom:"top",top:"bottom"};function Ce(e){return e.replace(/left|right|bottom|top/g,function(t){return po[t]})}var fo={start:"end",end:"start"};function Qt(e){return e.replace(/start|end/g,function(t){return fo[t]})}function Ot(e){var t=L(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function xt(e){return ce(Z(e)).left+Ot(e).scrollLeft}function uo(e,t){var r=L(e),n=Z(e),a=r.visualViewport,o=n.clientWidth,d=n.clientHeight,s=0,i=0;if(a){o=a.width,d=a.height;var l=Br();(l||!l&&t==="fixed")&&(s=a.offsetLeft,i=a.offsetTop)}return{width:o,height:d,x:s+xt(e),y:i}}function vo(e){var t,r=Z(e),n=Ot(e),a=(t=e.ownerDocument)==null?void 0:t.body,o=re(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),d=re(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-n.scrollLeft+xt(e),i=-n.scrollTop;return q(a||r).direction==="rtl"&&(s+=re(r.clientWidth,a?a.clientWidth:0)-o),{width:o,height:d,x:s,y:i}}function wt(e){var t=q(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function Tr(e){return["html","body","#document"].indexOf(z(e))>=0?e.ownerDocument.body:M(e)&&wt(e)?e:Tr(Ue(e))}function he(e,t){var r;t===void 0&&(t=[]);var n=Tr(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),o=L(n),d=a?[o].concat(o.visualViewport||[],wt(n)?n:[]):n,s=t.concat(d);return a?s:s.concat(he(Ue(d)))}function nt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function mo(e,t){var r=ce(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function er(e,t,r){return t===Dr?nt(uo(e,r)):ne(t)?mo(t,r):nt(vo(Z(e)))}function ho(e){var t=he(Ue(e)),r=["absolute","fixed"].indexOf(q(e).position)>=0,n=r&&M(e)?we(e):e;return ne(n)?t.filter(function(a){return ne(a)&&kr(a,n)&&z(a)!=="body"}):[]}function go(e,t,r,n){var a=t==="clippingParents"?ho(e):[].concat(t),o=[].concat(a,[r]),d=o[0],s=o.reduce(function(i,l){var c=er(e,l,n);return i.top=re(c.top,i.top),i.right=He(c.right,i.right),i.bottom=He(c.bottom,i.bottom),i.left=re(c.left,i.left),i},er(e,d,n));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Hr(e){var t=e.reference,r=e.element,n=e.placement,a=n?G(n):null,o=n?pe(n):null,d=t.x+t.width/2-r.width/2,s=t.y+t.height/2-r.height/2,i;switch(a){case D:i={x:d,y:t.y-r.height};break;case T:i={x:d,y:t.y+t.height};break;case H:i={x:t.x+t.width,y:s};break;case I:i={x:t.x-r.width,y:s};break;default:i={x:t.x,y:t.y}}var l=a?bt(a):null;if(l!=null){var c=l==="y"?"height":"width";switch(o){case ie:i[l]=i[l]-(t[c]/2-r[c]/2);break;case ge:i[l]=i[l]+(t[c]/2-r[c]/2);break}}return i}function ye(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=n===void 0?e.placement:n,o=r.strategy,d=o===void 0?e.strategy:o,s=r.boundary,i=s===void 0?ka:s,l=r.rootBoundary,c=l===void 0?Dr:l,f=r.elementContext,v=f===void 0?ve:f,u=r.altBoundary,y=u===void 0?!1:u,h=r.padding,m=h===void 0?0:h,b=Fr(typeof m!="number"?m:Mr(m,xe)),_=v===ve?La:ve,x=e.rects.popper,g=e.elements[y?_:v],O=go(ne(g)?g:g.contextElement||Z(e.elements.popper),i,c,d),w=ce(e.elements.reference),P=Hr({reference:w,element:x,strategy:"absolute",placement:a}),S=nt(Object.assign({},x,P)),$=v===ve?S:w,N={top:O.top-$.top+b.top,bottom:$.bottom-O.bottom+b.bottom,left:O.left-$.left+b.left,right:$.right-O.right+b.right},A=e.modifiersData.offset;if(v===ve&&A){var V=A[a];Object.keys(N).forEach(function(R){var K=[H,T].indexOf(R)>=0?1:-1,J=[D,T].indexOf(R)>=0?"y":"x";N[R]+=V[J]*K})}return N}function yo(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=r.boundary,o=r.rootBoundary,d=r.padding,s=r.flipVariations,i=r.allowedAutoPlacements,l=i===void 0?Ir:i,c=pe(n),f=c?s?Zt:Zt.filter(function(y){return pe(y)===c}):xe,v=f.filter(function(y){return l.indexOf(y)>=0});v.length===0&&(v=f);var u=v.reduce(function(y,h){return y[h]=ye(e,{placement:h,boundary:a,rootBoundary:o,padding:d})[G(h)],y},{});return Object.keys(u).sort(function(y,h){return u[y]-u[h]})}function bo(e){if(G(e)===ht)return[];var t=Ce(e);return[Qt(e),t,Qt(t)]}function Oo(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var a=r.mainAxis,o=a===void 0?!0:a,d=r.altAxis,s=d===void 0?!0:d,i=r.fallbackPlacements,l=r.padding,c=r.boundary,f=r.rootBoundary,v=r.altBoundary,u=r.flipVariations,y=u===void 0?!0:u,h=r.allowedAutoPlacements,m=t.options.placement,b=G(m),_=b===m,x=i||(_||!y?[Ce(m)]:bo(m)),g=[m].concat(x).reduce(function(ae,Y){return ae.concat(G(Y)===ht?yo(t,{placement:Y,boundary:c,rootBoundary:f,padding:l,flipVariations:y,allowedAutoPlacements:h}):Y)},[]),O=t.rects.reference,w=t.rects.popper,P=new Map,S=!0,$=g[0],N=0;N<g.length;N++){var A=g[N],V=G(A),R=pe(A)===ie,K=[D,T].indexOf(V)>=0,J=K?"width":"height",B=ye(t,{placement:A,boundary:c,rootBoundary:f,altBoundary:v,padding:l}),W=K?R?H:I:R?T:D;O[J]>w[J]&&(W=Ce(W));var Pe=Ce(W),Q=[];if(o&&Q.push(B[V]<=0),s&&Q.push(B[W]<=0,B[Pe]<=0),Q.every(function(ae){return ae})){$=A,S=!1;break}P.set(A,Q)}if(S)for(var _e=y?3:1,Ge=function(Y){var fe=g.find(function(Ee){var ee=P.get(Ee);if(ee)return ee.slice(0,Y).every(function(ze){return ze})});if(fe)return $=fe,"break"},de=_e;de>0;de--){var je=Ge(de);if(je==="break")break}t.placement!==$&&(t.modifiersData[n]._skip=!0,t.placement=$,t.reset=!0)}}const xo={name:"flip",enabled:!0,phase:"main",fn:Oo,requiresIfExists:["offset"],data:{_skip:!1}};function tr(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function rr(e){return[D,H,T,I].some(function(t){return e[t]>=0})}function wo(e){var t=e.state,r=e.name,n=t.rects.reference,a=t.rects.popper,o=t.modifiersData.preventOverflow,d=ye(t,{elementContext:"reference"}),s=ye(t,{altBoundary:!0}),i=tr(d,n),l=tr(s,a,o),c=rr(i),f=rr(l);t.modifiersData[r]={referenceClippingOffsets:i,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const Po={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:wo};function _o(e,t,r){var n=G(e),a=[I,D].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,d=o[0],s=o[1];return d=d||0,s=(s||0)*a,[I,H].indexOf(n)>=0?{x:s,y:d}:{x:d,y:s}}function jo(e){var t=e.state,r=e.options,n=e.name,a=r.offset,o=a===void 0?[0,0]:a,d=Ir.reduce(function(c,f){return c[f]=_o(f,t.rects,o),c},{}),s=d[t.placement],i=s.x,l=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=i,t.modifiersData.popperOffsets.y+=l),t.modifiersData[n]=d}const Eo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:jo};function So(e){var t=e.state,r=e.name;t.modifiersData[r]=Hr({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const $o={name:"popperOffsets",enabled:!0,phase:"read",fn:So,data:{}};function No(e){return e==="x"?"y":"x"}function Ao(e){var t=e.state,r=e.options,n=e.name,a=r.mainAxis,o=a===void 0?!0:a,d=r.altAxis,s=d===void 0?!1:d,i=r.boundary,l=r.rootBoundary,c=r.altBoundary,f=r.padding,v=r.tether,u=v===void 0?!0:v,y=r.tetherOffset,h=y===void 0?0:y,m=ye(t,{boundary:i,rootBoundary:l,padding:f,altBoundary:c}),b=G(t.placement),_=pe(t.placement),x=!_,g=bt(b),O=No(g),w=t.modifiersData.popperOffsets,P=t.rects.reference,S=t.rects.popper,$=typeof h=="function"?h(Object.assign({},t.rects,{placement:t.placement})):h,N=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,V={x:0,y:0};if(w){if(o){var R,K=g==="y"?D:I,J=g==="y"?T:H,B=g==="y"?"height":"width",W=w[g],Pe=W+m[K],Q=W-m[J],_e=u?-S[B]/2:0,Ge=_===ie?P[B]:S[B],de=_===ie?-S[B]:-P[B],je=t.elements.arrow,ae=u&&je?yt(je):{width:0,height:0},Y=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Lr(),fe=Y[K],Ee=Y[J],ee=me(0,P[B],ae[B]),ze=x?P[B]/2-_e-ee-fe-N.mainAxis:Ge-ee-fe-N.mainAxis,Wr=x?-P[B]/2+_e+ee+Ee+N.mainAxis:de+ee+Ee+N.mainAxis,qe=t.elements.arrow&&we(t.elements.arrow),Ur=qe?g==="y"?qe.clientTop||0:qe.clientLeft||0:0,Pt=(R=A==null?void 0:A[g])!=null?R:0,Gr=W+ze-Pt-Ur,zr=W+Wr-Pt,_t=me(u?He(Pe,Gr):Pe,W,u?re(Q,zr):Q);w[g]=_t,V[g]=_t-W}if(s){var jt,qr=g==="x"?D:I,Yr=g==="x"?T:H,te=w[O],Se=O==="y"?"height":"width",Et=te+m[qr],St=te-m[Yr],Ye=[D,I].indexOf(b)!==-1,$t=(jt=A==null?void 0:A[O])!=null?jt:0,Nt=Ye?Et:te-P[Se]-S[Se]-$t+N.altAxis,At=Ye?te+P[Se]+S[Se]-$t-N.altAxis:St,Ct=u&&Ye?Qa(Nt,te,At):me(u?Nt:Et,te,u?At:St);w[O]=Ct,V[O]=Ct-te}t.modifiersData[n]=V}}const Co={name:"preventOverflow",enabled:!0,phase:"main",fn:Ao,requiresIfExists:["offset"]};function Ro(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Do(e){return e===L(e)||!M(e)?Ot(e):Ro(e)}function Io(e){var t=e.getBoundingClientRect(),r=le(t.width)/e.offsetWidth||1,n=le(t.height)/e.offsetHeight||1;return r!==1||n!==1}function Bo(e,t,r){r===void 0&&(r=!1);var n=M(t),a=M(t)&&Io(t),o=Z(t),d=ce(e,a,r),s={scrollLeft:0,scrollTop:0},i={x:0,y:0};return(n||!n&&!r)&&((z(t)!=="body"||wt(o))&&(s=Do(t)),M(t)?(i=ce(t,!0),i.x+=t.clientLeft,i.y+=t.clientTop):o&&(i.x=xt(o))),{x:d.left+s.scrollLeft-i.x,y:d.top+s.scrollTop-i.y,width:d.width,height:d.height}}function ko(e){var t=new Map,r=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function a(o){r.add(o.name);var d=[].concat(o.requires||[],o.requiresIfExists||[]);d.forEach(function(s){if(!r.has(s)){var i=t.get(s);i&&a(i)}}),n.push(o)}return e.forEach(function(o){r.has(o.name)||a(o)}),n}function Lo(e){var t=ko(e);return qa.reduce(function(r,n){return r.concat(t.filter(function(a){return a.phase===n}))},[])}function Fo(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function Mo(e){var t=e.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var nr={placement:"bottom",modifiers:[],strategy:"absolute"};function ar(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function To(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,a=t.defaultOptions,o=a===void 0?nr:a;return function(s,i,l){l===void 0&&(l=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},nr,o),modifiersData:{},elements:{reference:s,popper:i},attributes:{},styles:{}},f=[],v=!1,u={state:c,setOptions:function(b){var _=typeof b=="function"?b(c.options):b;h(),c.options=Object.assign({},o,c.options,_),c.scrollParents={reference:ne(s)?he(s):s.contextElement?he(s.contextElement):[],popper:he(i)};var x=Lo(Mo([].concat(n,c.options.modifiers)));return c.orderedModifiers=x.filter(function(g){return g.enabled}),y(),u.update()},forceUpdate:function(){if(!v){var b=c.elements,_=b.reference,x=b.popper;if(ar(_,x)){c.rects={reference:Bo(_,we(x),c.options.strategy==="fixed"),popper:yt(x)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(N){return c.modifiersData[N.name]=Object.assign({},N.data)});for(var g=0;g<c.orderedModifiers.length;g++){if(c.reset===!0){c.reset=!1,g=-1;continue}var O=c.orderedModifiers[g],w=O.fn,P=O.options,S=P===void 0?{}:P,$=O.name;typeof w=="function"&&(c=w({state:c,options:S,name:$,instance:u})||c)}}}},update:Fo(function(){return new Promise(function(m){u.forceUpdate(),m(c)})}),destroy:function(){h(),v=!0}};if(!ar(s,i))return u;u.setOptions(l).then(function(m){!v&&l.onFirstUpdate&&l.onFirstUpdate(m)});function y(){c.orderedModifiers.forEach(function(m){var b=m.name,_=m.options,x=_===void 0?{}:_,g=m.effect;if(typeof g=="function"){var O=g({state:c,name:b,instance:u,options:x}),w=function(){};f.push(O||w)}})}function h(){f.forEach(function(m){return m()}),f=[]}return u}}var Ho=[co,$o,io,Za,Eo,xo,Co,no,Po],Vo=To({defaultModifiers:Ho}),Wo=typeof Element<"u",Uo=typeof Map=="function",Go=typeof Set=="function",zo=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Re(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!Re(e[n],t[n]))return!1;return!0}var o;if(Uo&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(n=o.next()).done;)if(!t.has(n.value[0]))return!1;for(o=e.entries();!(n=o.next()).done;)if(!Re(n.value[1],t.get(n.value[0])))return!1;return!0}if(Go&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(n=o.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(zo&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;if(Wo&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&e.$$typeof)&&!Re(e[a[n]],t[a[n]]))return!1;return!0}return e!==e&&t!==t}var qo=function(t,r){try{return Re(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Yo=an(qo);var Xo=[],Zo=function(t,r,n){n===void 0&&(n={});var a=E.useRef(null),o={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||Xo},d=E.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=d[0],i=d[1],l=E.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(u){var y=u.state,h=Object.keys(y.elements);pr.flushSync(function(){i({styles:Yt(h.map(function(m){return[m,y.styles[m]||{}]})),attributes:Yt(h.map(function(m){return[m,y.attributes[m]]}))})})},requires:["computeStyles"]}},[]),c=E.useMemo(function(){var v={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[l,{name:"applyStyles",enabled:!1}])};return Yo(a.current,v)?a.current||v:(a.current=v,v)},[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,l]),f=E.useRef();return Xt(function(){f.current&&f.current.setOptions(c)},[c]),Xt(function(){if(!(t==null||r==null)){var v=n.createPopper||Vo,u=v(t,r,c);return f.current=u,function(){u.destroy(),f.current=null}}},[t,r,n.createPopper]),{state:f.current?f.current.state:null,styles:s.styles,attributes:s.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}},Ko=function(){},Jo=function(){return Promise.resolve(null)},Qo=[];function es(e){var t=e.placement,r=t===void 0?"bottom":t,n=e.strategy,a=n===void 0?"absolute":n,o=e.modifiers,d=o===void 0?Qo:o,s=e.referenceElement,i=e.onFirstUpdate,l=e.innerRef,c=e.children,f=E.useContext(Ra),v=E.useState(null),u=v[0],y=v[1],h=E.useState(null),m=h[0],b=h[1];E.useEffect(function(){Ba(l,u)},[l,u]);var _=E.useMemo(function(){return{placement:r,strategy:a,onFirstUpdate:i,modifiers:[].concat(d,[{name:"arrow",enabled:m!=null,options:{element:m}}])}},[r,a,i,d,m]),x=Zo(s||f,u,_),g=x.state,O=x.styles,w=x.forceUpdate,P=x.update,S=E.useMemo(function(){return{ref:y,style:O.popper,placement:g?g.placement:r,hasPopperEscaped:g&&g.modifiersData.hide?g.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:g&&g.modifiersData.hide?g.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:O.arrow,ref:b},forceUpdate:w||Ko,update:P||Jo}},[y,b,r,g,O,P,w]);return Da(c)(S)}function ts(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,at(e,t)}function at(e,t){return at=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},at(e,t)}function rs(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,o;for(o=0;o<n.length;o++)a=n[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function or(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ns(e,t,r){return e===t?!0:e.correspondingElement?e.correspondingElement.classList.contains(r):e.classList.contains(r)}function as(e,t,r){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&ns(e,t,r))return!0;e=e.parentNode||e.host}return e}function os(e){return document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY}var ss=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var t=!1,r=Object.defineProperty({},"passive",{get:function(){t=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,r),window.removeEventListener("testPassiveEventSupport",n,r),t}};function is(e){return e===void 0&&(e=0),function(){return++e}}var ls=is(),ot,Ae={},et={},cs=["touchstart","touchmove"],ps="ignore-react-onclickoutside";function sr(e,t){var r=null,n=cs.indexOf(t)!==-1;return n&&ot&&(r={passive:!e.props.preventDefault}),r}function ds(e,t){var r,n,a=e.displayName||e.name||"Component";return n=r=function(o){ts(d,o);function d(i){var l;return l=o.call(this,i)||this,l.__outsideClickHandler=function(c){if(typeof l.__clickOutsideHandlerProp=="function"){l.__clickOutsideHandlerProp(c);return}var f=l.getInstance();if(typeof f.props.handleClickOutside=="function"){f.props.handleClickOutside(c);return}if(typeof f.handleClickOutside=="function"){f.handleClickOutside(c);return}throw new Error("WrappedComponent: "+a+" lacks a handleClickOutside(event) function for processing outside click events.")},l.__getComponentNode=function(){var c=l.getInstance();return t&&typeof t.setClickOutsideRef=="function"?t.setClickOutsideRef()(c):typeof c.setClickOutsideRef=="function"?c.setClickOutsideRef():pr.findDOMNode(c)},l.enableOnClickOutside=function(){if(!(typeof document>"u"||et[l._uid])){typeof ot>"u"&&(ot=ss()),et[l._uid]=!0;var c=l.props.eventTypes;c.forEach||(c=[c]),Ae[l._uid]=function(f){if(l.componentNode!==null&&(l.props.preventDefault&&f.preventDefault(),l.props.stopPropagation&&f.stopPropagation(),!(l.props.excludeScrollbar&&os(f)))){var v=f.composed&&f.composedPath&&f.composedPath().shift()||f.target;as(v,l.componentNode,l.props.outsideClickIgnoreClass)===document&&l.__outsideClickHandler(f)}},c.forEach(function(f){document.addEventListener(f,Ae[l._uid],sr(or(l),f))})}},l.disableOnClickOutside=function(){delete et[l._uid];var c=Ae[l._uid];if(c&&typeof document<"u"){var f=l.props.eventTypes;f.forEach||(f=[f]),f.forEach(function(v){return document.removeEventListener(v,c,sr(or(l),v))}),delete Ae[l._uid]}},l.getRef=function(c){return l.instanceRef=c},l._uid=ls(),l}var s=d.prototype;return s.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var l=this.instanceRef;return l.getInstance?l.getInstance():l},s.componentDidMount=function(){if(!(typeof document>"u"||!document.createElement)){var l=this.getInstance();if(t&&typeof t.handleClickOutside=="function"&&(this.__clickOutsideHandlerProp=t.handleClickOutside(l),typeof this.__clickOutsideHandlerProp!="function"))throw new Error("WrappedComponent: "+a+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside()}},s.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},s.componentWillUnmount=function(){this.disableOnClickOutside()},s.render=function(){var l=this.props;l.excludeScrollbar;var c=rs(l,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?c.ref=this.getRef:c.wrappedRef=this.getRef,c.disableOnClickOutside=this.disableOnClickOutside,c.enableOnClickOutside=this.enableOnClickOutside,E.createElement(e,c)},d}(E.Component),r.displayName="OnClickOutside("+a+")",r.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:ps,preventDefault:!1,stopPropagation:!1},r.getClass=function(){return e.getClass?e.getClass():e},n}const fs=[{name:"preventOverflow",enabled:!0}],us={right:"left",left:"right",top:"bottom",bottom:"top"},vs=e=>e&&us[e.split("-")[0]];class st extends j.PureComponent{constructor(){super(),this.state={isVisible:!1},this.containerItemRef=j.createRef(),this.renderPopper=this.renderPopper.bind(this),this.toggleOverlayVisibility=this.toggleOverlayVisibility.bind(this)}hideOverlay(){this.setState({isVisible:!1})}toggleOverlayVisibility(){this.setState({isVisible:!this.state.isVisible})}handleClickOutside(t){t&&t.target.closest(".inner-popper-overlay")||this.hideOverlay()}renderPopper({ref:t,style:r,placement:n,arrowProps:a,scheduleUpdate:o,outOfBoundaries:d}){const{children:s,hideWhenOutOfBounds:i}=this.props;return p.jsxs("div",{ref:t,style:r,"data-placement":n,className:k("inner-popper-overlay",`arrow-${vs(n)}`,this.props.overlayClassName,{"out-of-bounds":d&&i}),children:[p.jsx("div",{className:"arrow-hider",children:p.jsx("div",{className:"arrow",ref:a.ref,style:a.style})}),p.jsx("div",{className:"inner-popper-content",children:s})]})}render(){const{placement:t,overlayItem:r}=this.props,{isVisible:n}=this.state;return p.jsxs(j.Fragment,{children:[p.jsx("div",{className:"overlay-item",ref:this.containerItemRef,onClick:this.toggleOverlayVisibility,children:r}),n&&on.createPortal(p.jsx(es,{container:document.body,modifiers:fs,placement:t,referenceElement:this.containerItemRef.current,children:this.renderPopper}),document.body)]})}}Xe(st,"propTypes",{placement:Ze.string,overlayItem:Ze.any,hideWhenOutOfBounds:Ze.bool}),Xe(st,"defaultTypes",{placement:"bottom"});const ms=ds(st),ir=["#4DB3FF","#80B300","#FF6655","#FF99E6","#33FFCC","#e633c8","#dbe812","#FF1A66","#991AFF","#E6B333","#1AB399","#4D8066","#CC9999","#00E680","#809980","#E6FF80","#1AFF33","#999933","#E6331A","#CCCC00","#66E64D","#4D80CC","#9900B3","#4DB380","#FF4D4D"],Vr={24:"Prime",25:"Prime2",26:"XX",27:"Phoenix"},hs=e=>e in Vr,C={SSSP:"SSS+",SSS:"SSS",SSP:"SS+",SS:"SS",SP:"S+",S:"S",AAAP:"AAA+",AAA:"AAA",AAP:"AA+",AA:"AA",AP:"A+",A:"A",B:"B",C:"C",D:"D",F:"F"},gs=e=>{if(e==null)return null;switch(!0){case e>=995e3:return C.SSSP;case e>=99e4:return C.SSS;case e>=985e3:return C.SSP;case e>=98e4:return C.SS;case e>=975e3:return C.SP;case e>=97e4:return C.S;case e>=96e4:return C.AAAP;case e>=95e4:return C.AAA;case e>=925e3:return C.AAP;case e>=9e5:return C.AA;case e>=825e3:return C.AP;case e>=75e4:return C.A;case e>=65e4:return C.B;case e>=55e4:return C.C;case e>=45e4:return C.D;default:return C.F}},lr=(e,t)=>t?`/grades/phoenix/${e}.png`:`/grades/phoenix/fail/${e}.png`,ys=({score:e,grade:t,isPass:r,mix:n,scoring:a="phoenix"})=>{const o=gs(e);if(o==null)return null;if(a==="xx")return!t||t==="?"?null:p.jsx("img",{src:`/grades/${t}.png`,alt:t??"Grade"});let d=lr(o,r??!1);return r==null&&t!=null&&n>=24&&n<=26&&(d=lr(o,t.includes("+")||t.startsWith("S"))),p.jsx("img",{src:d,alt:o})},cr={xx:26,phoenix:27},bs={24:"#48283a99",25:"#432a4e99",26:"#2d2a4e99",27:"#2a434e99"},Os=({mix:e})=>{const{scoring:t}=mn();return!t||!cr[t]?null:hs(e)&&cr[t]!==e?p.jsx(ut,{color:bs[e],children:Vr[e]}):null},xs=({result:e,chart:t})=>{var l;const r=dr(),n=vr(),a=pt(dt),o=a.sortChartsBy==="pp",d=e.playerId===((l=n.data)==null?void 0:l.id),s=sn(e,t),i=ln.profile.getPath({id:e.playerId});return p.jsxs("tr",{className:k({latest:e.isLatestScore}),style:e.highlightIndex>=0?{background:ir[e.highlightIndex]+"3A",outline:`1px solid ${ir[e.highlightIndex]}A0`}:{},children:[p.jsx("td",{className:"place",style:d?{fontWeight:"bold",color:"#ddd"}:{},children:`#${t.results.findIndex(c=>c.id===e.id)+1}`}),p.jsx("td",{className:k("nickname"),style:e.highlightIndex>=0||d?{fontWeight:"bold"}:{},children:p.jsxs("div",{className:"nickname-container",children:[e.region?p.jsx(gn,{region:e.region}):null,p.jsxs("span",{className:"nickname-text",children:[p.jsx(Rt,{to:i,children:e.playerName}),!!e.placeDifference&&p.jsxs("span",{className:"change-holder up",children:[p.jsx("span",{children:e.placeDifference}),p.jsx(cn,{})]}),(Dt||o&&e.highlightIndex>=0)&&p.jsxs("span",{className:"debug-elo-info",children:[" ",e.pp&&`${e.pp}pp`]})]}),p.jsx("div",{className:"mods-container",children:p.jsx(Os,{mix:e.mix})})]})}),p.jsx("td",{className:k("score"),children:p.jsx(ms,{overlayClassName:"score-overlay-outer",overlayItem:p.jsxs("span",{className:"score-span",children:[!e.scoreIncrease&&p.jsx("span",{style:{fontSize:"80%"},children:"* "}),p.jsx("span",{children:Math.floor(e.score/1e3)}),p.jsxs("span",{style:{fontSize:"70%"},children:[",",`${e.score%1e3}`.padStart(3,"0")]})]}),placement:"top",children:p.jsxs("div",{className:"score-overlay",children:[p.jsx("div",{children:p.jsx(Ca,{resultId:e.id})}),Dt&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("span",{className:"_grey",children:"result id: "}),e.id]}),p.jsxs("div",{children:[p.jsx("span",{className:"_grey",children:"player id: "}),e.playerId]})]}),p.jsxs("div",{children:[p.jsxs("span",{className:"_grey",children:[r.PLAYER,": "]}),p.jsxs(Rt,{to:i,children:[e.playerName," (",e.playerNameArcade,")"]})]}),s?p.jsxs("div",{className:"important",children:[p.jsxs("span",{className:"_grey",children:[r.EXP,": "]}),"+",Bt(s).format("0,0")]}):null,e.pp?p.jsxs("div",{className:"important",children:[p.jsxs("span",{className:"_grey",children:[r.PP,": "]}),p.jsxs("span",{children:[e.pp,"pp"]})]}):null,!e.isExactGainedDate&&p.jsxs("div",{className:"warning",children:[p.jsx(pn,{}),r.MY_BEST_SCORE_WARNING]}),e.isExactGainedDate&&p.jsxs(p.Fragment,{children:[e.mods&&p.jsxs("div",{children:[p.jsxs("span",{className:"_grey",children:[r.MODS,": "]}),e.mods]}),e.combo!=null&&p.jsxs("div",{className:"mobile-only",children:[p.jsxs("span",{className:"_grey",children:[r.COMBO,": "]}),e.combo]}),e.calories!=null&&p.jsxs("div",{children:[p.jsxs("span",{className:"_grey",children:[r.CCAL,": "]}),e.calories]}),e.scoreIncrease!=null&&p.jsxs("div",{children:[p.jsxs("span",{className:"_grey",children:[r.SCORE_INCREASE,": "]}),"+",Bt(e.scoreIncrease).format("0,0")]}),!e.scoreIncrease&&r.SIGHTREAD]})]})})}),p.jsx("td",{className:k("grade"),children:p.jsx("div",{className:"img-holder",children:p.jsx(ys,{score:e.score,isPass:e.passed,grade:e.grade,mix:e.mix,scoring:a.scoring})})}),p.jsx("td",{className:k("number","miss"),children:e.stats[4]}),p.jsx("td",{className:k("number","bad"),children:e.stats[3]}),p.jsx("td",{className:k("number","good"),children:e.stats[2]}),p.jsx("td",{className:k("number","great"),children:e.stats[1]}),p.jsx("td",{className:k("number","perfect"),children:e.stats[0]}),p.jsx("td",{className:k("combo","desktop-only"),children:e.combo&&`${e.combo}x`}),p.jsx("td",{className:k("date",{latest:e.isLatestScore}),children:p.jsxs(hn,{content:"",tooltipClassName:"pumpking-tooltip",children:[dn(r,new Date(e.gained)),e.isExactGainedDate?"":"?"]})})]},e.id)};function ws(e){return fn({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8ZM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2ZM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10Z"}}]})(e)}const Ps=({children:e,count:t})=>{const[r,n]=E.useState(!0),a=dr();return r&&t>1?p.jsx("tr",{className:"results-collapser",onClick:()=>n(!1),children:p.jsx("td",{colSpan:"20",children:p.jsx("div",{children:p.jsx("button",{children:t&&a.SHOW_MORE_RESULTS?p.jsx(p.Fragment,{children:a.SHOW_MORE_RESULTS(t)}):p.jsx(ws,{})})})})}):p.jsx(p.Fragment,{children:e})},Ds=({chart:e})=>{var d;const t=(d=vr().data)==null?void 0:d.id,r=pt(dt),n=ja(),a=e.results.map((s,i,l)=>{var h;const c=s.added===e.updatedOn,f=r.sortChartsBy==="pp"&&!((h=r.sortChartsByPlayers)!=null&&h.length)?l[0].playerId:null,v=(f?[f,...n]:n).indexOf(s.playerId??-1),u=c||s.playerId===t||v>=0;let y=0;if(s.scoreIncrease&&c){const m=s.score-s.scoreIncrease;y=It.findLastIndex(_=>_.score>m,l)-i}return{...s,topPlace:i+1,isImportant:u,highlightIndex:v,placeDifference:y,isLatestScore:c}}).map((s,i,l)=>{const f=l.slice(i+1,i+1+2).some(u=>u.isImportant),v=l.slice(i-2,i).some(u=>u.isImportant);return{...s,isCollapsible:!s.isImportant&&!f&&!v}}),o=a.reduce((s,i)=>(s.length?s[s.length-1].isGroupCollapsible!==i.isCollapsible?s.push({isGroupCollapsible:i.isCollapsible,results:[i]}):s[s.length-1].results.push(i):s.push({isGroupCollapsible:i.isCollapsible,results:[i]}),s),[]);return p.jsxs("div",{className:"song-block",children:[p.jsx(Aa,{chart:e}),p.jsx("div",{className:"charts",children:!It.isEmpty(a)&&p.jsx("div",{className:"chart",children:p.jsx("div",{className:"results",children:p.jsx("table",{children:p.jsx("tbody",{children:o.map(s=>{const i=s.results.map(l=>p.jsx(E.Fragment,{children:p.jsx(xs,{chart:e,result:l})},l.id));return s.isGroupCollapsible?p.jsx(Ps,{count:i.length,children:i}):p.jsx(p.Fragment,{children:i})})})})})})})]})};export{mt as B,Ds as C,Rs as L,ft as T,_a as r};
//# sourceMappingURL=Chart-f37c6122.js.map
