import{p as k,q as y,s as o,l as p,j as s,L as C,a3 as R,a7 as E,a5 as u,x as m,N as x,ac as P,o as S,y as A,k as j}from"./index-D17xuJfQ.js";import{_ as h}from"./fp-CNWdKcs4.js";import{d as H}from"./index.esm-DlnmkZKq.js";import{m as M,E as L}from"./ExpRankImg-CcA676fX.js";import{F as _}from"./Flex-R8Q2z5-U.js";const g=()=>{const n=k();return y(o.user.preferencesMutation.mutationOptions({onSuccess:a=>{n.setQueryData(o.user.current.queryKey(),a),n.invalidateQueries(o.charts.search.infiniteQueryFilter())}}))};function F({ranking:n,isLoading:c,preferences:a}){const t=p(),l=g();return s.jsxs("div",{className:"ranking-list",children:[h.isEmpty(n)&&!c&&"ничего не найдено",c&&s.jsx(C,{}),!c&&n&&s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"place",children:t.RANK}),s.jsx("th",{children:t.EXP}),s.jsx("th",{className:"name",children:t.NAME}),s.jsx("th",{className:"name name-piu",children:t.AMPASS}),s.jsx("th",{className:"rating",children:"pp"}),s.jsx("th",{className:"playcount",children:t.PLAYCOUNT}),s.jsx("th",{className:"playcount",children:t.SCORES_count}),s.jsx("th",{className:"accuracy",children:t.ACCURACY}),s.jsx("th",{className:"hide-col",children:" "})]})}),s.jsx("tbody",{children:n.map((e,d)=>{const i=a?.playersHiddenStatus?.[e.id];return i&&!a?.showHiddenPlayersInRanking?null:s.jsxs("tr",{className:R("player",{"hidden-player":i}),children:[s.jsx("td",{className:"place",children:d===0?s.jsx(M,{}):`#${d+1}`}),s.jsx("td",{children:e.exp!=null?s.jsx(L,{exp:e.exp}):null}),s.jsx("td",{className:"name",children:s.jsxs(_,{gap:"xxs",align:"center",children:[e.region?s.jsx(E,{region:e.region}):null,s.jsx(u,{component:x,to:m.profile.getPath({id:e.id}),children:e.nickname})]})}),s.jsx("td",{className:"name name-piu",children:s.jsx(u,{component:x,to:m.profile.getPath({id:e.id}),children:e.arcade_name})}),s.jsx("td",{className:"rating secondary",children:e.pp!=null?Math.floor(e.pp):""}),s.jsx("td",{className:"playcount",children:e.results_count}),s.jsx("td",{className:"playcount",children:e.best_results_count}),s.jsx("td",{className:"accuracy",children:e.accuracy?`${e.accuracy.toFixed(2)}%`:""}),s.jsx("td",{className:"hide-col",children:s.jsx(P,{onChange:()=>{a&&l.mutate(h.set(["playersHiddenStatus",e.id],!i,a))},checked:!i})})]},e.id)})})]})]})}const O=()=>{const n=p(),c=S(),{isLoading:a,isFetching:t,error:l,data:e,refetch:d}=A(o.players.stats.queryOptions()),i=g(),r=c.data?.preferences,N=()=>{r&&i.mutate(h.set(["showHiddenPlayersInRanking"],!r.showHiddenPlayersInRanking,r))},f=()=>{a||d()};return s.jsx("div",{className:"ranking-page",children:s.jsxs("div",{className:"content",children:[l&&l.message,s.jsxs("div",{className:"top-controls",children:[s.jsx(j,{size:"sm",mr:"xs",disabled:!r,onClick:N,children:r?.showHiddenPlayersInRanking?n.HIDE_UNSELECTED:n.SHOW_ALL}),s.jsx(j,{size:"sm",disabled:t,onClick:f,leftSection:s.jsx(H,{}),children:n.UPDATE})]}),s.jsx(F,{ranking:e,isLoading:a,preferences:r})]})})};export{O as default};
//# sourceMappingURL=Ranking-BAi58JqY.js.map
