import{r as B,v as D,j as e,s as y,x as v,am as ue,aJ as P,z as me,n as K,o as W,O as $,M as xe,F as je,w as pe,X as be,y as ve,d as fe,e as Ne,f as A,u as X,L as we,$ as ge,a4 as ye,N as z,h as O,c as ke,i as Ce,aK as U,aL as S,B as q,a5 as V}from"./index-B6NMOy3i.js";import{_ as L}from"./fp-spnMem_c.js";import{l as _e,d as Se}from"./index.esm-B-2bGnWi.js";import{m as qe,E as Ae}from"./ExpRankImg-D6SjnnAl.js";import{F as Pe}from"./Flex-D4AyTukK.js";var Y={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Re=Y,J=B.forwardRef(({__staticSelector:n,__stylesApiProps:i,className:a,classNames:t,styles:d,unstyled:s,children:l,label:c,description:r,id:x,disabled:m,error:o,size:h,labelPosition:f="left",bodyElement:p="div",labelElement:j="label",variant:N,style:k,vars:I,mod:E,attributes:Q,...C},F)=>{const u=D({name:n,props:i,className:a,style:k,classes:Y,classNames:t,styles:d,unstyled:s,attributes:Q});return e.jsx(y,{...u("root"),ref:F,__vars:{"--label-fz":ue(h),"--label-lh":v(h,"label-lh")},mod:[{"label-position":f},E],variant:N,size:h,...C,children:e.jsxs(y,{component:p,htmlFor:p==="label"?x:void 0,...u("body"),children:[l,e.jsxs("div",{...u("labelWrapper"),"data-disabled":m||void 0,children:[c&&e.jsx(y,{component:j,htmlFor:j==="label"?x:void 0,...u("label"),"data-disabled":m||void 0,children:c}),r&&e.jsx(P.Description,{size:h,__inheritStyles:!1,...u("description"),children:r}),o&&typeof o!="boolean"&&e.jsx(P.Error,{size:h,__inheritStyles:!1,...u("error"),children:o})]})]})})});J.displayName="@mantine/core/InlineInput";function Ie({children:n,role:i}){const a=me();return a?e.jsx("div",{role:i,"aria-labelledby":a.labelId,"aria-describedby":a.describedBy,children:n}):e.jsx(e.Fragment,{children:n})}const Z=B.createContext(null),Ee=Z.Provider,Qe=()=>B.useContext(Z),M=K((n,i)=>{const{value:a,defaultValue:t,onChange:d,size:s,wrapperProps:l,children:c,readOnly:r,disabled:x,...m}=W("SwitchGroup",null,n),[o,h]=$({value:a,defaultValue:t,finalValue:[],onChange:d}),f=p=>{const j=p.currentTarget.value;!r&&h(o.includes(j)?o.filter(N=>N!==j):[...o,j])};return e.jsx(Ee,{value:{value:o,onChange:f,size:s,disabled:x},children:e.jsx(P.Wrapper,{size:s,ref:i,...l,...m,labelElement:"div",__staticSelector:"SwitchGroup",children:e.jsx(Ie,{role:"group",children:c})})})});M.classes=P.Wrapper.classes;M.displayName="@mantine/core/SwitchGroup";var ee={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const Fe={labelPosition:"right",withThumbIndicator:!0},Le=pe((n,{radius:i,color:a,size:t})=>({root:{"--switch-radius":i===void 0?void 0:ve(i),"--switch-height":v(t,"switch-height"),"--switch-width":v(t,"switch-width"),"--switch-thumb-size":v(t,"switch-thumb-size"),"--switch-label-font-size":v(t,"switch-label-font-size"),"--switch-track-label-padding":v(t,"switch-track-label-padding"),"--switch-color":a?be(a,n):void 0}})),R=K((n,i)=>{const a=W("Switch",Fe,n),{classNames:t,className:d,style:s,styles:l,unstyled:c,vars:r,color:x,label:m,offLabel:o,onLabel:h,id:f,size:p,radius:j,wrapperProps:N,thumbIcon:k,checked:I,defaultChecked:E,onChange:Q,labelPosition:C,description:F,error:u,disabled:ae,variant:ne,rootRef:te,mod:ie,withThumbIndicator:ce,attributes:re,...le}=a,_=Qe(),oe=p||_?.size,w=D({name:"Switch",props:a,classes:ee,className:d,style:s,classNames:t,styles:l,unstyled:c,attributes:re,vars:r,varsResolver:Le}),{styleProps:de,rest:T}=xe(le),G=je(f),b={checked:_?.value.includes(T.value)??I,onChange:g=>{_?.onChange(g),Q?.(g)},disabled:_?.disabled??ae},[H,he]=$({value:b.checked??I,defaultValue:E,finalValue:!1});return e.jsxs(J,{...w("root"),__staticSelector:"Switch",__stylesApiProps:a,id:G,size:oe,labelPosition:C,label:m,description:F,error:u,disabled:b.disabled,bodyElement:"label",labelElement:"span",classNames:t,styles:l,unstyled:c,"data-checked":b.checked,variant:ne,ref:te,mod:ie,...de,...N,children:[e.jsx("input",{...T,...b,checked:H,"data-checked":b.checked,onChange:g=>{b.onChange?.(g),he(g.currentTarget.checked)},id:G,ref:i,type:"checkbox",role:"switch",...w("input")}),e.jsxs(y,{"aria-hidden":"true",component:"span",mod:{error:u,"label-position":C,"without-labels":!h&&!o},...w("track"),children:[e.jsx(y,{component:"span",mod:{"reduce-motion":!0,"with-thumb-indicator":ce&&!k},...w("thumb"),children:k}),e.jsx("span",{...w("trackLabel"),children:H?h:o})]})]})});R.classes={...ee,...Re};R.displayName="@mantine/core/Switch";R.Group=M;const se=()=>{const n=fe();return Ne(A.user.preferencesMutation.mutationOptions({onSuccess:a=>{n.setQueryData(A.user.current.queryKey(),a),n.invalidateQueries({queryKey:A.charts.search.queryKey()})}}))};function Be(){return e.jsxs("div",{className:"faq",children:[e.jsxs("div",{className:"question-answer",children:[e.jsx("div",{className:"question",children:"Q: Как считается рейтинг?"}),e.jsxs("div",{className:"answer",children:["A: Используется ",e.jsx("a",{href:"https://en.wikipedia.org/wiki/Elo_rating_system",children:"рейтинг Эло"}),", широко используемый в шахматах и других играх, слегка модицированный под условия игры на пампе. Средний рейтинг - 1000. Коэффициент К зависит от уровня чарта (более сложные чарты сильнее влияют на рейтинг). Количество очков влияет на заработанный рейтинг (маленький отрыв от противника не даст так много очков как большой отрыв)."]})]}),e.jsxs("div",{className:"question-answer",children:[e.jsx("div",{className:"question",children:"Q: Что такое рр и чем оно отличается от эло?"}),e.jsxs("div",{className:"answer",children:["A: РР (performance points) - система очков, взятая из osu!. Эло - система рейтинга, взятая из шахмат. Основные отличия:",e.jsx("br",{}),"С эло твои очки зависят от других игроков на этом чарте, с рр твои очки зависят только от того, как ты сыграешь чарт.",e.jsx("br",{}),"С эло можно потерять очки или заставить другого игрока их потерять, с рр можно только набирать больше очков.",e.jsx("br",{}),"С эло намного проще кого-то обогнать, с рр люди редко меняются местами в рейтинге.",e.jsx("br",{}),"Эло показывает кто кого обыгрывает в последнее время, а рр показывает, кто на каком примерно уровне по скиллу.",e.jsx("br",{}),"Сейчас рейтинг сортируется по Эло. РР выступает в качестве дополнительной инфы для интереса, плюс используется как стартовое значение Эло."]})]}),e.jsxs("div",{className:"question-answer",children:[e.jsx("div",{className:"question",children:"Q: Система Эло используется для игр 1 на 1, как она используется на пампе, где на одном чарте играет много игроков?"}),e.jsx("div",{className:"answer",children:"A: Рекорды на одном чарте делятся на несколько игр 1 на 1. Если есть 3 игрока: A, B, C; то считается, что было 3 отдельные игры: A vs B, A vs C, B vs C."})]}),e.jsxs("div",{className:"question-answer",children:[e.jsx("div",{className:"question",children:"Q: Как считается сумма рр?"}),e.jsx("div",{className:"answer",children:"A: Сначала все скоры игрока сортируются по рр. Затем в общую сумму рр добавляется 100% от лучшего скора, 95% от второго скора, 90% от третьего, 86% от 4-го и так далее. (Формула коэффициента - 0.95^N). Таким образом, на общую сумму рр больше всего влияют самые лучшие результаты человека за всё время, и чтобы поднять свой уровень рр, нужно получать новые топовые результаты (и поднимать свой скилл)."})]}),e.jsxs("div",{className:"question-answer",children:[e.jsx("div",{className:"question",children:"Q: Учитываются ли рекорды на ранке в рейтинге?"}),e.jsx("div",{className:"answer",children:"A: Да. Как минимум потому что у нас есть много рекордов, взятых с машин бестов, и мы не знаем наверняка, на ранке они или нет. Если у игрока в топе есть два скора - на ранке и без ранка, используется тот, где больше очков."})]}),e.jsxs("div",{className:"question-answer",children:[e.jsx("div",{className:"question",children:"Q: Почему меня нет в рейтинге?"}),e.jsx("div",{className:"answer",children:"A: В таблицу попадают только те, у кого есть хотя бы 20 игр 1 на 1. Первые 20 игр используются для определения изначального рейтинга."})]}),e.jsxs("div",{className:"question-answer",children:[e.jsx("div",{className:"question",children:"Q: Почему суммарное количество оценок S-A-B не совпадает с общим количеством скоров?"}),e.jsx("div",{className:"answer",children:"A: Не для каждого результата известна оценка."})]}),e.jsxs("div",{className:"question-answer",children:[e.jsx("div",{className:"question",children:"Q: Если у меня есть несколько рекордов на А, несколько на А+, как считается суммарное количество грейдов в таблице?"}),e.jsx("div",{className:"answer",children:"A: В каждой колонке учитываются обе буквы - и треснутые, и с удержанным лайфом. То есть и А, и А+ идут в колонку А. Точно так же для B, C, D."})]}),e.jsxs("div",{className:"question-answer",children:[e.jsx("div",{className:"question",children:"Q: Убери аккураси из таблицы!"}),e.jsx("div",{className:"answer",children:"A: Грем, это секция для вопросов."})]})]})}function Me({ranking:n,isLoading:i,preferences:a}){const t=X(),d=se();return e.jsxs("div",{className:"ranking-list",children:[L.isEmpty(n)&&!i&&"ничего не найдено",i&&e.jsx(we,{}),!i&&n&&e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"place",children:t.RANK}),e.jsx("th",{children:t.EXP}),e.jsx("th",{className:"name",children:t.NAME}),e.jsx("th",{className:"name name-piu",children:t.AMPASS}),e.jsx("th",{className:"rating",children:"pp"}),e.jsx("th",{className:"playcount",children:t.PLAYCOUNT}),e.jsx("th",{className:"playcount",children:t.SCORES_count}),e.jsx("th",{className:"accuracy",children:t.ACCURACY}),e.jsx("th",{className:"hide-col",children:" "})]})}),e.jsx("tbody",{children:n.map((s,l)=>{const c=a?.playersHiddenStatus?.[s.id];return c&&!a?.showHiddenPlayersInRanking?null:e.jsxs("tr",{className:ge("player",{"hidden-player":c}),children:[e.jsx("td",{className:"place",children:l===0?e.jsx(qe,{}):`#${l+1}`}),e.jsx("td",{children:s.exp!=null?e.jsx(Ae,{exp:s.exp}):null}),e.jsx("td",{className:"name",children:e.jsxs(Pe,{gap:"xxs",align:"center",children:[s.region?e.jsx(ye,{region:s.region}):null,e.jsx(z,{to:O.profile.getPath({id:s.id}),children:s.nickname})]})}),e.jsx("td",{className:"name name-piu",children:e.jsx(z,{to:O.profile.getPath({id:s.id}),children:s.arcade_name})}),e.jsx("td",{className:"rating secondary",children:s.pp!=null?Math.floor(s.pp):""}),e.jsx("td",{className:"playcount",children:s.results_count}),e.jsx("td",{className:"playcount",children:s.best_results_count}),e.jsx("td",{className:"accuracy",children:s.accuracy?`${s.accuracy.toFixed(2)}%`:""}),e.jsx("td",{className:"hide-col",children:e.jsx(R,{withThumbIndicator:!1,color:"dark",onChange:()=>{a&&d.mutate(L.set(["playersHiddenStatus",s.id],!c,a))},checked:!c})})]},s.id)})})]})]})}const Ue=()=>{const n=X(),i=ke(),{isLoading:a,isFetching:t,error:d,data:s,refetch:l}=Ce(A.players.stats.queryOptions()),c=se(),r=i.data?.preferences,x=()=>{r&&c.mutate(L.set(["showHiddenPlayersInRanking"],!r.showHiddenPlayersInRanking,r))},m=()=>{a||l()};return e.jsx("div",{className:"ranking-page",children:e.jsxs("div",{className:"content",children:[d&&d.message,e.jsx("div",{className:"top-controls",children:e.jsxs(U,{children:[e.jsx(S,{index:!0,element:e.jsxs(e.Fragment,{children:[e.jsx(q,{size:"sm",mr:"xs",disabled:!r,onClick:x,children:r?.showHiddenPlayersInRanking?n.HIDE_UNSELECTED:n.SHOW_ALL}),e.jsx(q,{component:V,to:"faq",size:"sm",mr:"xs",leftSection:e.jsx(_e,{}),children:"faq"}),e.jsx(q,{size:"sm",disabled:t,onClick:m,leftSection:e.jsx(Se,{}),children:n.UPDATE})]})}),e.jsx(S,{path:"faq",element:e.jsx(q,{component:V,to:"..",size:"sm",variant:"filled",color:"dark",children:n.BACK_BUTTON})})]})}),e.jsxs(U,{children:[e.jsx(S,{index:!0,element:e.jsx(Me,{ranking:s,isLoading:a,preferences:r})}),e.jsx(S,{path:"faq",element:e.jsx(Be,{})})]})]})})};export{Ue as default};
//# sourceMappingURL=Ranking-BesPM-O4.js.map
