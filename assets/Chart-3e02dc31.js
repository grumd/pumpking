var Gt=Object.defineProperty;var qt=(e,t,r)=>t in e?Gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Re=(e,t,r)=>(qt(e,typeof t!="symbol"?t+"":t,r),r);import{j as o,N as zt,M as Yt,O as we,P as Xt,r as C,Q as Kt,n as jt,i as Se,S as De,H as Jt,u as Fe,T as it,U as Zt,V as Qt,G as er,_ as at,W as tr}from"./index-a8ec4dd6.js";import{b as Be,f as He,u as rr}from"./useFilter-73d7d541.js";import{u as Et}from"./useUser-4e864dad.js";import{q as nr,D as ot}from"./env-026301e6.js";import{C as ir,r as Ct,M as Pt,q as ar,G as st,t as or,v as sr,A as cr}from"./timeAgo-8f14e0b1.js";import{l as lr}from"./leaderboards-dba84202.js";import{T as At,G as Nt}from"./Text-a69c1a5b.js";import{c as M}from"./index-dd0aa871.js";import{n as fr}from"./numeral-065c25c8.js";import{F as pr}from"./index-beef5fc0.js";const ur=()=>{const e=Be(He);return[...e.playersAll??[],...e.playersNone??[],...e.playersSome??[],...e.sortChartsByPlayers??[]]},dr="_songHeader_1ri0k_1",vr="_youtubeLink_1ri0k_15",hr="_songName_1ri0k_32",ke={songHeader:dr,youtubeLink:vr,songName:hr},Rt={24:"#48283a99",25:"#432a4e99",26:"#2d2a4e99",27:"#2a434e99"},ct=["#4DB3FF","#80B300","#FF6655","#FF99E6","#33FFCC","#e633c8","#dbe812","#FF1A66","#991AFF","#E6B333","#1AB399","#4D8066","#CC9999","#00E680","#809980","#E6FF80","#1AFF33","#999933","#E6331A","#CCCC00","#66E64D","#4D80CC","#9900B3","#4DB380","#FF4D4D"],mr=({chart:e,children:t=null})=>{const r=e.otherChartInstances.slice().sort((a,p)=>p.mix-a.mix),[n,i]=lr(e.label);return o.jsxs("div",{className:ke.songHeader,children:[o.jsx(ir,{type:n,level:i??"?"}),o.jsxs("div",{className:ke.songName,children:[o.jsx(zt,{to:Ct.leaderboard.sharedChart.getPath({sharedChartId:e.id}),children:e.songName})," ",o.jsx(At,{component:"span",c:"dimmed",children:e.difficulty?`(${e.difficulty.toFixed(1)}) `:""})]}),o.jsx("div",{className:ke.youtubeLink,children:o.jsx("a",{href:`https://youtube.com/results?${nr.stringify({search_query:`${e.songName} ${e.label}`.replace(/( -)|(- )/g," ")})}`,target:"_blank",rel:"noopener noreferrer",children:o.jsx(Yt,{})})}),o.jsxs(Nt,{gap:"xs",ml:"auto",fz:"sm",children:[r.map(a=>a.level===e.level?null:o.jsxs(we,{color:Rt[a.mix],children:[Pt[a.mix],": ",a.label]},a.mix)),t]})]})},gr=({resultId:e})=>o.jsxs("a",{href:`https://api.pumpking.top:3001/results/${e}/screenshot`,target:"_blank",rel:"noopener noreferrer",children:["screenshot ",o.jsx(Xt,{style:{fontSize:"80%"}})]});var yr=C.createContext();C.createContext();var xr=function(t){return Array.isArray(t)?t[0]:t},br=function(t){if(typeof t=="function"){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}},Or=function(t,r){if(typeof t=="function")return br(t,r);t!=null&&(t.current=r)},lt=function(t){return t.reduce(function(r,n){var i=n[0],a=n[1];return r[i]=a,r},{})},ft=typeof window<"u"&&window.document&&window.document.createElement?C.useLayoutEffect:C.useEffect,D="top",$="bottom",T="right",k="left",We="auto",pe=[D,$,T,k],ee="start",le="end",wr="clippingParents",St="viewport",oe="popper",jr="reference",pt=pe.reduce(function(e,t){return e.concat([t+"-"+ee,t+"-"+le])},[]),Dt=[].concat(pe,[We]).reduce(function(e,t){return e.concat([t,t+"-"+ee,t+"-"+le])},[]),Er="beforeRead",Cr="read",Pr="afterRead",Ar="beforeMain",Nr="main",Rr="afterMain",Sr="beforeWrite",Dr="write",kr="afterWrite",Ir=[Er,Cr,Pr,Ar,Nr,Rr,Sr,Dr,kr];function W(e){return e?(e.nodeName||"").toLowerCase():null}function _(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Z(e){var t=_(e).Element;return e instanceof t||e instanceof Element}function L(e){var t=_(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Ve(e){if(typeof ShadowRoot>"u")return!1;var t=_(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function _r(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},a=t.elements[r];!L(a)||!W(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(p){var f=i[p];f===!1?a.removeAttribute(p):a.setAttribute(p,f===!0?"":f)}))})}function Mr(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],a=t.attributes[n]||{},p=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),f=p.reduce(function(l,c){return l[c]="",l},{});!L(i)||!W(i)||(Object.assign(i.style,f),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}const Lr={name:"applyStyles",enabled:!0,phase:"write",fn:_r,effect:Mr,requires:["computeStyles"]};function H(e){return e.split("-")[0]}var J=Math.max,je=Math.min,te=Math.round;function _e(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function kt(){return!/^((?!chrome|android).)*safari/i.test(_e())}function re(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,a=1;t&&L(e)&&(i=e.offsetWidth>0&&te(n.width)/e.offsetWidth||1,a=e.offsetHeight>0&&te(n.height)/e.offsetHeight||1);var p=Z(e)?_(e):window,f=p.visualViewport,l=!kt()&&r,c=(n.left+(l&&f?f.offsetLeft:0))/i,s=(n.top+(l&&f?f.offsetTop:0))/a,d=n.width/i,u=n.height/a;return{width:d,height:u,top:s,right:c+d,bottom:s+u,left:c,x:c,y:s}}function Ue(e){var t=re(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function It(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Ve(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function V(e){return _(e).getComputedStyle(e)}function $r(e){return["table","td","th"].indexOf(W(e))>=0}function G(e){return((Z(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ee(e){return W(e)==="html"?e:e.assignedSlot||e.parentNode||(Ve(e)?e.host:null)||G(e)}function ut(e){return!L(e)||V(e).position==="fixed"?null:e.offsetParent}function Tr(e){var t=/firefox/i.test(_e()),r=/Trident/i.test(_e());if(r&&L(e)){var n=V(e);if(n.position==="fixed")return null}var i=Ee(e);for(Ve(i)&&(i=i.host);L(i)&&["html","body"].indexOf(W(i))<0;){var a=V(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function ue(e){for(var t=_(e),r=ut(e);r&&$r(r)&&V(r).position==="static";)r=ut(r);return r&&(W(r)==="html"||W(r)==="body"&&V(r).position==="static")?t:r||Tr(e)||t}function Ge(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function se(e,t,r){return J(e,je(t,r))}function Fr(e,t,r){var n=se(e,t,r);return n>r?r:n}function _t(){return{top:0,right:0,bottom:0,left:0}}function Mt(e){return Object.assign({},_t(),e)}function Lt(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var Br=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Mt(typeof t!="number"?t:Lt(t,pe))};function Hr(e){var t,r=e.state,n=e.name,i=e.options,a=r.elements.arrow,p=r.modifiersData.popperOffsets,f=H(r.placement),l=Ge(f),c=[k,T].indexOf(f)>=0,s=c?"height":"width";if(!(!a||!p)){var d=Br(i.padding,r),u=Ue(a),v=l==="y"?D:k,y=l==="y"?$:T,g=r.rects.reference[s]+r.rects.reference[l]-p[l]-r.rects.popper[s],m=p[l]-r.rects.reference[l],b=ue(a),w=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,j=g/2-m/2,h=d[v],x=w-u[s]-d[y],O=w/2-u[s]/2+j,E=se(h,O,x),P=l;r.modifiersData[n]=(t={},t[P]=E,t.centerOffset=E-O,t)}}function Wr(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||It(t.elements.popper,i)&&(t.elements.arrow=i))}const Vr={name:"arrow",enabled:!0,phase:"main",fn:Hr,effect:Wr,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ne(e){return e.split("-")[1]}var Ur={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Gr(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:te(r*i)/i||0,y:te(n*i)/i||0}}function dt(e){var t,r=e.popper,n=e.popperRect,i=e.placement,a=e.variation,p=e.offsets,f=e.position,l=e.gpuAcceleration,c=e.adaptive,s=e.roundOffsets,d=e.isFixed,u=p.x,v=u===void 0?0:u,y=p.y,g=y===void 0?0:y,m=typeof s=="function"?s({x:v,y:g}):{x:v,y:g};v=m.x,g=m.y;var b=p.hasOwnProperty("x"),w=p.hasOwnProperty("y"),j=k,h=D,x=window;if(c){var O=ue(r),E="clientHeight",P="clientWidth";if(O===_(r)&&(O=G(r),V(O).position!=="static"&&f==="absolute"&&(E="scrollHeight",P="scrollWidth")),O=O,i===D||(i===k||i===T)&&a===le){h=$;var N=d&&O===x&&x.visualViewport?x.visualViewport.height:O[E];g-=N-n.height,g*=l?1:-1}if(i===k||(i===D||i===$)&&a===le){j=T;var A=d&&O===x&&x.visualViewport?x.visualViewport.width:O[P];v-=A-n.width,v*=l?1:-1}}var R=Object.assign({position:f},c&&Ur),F=s===!0?Gr({x:v,y:g},_(r)):{x:v,y:g};if(v=F.x,g=F.y,l){var S;return Object.assign({},R,(S={},S[h]=w?"0":"",S[j]=b?"0":"",S.transform=(x.devicePixelRatio||1)<=1?"translate("+v+"px, "+g+"px)":"translate3d("+v+"px, "+g+"px, 0)",S))}return Object.assign({},R,(t={},t[h]=w?g+"px":"",t[j]=b?v+"px":"",t.transform="",t))}function qr(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,p=a===void 0?!0:a,f=r.roundOffsets,l=f===void 0?!0:f,c={placement:H(t.placement),variation:ne(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,dt(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:p,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,dt(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const zr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:qr,data:{}};var ye={passive:!0};function Yr(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,a=i===void 0?!0:i,p=n.resize,f=p===void 0?!0:p,l=_(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach(function(s){s.addEventListener("scroll",r.update,ye)}),f&&l.addEventListener("resize",r.update,ye),function(){a&&c.forEach(function(s){s.removeEventListener("scroll",r.update,ye)}),f&&l.removeEventListener("resize",r.update,ye)}}const Xr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Yr,data:{}};var Kr={left:"right",right:"left",bottom:"top",top:"bottom"};function be(e){return e.replace(/left|right|bottom|top/g,function(t){return Kr[t]})}var Jr={start:"end",end:"start"};function vt(e){return e.replace(/start|end/g,function(t){return Jr[t]})}function qe(e){var t=_(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function ze(e){return re(G(e)).left+qe(e).scrollLeft}function Zr(e,t){var r=_(e),n=G(e),i=r.visualViewport,a=n.clientWidth,p=n.clientHeight,f=0,l=0;if(i){a=i.width,p=i.height;var c=kt();(c||!c&&t==="fixed")&&(f=i.offsetLeft,l=i.offsetTop)}return{width:a,height:p,x:f+ze(e),y:l}}function Qr(e){var t,r=G(e),n=qe(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=J(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),p=J(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),f=-n.scrollLeft+ze(e),l=-n.scrollTop;return V(i||r).direction==="rtl"&&(f+=J(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:p,x:f,y:l}}function Ye(e){var t=V(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function $t(e){return["html","body","#document"].indexOf(W(e))>=0?e.ownerDocument.body:L(e)&&Ye(e)?e:$t(Ee(e))}function ce(e,t){var r;t===void 0&&(t=[]);var n=$t(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),a=_(n),p=i?[a].concat(a.visualViewport||[],Ye(n)?n:[]):n,f=t.concat(p);return i?f:f.concat(ce(Ee(p)))}function Me(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function en(e,t){var r=re(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function ht(e,t,r){return t===St?Me(Zr(e,r)):Z(t)?en(t,r):Me(Qr(G(e)))}function tn(e){var t=ce(Ee(e)),r=["absolute","fixed"].indexOf(V(e).position)>=0,n=r&&L(e)?ue(e):e;return Z(n)?t.filter(function(i){return Z(i)&&It(i,n)&&W(i)!=="body"}):[]}function rn(e,t,r,n){var i=t==="clippingParents"?tn(e):[].concat(t),a=[].concat(i,[r]),p=a[0],f=a.reduce(function(l,c){var s=ht(e,c,n);return l.top=J(s.top,l.top),l.right=je(s.right,l.right),l.bottom=je(s.bottom,l.bottom),l.left=J(s.left,l.left),l},ht(e,p,n));return f.width=f.right-f.left,f.height=f.bottom-f.top,f.x=f.left,f.y=f.top,f}function Tt(e){var t=e.reference,r=e.element,n=e.placement,i=n?H(n):null,a=n?ne(n):null,p=t.x+t.width/2-r.width/2,f=t.y+t.height/2-r.height/2,l;switch(i){case D:l={x:p,y:t.y-r.height};break;case $:l={x:p,y:t.y+t.height};break;case T:l={x:t.x+t.width,y:f};break;case k:l={x:t.x-r.width,y:f};break;default:l={x:t.x,y:t.y}}var c=i?Ge(i):null;if(c!=null){var s=c==="y"?"height":"width";switch(a){case ee:l[c]=l[c]-(t[s]/2-r[s]/2);break;case le:l[c]=l[c]+(t[s]/2-r[s]/2);break}}return l}function fe(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,a=r.strategy,p=a===void 0?e.strategy:a,f=r.boundary,l=f===void 0?wr:f,c=r.rootBoundary,s=c===void 0?St:c,d=r.elementContext,u=d===void 0?oe:d,v=r.altBoundary,y=v===void 0?!1:v,g=r.padding,m=g===void 0?0:g,b=Mt(typeof m!="number"?m:Lt(m,pe)),w=u===oe?jr:oe,j=e.rects.popper,h=e.elements[y?w:u],x=rn(Z(h)?h:h.contextElement||G(e.elements.popper),l,s,p),O=re(e.elements.reference),E=Tt({reference:O,element:j,strategy:"absolute",placement:i}),P=Me(Object.assign({},j,E)),N=u===oe?P:O,A={top:x.top-N.top+b.top,bottom:N.bottom-x.bottom+b.bottom,left:x.left-N.left+b.left,right:N.right-x.right+b.right},R=e.modifiersData.offset;if(u===oe&&R){var F=R[i];Object.keys(A).forEach(function(S){var q=[T,$].indexOf(S)>=0?1:-1,z=[D,$].indexOf(S)>=0?"y":"x";A[S]+=F[z]*q})}return A}function nn(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,a=r.rootBoundary,p=r.padding,f=r.flipVariations,l=r.allowedAutoPlacements,c=l===void 0?Dt:l,s=ne(n),d=s?f?pt:pt.filter(function(y){return ne(y)===s}):pe,u=d.filter(function(y){return c.indexOf(y)>=0});u.length===0&&(u=d);var v=u.reduce(function(y,g){return y[g]=fe(e,{placement:g,boundary:i,rootBoundary:a,padding:p})[H(g)],y},{});return Object.keys(v).sort(function(y,g){return v[y]-v[g]})}function an(e){if(H(e)===We)return[];var t=be(e);return[vt(e),t,vt(t)]}function on(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,p=r.altAxis,f=p===void 0?!0:p,l=r.fallbackPlacements,c=r.padding,s=r.boundary,d=r.rootBoundary,u=r.altBoundary,v=r.flipVariations,y=v===void 0?!0:v,g=r.allowedAutoPlacements,m=t.options.placement,b=H(m),w=b===m,j=l||(w||!y?[be(m)]:an(m)),h=[m].concat(j).reduce(function(Q,U){return Q.concat(H(U)===We?nn(t,{placement:U,boundary:s,rootBoundary:d,padding:c,flipVariations:y,allowedAutoPlacements:g}):U)},[]),x=t.rects.reference,O=t.rects.popper,E=new Map,P=!0,N=h[0],A=0;A<h.length;A++){var R=h[A],F=H(R),S=ne(R)===ee,q=[D,$].indexOf(F)>=0,z=q?"width":"height",I=fe(t,{placement:R,boundary:s,rootBoundary:d,altBoundary:u,padding:c}),B=q?S?T:k:S?$:D;x[z]>O[z]&&(B=be(B));var de=be(B),Y=[];if(a&&Y.push(I[F]<=0),f&&Y.push(I[B]<=0,I[de]<=0),Y.every(function(Q){return Q})){N=R,P=!1;break}E.set(R,Y)}if(P)for(var ve=y?3:1,Ce=function(U){var ae=h.find(function(me){var X=E.get(me);if(X)return X.slice(0,U).every(function(Pe){return Pe})});if(ae)return N=ae,"break"},ie=ve;ie>0;ie--){var he=Ce(ie);if(he==="break")break}t.placement!==N&&(t.modifiersData[n]._skip=!0,t.placement=N,t.reset=!0)}}const sn={name:"flip",enabled:!0,phase:"main",fn:on,requiresIfExists:["offset"],data:{_skip:!1}};function mt(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function gt(e){return[D,T,$,k].some(function(t){return e[t]>=0})}function cn(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,p=fe(t,{elementContext:"reference"}),f=fe(t,{altBoundary:!0}),l=mt(p,n),c=mt(f,i,a),s=gt(l),d=gt(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:s,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":s,"data-popper-escaped":d})}const ln={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:cn};function fn(e,t,r){var n=H(e),i=[k,D].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,p=a[0],f=a[1];return p=p||0,f=(f||0)*i,[k,T].indexOf(n)>=0?{x:f,y:p}:{x:p,y:f}}function pn(e){var t=e.state,r=e.options,n=e.name,i=r.offset,a=i===void 0?[0,0]:i,p=Dt.reduce(function(s,d){return s[d]=fn(d,t.rects,a),s},{}),f=p[t.placement],l=f.x,c=f.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=p}const un={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:pn};function dn(e){var t=e.state,r=e.name;t.modifiersData[r]=Tt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const vn={name:"popperOffsets",enabled:!0,phase:"read",fn:dn,data:{}};function hn(e){return e==="x"?"y":"x"}function mn(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,a=i===void 0?!0:i,p=r.altAxis,f=p===void 0?!1:p,l=r.boundary,c=r.rootBoundary,s=r.altBoundary,d=r.padding,u=r.tether,v=u===void 0?!0:u,y=r.tetherOffset,g=y===void 0?0:y,m=fe(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:s}),b=H(t.placement),w=ne(t.placement),j=!w,h=Ge(b),x=hn(h),O=t.modifiersData.popperOffsets,E=t.rects.reference,P=t.rects.popper,N=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,A=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),R=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,F={x:0,y:0};if(O){if(a){var S,q=h==="y"?D:k,z=h==="y"?$:T,I=h==="y"?"height":"width",B=O[h],de=B+m[q],Y=B-m[z],ve=v?-P[I]/2:0,Ce=w===ee?E[I]:P[I],ie=w===ee?-P[I]:-E[I],he=t.elements.arrow,Q=v&&he?Ue(he):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:_t(),ae=U[q],me=U[z],X=se(0,E[I],Q[I]),Pe=j?E[I]/2-ve-X-ae-A.mainAxis:Ce-X-ae-A.mainAxis,Ft=j?-E[I]/2+ve+X+me+A.mainAxis:ie+X+me+A.mainAxis,Ae=t.elements.arrow&&ue(t.elements.arrow),Bt=Ae?h==="y"?Ae.clientTop||0:Ae.clientLeft||0:0,Xe=(S=R==null?void 0:R[h])!=null?S:0,Ht=B+Pe-Xe-Bt,Wt=B+Ft-Xe,Ke=se(v?je(de,Ht):de,B,v?J(Y,Wt):Y);O[h]=Ke,F[h]=Ke-B}if(f){var Je,Vt=h==="x"?D:k,Ut=h==="x"?$:T,K=O[x],ge=x==="y"?"height":"width",Ze=K+m[Vt],Qe=K-m[Ut],Ne=[D,k].indexOf(b)!==-1,et=(Je=R==null?void 0:R[x])!=null?Je:0,tt=Ne?Ze:K-E[ge]-P[ge]-et+A.altAxis,rt=Ne?K+E[ge]+P[ge]-et-A.altAxis:Qe,nt=v&&Ne?Fr(tt,K,rt):se(v?tt:Ze,K,v?rt:Qe);O[x]=nt,F[x]=nt-K}t.modifiersData[n]=F}}const gn={name:"preventOverflow",enabled:!0,phase:"main",fn:mn,requiresIfExists:["offset"]};function yn(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function xn(e){return e===_(e)||!L(e)?qe(e):yn(e)}function bn(e){var t=e.getBoundingClientRect(),r=te(t.width)/e.offsetWidth||1,n=te(t.height)/e.offsetHeight||1;return r!==1||n!==1}function On(e,t,r){r===void 0&&(r=!1);var n=L(t),i=L(t)&&bn(t),a=G(t),p=re(e,i,r),f={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((W(t)!=="body"||Ye(a))&&(f=xn(t)),L(t)?(l=re(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=ze(a))),{x:p.left+f.scrollLeft-l.x,y:p.top+f.scrollTop-l.y,width:p.width,height:p.height}}function wn(e){var t=new Map,r=new Set,n=[];e.forEach(function(a){t.set(a.name,a)});function i(a){r.add(a.name);var p=[].concat(a.requires||[],a.requiresIfExists||[]);p.forEach(function(f){if(!r.has(f)){var l=t.get(f);l&&i(l)}}),n.push(a)}return e.forEach(function(a){r.has(a.name)||i(a)}),n}function jn(e){var t=wn(e);return Ir.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function En(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function Cn(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var yt={placement:"bottom",modifiers:[],strategy:"absolute"};function xt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Pn(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,a=i===void 0?yt:i;return function(f,l,c){c===void 0&&(c=a);var s={placement:"bottom",orderedModifiers:[],options:Object.assign({},yt,a),modifiersData:{},elements:{reference:f,popper:l},attributes:{},styles:{}},d=[],u=!1,v={state:s,setOptions:function(b){var w=typeof b=="function"?b(s.options):b;g(),s.options=Object.assign({},a,s.options,w),s.scrollParents={reference:Z(f)?ce(f):f.contextElement?ce(f.contextElement):[],popper:ce(l)};var j=jn(Cn([].concat(n,s.options.modifiers)));return s.orderedModifiers=j.filter(function(h){return h.enabled}),y(),v.update()},forceUpdate:function(){if(!u){var b=s.elements,w=b.reference,j=b.popper;if(xt(w,j)){s.rects={reference:On(w,ue(j),s.options.strategy==="fixed"),popper:Ue(j)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach(function(A){return s.modifiersData[A.name]=Object.assign({},A.data)});for(var h=0;h<s.orderedModifiers.length;h++){if(s.reset===!0){s.reset=!1,h=-1;continue}var x=s.orderedModifiers[h],O=x.fn,E=x.options,P=E===void 0?{}:E,N=x.name;typeof O=="function"&&(s=O({state:s,options:P,name:N,instance:v})||s)}}}},update:En(function(){return new Promise(function(m){v.forceUpdate(),m(s)})}),destroy:function(){g(),u=!0}};if(!xt(f,l))return v;v.setOptions(c).then(function(m){!u&&c.onFirstUpdate&&c.onFirstUpdate(m)});function y(){s.orderedModifiers.forEach(function(m){var b=m.name,w=m.options,j=w===void 0?{}:w,h=m.effect;if(typeof h=="function"){var x=h({state:s,name:b,instance:v,options:j}),O=function(){};d.push(x||O)}})}function g(){d.forEach(function(m){return m()}),d=[]}return v}}var An=[Xr,vn,zr,Lr,un,sn,gn,Vr,ln],Nn=Pn({defaultModifiers:An}),Rn=typeof Element<"u",Sn=typeof Map=="function",Dn=typeof Set=="function",kn=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Oe(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!Oe(e[n],t[n]))return!1;return!0}var a;if(Sn&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;for(a=e.entries();!(n=a.next()).done;)if(!Oe(n.value[1],t.get(n.value[0])))return!1;return!0}if(Dn&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(kn&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;if(Rn&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!Oe(e[i[n]],t[i[n]]))return!1;return!0}return e!==e&&t!==t}var In=function(t,r){try{return Oe(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const _n=Kt(In);var Mn=[],Ln=function(t,r,n){n===void 0&&(n={});var i=C.useRef(null),a={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||Mn},p=C.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),f=p[0],l=p[1],c=C.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(v){var y=v.state,g=Object.keys(y.elements);jt.flushSync(function(){l({styles:lt(g.map(function(m){return[m,y.styles[m]||{}]})),attributes:lt(g.map(function(m){return[m,y.attributes[m]]}))})})},requires:["computeStyles"]}},[]),s=C.useMemo(function(){var u={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[c,{name:"applyStyles",enabled:!1}])};return _n(i.current,u)?i.current||u:(i.current=u,u)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,c]),d=C.useRef();return ft(function(){d.current&&d.current.setOptions(s)},[s]),ft(function(){if(!(t==null||r==null)){var u=n.createPopper||Nn,v=u(t,r,s);return d.current=v,function(){v.destroy(),d.current=null}}},[t,r,n.createPopper]),{state:d.current?d.current.state:null,styles:f.styles,attributes:f.attributes,update:d.current?d.current.update:null,forceUpdate:d.current?d.current.forceUpdate:null}},$n=function(){},Tn=function(){return Promise.resolve(null)},Fn=[];function Bn(e){var t=e.placement,r=t===void 0?"bottom":t,n=e.strategy,i=n===void 0?"absolute":n,a=e.modifiers,p=a===void 0?Fn:a,f=e.referenceElement,l=e.onFirstUpdate,c=e.innerRef,s=e.children,d=C.useContext(yr),u=C.useState(null),v=u[0],y=u[1],g=C.useState(null),m=g[0],b=g[1];C.useEffect(function(){Or(c,v)},[c,v]);var w=C.useMemo(function(){return{placement:r,strategy:i,onFirstUpdate:l,modifiers:[].concat(p,[{name:"arrow",enabled:m!=null,options:{element:m}}])}},[r,i,l,p,m]),j=Ln(f||d,v,w),h=j.state,x=j.styles,O=j.forceUpdate,E=j.update,P=C.useMemo(function(){return{ref:y,style:x.popper,placement:h?h.placement:r,hasPopperEscaped:h&&h.modifiersData.hide?h.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:h&&h.modifiersData.hide?h.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:x.arrow,ref:b},forceUpdate:O||$n,update:E||Tn}},[y,b,r,h,x,E,O]);return xr(s)(P)}function Hn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Le(e,t)}function Le(e,t){return Le=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Le(e,t)}function Wn(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function bt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vn(e,t,r){return e===t?!0:e.correspondingElement?e.correspondingElement.classList.contains(r):e.classList.contains(r)}function Un(e,t,r){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&Vn(e,t,r))return!0;e=e.parentNode||e.host}return e}function Gn(e){return document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY}var qn=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var t=!1,r=Object.defineProperty({},"passive",{get:function(){t=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,r),window.removeEventListener("testPassiveEventSupport",n,r),t}};function zn(e){return e===void 0&&(e=0),function(){return++e}}var Yn=zn(),$e,xe={},Ie={},Xn=["touchstart","touchmove"],Kn="ignore-react-onclickoutside";function Ot(e,t){var r=null,n=Xn.indexOf(t)!==-1;return n&&$e&&(r={passive:!e.props.preventDefault}),r}function Jn(e,t){var r,n,i=e.displayName||e.name||"Component";return n=r=function(a){Hn(p,a);function p(l){var c;return c=a.call(this,l)||this,c.__outsideClickHandler=function(s){if(typeof c.__clickOutsideHandlerProp=="function"){c.__clickOutsideHandlerProp(s);return}var d=c.getInstance();if(typeof d.props.handleClickOutside=="function"){d.props.handleClickOutside(s);return}if(typeof d.handleClickOutside=="function"){d.handleClickOutside(s);return}throw new Error("WrappedComponent: "+i+" lacks a handleClickOutside(event) function for processing outside click events.")},c.__getComponentNode=function(){var s=c.getInstance();return t&&typeof t.setClickOutsideRef=="function"?t.setClickOutsideRef()(s):typeof s.setClickOutsideRef=="function"?s.setClickOutsideRef():jt.findDOMNode(s)},c.enableOnClickOutside=function(){if(!(typeof document>"u"||Ie[c._uid])){typeof $e>"u"&&($e=qn()),Ie[c._uid]=!0;var s=c.props.eventTypes;s.forEach||(s=[s]),xe[c._uid]=function(d){if(c.componentNode!==null&&(c.props.preventDefault&&d.preventDefault(),c.props.stopPropagation&&d.stopPropagation(),!(c.props.excludeScrollbar&&Gn(d)))){var u=d.composed&&d.composedPath&&d.composedPath().shift()||d.target;Un(u,c.componentNode,c.props.outsideClickIgnoreClass)===document&&c.__outsideClickHandler(d)}},s.forEach(function(d){document.addEventListener(d,xe[c._uid],Ot(bt(c),d))})}},c.disableOnClickOutside=function(){delete Ie[c._uid];var s=xe[c._uid];if(s&&typeof document<"u"){var d=c.props.eventTypes;d.forEach||(d=[d]),d.forEach(function(u){return document.removeEventListener(u,s,Ot(bt(c),u))}),delete xe[c._uid]}},c.getRef=function(s){return c.instanceRef=s},c._uid=Yn(),c}var f=p.prototype;return f.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var c=this.instanceRef;return c.getInstance?c.getInstance():c},f.componentDidMount=function(){if(!(typeof document>"u"||!document.createElement)){var c=this.getInstance();if(t&&typeof t.handleClickOutside=="function"&&(this.__clickOutsideHandlerProp=t.handleClickOutside(c),typeof this.__clickOutsideHandlerProp!="function"))throw new Error("WrappedComponent: "+i+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside()}},f.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},f.componentWillUnmount=function(){this.disableOnClickOutside()},f.render=function(){var c=this.props;c.excludeScrollbar;var s=Wn(c,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?s.ref=this.getRef:s.wrappedRef=this.getRef,s.disableOnClickOutside=this.disableOnClickOutside,s.enableOnClickOutside=this.enableOnClickOutside,C.createElement(e,s)},p}(C.Component),r.displayName="OnClickOutside("+i+")",r.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:Kn,preventDefault:!1,stopPropagation:!1},r.getClass=function(){return e.getClass?e.getClass():e},n}const Zn=[{name:"preventOverflow",enabled:!0}],Qn={right:"left",left:"right",top:"bottom",bottom:"top"},ei=e=>e&&Qn[e.split("-")[0]];class Te extends Se.PureComponent{constructor(){super(),this.state={isVisible:!1},this.containerItemRef=Se.createRef(),this.renderPopper=this.renderPopper.bind(this),this.toggleOverlayVisibility=this.toggleOverlayVisibility.bind(this)}hideOverlay(){this.setState({isVisible:!1})}toggleOverlayVisibility(){this.setState({isVisible:!this.state.isVisible})}handleClickOutside(t){t&&t.target.closest(".inner-popper-overlay")||this.hideOverlay()}renderPopper({ref:t,style:r,placement:n,arrowProps:i,scheduleUpdate:a,outOfBoundaries:p}){const{children:f,hideWhenOutOfBounds:l}=this.props;return o.jsxs("div",{ref:t,style:r,"data-placement":n,className:M("inner-popper-overlay",`arrow-${ei(n)}`,this.props.overlayClassName,{"out-of-bounds":p&&l}),children:[o.jsx("div",{className:"arrow-hider",children:o.jsx("div",{className:"arrow",ref:i.ref,style:i.style})}),o.jsx("div",{className:"inner-popper-content",children:f})]})}render(){const{placement:t,overlayItem:r}=this.props,{isVisible:n}=this.state;return o.jsxs(Se.Fragment,{children:[o.jsx("div",{className:"overlay-item",ref:this.containerItemRef,onClick:this.toggleOverlayVisibility,children:r}),n&&Jt.createPortal(o.jsx(Bn,{container:document.body,modifiers:Zn,placement:t,referenceElement:this.containerItemRef.current,children:this.renderPopper}),document.body)]})}}Re(Te,"propTypes",{placement:De.string,overlayItem:De.any,hideWhenOutOfBounds:De.bool}),Re(Te,"defaultTypes",{placement:"bottom"});const ti=Jn(Te),wt={xx:26,phoenix:27},ri=({mix:e})=>{const{scoring:t}=rr();return!t||!wt[t]?null:ar(e)&&wt[t]!==e?o.jsx(we,{color:Rt[e],children:Pt[e]}):null},ni=(e,t)=>{if(t.recognitionType==="manual")return o.jsxs("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[!t.isExactGainedDate&&o.jsx("div",{children:e.EXACT_DATE_UNKNOWN}),o.jsxs("div",{children:[e.SCORE_ADDED_MANUALLY," ",new Date(t.added).toLocaleDateString()]}),t.isExactGainedDate&&o.jsxs("div",{children:[e.SCORE_WAS_TAKEN," ",new Date(t.gained).toLocaleDateString()]})]});if(t.isExactGainedDate)return new Date(t.gained).toLocaleDateString();{const r=t.recognitionType==null?`${e.FROM} my best ${e.OR} machine best`:t.recognitionType==="personal_best"?`${e.FROM} my best`:t.recognitionType==="machine_best"?`${e.FROM} machine best`:"???";return o.jsxs("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[o.jsx("div",{children:e.EXACT_DATE_UNKNOWN}),o.jsxs("div",{children:[e.SCORE_WAS_TAKEN," ",r]}),o.jsxs("div",{children:[e.DATE_RECORDED,": ",new Date(t.gained).toLocaleDateString()]})]})}},ii=({result:e,chart:t})=>{var l,c,s;const r=Fe(),n=Et(),i=Be(He),a=i.sortChartsBy==="pp",p=e.playerId===((l=n.data)==null?void 0:l.id),f=e.playerId==null?null:Ct.profile.getPath({id:e.playerId});return o.jsxs("tr",{className:M({latest:e.isLatestScore}),style:e.highlightIndex>=0?{background:ct[e.highlightIndex]+"3A",outline:`1px solid ${ct[e.highlightIndex]}A0`}:{},children:[o.jsx("td",{className:"place",style:p?{fontWeight:"bold",color:"#ddd"}:{},children:`#${t.results.findIndex(d=>d.id===e.id)+1}`}),o.jsx("td",{className:M("nickname"),style:e.highlightIndex>=0||p?{fontWeight:"bold"}:{},children:o.jsxs("div",{className:"nickname-container",children:[e.region?o.jsx(pr,{region:e.region}):null,o.jsxs("span",{className:"nickname-text",children:[f?o.jsx(it,{to:f,children:e.playerName}):e.playerName,!!e.placeDifference&&o.jsxs("span",{className:"change-holder up",children:[o.jsx("span",{children:e.placeDifference}),o.jsx(Zt,{})]}),(ot||a&&e.highlightIndex>=0)&&o.jsxs("span",{className:"debug-elo-info",children:[" ",e.pp&&`${e.pp}pp`]})]}),o.jsxs(Nt,{gap:"0.25em",ml:"auto",children:[((c=e.mods)==null?void 0:c.includes("HJ"))&&o.jsx(we,{color:"orange",children:"HJ"}),((s=e.mods)==null?void 0:s.includes("VJ"))&&o.jsx(we,{color:"red",children:"R"}),o.jsx(ri,{mix:e.mix})]})]})}),o.jsx("td",{className:M("score"),children:o.jsx(ti,{overlayClassName:"score-overlay-outer",overlayItem:o.jsxs("span",{className:"score-span",children:[!e.scoreIncrease&&o.jsx("span",{style:{fontSize:"80%"},children:"* "}),o.jsx("span",{children:Math.floor(e.score/1e3)}),o.jsxs("span",{style:{fontSize:"70%"},children:[",",`${e.score%1e3}`.padStart(3,"0")]})]}),placement:"top",children:o.jsxs("div",{className:"score-overlay",children:[o.jsx("div",{children:o.jsx(gr,{resultId:e.id})}),ot&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("span",{className:"_grey",children:"result id: "}),e.id]}),o.jsxs("div",{children:[o.jsx("span",{className:"_grey",children:"player id: "}),e.playerId]})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"_grey",children:[r.PLAYER,": "]}),f?o.jsxs(it,{to:f,children:[e.playerName," (",e.playerNameArcade,")"]}):`${e.playerName} (${e.playerNameArcade})`]}),e.exp?o.jsxs("div",{className:"important",children:[o.jsxs("span",{className:"_grey",children:[r.EXP,": "]}),"+",e.exp]}):null,e.pp?o.jsxs("div",{className:"important",children:[o.jsxs("span",{className:"_grey",children:[r.PP,": "]}),o.jsxs("span",{children:[e.pp,"pp"]})]}):null,!e.isExactGainedDate&&o.jsxs("div",{className:"warning",children:[o.jsx(Qt,{}),r.MY_BEST_SCORE_WARNING]}),e.isExactGainedDate&&o.jsxs(o.Fragment,{children:[e.mods&&o.jsxs("div",{children:[o.jsxs("span",{className:"_grey",children:[r.MODS,": "]}),e.mods]}),e.combo!=null&&o.jsxs("div",{className:"mobile-only",children:[o.jsxs("span",{className:"_grey",children:[r.COMBO,": "]}),e.combo]}),e.calories!=null&&o.jsxs("div",{children:[o.jsxs("span",{className:"_grey",children:[r.CCAL,": "]}),e.calories]}),e.scoreIncrease!=null&&o.jsxs("div",{children:[o.jsxs("span",{className:"_grey",children:[r.SCORE_INCREASE,": "]}),"+",fr(e.scoreIncrease).format("0,0")]}),!e.scoreIncrease&&r.SIGHTREAD]})]})})}),o.jsx("td",{className:M("grade"),children:o.jsx("div",{className:"img-holder",children:!i.scoring||i.scoring==="phoenix"?o.jsx(st,{score:e.score,isPass:e.passed??!1,scoring:"phoenix"}):o.jsx(st,{grade:e.grade,scoring:"xx"})})}),o.jsx("td",{className:M("number","miss"),children:e.stats[4]}),o.jsx("td",{className:M("number","bad"),children:e.stats[3]}),o.jsx("td",{className:M("number","good"),children:e.stats[2]}),o.jsx("td",{className:M("number","great"),children:e.stats[1]}),o.jsx("td",{className:M("number","perfect"),children:e.stats[0]}),o.jsx("td",{className:M("combo","desktop-only"),children:e.combo&&`${e.combo}x`}),o.jsx("td",{className:M("date",{latest:e.isLatestScore}),children:o.jsx(or,{label:ni(r,e),children:o.jsxs("div",{children:[sr(r,new Date(e.gained)),e.isExactGainedDate?"":"?"]})})})]},e.id)};function ai(e){return er({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8ZM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2ZM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10Z"}}]})(e)}const oi=({children:e,count:t})=>{const[r,n]=C.useState(!0),i=Fe();return r&&t>1?o.jsx("tr",{className:"results-collapser",onClick:()=>n(!1),children:o.jsx("td",{colSpan:"20",children:o.jsx("div",{children:o.jsx("button",{children:t&&i.SHOW_MORE_RESULTS?o.jsx(o.Fragment,{children:i.SHOW_MORE_RESULTS(t)}):o.jsx(ai,{})})})})}):o.jsx(o.Fragment,{children:e})},yi=C.memo(function({chart:t}){var d;const r=(d=Et().data)==null?void 0:d.id,n=Be(He),i=ur(),[a,p]=C.useState(!1),f=Fe(),l=t.results.reduce((u,v)=>v.isHidden?u+1:u,0),c=t.results.filter(u=>a||!u.isHidden).map((u,v,y)=>{var h;const g=u.added===t.updatedOn,m=n.sortChartsBy==="pp"&&!((h=n.sortChartsByPlayers)!=null&&h.length)?y[0].playerId:null,b=(m?[m,...i]:i).indexOf(u.playerId??-1),w=g||u.playerId===r||b>=0;let j=0;if(u.scoreIncrease&&g){const x=u.score-u.scoreIncrease;j=at.findLastIndex(E=>E.score>x,y)-v}return{...u,topPlace:v+1,isImportant:w,highlightIndex:b,placeDifference:j,isLatestScore:g}}).map((u,v,y)=>{const m=y.slice(v+1,v+1+2).some(w=>w.isImportant),b=y.slice(v-2,v).some(w=>w.isImportant);return{...u,isCollapsible:!u.isImportant&&!m&&!b}}),s=c.reduce((u,v)=>(u.length?u[u.length-1].isGroupCollapsible!==v.isCollapsible?u.push({isGroupCollapsible:v.isCollapsible,results:[v]}):u[u.length-1].results.push(v):u.push({isGroupCollapsible:v.isCollapsible,results:[v]}),u),[]);return o.jsxs("div",{className:"song-block",children:[o.jsx(mr,{chart:t,children:l>0&&o.jsxs(o.Fragment,{children:[o.jsxs(At,{size:"xs",lh:1,children:[f.HIDDEN,": ",l]}),o.jsx(cr,{variant:"subtle","aria-label":"Show all",onClick:()=>p(!a),children:o.jsx(tr,{})})]})}),o.jsx("div",{className:"charts",children:!at.isEmpty(c)&&o.jsx("div",{className:"chart",children:o.jsx("div",{className:"results",children:o.jsx("table",{children:o.jsx("tbody",{children:s.map(u=>{const v=u.results.map(y=>o.jsx(C.Fragment,{children:o.jsx(ii,{chart:t,result:y})},y.id));return u.isGroupCollapsible?o.jsx(oi,{count:v.length,children:v},`group-${u.results[0].id}`):o.jsx(C.Fragment,{children:v},`group-${u.results[0].id}`)})})})})})})]})});export{yi as C};
//# sourceMappingURL=Chart-3e02dc31.js.map
