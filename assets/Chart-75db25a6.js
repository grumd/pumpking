var Ht=Object.defineProperty;var Tt=(e,t,r)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ke=(e,t,r)=>(Tt(e,typeof t!="symbol"?t+"":t,r),r);import{r as A,E as Wt,ao as jt,R as ee,t as De,j as i,c as I,aw as Ut,aG as Vt,i as He,e as je,a2 as nt,aH as qt,f as Et,ac as at,a6 as Gt,aI as it,aJ as ot,aK as Xt,G as Yt,_ as Se,P as zt,aL as Jt,aM as Zt,aN as Kt}from"./index-221eff9b.js";import{n as Ie,C as Qt}from"./ChartLabel-7048b637.js";import{_ as st}from"./Tooltip-928efdd9.js";import{F as er}from"./index-10ec97a1.js";import{G as tr}from"./index-0eabf827.js";var rr=A.createContext();A.createContext();var nr=function(t){return Array.isArray(t)?t[0]:t},ar=function(t){if(typeof t=="function"){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return t.apply(void 0,n)}},ir=function(t,r){if(typeof t=="function")return ar(t,r);t!=null&&(t.current=r)},ct=function(t){return t.reduce(function(r,n){var a=n[0],o=n[1];return r[a]=o,r},{})},lt=typeof window<"u"&&window.document&&window.document.createElement?A.useLayoutEffect:A.useEffect,_="top",H="bottom",T="right",F="left",Te="auto",de=[_,H,T,F],te="start",ue="end",or="clippingParents",Ct="viewport",se="popper",sr="reference",ut=de.reduce(function(e,t){return e.concat([t+"-"+te,t+"-"+ue])},[]),Nt=[].concat(de,[Te]).reduce(function(e,t){return e.concat([t,t+"-"+te,t+"-"+ue])},[]),cr="beforeRead",lr="read",ur="afterRead",fr="beforeMain",dr="main",pr="afterMain",vr="beforeWrite",hr="write",mr="afterWrite",gr=[cr,lr,ur,fr,dr,pr,vr,hr,mr];function V(e){return e?(e.nodeName||"").toLowerCase():null}function M(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function K(e){var t=M(e).Element;return e instanceof t||e instanceof Element}function B(e){var t=M(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function We(e){if(typeof ShadowRoot>"u")return!1;var t=M(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function yr(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},a=t.attributes[r]||{},o=t.elements[r];!B(o)||!V(o)||(Object.assign(o.style,n),Object.keys(a).forEach(function(f){var c=a[f];c===!1?o.removeAttribute(f):o.setAttribute(f,c===!0?"":c)}))})}function xr(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var a=t.elements[n],o=t.attributes[n]||{},f=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),c=f.reduce(function(l,u){return l[u]="",l},{});!B(a)||!V(a)||(Object.assign(a.style,c),Object.keys(o).forEach(function(l){a.removeAttribute(l)}))})}}const br={name:"applyStyles",enabled:!0,phase:"write",fn:yr,effect:xr,requires:["computeStyles"]};function U(e){return e.split("-")[0]}var Z=Math.max,Ee=Math.min,re=Math.round;function Fe(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Rt(){return!/^((?!chrome|android).)*safari/i.test(Fe())}function ne(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),a=1,o=1;t&&B(e)&&(a=e.offsetWidth>0&&re(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&re(n.height)/e.offsetHeight||1);var f=K(e)?M(e):window,c=f.visualViewport,l=!Rt()&&r,u=(n.left+(l&&c?c.offsetLeft:0))/a,s=(n.top+(l&&c?c.offsetTop:0))/o,d=n.width/a,x=n.height/o;return{width:d,height:x,top:s,right:u+d,bottom:s+x,left:u,x:u,y:s}}function Ue(e){var t=ne(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Pt(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&We(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function q(e){return M(e).getComputedStyle(e)}function Or(e){return["table","td","th"].indexOf(V(e))>=0}function X(e){return((K(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ce(e){return V(e)==="html"?e:e.assignedSlot||e.parentNode||(We(e)?e.host:null)||X(e)}function ft(e){return!B(e)||q(e).position==="fixed"?null:e.offsetParent}function wr(e){var t=/firefox/i.test(Fe()),r=/Trident/i.test(Fe());if(r&&B(e)){var n=q(e);if(n.position==="fixed")return null}var a=Ce(e);for(We(a)&&(a=a.host);B(a)&&["html","body"].indexOf(V(a))<0;){var o=q(a);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return a;a=a.parentNode}return null}function pe(e){for(var t=M(e),r=ft(e);r&&Or(r)&&q(r).position==="static";)r=ft(r);return r&&(V(r)==="html"||V(r)==="body"&&q(r).position==="static")?t:r||wr(e)||t}function Ve(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ce(e,t,r){return Z(e,Ee(t,r))}function jr(e,t,r){var n=ce(e,t,r);return n>r?r:n}function At(){return{top:0,right:0,bottom:0,left:0}}function kt(e){return Object.assign({},At(),e)}function Dt(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var Er=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,kt(typeof t!="number"?t:Dt(t,de))};function Cr(e){var t,r=e.state,n=e.name,a=e.options,o=r.elements.arrow,f=r.modifiersData.popperOffsets,c=U(r.placement),l=Ve(c),u=[F,T].indexOf(c)>=0,s=u?"height":"width";if(!(!o||!f)){var d=Er(a.padding,r),x=Ue(o),h=l==="y"?_:F,j=l==="y"?H:T,p=r.rects.reference[s]+r.rects.reference[l]-f[l]-r.rects.popper[s],g=f[l]-r.rects.reference[l],m=pe(o),N=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,C=p/2-g/2,y=d[h],w=N-x[s]-d[j],E=N/2-x[s]/2+C,R=ce(y,E,w),v=l;r.modifiersData[n]=(t={},t[v]=R,t.centerOffset=R-E,t)}}function Nr(e){var t=e.state,r=e.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||Pt(t.elements.popper,a)&&(t.elements.arrow=a))}const Rr={name:"arrow",enabled:!0,phase:"main",fn:Cr,effect:Nr,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ae(e){return e.split("-")[1]}var Pr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ar(e,t){var r=e.x,n=e.y,a=t.devicePixelRatio||1;return{x:re(r*a)/a||0,y:re(n*a)/a||0}}function dt(e){var t,r=e.popper,n=e.popperRect,a=e.placement,o=e.variation,f=e.offsets,c=e.position,l=e.gpuAcceleration,u=e.adaptive,s=e.roundOffsets,d=e.isFixed,x=f.x,h=x===void 0?0:x,j=f.y,p=j===void 0?0:j,g=typeof s=="function"?s({x:h,y:p}):{x:h,y:p};h=g.x,p=g.y;var m=f.hasOwnProperty("x"),N=f.hasOwnProperty("y"),C=F,y=_,w=window;if(u){var E=pe(r),R="clientHeight",v="clientWidth";if(E===M(r)&&(E=X(r),q(E).position!=="static"&&c==="absolute"&&(R="scrollHeight",v="scrollWidth")),E=E,a===_||(a===F||a===T)&&o===ue){y=H;var b=d&&E===w&&w.visualViewport?w.visualViewport.height:E[R];p-=b-n.height,p*=l?1:-1}if(a===F||(a===_||a===H)&&o===ue){C=T;var O=d&&E===w&&w.visualViewport?w.visualViewport.width:E[v];h-=O-n.width,h*=l?1:-1}}var P=Object.assign({position:c},u&&Pr),S=s===!0?Ar({x:h,y:p},M(r)):{x:h,y:p};if(h=S.x,p=S.y,l){var k;return Object.assign({},P,(k={},k[y]=N?"0":"",k[C]=m?"0":"",k.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+p+"px)":"translate3d("+h+"px, "+p+"px, 0)",k))}return Object.assign({},P,(t={},t[y]=N?p+"px":"",t[C]=m?h+"px":"",t.transform="",t))}function kr(e){var t=e.state,r=e.options,n=r.gpuAcceleration,a=n===void 0?!0:n,o=r.adaptive,f=o===void 0?!0:o,c=r.roundOffsets,l=c===void 0?!0:c,u={placement:U(t.placement),variation:ae(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,dt(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,dt(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Dr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:kr,data:{}};var xe={passive:!0};function Sr(e){var t=e.state,r=e.instance,n=e.options,a=n.scroll,o=a===void 0?!0:a,f=n.resize,c=f===void 0?!0:f,l=M(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(s){s.addEventListener("scroll",r.update,xe)}),c&&l.addEventListener("resize",r.update,xe),function(){o&&u.forEach(function(s){s.removeEventListener("scroll",r.update,xe)}),c&&l.removeEventListener("resize",r.update,xe)}}const Ir={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Sr,data:{}};var _r={left:"right",right:"left",bottom:"top",top:"bottom"};function Oe(e){return e.replace(/left|right|bottom|top/g,function(t){return _r[t]})}var Fr={start:"end",end:"start"};function pt(e){return e.replace(/start|end/g,function(t){return Fr[t]})}function qe(e){var t=M(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function Ge(e){return ne(X(e)).left+qe(e).scrollLeft}function Lr(e,t){var r=M(e),n=X(e),a=r.visualViewport,o=n.clientWidth,f=n.clientHeight,c=0,l=0;if(a){o=a.width,f=a.height;var u=Rt();(u||!u&&t==="fixed")&&(c=a.offsetLeft,l=a.offsetTop)}return{width:o,height:f,x:c+Ge(e),y:l}}function Mr(e){var t,r=X(e),n=qe(e),a=(t=e.ownerDocument)==null?void 0:t.body,o=Z(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),f=Z(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),c=-n.scrollLeft+Ge(e),l=-n.scrollTop;return q(a||r).direction==="rtl"&&(c+=Z(r.clientWidth,a?a.clientWidth:0)-o),{width:o,height:f,x:c,y:l}}function Xe(e){var t=q(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function St(e){return["html","body","#document"].indexOf(V(e))>=0?e.ownerDocument.body:B(e)&&Xe(e)?e:St(Ce(e))}function le(e,t){var r;t===void 0&&(t=[]);var n=St(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),o=M(n),f=a?[o].concat(o.visualViewport||[],Xe(n)?n:[]):n,c=t.concat(f);return a?c:c.concat(le(Ce(f)))}function Le(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function $r(e,t){var r=ne(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function vt(e,t,r){return t===Ct?Le(Lr(e,r)):K(t)?$r(t,r):Le(Mr(X(e)))}function Br(e){var t=le(Ce(e)),r=["absolute","fixed"].indexOf(q(e).position)>=0,n=r&&B(e)?pe(e):e;return K(n)?t.filter(function(a){return K(a)&&Pt(a,n)&&V(a)!=="body"}):[]}function Hr(e,t,r,n){var a=t==="clippingParents"?Br(e):[].concat(t),o=[].concat(a,[r]),f=o[0],c=o.reduce(function(l,u){var s=vt(e,u,n);return l.top=Z(s.top,l.top),l.right=Ee(s.right,l.right),l.bottom=Ee(s.bottom,l.bottom),l.left=Z(s.left,l.left),l},vt(e,f,n));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function It(e){var t=e.reference,r=e.element,n=e.placement,a=n?U(n):null,o=n?ae(n):null,f=t.x+t.width/2-r.width/2,c=t.y+t.height/2-r.height/2,l;switch(a){case _:l={x:f,y:t.y-r.height};break;case H:l={x:f,y:t.y+t.height};break;case T:l={x:t.x+t.width,y:c};break;case F:l={x:t.x-r.width,y:c};break;default:l={x:t.x,y:t.y}}var u=a?Ve(a):null;if(u!=null){var s=u==="y"?"height":"width";switch(o){case te:l[u]=l[u]-(t[s]/2-r[s]/2);break;case ue:l[u]=l[u]+(t[s]/2-r[s]/2);break}}return l}function fe(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=n===void 0?e.placement:n,o=r.strategy,f=o===void 0?e.strategy:o,c=r.boundary,l=c===void 0?or:c,u=r.rootBoundary,s=u===void 0?Ct:u,d=r.elementContext,x=d===void 0?se:d,h=r.altBoundary,j=h===void 0?!1:h,p=r.padding,g=p===void 0?0:p,m=kt(typeof g!="number"?g:Dt(g,de)),N=x===se?sr:se,C=e.rects.popper,y=e.elements[j?N:x],w=Hr(K(y)?y:y.contextElement||X(e.elements.popper),l,s,f),E=ne(e.elements.reference),R=It({reference:E,element:C,strategy:"absolute",placement:a}),v=Le(Object.assign({},C,R)),b=x===se?v:E,O={top:w.top-b.top+m.top,bottom:b.bottom-w.bottom+m.bottom,left:w.left-b.left+m.left,right:b.right-w.right+m.right},P=e.modifiersData.offset;if(x===se&&P){var S=P[a];Object.keys(O).forEach(function(k){var $=[T,H].indexOf(k)>=0?1:-1,W=[_,H].indexOf(k)>=0?"y":"x";O[k]+=S[W]*$})}return O}function Tr(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=r.boundary,o=r.rootBoundary,f=r.padding,c=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?Nt:l,s=ae(n),d=s?c?ut:ut.filter(function(j){return ae(j)===s}):de,x=d.filter(function(j){return u.indexOf(j)>=0});x.length===0&&(x=d);var h=x.reduce(function(j,p){return j[p]=fe(e,{placement:p,boundary:a,rootBoundary:o,padding:f})[U(p)],j},{});return Object.keys(h).sort(function(j,p){return h[j]-h[p]})}function Wr(e){if(U(e)===Te)return[];var t=Oe(e);return[pt(e),t,pt(t)]}function Ur(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var a=r.mainAxis,o=a===void 0?!0:a,f=r.altAxis,c=f===void 0?!0:f,l=r.fallbackPlacements,u=r.padding,s=r.boundary,d=r.rootBoundary,x=r.altBoundary,h=r.flipVariations,j=h===void 0?!0:h,p=r.allowedAutoPlacements,g=t.options.placement,m=U(g),N=m===g,C=l||(N||!j?[Oe(g)]:Wr(g)),y=[g].concat(C).reduce(function(Q,G){return Q.concat(U(G)===Te?Tr(t,{placement:G,boundary:s,rootBoundary:d,padding:u,flipVariations:j,allowedAutoPlacements:p}):G)},[]),w=t.rects.reference,E=t.rects.popper,R=new Map,v=!0,b=y[0],O=0;O<y.length;O++){var P=y[O],S=U(P),k=ae(P)===te,$=[_,H].indexOf(S)>=0,W=$?"width":"height",D=fe(t,{placement:P,boundary:s,rootBoundary:d,altBoundary:x,padding:u}),L=$?k?T:F:k?H:_;w[W]>E[W]&&(L=Oe(L));var ve=Oe(L),Y=[];if(o&&Y.push(D[S]<=0),c&&Y.push(D[L]<=0,D[ve]<=0),Y.every(function(Q){return Q})){b=P,v=!1;break}R.set(P,Y)}if(v)for(var he=j?3:1,Ne=function(G){var oe=y.find(function(ge){var z=R.get(ge);if(z)return z.slice(0,G).every(function(Re){return Re})});if(oe)return b=oe,"break"},ie=he;ie>0;ie--){var me=Ne(ie);if(me==="break")break}t.placement!==b&&(t.modifiersData[n]._skip=!0,t.placement=b,t.reset=!0)}}const Vr={name:"flip",enabled:!0,phase:"main",fn:Ur,requiresIfExists:["offset"],data:{_skip:!1}};function ht(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function mt(e){return[_,T,H,F].some(function(t){return e[t]>=0})}function qr(e){var t=e.state,r=e.name,n=t.rects.reference,a=t.rects.popper,o=t.modifiersData.preventOverflow,f=fe(t,{elementContext:"reference"}),c=fe(t,{altBoundary:!0}),l=ht(f,n),u=ht(c,a,o),s=mt(l),d=mt(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:s,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":s,"data-popper-escaped":d})}const Gr={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:qr};function Xr(e,t,r){var n=U(e),a=[F,_].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,f=o[0],c=o[1];return f=f||0,c=(c||0)*a,[F,T].indexOf(n)>=0?{x:c,y:f}:{x:f,y:c}}function Yr(e){var t=e.state,r=e.options,n=e.name,a=r.offset,o=a===void 0?[0,0]:a,f=Nt.reduce(function(s,d){return s[d]=Xr(d,t.rects,o),s},{}),c=f[t.placement],l=c.x,u=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[n]=f}const zr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Yr};function Jr(e){var t=e.state,r=e.name;t.modifiersData[r]=It({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Zr={name:"popperOffsets",enabled:!0,phase:"read",fn:Jr,data:{}};function Kr(e){return e==="x"?"y":"x"}function Qr(e){var t=e.state,r=e.options,n=e.name,a=r.mainAxis,o=a===void 0?!0:a,f=r.altAxis,c=f===void 0?!1:f,l=r.boundary,u=r.rootBoundary,s=r.altBoundary,d=r.padding,x=r.tether,h=x===void 0?!0:x,j=r.tetherOffset,p=j===void 0?0:j,g=fe(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:s}),m=U(t.placement),N=ae(t.placement),C=!N,y=Ve(m),w=Kr(y),E=t.modifiersData.popperOffsets,R=t.rects.reference,v=t.rects.popper,b=typeof p=="function"?p(Object.assign({},t.rects,{placement:t.placement})):p,O=typeof b=="number"?{mainAxis:b,altAxis:b}:Object.assign({mainAxis:0,altAxis:0},b),P=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,S={x:0,y:0};if(E){if(o){var k,$=y==="y"?_:F,W=y==="y"?H:T,D=y==="y"?"height":"width",L=E[y],ve=L+g[$],Y=L-g[W],he=h?-v[D]/2:0,Ne=N===te?R[D]:v[D],ie=N===te?-v[D]:-R[D],me=t.elements.arrow,Q=h&&me?Ue(me):{width:0,height:0},G=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:At(),oe=G[$],ge=G[W],z=ce(0,R[D],Q[D]),Re=C?R[D]/2-he-z-oe-O.mainAxis:Ne-z-oe-O.mainAxis,_t=C?-R[D]/2+he+z+ge+O.mainAxis:ie+z+ge+O.mainAxis,Pe=t.elements.arrow&&pe(t.elements.arrow),Ft=Pe?y==="y"?Pe.clientTop||0:Pe.clientLeft||0:0,Ye=(k=P==null?void 0:P[y])!=null?k:0,Lt=L+Re-Ye-Ft,Mt=L+_t-Ye,ze=ce(h?Ee(ve,Lt):ve,L,h?Z(Y,Mt):Y);E[y]=ze,S[y]=ze-L}if(c){var Je,$t=y==="x"?_:F,Bt=y==="x"?H:T,J=E[w],ye=w==="y"?"height":"width",Ze=J+g[$t],Ke=J-g[Bt],Ae=[_,F].indexOf(m)!==-1,Qe=(Je=P==null?void 0:P[w])!=null?Je:0,et=Ae?Ze:J-R[ye]-v[ye]-Qe+O.altAxis,tt=Ae?J+R[ye]+v[ye]-Qe-O.altAxis:Ke,rt=h&&Ae?jr(et,J,tt):ce(h?et:Ze,J,h?tt:Ke);E[w]=rt,S[w]=rt-J}t.modifiersData[n]=S}}const en={name:"preventOverflow",enabled:!0,phase:"main",fn:Qr,requiresIfExists:["offset"]};function tn(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function rn(e){return e===M(e)||!B(e)?qe(e):tn(e)}function nn(e){var t=e.getBoundingClientRect(),r=re(t.width)/e.offsetWidth||1,n=re(t.height)/e.offsetHeight||1;return r!==1||n!==1}function an(e,t,r){r===void 0&&(r=!1);var n=B(t),a=B(t)&&nn(t),o=X(t),f=ne(e,a,r),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((V(t)!=="body"||Xe(o))&&(c=rn(t)),B(t)?(l=ne(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=Ge(o))),{x:f.left+c.scrollLeft-l.x,y:f.top+c.scrollTop-l.y,width:f.width,height:f.height}}function on(e){var t=new Map,r=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function a(o){r.add(o.name);var f=[].concat(o.requires||[],o.requiresIfExists||[]);f.forEach(function(c){if(!r.has(c)){var l=t.get(c);l&&a(l)}}),n.push(o)}return e.forEach(function(o){r.has(o.name)||a(o)}),n}function sn(e){var t=on(e);return gr.reduce(function(r,n){return r.concat(t.filter(function(a){return a.phase===n}))},[])}function cn(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function ln(e){var t=e.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var gt={placement:"bottom",modifiers:[],strategy:"absolute"};function yt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function un(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,a=t.defaultOptions,o=a===void 0?gt:a;return function(c,l,u){u===void 0&&(u=o);var s={placement:"bottom",orderedModifiers:[],options:Object.assign({},gt,o),modifiersData:{},elements:{reference:c,popper:l},attributes:{},styles:{}},d=[],x=!1,h={state:s,setOptions:function(m){var N=typeof m=="function"?m(s.options):m;p(),s.options=Object.assign({},o,s.options,N),s.scrollParents={reference:K(c)?le(c):c.contextElement?le(c.contextElement):[],popper:le(l)};var C=sn(ln([].concat(n,s.options.modifiers)));return s.orderedModifiers=C.filter(function(y){return y.enabled}),j(),h.update()},forceUpdate:function(){if(!x){var m=s.elements,N=m.reference,C=m.popper;if(yt(N,C)){s.rects={reference:an(N,pe(C),s.options.strategy==="fixed"),popper:Ue(C)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach(function(O){return s.modifiersData[O.name]=Object.assign({},O.data)});for(var y=0;y<s.orderedModifiers.length;y++){if(s.reset===!0){s.reset=!1,y=-1;continue}var w=s.orderedModifiers[y],E=w.fn,R=w.options,v=R===void 0?{}:R,b=w.name;typeof E=="function"&&(s=E({state:s,options:v,name:b,instance:h})||s)}}}},update:cn(function(){return new Promise(function(g){h.forceUpdate(),g(s)})}),destroy:function(){p(),x=!0}};if(!yt(c,l))return h;h.setOptions(u).then(function(g){!x&&u.onFirstUpdate&&u.onFirstUpdate(g)});function j(){s.orderedModifiers.forEach(function(g){var m=g.name,N=g.options,C=N===void 0?{}:N,y=g.effect;if(typeof y=="function"){var w=y({state:s,name:m,instance:h,options:C}),E=function(){};d.push(w||E)}})}function p(){d.forEach(function(g){return g()}),d=[]}return h}}var fn=[Ir,Zr,Dr,br,zr,Vr,en,Rr,Gr],dn=un({defaultModifiers:fn}),pn=typeof Element<"u",vn=typeof Map=="function",hn=typeof Set=="function",mn=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function we(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!we(e[n],t[n]))return!1;return!0}var o;if(vn&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(n=o.next()).done;)if(!t.has(n.value[0]))return!1;for(o=e.entries();!(n=o.next()).done;)if(!we(n.value[1],t.get(n.value[0])))return!1;return!0}if(hn&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(n=o.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(mn&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;if(pn&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&e.$$typeof)&&!we(e[a[n]],t[a[n]]))return!1;return!0}return e!==e&&t!==t}var gn=function(t,r){try{return we(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const yn=Wt(gn);var xn=[],bn=function(t,r,n){n===void 0&&(n={});var a=A.useRef(null),o={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||xn},f=A.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),c=f[0],l=f[1],u=A.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(h){var j=h.state,p=Object.keys(j.elements);jt.flushSync(function(){l({styles:ct(p.map(function(g){return[g,j.styles[g]||{}]})),attributes:ct(p.map(function(g){return[g,j.attributes[g]]}))})})},requires:["computeStyles"]}},[]),s=A.useMemo(function(){var x={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[u,{name:"applyStyles",enabled:!1}])};return yn(a.current,x)?a.current||x:(a.current=x,x)},[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,u]),d=A.useRef();return lt(function(){d.current&&d.current.setOptions(s)},[s]),lt(function(){if(!(t==null||r==null)){var x=n.createPopper||dn,h=x(t,r,s);return d.current=h,function(){h.destroy(),d.current=null}}},[t,r,n.createPopper]),{state:d.current?d.current.state:null,styles:c.styles,attributes:c.attributes,update:d.current?d.current.update:null,forceUpdate:d.current?d.current.forceUpdate:null}},On=function(){},wn=function(){return Promise.resolve(null)},jn=[];function En(e){var t=e.placement,r=t===void 0?"bottom":t,n=e.strategy,a=n===void 0?"absolute":n,o=e.modifiers,f=o===void 0?jn:o,c=e.referenceElement,l=e.onFirstUpdate,u=e.innerRef,s=e.children,d=A.useContext(rr),x=A.useState(null),h=x[0],j=x[1],p=A.useState(null),g=p[0],m=p[1];A.useEffect(function(){ir(u,h)},[u,h]);var N=A.useMemo(function(){return{placement:r,strategy:a,onFirstUpdate:l,modifiers:[].concat(f,[{name:"arrow",enabled:g!=null,options:{element:g}}])}},[r,a,l,f,g]),C=bn(c||d,h,N),y=C.state,w=C.styles,E=C.forceUpdate,R=C.update,v=A.useMemo(function(){return{ref:j,style:w.popper,placement:y?y.placement:r,hasPopperEscaped:y&&y.modifiersData.hide?y.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:y&&y.modifiersData.hide?y.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:w.arrow,ref:m},forceUpdate:E||On,update:R||wn}},[j,m,r,y,w,R,E]);return nr(s)(v)}function Cn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Me(e,t)}function Me(e,t){return Me=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},Me(e,t)}function Nn(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,o;for(o=0;o<n.length;o++)a=n[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function xt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rn(e,t,r){return e===t?!0:e.correspondingElement?e.correspondingElement.classList.contains(r):e.classList.contains(r)}function Pn(e,t,r){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&Rn(e,t,r))return!0;e=e.parentNode||e.host}return e}function An(e){return document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY}var kn=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var t=!1,r=Object.defineProperty({},"passive",{get:function(){t=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,r),window.removeEventListener("testPassiveEventSupport",n,r),t}};function Dn(e){return e===void 0&&(e=0),function(){return++e}}var Sn=Dn(),$e,be={},_e={},In=["touchstart","touchmove"],_n="ignore-react-onclickoutside";function bt(e,t){var r=null,n=In.indexOf(t)!==-1;return n&&$e&&(r={passive:!e.props.preventDefault}),r}function Fn(e,t){var r,n,a=e.displayName||e.name||"Component";return n=r=function(o){Cn(f,o);function f(l){var u;return u=o.call(this,l)||this,u.__outsideClickHandler=function(s){if(typeof u.__clickOutsideHandlerProp=="function"){u.__clickOutsideHandlerProp(s);return}var d=u.getInstance();if(typeof d.props.handleClickOutside=="function"){d.props.handleClickOutside(s);return}if(typeof d.handleClickOutside=="function"){d.handleClickOutside(s);return}throw new Error("WrappedComponent: "+a+" lacks a handleClickOutside(event) function for processing outside click events.")},u.__getComponentNode=function(){var s=u.getInstance();return t&&typeof t.setClickOutsideRef=="function"?t.setClickOutsideRef()(s):typeof s.setClickOutsideRef=="function"?s.setClickOutsideRef():jt.findDOMNode(s)},u.enableOnClickOutside=function(){if(!(typeof document>"u"||_e[u._uid])){typeof $e>"u"&&($e=kn()),_e[u._uid]=!0;var s=u.props.eventTypes;s.forEach||(s=[s]),be[u._uid]=function(d){if(u.componentNode!==null&&(u.props.preventDefault&&d.preventDefault(),u.props.stopPropagation&&d.stopPropagation(),!(u.props.excludeScrollbar&&An(d)))){var x=d.composed&&d.composedPath&&d.composedPath().shift()||d.target;Pn(x,u.componentNode,u.props.outsideClickIgnoreClass)===document&&u.__outsideClickHandler(d)}},s.forEach(function(d){document.addEventListener(d,be[u._uid],bt(xt(u),d))})}},u.disableOnClickOutside=function(){delete _e[u._uid];var s=be[u._uid];if(s&&typeof document<"u"){var d=u.props.eventTypes;d.forEach||(d=[d]),d.forEach(function(x){return document.removeEventListener(x,s,bt(xt(u),x))}),delete be[u._uid]}},u.getRef=function(s){return u.instanceRef=s},u._uid=Sn(),u}var c=f.prototype;return c.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var u=this.instanceRef;return u.getInstance?u.getInstance():u},c.componentDidMount=function(){if(!(typeof document>"u"||!document.createElement)){var u=this.getInstance();if(t&&typeof t.handleClickOutside=="function"&&(this.__clickOutsideHandlerProp=t.handleClickOutside(u),typeof this.__clickOutsideHandlerProp!="function"))throw new Error("WrappedComponent: "+a+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside()}},c.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},c.componentWillUnmount=function(){this.disableOnClickOutside()},c.render=function(){var u=this.props;u.excludeScrollbar;var s=Nn(u,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?s.ref=this.getRef:s.wrappedRef=this.getRef,s.disableOnClickOutside=this.disableOnClickOutside,s.enableOnClickOutside=this.enableOnClickOutside,A.createElement(e,s)},f}(A.Component),r.displayName="OnClickOutside("+a+")",r.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:_n,preventDefault:!1,stopPropagation:!1},r.getClass=function(){return e.getClass?e.getClass():e},n}const Ln=[{name:"preventOverflow",enabled:!0}],Mn={right:"left",left:"right",top:"bottom",bottom:"top"},$n=e=>e&&Mn[e.split("-")[0]];class Be extends ee.PureComponent{constructor(){super(),this.state={isVisible:!1},this.containerItemRef=ee.createRef(),this.renderPopper=this.renderPopper.bind(this),this.toggleOverlayVisibility=this.toggleOverlayVisibility.bind(this)}hideOverlay(){this.setState({isVisible:!1})}toggleOverlayVisibility(){this.setState({isVisible:!this.state.isVisible})}handleClickOutside(t){t&&t.target.closest(".inner-popper-overlay")||this.hideOverlay()}renderPopper({ref:t,style:r,placement:n,arrowProps:a,scheduleUpdate:o,outOfBoundaries:f}){const{children:c,hideWhenOutOfBounds:l}=this.props;return i.jsxs("div",{ref:t,style:r,"data-placement":n,className:I("inner-popper-overlay",`arrow-${$n(n)}`,this.props.overlayClassName,{"out-of-bounds":f&&l}),children:[i.jsx("div",{className:"arrow-hider",children:i.jsx("div",{className:"arrow",ref:a.ref,style:a.style})}),i.jsx("div",{className:"inner-popper-content",children:c})]})}render(){const{placement:t,overlayItem:r}=this.props,{isVisible:n}=this.state;return i.jsxs(ee.Fragment,{children:[i.jsx("div",{className:"overlay-item",ref:this.containerItemRef,onClick:this.toggleOverlayVisibility,children:r}),n&&Ut.createPortal(i.jsx(En,{container:document.body,modifiers:Ln,placement:t,referenceElement:this.containerItemRef.current,children:this.renderPopper}),document.body)]})}}ke(Be,"propTypes",{placement:De.string,overlayItem:De.any,hideWhenOutOfBounds:De.bool}),ke(Be,"defaultTypes",{placement:"bottom"});const Bn=Fn(Be),Ot=["#4DB3FF","#80B300","#FF6655","#FF99E6","#33FFCC","#e633c8","#dbe812","#FF1A66","#991AFF","#E6B333","#1AB399","#4D8066","#CC9999","#00E680","#809980","#E6FF80","#1AFF33","#999933","#E6331A","#CCCC00","#66E64D","#4D80CC","#9900B3","#4DB380","#FF4D4D"],Hn=({resultId:e})=>i.jsxs("a",{href:`https://api.pumpking.top:3001/results/${e}/screenshot`,target:"_blank",rel:"noopener noreferrer",children:["screenshot ",i.jsx(Vt,{style:{fontSize:"80%"}})]}),wt=({res:e,chart:t,placeDifference:r,showPpChange:n,highlightIndex:a,leftProfile:o={},rightProfile:f={},isSocketView:c=!1,bestGradeScore:l=!1,notBestGradeResult:u=!1})=>{const s=He(),d=je(m=>{var N;return(N=m.results.profiles[e.playerId])==null?void 0:N.region}),x=je(m=>{var N,C;return e.playerId===((C=(N=m.user.data)==null?void 0:N.player)==null?void 0:C.id)});let h=null;nt?h=i.jsx(i.Fragment,{children:i.jsxs("span",{className:"debug-elo-info",children:[" ",e.pp&&`${e.pp}pp`]})}):n&&e.pp&&(h=i.jsxs(i.Fragment,{children:[" / ",i.jsxs("span",{children:[e.pp,"pp"]})]}));const j=d?i.jsx(er,{region:d}):null,p=qt(e,t),g=Et.profile.getPath({id:e.playerId});return i.jsxs("tr",{className:I({empty:!e.accuracy,latest:new Date(t.latestAddedScoreDate)-new Date(e.dateAdded)<12*60*60*1e3,left:e.nickname===o.name,right:e.nickname===f.name}),style:a>-1?{background:Ot[a]+"3A",outline:`1px solid ${Ot[a]}A0`}:{},children:[!c&&i.jsx("td",{className:"place",style:x?{fontWeight:"bold",color:"#ddd"}:{},children:e.isSecondOccurenceInResults?"":e.topPlace&&`#${e.topPlace}`}),i.jsx("td",{className:I("nickname",l&&"opacity"),style:a>-1||x?{fontWeight:"bold"}:{},children:i.jsxs("div",{className:"nickname-container",children:[j,i.jsxs("span",{className:"nickname-text",children:[i.jsx(at,{exact:!0,to:g,children:e.nickname}),!!r&&i.jsxs("span",{className:"change-holder up",children:[i.jsx("span",{children:r}),i.jsx(Gt,{})]}),h]}),!c&&i.jsxs("div",{className:"mods-container",children:[c&&e.mods&&e.mods.split(" ").filter(m=>m.includes("AV")).map(m=>i.jsxs("div",{className:"mod av-mod",children:[i.jsx("div",{className:"av-text",children:"AV"}),i.jsx("div",{className:"av-number",children:m.replace("AV","")})]})),c&&e.mods&&e.mods.split(" ").filter(m=>m.endsWith("X")).map(m=>i.jsx("div",{className:"mod x-mod",children:i.jsx("div",{className:"x-number",children:m})})),e.isRank&&i.jsx("div",{className:"mod vj",children:e.mods?"R":"R?"}),e.isHJ&&i.jsx("div",{className:"mod hj",children:"HJ"})]})]})}),i.jsx("td",{className:I("score",l&&"opacity"),children:i.jsx(Bn,{overlayClassName:"score-overlay-outer",overlayItem:i.jsxs("span",{className:"score-span",children:[e.scoreIncrease>e.score*.8&&"*",Ie(e.score).format("0,0")]}),placement:"top",children:i.jsxs("div",{className:"score-overlay",children:[i.jsx("div",{children:i.jsx(Hn,{resultId:e.id})}),nt&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("span",{className:"_grey",children:"result id: "}),e.id]}),i.jsxs("div",{children:[i.jsx("span",{className:"_grey",children:"player id: "}),e.playerId]})]}),i.jsxs("div",{children:[i.jsxs("span",{className:"_grey",children:[s.PLAYER,": "]}),i.jsxs(at,{exact:!0,to:g,children:[e.nickname," (",e.nicknameArcade,")"]})]}),p?i.jsxs("div",{className:"important",children:[i.jsxs("span",{className:"_grey",children:[s.EXP,": "]}),"+",Ie(p).format("0,0")]}):null,e.pp?i.jsxs("div",{className:"important",children:[i.jsxs("span",{className:"_grey",children:[s.PP,": "]}),i.jsxs("span",{children:[e.pp,"pp"]})]}):null,!e.isExactDate&&i.jsxs("div",{className:"warning",children:[i.jsx(it,{}),s.MY_BEST_SCORE_WARNING]}),e.isExactDate&&i.jsxs(i.Fragment,{children:[e.mods&&i.jsxs("div",{children:[i.jsxs("span",{className:"_grey",children:[s.MODS,": "]}),e.mods]}),e.combo!=null&&i.jsxs("div",{className:"mobile-only",children:[i.jsxs("span",{className:"_grey",children:[s.COMBO,": "]}),e.combo]}),e.calories!=null&&i.jsxs("div",{children:[i.jsxs("span",{className:"_grey",children:[s.CCAL,": "]}),e.calories]}),e.scoreIncrease!=null&&i.jsxs("div",{children:[i.jsxs("span",{className:"_grey",children:[s.SCORE_INCREASE,": "]}),"+",Ie(e.scoreIncrease).format("0,0")]}),e.originalChartMix&&i.jsxs("div",{children:[i.jsxs("div",{className:"warning",children:[i.jsx(it,{}),s.ORIGINAL_MIX," ",e.originalChartMix]}),e.originalChartLabel&&i.jsxs("div",{children:[i.jsxs("span",{className:"_grey",children:[s.ORIGINAL_CHART," "]}),e.originalChartLabel]}),e.originalScore&&i.jsxs("div",{children:[i.jsxs("span",{className:"_grey",children:[s.ORIGINAL_SCORE," "]}),e.originalScore]})]}),e.scoreIncrease>e.score*.8&&s.SIGHTREAD]})]})})}),i.jsx("td",{className:I("grade",u&&"opacity"),children:i.jsx("div",{className:"img-holder",children:i.jsx(tr,{grade:e.grade})})}),c&&i.jsx("td",{className:I("mods",{vj:e.isRank,hj:e.isHJ}),children:i.jsxs("div",{className:"mods-container",children:[c&&e.mods&&e.mods.filter(m=>m.includes("AV")).map(m=>i.jsxs("div",{className:"av-mod",children:[i.jsx("div",{className:"av-text",children:"AV"}),i.jsx("div",{className:"av-number",children:m.replace("AV","")})]})),c&&e.mods&&e.mods.split(" ").filter(m=>m.endsWith("X")).map(m=>i.jsx("div",{className:"x-mod",children:i.jsx("div",{className:"x-number",children:m})})),e.isRank&&i.jsx("div",{className:"inner",children:e.isExactDate?"R":"R?"}),e.isHJ&&i.jsx("div",{className:"inner",children:"HJ"})]})}),i.jsx("td",{className:I("number","miss",l&&"opacity"),children:e.miss}),i.jsx("td",{className:I("number","bad",l&&"opacity"),children:e.bad}),i.jsx("td",{className:I("number","good",l&&"opacity"),children:e.good}),i.jsx("td",{className:I("number","great",l&&"opacity"),children:e.great}),i.jsx("td",{className:I("number","perfect",l&&"opacity"),children:e.perfect}),i.jsx("td",{className:I("combo","desktop-only",l&&"opacity"),children:e.combo&&`${e.combo}x`}),i.jsx("td",{className:I("accuracy",l&&"opacity"),children:e.accuracy?i.jsxs(st,{content:`Phoenix score: ${Math.floor(e.accuracyRaw*1e4)}`,tooltipClassName:"pumpking-tooltip",children:[e.accuracy===100?100:e.accuracy.toFixed(2),"%"]}):null}),i.jsx("td",{className:I("date",{latest:e.isLatestScore,opacity:l}),children:c?ot(s,e.dateObject):i.jsxs(st,{content:Xt(s,e),tooltipClassName:"pumpking-tooltip",children:[ot(s,e.dateObject),e.isExactDate?"":"?"]})})]},e.id)};function Tn(e){return Yt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8ZM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2ZM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10Z"}}]})(e)}const Wn=({children:e,count:t})=>{const[r,n]=A.useState(!0),a=He();return r&&t>1?i.jsx("tr",{className:"results-collapser",onClick:()=>n(!1),children:i.jsx("td",{colSpan:"20",children:i.jsx("div",{children:i.jsx("button",{children:t&&a.SHOW_MORE_RESULTS?i.jsx(i.Fragment,{children:a.SHOW_MORE_RESULTS(t)}):i.jsx(Tn,{})})})})}):i.jsx(i.Fragment,{children:e})},Un=ee.createContext([]),Jn=ee.forwardRef(({playersHiddenStatus:e,showHiddenPlayers:t=!1,showProtagonistPpChange:r=!1,uniqueSelectedNames:n=[],protagonistName:a=null,leftProfile:o={},rightProfile:f={},isSocketView:c=!1,chartIndex:l,chart:u},s)=>{const d=je(v=>{var b,O;return(O=(b=v.user.data)==null?void 0:b.player)==null?void 0:O.id}),x=je(v=>v.preferences.data.playersHiddenStatus),h=e||x||{},j=A.useContext(Un),p=u||j[l],[g,m]=A.useState(!t),N=He();A.useEffect(()=>{m(!t)},[t]);let C=1;const y=[];let w=0;const E=p.results.map((v,b,O)=>{const S=!(v.nickname===a)&&g&&(h[v.playerId]||!1),k=y.includes(v.nickname);y.push(v.nickname);let $=0;if(v.scoreIncrease&&v.dateAdded===p.latestAddedScoreDate){const W=v.score-v.scoreIncrease;$=Se.findLastIndex(L=>L.score>W,O)-b}return b===0?C=1:!k&&v.score!==Se.get([b-1,"score"],O)&&(C+=1),S&&w++,{...v,topPlace:C,isSecondOccurenceInResults:k,isPlayerHidden:S,highlightIndex:n.indexOf(v.nickname),isProtagonist:v.nickname===a,placeDifference:$,isLatestScore:v.dateAdded===p.latestAddedScoreDate}}).filter((v,b)=>!(v.isPlayerHidden||v.isUnknownPlayer&&b!==0)).map((v,b,O)=>{const P=D=>D.playerId===d||D.isLatestScore||D.highlightIndex>-1,k=P(v),$=O.slice(b+1,b+1+2).some(P),W=O.slice(b-2,b).some(P);return{...v,isCollapsible:!k&&!$&&!W}}),R=E.reduce((v,b)=>(v.length?v[v.length-1].isGroupCollapsible!==b.isCollapsible?v.push({isGroupCollapsible:b.isCollapsible,results:[b]}):v[v.length-1].results.push(b):v.push({isGroupCollapsible:b.isCollapsible,results:[b]}),v),[]);return i.jsxs("div",{className:"song-block",ref:s,children:[i.jsxs("div",{className:"song-name",children:[i.jsx(Qt,{type:p.chartType,level:p.chartLevel}),c?i.jsxs("div",{className:"song-name-text",children:[p.difficulty?`(${p.difficulty.toFixed(1)}) `:"",p.song]}):i.jsxs("div",{className:"song-name-text",children:[i.jsx(zt,{exact:!0,to:Et.leaderboard.sharedChart.getPath({sharedChartId:p.sharedChartId}),children:p.song})," ",i.jsx("span",{className:"_grey-text",children:p.difficulty?`(${p.difficulty.toFixed(1)}) `:""})]}),!c&&i.jsx("div",{className:"youtube-link",children:i.jsx("a",{href:`https://youtube.com/results?${Jt.stringify({search_query:`${p.song} ${p.chartLabel}`.replace(/( -)|(- )/g," ")})}`,target:"_blank",rel:"noopener noreferrer",children:i.jsx(Zt,{})})}),i.jsx("div",{className:"_flex-fill"}),i.jsxs("div",{className:"right-side-block",children:[w>0&&i.jsxs("div",{className:I("players-hidden-count _grey-text",{"_on-hover":!c}),children:[N.HIDDEN,": ",w]}),(w>0||!g)&&!c&&i.jsx("div",{className:"globe-icon _on-hover",onClick:()=>m(!g),children:i.jsx(Kt,{})})]})]}),i.jsx("div",{className:"charts",children:!Se.isEmpty(E)&&i.jsx("div",{className:"chart",children:i.jsx("div",{className:"results",children:i.jsx("table",{children:i.jsx("tbody",{children:R.map(v=>{const b=v.results.map(O=>{const P=O.isProtagonist&&r;return i.jsxs(ee.Fragment,{children:[i.jsx(wt,{chart:p,res:O,placeDifference:O.placeDifference,showPpChange:P,highlightIndex:O.highlightIndex,leftProfile:o,rightProfile:f,isSocketView:c,notBestGradeResult:!!O.bestGradeResult}),O.bestGradeResult&&i.jsx(wt,{chart:p,res:O.bestGradeResult,placeDifference:O.placeDifference,showPpChange:P,highlightIndex:O.highlightIndex,leftProfile:o,rightProfile:f,isSocketView:c,bestGradeScore:!0})]},O.isRank+"_"+O.nickname)});return v.isGroupCollapsible?i.jsx(Wn,{count:b.length,children:b}):i.jsx(i.Fragment,{children:b})})})})})})})]})});export{Jn as C,Un as F,Bn as O,Ot as c};
//# sourceMappingURL=Chart-75db25a6.js.map
